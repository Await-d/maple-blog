
> maple-blog-frontend@0.1.0 lint /home/await/project/maple-blog/frontend
> eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0 --format=json

[{"filePath":"/home/await/project/maple-blog/frontend/admin/e2e/admin-workflow.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/playwright.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/PermissionGuard.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":365,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":365,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useEffect, useState } from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { Result, Button, Spin } from 'antd';\nimport { LockOutlined, ReloadOutlined } from '@ant-design/icons';\nimport { usePermissions } from '@/hooks/usePermissions';\nimport { useAdminStore } from '@/stores/adminStore';\nimport {\n  GuardMode,\n  PermissionGuardConfig,\n  PermissionGuardProps,\n  AccessDeniedProps\n} from './permission-types';\n\n\n// 访问拒绝组件\nexport const AccessDenied: React.FC<AccessDeniedProps> = ({\n  reason = '您没有访问此页面的权限',\n  permissions = [],\n  onRetry,\n  showDetails = false,\n  redirectTo = '/admin/dashboard'\n}) => {\n  const location = useLocation();\n\n  return (\n    <div className=\"flex items-center justify-center min-h-[400px] p-8\">\n      <Result\n        status=\"403\"\n        title=\"访问被拒绝\"\n        subTitle={reason}\n        icon={<LockOutlined className=\"text-red-500\" />}\n        extra={[\n          <Button type=\"primary\" key=\"home\" onClick={() => window.location.href = redirectTo}>\n            返回首页\n          </Button>,\n          onRetry && (\n            <Button key=\"retry\" icon={<ReloadOutlined />} onClick={onRetry}>\n              重试\n            </Button>\n          )\n        ].filter(Boolean)}\n      >\n        {showDetails && permissions.length > 0 && (\n          <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n            <h4 className=\"text-sm font-medium text-gray-900 mb-2\">所需权限：</h4>\n            <ul className=\"text-sm text-gray-600 space-y-1\">\n              {permissions.map((permission, index) => (\n                <li key={index} className=\"flex items-center\">\n                  <span className=\"w-2 h-2 bg-red-400 rounded-full mr-2\"></span>\n                  {permission}\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n        \n        {showDetails && (\n          <div className=\"mt-4 text-xs text-gray-500\">\n            <p>当前页面: {location.pathname}</p>\n            <p>时间: {new Date().toLocaleString()}</p>\n          </div>\n        )}\n      </Result>\n    </div>\n  );\n};\n\n// 权限加载组件\nexport const PermissionLoading: React.FC<{ message?: string }> = ({ \n  message = '正在验证权限...' \n}) => (\n  <div className=\"flex items-center justify-center min-h-[200px] p-8\">\n    <div className=\"text-center\">\n      <Spin size=\"large\" />\n      <p className=\"mt-4 text-gray-600\">{message}</p>\n    </div>\n  </div>\n);\n\n// 主要权限守卫组件\nexport const PermissionGuard: React.FC<PermissionGuardProps> = ({\n  children,\n  permissions = [],\n  roles = [],\n  resources = [],\n  mode = 'all',\n  strict = false,\n  guardMode = GuardMode.RENDER,\n  fallback,\n  redirectTo = '/admin/403',\n  customCheck,\n  onAccessDenied,\n  showAccessDenied = true,\n  loading,\n  debug = false,\n  className,\n  style\n}) => {\n  const {\n    can,\n    canAll,\n    canAny,\n    hasRole,\n    hasAnyRole,\n    hasAllRoles,\n    checkResourcePermission,\n    isAuthenticated,\n    user,\n    trace\n  } = usePermissions({ strict, logAccess: debug });\n\n  const { addNotification } = useAdminStore();\n  const location = useLocation();\n  const [isChecking, setIsChecking] = useState(true);\n  const [hasAccess, setHasAccess] = useState(false);\n  const [denialReason, setDenialReason] = useState<string>('');\n\n  // 权限检查逻辑\n  const checkAccess = useMemo(() => {\n    if (!isAuthenticated) {\n      return { hasAccess: false, reason: '用户未登录' };\n    }\n\n    const checks: boolean[] = [];\n    let reason = '';\n\n    try {\n      // 权限检查\n      if (permissions && permissions.length > 0) {\n        const permArray = Array.isArray(permissions) ? permissions : [permissions];\n        const permCheck = mode === 'all' ? canAll(permArray) : canAny(permArray);\n        checks.push(permCheck);\n        \n        if (!permCheck) {\n          reason += `缺少权限: ${permArray.join(', ')}; `;\n        }\n      }\n\n      // 角色检查\n      if (roles && roles.length > 0) {\n        const roleArray = Array.isArray(roles) ? roles : [roles];\n        const roleCheck = mode === 'all' ? hasAllRoles(roleArray) : hasAnyRole(roleArray);\n        checks.push(roleCheck);\n        \n        if (!roleCheck) {\n          reason += `缺少角色: ${roleArray.join(', ')}; `;\n        }\n      }\n\n      // 资源权限检查\n      if (resources && resources.length > 0) {\n        const resourceChecks = resources.map(({ resource, level }) => \n          checkResourcePermission(resource, level)\n        );\n        const resourceCheck = mode === 'all' ? \n          resourceChecks.every(Boolean) : \n          resourceChecks.some(Boolean);\n        checks.push(resourceCheck);\n        \n        if (!resourceCheck) {\n          const resourceNames = resources.map(r => `${r.resource}(${PermissionLevel[r.level]})`);\n          reason += `缺少资源权限: ${resourceNames.join(', ')}; `;\n        }\n      }\n\n      // 自定义检查\n      if (customCheck) {\n        const customResult = customCheck({ can, hasRole, user, permissions: permissions });\n        checks.push(customResult);\n        \n        if (!customResult) {\n          reason += '自定义权限检查失败; ';\n        }\n      }\n\n      // 如果没有任何检查，默认允许访问\n      if (checks.length === 0) {\n        return { hasAccess: true, reason: '' };\n      }\n\n      // 根据模式确定最终结果\n      const finalAccess = mode === 'all' ? checks.every(Boolean) : checks.some(Boolean);\n      \n      return { \n        hasAccess: finalAccess, \n        reason: finalAccess ? '' : reason.trim().replace(/;$/, '')\n      };\n    } catch (error) {\n      console.error('权限检查错误:', error);\n      return { hasAccess: false, reason: '权限检查出现异常' };\n    }\n  }, [\n    isAuthenticated, permissions, roles, resources, mode, customCheck,\n    can, canAll, canAny, hasRole, hasAnyRole, hasAllRoles, \n    checkResourcePermission, user\n  ]);\n\n  // 执行权限检查\n  useEffect(() => {\n    const performCheck = async () => {\n      setIsChecking(true);\n      \n      // 模拟异步检查（如果需要）\n      await new Promise(resolve => setTimeout(resolve, 100));\n      \n      const { hasAccess: access, reason } = checkAccess;\n      \n      setHasAccess(access);\n      setDenialReason(reason);\n      setIsChecking(false);\n\n      // 调试信息\n      if (debug) {\n        console.group('🛡️ 权限守卫检查');\n        console.log('页面:', location.pathname);\n        console.log('用户:', user?.username);\n        console.log('权限要求:', { permissions, roles, resources });\n        console.log('检查结果:', access);\n        console.log('拒绝原因:', reason);\n        \n        if (permissions) {\n          const permArray = Array.isArray(permissions) ? permissions : [permissions];\n          permArray.forEach(perm => {\n            console.log(`权限追踪 [${perm}]:`, trace(perm));\n          });\n        }\n        \n        console.groupEnd();\n      }\n\n      // 访问拒绝回调\n      if (!access && onAccessDenied) {\n        onAccessDenied(reason);\n      }\n\n      // 显示通知\n      if (!access && showAccessDenied) {\n        addNotification({\n          type: 'warning',\n          title: '访问被拒绝',\n          description: reason,\n          duration: 5000\n        });\n      }\n    };\n\n    performCheck();\n  }, [checkAccess, debug, location.pathname, user, onAccessDenied, showAccessDenied, addNotification, trace, permissions, resources, roles]);\n\n  // 加载状态\n  if (isChecking) {\n    return loading ? <>{loading}</> : <PermissionLoading />;\n  }\n\n  // 未登录处理\n  if (!isAuthenticated) {\n    if (guardMode === GuardMode.REDIRECT) {\n      return <Navigate to=\"/admin/login\" state={{ from: location }} replace />;\n    }\n    \n    return (\n      <AccessDenied\n        reason=\"请先登录\"\n        redirectTo=\"/admin/login\"\n        showDetails={debug}\n      />\n    );\n  }\n\n  // 权限检查失败处理\n  if (!hasAccess) {\n    switch (guardMode) {\n      case GuardMode.REDIRECT:\n        return <Navigate to={redirectTo} state={{ reason: denialReason, from: location }} replace />;\n      \n      case GuardMode.HIDE:\n        return null;\n      \n      case GuardMode.REPLACE:\n        return fallback ? <>{fallback}</> : null;\n      \n      case GuardMode.RENDER:\n      default:\n        if (fallback) {\n          return <>{fallback}</>;\n        }\n        \n        return (\n          <AccessDenied\n            reason={denialReason}\n            permissions={Array.isArray(permissions) ? permissions : [permissions].filter(Boolean)}\n            showDetails={debug}\n            onRetry={() => {\n              setIsChecking(true);\n              setTimeout(() => setIsChecking(false), 1000);\n            }}\n          />\n        );\n    }\n  }\n\n  // 权限检查通过，渲染子组件\n  return (\n    <div className={className} style={style}>\n      {children}\n    </div>\n  );\n};\n\n// 角色守卫组件\nexport const RoleGuard: React.FC<{\n  children: React.ReactNode;\n  roles: string | string[];\n  mode?: 'all' | 'any';\n  fallback?: React.ReactNode;\n}> = ({ children, roles, mode = 'any', fallback }) => (\n  <PermissionGuard roles={roles} mode={mode} fallback={fallback}>\n    {children}\n  </PermissionGuard>\n);\n\n// 资源守卫组件\nexport const ResourceGuard: React.FC<{\n  children: React.ReactNode;\n  resource: string;\n  level: PermissionLevel;\n  fallback?: React.ReactNode;\n}> = ({ children, resource, level, fallback }) => (\n  <PermissionGuard \n    resources={[{ resource, level }]} \n    fallback={fallback}\n  >\n    {children}\n  </PermissionGuard>\n);\n\n// 管理员守卫组件\nexport const AdminGuard: React.FC<{\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n}> = ({ children, fallback }) => (\n  <PermissionGuard \n    roles={['Admin', 'SuperAdmin']} \n    mode=\"any\"\n    fallback={fallback}\n  >\n    {children}\n  </PermissionGuard>\n);\n\n// 超级管理员守卫组件\nexport const SuperAdminGuard: React.FC<{\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n}> = ({ children, fallback }) => (\n  <PermissionGuard \n    roles=\"SuperAdmin\"\n    fallback={fallback}\n  >\n    {children}\n  </PermissionGuard>\n);\n\n// 高阶组件版本\nexport const withPermission = <P extends object>(\n  Component: React.ComponentType<P>,\n  config: PermissionGuardConfig\n) => {\n  const WrappedComponent = (props: P) => (\n    <PermissionGuard {...config}>\n      <Component {...props} />\n    </PermissionGuard>\n  );\n\n  WrappedComponent.displayName = `withPermission(${Component.displayName || Component.name})`;\n  return WrappedComponent;\n};\n\n// 权限条件渲染组件\nexport const PermissionRender: React.FC<{\n  permission?: string | string[];\n  role?: string | string[];\n  resource?: { resource: string; level: PermissionLevel };\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n  mode?: 'all' | 'any';\n}> = ({ permission, role, resource, children, fallback, mode = 'any' }) => {\n  const { can, hasRole, checkResourcePermission } = usePermissions();\n\n  const hasAccess = useMemo(() => {\n    const checks: boolean[] = [];\n\n    if (permission) {\n      const perms = Array.isArray(permission) ? permission : [permission];\n      if (mode === 'all') {\n        checks.push(perms.every(p => can(p)));\n      } else {\n        checks.push(perms.some(p => can(p)));\n      }\n    }\n\n    if (role) {\n      const roles = Array.isArray(role) ? role : [role];\n      if (mode === 'all') {\n        checks.push(roles.every(r => hasRole(r)));\n      } else {\n        checks.push(roles.some(r => hasRole(r)));\n      }\n    }\n\n    if (resource) {\n      checks.push(checkResourcePermission(resource.resource, resource.level));\n    }\n\n    return checks.length > 0 ? checks.every(Boolean) : true;\n  }, [permission, role, resource, mode, can, hasRole, checkResourcePermission]);\n\n  if (!hasAccess) {\n    return fallback ? <>{fallback}</> : null;\n  }\n\n  return <>{children}</>;\n};\n\nexport default PermissionGuard;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/analytics/AnalyticsChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/analytics/chart-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/BarChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/ChartShowcase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/ChartWrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/HeatMapChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/LineChart.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":363,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":363,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useRef, useEffect, useState } from 'react';\nimport { Card, Select, Space, Button, Tooltip, Spin } from 'antd';\nimport {\n  FullscreenOutlined,\n  DownloadOutlined,\n  ReloadOutlined,\n} from '@ant-design/icons';\nimport ReactECharts from 'echarts-for-react';\nimport type { EChartsOption } from 'echarts';\nimport classNames from 'classnames';\n// Remove file-saver dependency - using direct download method instead\n\nexport interface LineChartData {\n  labels: string[];\n  datasets: Array<{\n    label: string;\n    data: number[];\n    borderColor?: string;\n    backgroundColor?: string;\n    borderWidth?: number;\n    fill?: boolean;\n    tension?: number;\n    pointRadius?: number;\n    pointHoverRadius?: number;\n  }>;\n}\n\nexport interface LineChartProps {\n  title?: string;\n  data: LineChartData | null;\n  loading?: boolean;\n  height?: number;\n  className?: string;\n  style?: React.CSSProperties;\n  showToolbar?: boolean;\n  showLegend?: boolean;\n  showGrid?: boolean;\n  smooth?: boolean;\n  theme?: 'light' | 'dark';\n  colors?: string[];\n  onRefresh?: () => void;\n  onExport?: (format: 'png' | 'jpg' | 'svg') => void;\n  chartOptions?: Partial<EChartsOption>;\n}\n\nconst LineChart: React.FC<LineChartProps> = ({\n  title,\n  data,\n  loading = false,\n  height = 300,\n  className,\n  style,\n  showToolbar = true,\n  showLegend = true,\n  showGrid = true,\n  smooth = true,\n  theme = 'light',\n  colors = [\n    '#1890ff',\n    '#52c41a',\n    '#faad14',\n    '#f5222d',\n    '#722ed1',\n    '#fa8c16',\n    '#13c2c2',\n    '#eb2f96',\n  ],\n  onRefresh,\n  onExport,\n  chartOptions = {},\n}) => {\n  const chartRef = useRef<ReactECharts>(null);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [selectedTimeRange, setSelectedTimeRange] = useState('7d');\n\n  // Time range options\n  const timeRangeOptions = [\n    { label: '最近7天', value: '7d' },\n    { label: '最近30天', value: '30d' },\n    { label: '最近3个月', value: '3m' },\n    { label: '最近一年', value: '1y' },\n  ];\n\n  // Generate ECharts option\n  const chartOption = useMemo((): EChartsOption => {\n    if (!data || !data.datasets.length) {\n      return {\n        title: {\n          text: '暂无数据',\n          left: 'center',\n          top: 'middle',\n          textStyle: {\n            color: theme === 'dark' ? '#fff' : '#999',\n            fontSize: 14,\n          },\n        },\n      };\n    }\n\n    const series = data.datasets.map((dataset, index) => ({\n      name: dataset.label,\n      type: 'line' as const,\n      data: dataset.data,\n      smooth: smooth,\n      symbol: 'circle',\n      symbolSize: dataset.pointRadius || 4,\n      lineStyle: {\n        width: dataset.borderWidth || 2,\n        color: dataset.borderColor || colors[index % colors.length],\n      },\n      itemStyle: {\n        color: dataset.borderColor || colors[index % colors.length],\n      },\n      ...(dataset.fill && { areaStyle: {\n        color: {\n          type: 'linear' as const,\n          x: 0,\n          y: 0,\n          x2: 0,\n          y2: 1,\n          colorStops: [\n            {\n              offset: 0,\n              color: dataset.backgroundColor || `${colors[index % colors.length]}20`,\n            },\n            {\n              offset: 1,\n              color: dataset.backgroundColor || `${colors[index % colors.length]}05`,\n            },\n          ],\n        } as { type: 'linear'; colorStops: Array<{ offset: number; color: string }> },\n      }}),\n    }));\n\n    const option: EChartsOption = {\n      grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true,\n        show: showGrid,\n        borderColor: theme === 'dark' ? '#333' : '#e8e8e8',\n      },\n      xAxis: {\n        type: 'category',\n        data: data.labels,\n        axisLine: {\n          lineStyle: {\n            color: theme === 'dark' ? '#555' : '#d9d9d9',\n          },\n        },\n        axisLabel: {\n          color: theme === 'dark' ? '#ccc' : '#666',\n        },\n        splitLine: {\n          show: false,\n        },\n      },\n      yAxis: {\n        type: 'value',\n        axisLine: {\n          show: false,\n        },\n        axisTick: {\n          show: false,\n        },\n        axisLabel: {\n          color: theme === 'dark' ? '#ccc' : '#666',\n        },\n        splitLine: {\n          show: showGrid,\n          lineStyle: {\n            color: theme === 'dark' ? '#333' : '#f0f0f0',\n            type: 'dashed',\n          },\n        },\n      },\n      series,\n      ...(showLegend && { legend: {\n        top: 10,\n        left: 'center',\n        textStyle: {\n          color: theme === 'dark' ? '#ccc' : '#666',\n        },\n      }}),\n      tooltip: {\n        trigger: 'axis',\n        backgroundColor: theme === 'dark' ? '#001529' : '#fff',\n        borderColor: theme === 'dark' ? '#333' : '#d9d9d9',\n        textStyle: {\n          color: theme === 'dark' ? '#fff' : '#666',\n        },\n        axisPointer: {\n          type: 'cross',\n          crossStyle: {\n            color: theme === 'dark' ? '#555' : '#999',\n          },\n        },\n      },\n      backgroundColor: 'transparent',\n      ...chartOptions,\n    };\n\n    return option;\n  }, [data, theme, showGrid, showLegend, smooth, colors, chartOptions]);\n\n  // Handle fullscreen toggle\n  const handleFullscreen = () => {\n    if (!document.fullscreenElement) {\n      const chartElement = chartRef.current?.getEchartsInstance().getDom().parentElement;\n      if (chartElement) {\n        chartElement.requestFullscreen?.();\n        setIsFullscreen(true);\n      }\n    } else {\n      document.exitFullscreen();\n      setIsFullscreen(false);\n    }\n  };\n\n  // Handle export\n  const handleExport = (format: 'png' | 'jpg' | 'svg') => {\n    const chartInstance = chartRef.current?.getEchartsInstance();\n    if (!chartInstance) return;\n\n    if (onExport) {\n      onExport(format);\n      return;\n    }\n\n    // Default export implementation\n    const canvas = chartInstance.getDataURL({\n      type: format === 'jpg' ? 'jpeg' : format,\n      pixelRatio: 2,\n      backgroundColor: theme === 'dark' ? '#001529' : '#fff',\n    });\n\n    // Convert data URL to blob and download\n    const link = document.createElement('a');\n    link.download = `chart-${Date.now()}.${format}`;\n    link.href = canvas;\n    link.click();\n  };\n\n  // Handle chart resize\n  const handleResize = () => {\n    const chartInstance = chartRef.current?.getEchartsInstance();\n    if (chartInstance) {\n      chartInstance.resize();\n    }\n  };\n\n  // Listen for fullscreen changes\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      setIsFullscreen(!!document.fullscreenElement);\n    };\n\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n    };\n  }, []);\n\n  // Resize chart when container size changes\n  useEffect(() => {\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Render toolbar\n  const renderToolbar = () => {\n    if (!showToolbar) return null;\n\n    return (\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center gap-3\">\n          {title && (\n            <h3 className=\"text-lg font-semibold mb-0\">{title}</h3>\n          )}\n        </div>\n\n        <Space>\n          <Select\n            value={selectedTimeRange}\n            onChange={setSelectedTimeRange}\n            options={timeRangeOptions}\n            \n            style={{ width: 100 }}\n          />\n\n          {onRefresh && (\n            <Tooltip title=\"刷新\">\n              <Button\n                type=\"text\"\n                \n                icon={<ReloadOutlined />}\n                onClick={onRefresh}\n              />\n            </Tooltip>\n          )}\n\n          <Tooltip title=\"导出\">\n            <Button\n              type=\"text\"\n              \n              icon={<DownloadOutlined />}\n              onClick={() => handleExport('png')}\n            />\n          </Tooltip>\n\n          <Tooltip title=\"全屏\">\n            <Button\n              type=\"text\"\n              \n              icon={<FullscreenOutlined />}\n              onClick={handleFullscreen}\n            />\n          </Tooltip>\n        </Space>\n      </div>\n    );\n  };\n\n  return (\n    <Card\n      className={classNames('line-chart-card', className)}\n      style={style || {}}\n      bordered={false}\n      styles={{\n        body: { padding: 16 },\n      }}\n    >\n      {renderToolbar()}\n\n      <div\n        className=\"relative\"\n        style={{ height: isFullscreen ? '80vh' : height }}\n      >\n        {loading ? (\n          <div className=\"flex items-center justify-center h-full\">\n            <Spin size=\"large\" />\n          </div>\n        ) : (\n          <ReactECharts\n            ref={chartRef}\n            option={chartOption}\n            style={{ height: '100%', width: '100%' }}\n            opts={{\n              renderer: 'canvas',\n            }}\n            theme={theme}\n            notMerge={true}\n            lazyUpdate={true}\n          />\n        )}\n      </div>\n    </Card>\n  );\n};\n\n// Predefined chart configurations\nexport const LineChartPresets = {\n  // Traffic chart preset\n  traffic: {\n    colors: ['#1890ff', '#52c41a', '#faad14'],\n    smooth: true,\n    showGrid: true,\n    chartOptions: {\n      grid: { bottom: '15%' },\n    },\n  },\n\n  // Performance chart preset\n  performance: {\n    colors: ['#ff4d4f', '#faad14', '#52c41a', '#1890ff'],\n    smooth: false,\n    showGrid: true,\n    chartOptions: {\n      yAxis: {\n        max: 100,\n        axisLabel: {\n          formatter: '{value}%',\n        },\n      },\n    },\n  },\n\n  // Revenue chart preset\n  revenue: {\n    colors: ['#52c41a', '#1890ff'],\n    smooth: true,\n    showGrid: true,\n    chartOptions: {\n      yAxis: {\n        axisLabel: {\n          formatter: '¥{value}',\n        },\n      },\n    },\n  },\n};\n\nexport default LineChart;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/MultiChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/PieChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/RealTimeChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/StatCard.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":196,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":196,"endColumn":30},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":235,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":235,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Card, Statistic, Skeleton, Tooltip, Badge } from 'antd';\nimport {\n  ArrowUpOutlined,\n  ArrowDownOutlined,\n  InfoCircleOutlined,\n} from '@ant-design/icons';\nimport classNames from 'classnames';\nimport type { ReactNode } from 'react';\n\nexport interface StatCardProps {\n  title: string;\n  value: number | string;\n  precision?: number;\n  suffix?: string;\n  prefix?: ReactNode;\n  icon?: ReactNode;\n  trend?: {\n    value: number;\n    isPositive?: boolean;\n    label?: string;\n  };\n  extra?: ReactNode;\n  loading?: boolean;\n  size?: 'small' | 'default' | 'large';\n  status?: 'default' | 'success' | 'warning' | 'error';\n  tooltip?: string;\n  className?: string;\n  style?: React.CSSProperties;\n  onClick?: () => void;\n  formatter?: (value: number | string) => ReactNode;\n}\n\ntype BadgeStatus = 'success' | 'processing' | 'default' | 'error' | 'warning';\n\nconst StatCard: React.FC<StatCardProps> = ({\n  title,\n  value,\n  precision = 0,\n  suffix,\n  prefix,\n  icon,\n  trend,\n  extra,\n  loading = false,\n  size = 'default',\n  status = 'default',\n  tooltip,\n  className,\n  style,\n  onClick,\n  formatter,\n}) => {\n  // Status color mapping\n  const statusColors = {\n    default: '#1890ff',\n    success: '#52c41a',\n    warning: '#faad14',\n    error: '#ff4d4f',\n  };\n\n  // Render trend indicator\n  const renderTrend = () => {\n    if (!trend) return null;\n\n    const { value: trendValue, isPositive, label } = trend;\n    const isUp = isPositive !== undefined ? isPositive : trendValue > 0;\n    const color = isUp ? '#52c41a' : '#ff4d4f';\n    const TrendIcon = isUp ? ArrowUpOutlined : ArrowDownOutlined;\n\n    return (\n      <div\n        className=\"flex items-center gap-1 text-sm\"\n        style={{ color }}\n      >\n        <TrendIcon />\n        <span>{Math.abs(trendValue)}%</span>\n        {label && <span className=\"text-gray-500 ml-1\">{label}</span>}\n      </div>\n    );\n  };\n\n  // Render card header\n  const renderHeader = () => (\n    <div className=\"flex items-center justify-between\">\n      <div className=\"flex items-center gap-2\">\n        <span className=\"text-gray-600 font-medium\">{title}</span>\n        {tooltip && (\n          <Tooltip title={tooltip}>\n            <InfoCircleOutlined className=\"text-gray-400 text-xs\" />\n          </Tooltip>\n        )}\n      </div>\n      {extra}\n    </div>\n  );\n\n  // Render status indicator\n  const renderStatus = () => {\n    if (status === 'default') return null;\n\n    const badgeStatus: BadgeStatus = status === 'error' ? 'error' : status as BadgeStatus;\n\n    return (\n      <Badge\n        status={badgeStatus}\n        className=\"absolute top-3 right-3\"\n      />\n    );\n  };\n\n  // Card content\n  const cardContent = (\n    <div className=\"relative\">\n      {renderStatus()}\n\n      <div className=\"mb-3\">\n        {renderHeader()}\n      </div>\n\n      <div className=\"flex items-end justify-between\">\n        <div className=\"flex items-center gap-3\">\n          {icon && (\n            <div\n              className=\"p-3 rounded-lg bg-opacity-10\"\n              style={{\n                backgroundColor: statusColors[status],\n                color: statusColors[status],\n              }}\n            >\n              {icon}\n            </div>\n          )}\n\n          <div>\n            {loading ? (\n              <Skeleton.Input\n                active\n                size={size === 'large' ? 'large' : 'default'}\n                style={{ width: 120 }}\n              />\n            ) : (\n              <Statistic\n                value={value}\n                precision={precision}\n                suffix={suffix}\n                prefix={prefix}\n                {...(formatter && { formatter })}\n                valueStyle={{\n                  fontSize: size === 'large' ? '2rem' : size === 'small' ? '1.25rem' : '1.5rem',\n                  fontWeight: 600,\n                  color: statusColors[status],\n                }}\n              />\n            )}\n          </div>\n        </div>\n\n        {trend && !loading && (\n          <div className=\"text-right\">\n            {renderTrend()}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  const cardProps = {\n    className: classNames(\n      'stat-card',\n      `stat-card--${size}`,\n      `stat-card--${status}`,\n      {\n        'cursor-pointer hover:shadow-md transition-shadow': onClick,\n        'stat-card--loading': loading,\n      },\n      className\n    ),\n    style: {\n      minHeight: size === 'large' ? 160 : size === 'small' ? 100 : 120,\n      ...style,\n    },\n    onClick,\n    hoverable: !!onClick,\n    bordered: false,\n  };\n\n  return (\n    <Card {...cardProps}>\n      {cardContent}\n    </Card>\n  );\n};\n\n// Pre-defined stat card variants\nexport const StatCardVariants = {\n  // User statistics card\n  UserStats: (props: Omit<StatCardProps, 'icon'>) => (\n    <StatCard\n      {...props}\n      icon={<div className=\"text-2xl\">👥</div>}\n      status=\"success\"\n    />\n  ),\n\n  // Content statistics card\n  ContentStats: (props: Omit<StatCardProps, 'icon'>) => (\n    <StatCard\n      {...props}\n      icon={<div className=\"text-2xl\">📝</div>}\n      status=\"default\"\n    />\n  ),\n\n  // System statistics card\n  SystemStats: (props: Omit<StatCardProps, 'icon'>) => (\n    <StatCard\n      {...props}\n      icon={<div className=\"text-2xl\">⚡</div>}\n      status=\"warning\"\n    />\n  ),\n\n  // Performance statistics card\n  PerformanceStats: (props: Omit<StatCardProps, 'icon'>) => (\n    <StatCard\n      {...props}\n      icon={<div className=\"text-2xl\">📊</div>}\n      status=\"success\"\n    />\n  ),\n};\n\n// Predefined formatters\nexport const StatCardFormatters = {\n  // Number formatter with K/M/B suffixes\n  number: (value: number | string): ReactNode => {\n    const num = typeof value === 'string' ? parseFloat(value) : value;\n    if (num >= 1000000000) {\n      return `${(num / 1000000000).toFixed(1)}B`;\n    }\n    if (num >= 1000000) {\n      return `${(num / 1000000).toFixed(1)}M`;\n    }\n    if (num >= 1000) {\n      return `${(num / 1000).toFixed(1)}K`;\n    }\n    return num.toString();\n  },\n\n  // Percentage formatter\n  percentage: (value: number | string): ReactNode => {\n    const num = typeof value === 'string' ? parseFloat(value) : value;\n    return `${num.toFixed(1)}%`;\n  },\n\n  // Currency formatter\n  currency: (value: number | string): ReactNode => {\n    const num = typeof value === 'string' ? parseFloat(value) : value;\n    return new Intl.NumberFormat('zh-CN', {\n      style: 'currency',\n      currency: 'CNY',\n    }).format(num);\n  },\n\n  // Duration formatter (seconds to human readable)\n  duration: (value: number | string): ReactNode => {\n    const seconds = typeof value === 'string' ? parseFloat(value) : value;\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const remainingSeconds = Math.floor(seconds % 60);\n\n    if (hours > 0) {\n      return `${hours}h ${minutes}m`;\n    }\n    if (minutes > 0) {\n      return `${minutes}m ${remainingSeconds}s`;\n    }\n    return `${remainingSeconds}s`;\n  },\n\n  // File size formatter\n  fileSize: (value: number | string): ReactNode => {\n    const bytes = typeof value === 'string' ? parseFloat(value) : value;\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes === 0) return '0 B';\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return `${(bytes / Math.pow(1024, i)).toFixed(1)} ${sizes[i]}`;\n  },\n};\n\nexport default StatCard;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/TreeMapChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/charts/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/config/ConfigEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/config/ConfigForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/content/ContentEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/layout/Breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/layout/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/layout/Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/logs/LogViewer.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchLogs'. Either include it or remove the dependency array.","line":202,"column":6,"nodeType":"ArrayExpression","endLine":202,"endColumn":47,"suggestions":[{"desc":"Update the dependencies array to be: [autoRefresh, streaming, refreshInterval, fetchLogs]","fix":{"range":[5919,5960],"text":"[autoRefresh, streaming, refreshInterval, fetchLogs]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport {\n  Input,\n  Select,\n  Button,\n  Space,\n  Typography,\n  Row,\n  Col,\n  Badge,\n  Tag,\n  Tooltip,\n  Dropdown,\n  Menu,\n  Switch,\n  DatePicker,\n  Modal,\n  Spin,\n  Empty,\n  Affix,\n  notification,\n} from 'antd';\nimport {\n  ReloadOutlined,\n  PlayCircleOutlined,\n  PauseCircleOutlined,\n  ClearOutlined,\n  SettingOutlined,\n  FullscreenOutlined,\n  ExportOutlined,\n  BugOutlined,\n  InfoCircleOutlined,\n  WarningOutlined,\n  CloseCircleOutlined,\n  FileTextOutlined,\n  ClockCircleOutlined,\n  UserOutlined,\n  CodeOutlined,\n} from '@ant-design/icons';\nimport { List } from 'react-window';\nimport dayjs from 'dayjs';\n\nconst { Search } = Input;\nconst { Option } = Select;\nconst { RangePicker } = DatePicker;\nconst { Text, Paragraph } = Typography;\n\ninterface LogEntry {\n  id: string;\n  timestamp: string;\n  level: 'trace' | 'debug' | 'info' | 'warn' | 'error' | 'fatal';\n  source: string;\n  message: string;\n  context?: Record<string, unknown>;\n  userId?: string;\n  requestId?: string;\n  duration?: number;\n  stackTrace?: string;\n}\n\ninterface LogFilter {\n  levels: string[];\n  sources: string[];\n  dateRange: [string, string] | null;\n  searchQuery: string;\n  userId?: string;\n  requestId?: string;\n}\n\ninterface LogViewerProps {\n  height?: number;\n  realTime?: boolean;\n  autoRefresh?: boolean;\n  refreshInterval?: number;\n  maxEntries?: number;\n  onEntryClick?: (entry: LogEntry) => void;\n  onExport?: (entries: LogEntry[], format: string) => void;\n}\n\nconst LogViewer: React.FC<LogViewerProps> = ({\n  height = 600,\n  realTime = true,\n  autoRefresh = true,\n  refreshInterval = 5000,\n  maxEntries = 10000,\n  onEntryClick,\n  onExport,\n}) => {\n  const [logs, setLogs] = useState<LogEntry[]>([]);\n  const [filteredLogs, setFilteredLogs] = useState<LogEntry[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [streaming, setStreaming] = useState(realTime);\n  const [selectedEntry, setSelectedEntry] = useState<LogEntry | null>(null);\n  const [detailsVisible, setDetailsVisible] = useState(false);\n  const [settingsVisible, setSettingsVisible] = useState(false);\n  const [fullscreen, setFullscreen] = useState(false);\n  const [autoScroll, setAutoScroll] = useState(true);\n  const [followTail, setFollowTail] = useState(true);\n  \n  const listRef = useRef<List>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Filter state\n  const [filter, setFilter] = useState<LogFilter>({\n    levels: ['info', 'warn', 'error', 'fatal'],\n    sources: [],\n    dateRange: null,\n    searchQuery: '',\n  });\n\n  // Available log sources and levels\n  const [availableSources] = useState([\n    'MapleBlog.API',\n    'MapleBlog.Application',\n    'MapleBlog.Infrastructure',\n    'Authentication',\n    'Database',\n    'Cache',\n    'BackgroundService',\n    'Security',\n    'Performance',\n  ]);\n\n  const logLevels = [\n    { value: 'trace', label: 'Trace', color: '#d9d9d9' },\n    { value: 'debug', label: 'Debug', color: '#722ed1' },\n    { value: 'info', label: 'Info', color: '#1890ff' },\n    { value: 'warn', label: 'Warning', color: '#faad14' },\n    { value: 'error', label: 'Error', color: '#ff4d4f' },\n    { value: 'fatal', label: 'Fatal', color: '#a8071a' },\n  ];\n\n  // Mock log data generator\n  const generateMockLog = useCallback((): LogEntry => {\n    const levels: LogEntry['level'][] = ['trace', 'debug', 'info', 'warn', 'error', 'fatal'];\n    const level = levels[Math.floor(Math.random() * levels.length)];\n    const source = availableSources[Math.floor(Math.random() * availableSources.length)];\n    \n    const messages = {\n      trace: 'Method execution trace: ProcessRequest completed',\n      debug: 'Cache hit for key: user_profile_12345',\n      info: 'User authentication successful',\n      warn: 'Rate limit approaching for IP: 192.168.1.100',\n      error: 'Database connection timeout after 30 seconds',\n      fatal: 'Critical system failure: Unable to start application',\n    };\n\n    const contexts = {\n      trace: { method: 'ProcessRequest', duration: 125 },\n      debug: { cacheKey: 'user_profile_12345', hitRate: 0.85 },\n      info: { userId: 'user_12345', sessionId: 'sess_abcd1234' },\n      warn: { ip: '192.168.1.100', currentRate: 85, limit: 100 },\n      error: { connectionString: 'Server=localhost;Database=maple', timeout: 30000 },\n      fatal: { component: 'ApplicationHost', exitCode: -1 },\n    };\n\n    return {\n      id: `log_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: new Date().toISOString(),\n      level,\n      source,\n      message: messages[level],\n      context: contexts[level],\n      userId: Math.random() > 0.5 ? `user_${Math.floor(Math.random() * 1000)}` : undefined,\n      requestId: `req_${Math.random().toString(36).substr(2, 9)}`,\n      duration: Math.random() > 0.7 ? Math.floor(Math.random() * 1000) : undefined,\n      stackTrace: level === 'error' || level === 'fatal' ? \n        'at ProcessRequest (UserController.cs:45)\\nat AuthenticateUser (AuthService.cs:123)' : undefined,\n    };\n  }, [availableSources]);\n\n  // Initialize with mock data\n  useEffect(() => {\n    const initialLogs = Array.from({ length: 100 }, () => generateMockLog());\n    setLogs(initialLogs);\n  }, [generateMockLog]);\n\n  // Real-time log streaming\n  useEffect(() => {\n    if (!streaming || !realTime) return;\n\n    const interval = setInterval(() => {\n      const newLog = generateMockLog();\n      setLogs(prev => {\n        const updated = [newLog, ...prev];\n        return updated.slice(0, maxEntries);\n      });\n    }, Math.random() * 3000 + 1000); // Random interval between 1-4 seconds\n\n    return () => clearInterval(interval);\n  }, [streaming, realTime, generateMockLog, maxEntries]);\n\n  // Auto-refresh\n  useEffect(() => {\n    if (!autoRefresh || streaming) return;\n\n    const interval = setInterval(() => {\n      fetchLogs();\n    }, refreshInterval);\n\n    return () => clearInterval(interval);\n  }, [autoRefresh, streaming, refreshInterval]);\n\n  // Filter logs\n  useEffect(() => {\n    let filtered = logs;\n\n    // Filter by level\n    if (filter.levels.length > 0) {\n      filtered = filtered.filter(log => filter.levels.includes(log.level));\n    }\n\n    // Filter by source\n    if (filter.sources.length > 0) {\n      filtered = filtered.filter(log => filter.sources.includes(log.source));\n    }\n\n    // Filter by date range\n    if (filter.dateRange) {\n      const [start, end] = filter.dateRange;\n      filtered = filtered.filter(log => {\n        const logDate = dayjs(log.timestamp);\n        return logDate.isAfter(start) && logDate.isBefore(end);\n      });\n    }\n\n    // Filter by search query\n    if (filter.searchQuery) {\n      const query = filter.searchQuery.toLowerCase();\n      filtered = filtered.filter(log => \n        log.message.toLowerCase().includes(query) ||\n        log.source.toLowerCase().includes(query) ||\n        (log.userId && log.userId.toLowerCase().includes(query)) ||\n        (log.requestId && log.requestId.toLowerCase().includes(query))\n      );\n    }\n\n    // Filter by user ID\n    if (filter.userId) {\n      filtered = filtered.filter(log => log.userId === filter.userId);\n    }\n\n    // Filter by request ID\n    if (filter.requestId) {\n      filtered = filtered.filter(log => log.requestId === filter.requestId);\n    }\n\n    setFilteredLogs(filtered);\n  }, [logs, filter]);\n\n  // Auto-scroll to bottom when new logs arrive\n  useEffect(() => {\n    if (autoScroll && followTail && listRef.current) {\n      listRef.current.scrollToItem(0, 'start');\n    }\n  }, [filteredLogs, autoScroll, followTail]);\n\n  // Fetch logs\n  const fetchLogs = async () => {\n    setLoading(true);\n    try {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Generate new logs\n      const newLogs = Array.from({ length: 20 }, () => generateMockLog());\n      setLogs(prev => [...newLogs, ...prev].slice(0, maxEntries));\n      \n      notification.success({\n        message: 'Logs Refreshed',\n        description: `Loaded ${newLogs.length} new log entries`,\n        duration: 2,\n      });\n    } catch (error) {\n      console.error('Failed to fetch logs:', error);\n      notification.error({\n        message: 'Fetch Failed',\n        description: 'Unable to fetch logs. Please try again.',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Clear logs\n  const clearLogs = () => {\n    Modal.confirm({\n      title: 'Clear Logs',\n      content: 'Are you sure you want to clear all log entries? This action cannot be undone.',\n      onOk: () => {\n        setLogs([]);\n        setFilteredLogs([]);\n        notification.success({\n          message: 'Logs Cleared',\n          description: 'All log entries have been cleared',\n        });\n      },\n    });\n  };\n\n  // Export logs\n  const handleExport = (format: string) => {\n    if (onExport) {\n      onExport(filteredLogs, format);\n    } else {\n      // Default export implementation\n      const dataStr = format === 'json' \n        ? JSON.stringify(filteredLogs, null, 2)\n        : filteredLogs.map(log => \n            `${log.timestamp} [${log.level.toUpperCase()}] ${log.source}: ${log.message}`\n          ).join('\\n');\n      \n      const dataBlob = new Blob([dataStr], { type: 'text/plain' });\n      const url = URL.createObjectURL(dataBlob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `logs_${dayjs().format('YYYY-MM-DD_HH-mm-ss')}.${format === 'json' ? 'json' : 'log'}`;\n      link.click();\n      URL.revokeObjectURL(url);\n    }\n  };\n\n  // Get log level icon and color\n  const getLogLevelInfo = (level: LogEntry['level']) => {\n    const levelInfo = logLevels.find(l => l.value === level);\n    if (!levelInfo) return { icon: <InfoCircleOutlined />, color: '#d9d9d9' };\n\n    const icons = {\n      trace: <CodeOutlined />,\n      debug: <BugOutlined />,\n      info: <InfoCircleOutlined />,\n      warn: <WarningOutlined />,\n      error: <CloseCircleOutlined />,\n      fatal: <CloseCircleOutlined />,\n    };\n\n    return {\n      icon: icons[level],\n      color: levelInfo.color,\n    };\n  };\n\n  // Render log entry\n  const renderLogEntry = ({ index, style }: { index: number; style: React.CSSProperties }) => {\n    const entry = filteredLogs[index];\n    if (!entry) return null;\n\n    const { icon, color } = getLogLevelInfo(entry.level);\n\n    return (\n      <div\n        style={{\n          ...style,\n          borderBottom: '1px solid #f0f0f0',\n          padding: '8px 12px',\n          cursor: 'pointer',\n          backgroundColor: selectedEntry?.id === entry.id ? '#e6f7ff' : 'transparent',\n        }}\n        onClick={() => {\n          setSelectedEntry(entry);\n          if (onEntryClick) {\n            onEntryClick(entry);\n          }\n        }}\n        onDoubleClick={() => {\n          setSelectedEntry(entry);\n          setDetailsVisible(true);\n        }}\n      >\n        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '8px' }}>\n          <div style={{ color, fontSize: '14px', marginTop: '2px' }}>\n            {icon}\n          </div>\n          <div style={{ flex: 1, minWidth: 0 }}>\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\n              <Text style={{ fontSize: '12px', color: '#666' }}>\n                {dayjs(entry.timestamp).format('HH:mm:ss.SSS')}\n              </Text>\n              <Tag  color={color}>\n                {entry.level.toUpperCase()}\n              </Tag>\n              <Text style={{ fontSize: '12px', color: '#666' }}>\n                {entry.source}\n              </Text>\n              {entry.userId && (\n                <Tag  icon={<UserOutlined />}>\n                  {entry.userId}\n                </Tag>\n              )}\n              {entry.duration && (\n                <Tag  icon={<ClockCircleOutlined />}>\n                  {entry.duration}ms\n                </Tag>\n              )}\n            </div>\n            <Text style={{ fontSize: '13px', lineHeight: '1.4' }}>\n              {entry.message}\n            </Text>\n            {entry.context && Object.keys(entry.context).length > 0 && (\n              <div style={{ marginTop: '4px' }}>\n                <Text code style={{ fontSize: '11px', color: '#666' }}>\n                  {JSON.stringify(entry.context)}\n                </Text>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  // Get level counts for filter badges\n  const levelCounts = logLevels.reduce((acc, level) => {\n    acc[level.value] = logs.filter(log => log.level === level.value).length;\n    return acc;\n  }, {} as Record<string, number>);\n\n  return (\n    <div \n      ref={containerRef}\n      className={`log-viewer ${fullscreen ? 'log-viewer-fullscreen' : ''}`}\n      style={{ \n        height: fullscreen ? '100vh' : height,\n        border: '1px solid #d9d9d9',\n        borderRadius: '6px',\n        backgroundColor: '#fff',\n        position: fullscreen ? 'fixed' : 'relative',\n        top: fullscreen ? 0 : 'auto',\n        left: fullscreen ? 0 : 'auto',\n        width: fullscreen ? '100vw' : '100%',\n        zIndex: fullscreen ? 1000 : 'auto',\n      }}\n    >\n      {/* Header Controls */}\n      <Affix offsetTop={0} target={() => containerRef.current}>\n        <div style={{ \n          padding: '12px',\n          borderBottom: '1px solid #f0f0f0',\n          backgroundColor: '#fafafa',\n          borderRadius: fullscreen ? '0' : '6px 6px 0 0',\n        }}>\n          <Row gutter={[8, 8]} align=\"middle\">\n            <Col flex=\"auto\">\n              <Space wrap>\n                <Search\n                  placeholder=\"Search logs...\"\n                  value={filter.searchQuery}\n                  onChange={(e) => setFilter(prev => ({ ...prev, searchQuery: e.target.value }))}\n                  style={{ width: 200 }}\n                  allowClear\n                />\n                <Select\n                  mode=\"multiple\"\n                  placeholder=\"Log levels\"\n                  value={filter.levels}\n                  onChange={(levels) => setFilter(prev => ({ ...prev, levels }))}\n                  style={{ minWidth: 200 }}\n                  allowClear\n                >\n                  {logLevels.map(level => (\n                    <Option key={level.value} value={level.value}>\n                      <Badge count={levelCounts[level.value]}  offset={[10, 0]}>\n                        <Tag color={level.color} style={{ margin: 0 }}>\n                          {level.label}\n                        </Tag>\n                      </Badge>\n                    </Option>\n                  ))}\n                </Select>\n                <Select\n                  mode=\"multiple\"\n                  placeholder=\"Sources\"\n                  value={filter.sources}\n                  onChange={(sources) => setFilter(prev => ({ ...prev, sources }))}\n                  style={{ minWidth: 150 }}\n                  allowClear\n                >\n                  {availableSources.map(source => (\n                    <Option key={source} value={source}>\n                      {source}\n                    </Option>\n                  ))}\n                </Select>\n                <RangePicker\n                  showTime\n                  value={filter.dateRange ? [dayjs(filter.dateRange[0]), dayjs(filter.dateRange[1])] : null}\n                  onChange={(dates) => {\n                    setFilter(prev => ({\n                      ...prev,\n                      dateRange: dates ? [dates[0]!.toISOString(), dates[1]!.toISOString()] : null,\n                    }));\n                  }}\n                  style={{ width: 300 }}\n                />\n              </Space>\n            </Col>\n            <Col>\n              <Space>\n                <Switch\n                  checked={streaming}\n                  onChange={setStreaming}\n                  checkedChildren={<PlayCircleOutlined />}\n                  unCheckedChildren={<PauseCircleOutlined />}\n                />\n                <Tooltip title=\"Auto Scroll\">\n                  <Switch\n                    checked={autoScroll}\n                    onChange={setAutoScroll}\n                    checkedChildren=\"Auto\"\n                    unCheckedChildren=\"Manual\"\n                    \n                  />\n                </Tooltip>\n                <Button\n                  icon={<ReloadOutlined />}\n                  loading={loading}\n                  onClick={fetchLogs}\n                  disabled={streaming}\n                >\n                  Refresh\n                </Button>\n                <Button\n                  icon={<ClearOutlined />}\n                  onClick={clearLogs}\n                >\n                  Clear\n                </Button>\n                <Dropdown\n                  overlay={\n                    <Menu>\n                      <Menu.Item\n                        key=\"txt\"\n                        icon={<FileTextOutlined />}\n                        onClick={() => handleExport('txt')}\n                      >\n                        Export as Text\n                      </Menu.Item>\n                      <Menu.Item\n                        key=\"json\"\n                        icon={<CodeOutlined />}\n                        onClick={() => handleExport('json')}\n                      >\n                        Export as JSON\n                      </Menu.Item>\n                    </Menu>\n                  }\n                >\n                  <Button icon={<ExportOutlined />}>\n                    Export\n                  </Button>\n                </Dropdown>\n                <Button\n                  icon={<SettingOutlined />}\n                  onClick={() => setSettingsVisible(true)}\n                />\n                <Button\n                  icon={<FullscreenOutlined />}\n                  onClick={() => setFullscreen(!fullscreen)}\n                />\n              </Space>\n            </Col>\n          </Row>\n        </div>\n      </Affix>\n\n      {/* Log List */}\n      <div style={{ height: 'calc(100% - 80px)', position: 'relative' }}>\n        {loading && (\n          <div style={{ \n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            backgroundColor: 'rgba(255, 255, 255, 0.8)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 10,\n          }}>\n            <Spin size=\"large\" />\n          </div>\n        )}\n        \n        {filteredLogs.length === 0 && !loading ? (\n          <Empty \n            description=\"No log entries found\"\n            style={{ marginTop: '20%' }}\n          />\n        ) : (\n          <List\n            ref={listRef}\n            height={fullscreen ? window.innerHeight - 80 : height - 80}\n            itemCount={filteredLogs.length}\n            itemSize={80}\n            itemData={filteredLogs}\n          >\n            {renderLogEntry}\n          </List>\n        )}\n      </div>\n\n      {/* Status Bar */}\n      <div style={{\n        position: 'absolute',\n        bottom: 0,\n        left: 0,\n        right: 0,\n        height: '32px',\n        backgroundColor: '#f5f5f5',\n        borderTop: '1px solid #d9d9d9',\n        padding: '6px 12px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        fontSize: '12px',\n        color: '#666',\n      }}>\n        <Space>\n          <Text style={{ fontSize: '12px' }}>\n            Showing {filteredLogs.length} of {logs.length} entries\n          </Text>\n          {streaming && (\n            <Badge status=\"processing\" text=\"Live\" />\n          )}\n        </Space>\n        <Space>\n          {selectedEntry && (\n            <Text style={{ fontSize: '12px' }}>\n              Selected: {dayjs(selectedEntry.timestamp).format('YYYY-MM-DD HH:mm:ss')}\n            </Text>\n          )}\n        </Space>\n      </div>\n\n      {/* Log Details Modal */}\n      <Modal\n        title={\n          <Space>\n            <FileTextOutlined />\n            Log Entry Details\n            {selectedEntry && (\n              <Tag color={getLogLevelInfo(selectedEntry.level).color}>\n                {selectedEntry.level.toUpperCase()}\n              </Tag>\n            )}\n          </Space>\n        }\n        open={detailsVisible}\n        onCancel={() => setDetailsVisible(false)}\n        footer={[\n          <Button key=\"close\" onClick={() => setDetailsVisible(false)}>\n            Close\n          </Button>,\n          selectedEntry && (\n            <Button\n              key=\"export\"\n              type=\"primary\"\n              icon={<ExportOutlined />}\n              onClick={() => {\n                const dataStr = JSON.stringify(selectedEntry, null, 2);\n                const dataBlob = new Blob([dataStr], { type: 'application/json' });\n                const url = URL.createObjectURL(dataBlob);\n                const link = document.createElement('a');\n                link.href = url;\n                link.download = `log_entry_${selectedEntry.id}.json`;\n                link.click();\n                URL.revokeObjectURL(url);\n              }}\n            >\n              Export Entry\n            </Button>\n          ),\n        ]}\n        width={800}\n      >\n        {selectedEntry && (\n          <div>\n            <Row gutter={[16, 16]}>\n              <Col span={8}>\n                <Text strong>Timestamp:</Text>\n                <br />\n                <Text>{dayjs(selectedEntry.timestamp).format('YYYY-MM-DD HH:mm:ss.SSS')}</Text>\n              </Col>\n              <Col span={8}>\n                <Text strong>Level:</Text>\n                <br />\n                <Tag color={getLogLevelInfo(selectedEntry.level).color}>\n                  {selectedEntry.level.toUpperCase()}\n                </Tag>\n              </Col>\n              <Col span={8}>\n                <Text strong>Source:</Text>\n                <br />\n                <Text>{selectedEntry.source}</Text>\n              </Col>\n              {selectedEntry.userId && (\n                <Col span={8}>\n                  <Text strong>User ID:</Text>\n                  <br />\n                  <Text>{selectedEntry.userId}</Text>\n                </Col>\n              )}\n              {selectedEntry.requestId && (\n                <Col span={8}>\n                  <Text strong>Request ID:</Text>\n                  <br />\n                  <Text code>{selectedEntry.requestId}</Text>\n                </Col>\n              )}\n              {selectedEntry.duration && (\n                <Col span={8}>\n                  <Text strong>Duration:</Text>\n                  <br />\n                  <Text>{selectedEntry.duration}ms</Text>\n                </Col>\n              )}\n            </Row>\n            \n            <div style={{ marginTop: 16 }}>\n              <Text strong>Message:</Text>\n              <Paragraph style={{ marginTop: 8 }}>\n                {selectedEntry.message}\n              </Paragraph>\n            </div>\n            \n            {selectedEntry.context && Object.keys(selectedEntry.context).length > 0 && (\n              <div style={{ marginTop: 16 }}>\n                <Text strong>Context:</Text>\n                <pre style={{ \n                  backgroundColor: '#f5f5f5',\n                  padding: '12px',\n                  borderRadius: '4px',\n                  marginTop: '8px',\n                  fontSize: '12px',\n                }}>\n                  {JSON.stringify(selectedEntry.context, null, 2)}\n                </pre>\n              </div>\n            )}\n            \n            {selectedEntry.stackTrace && (\n              <div style={{ marginTop: 16 }}>\n                <Text strong>Stack Trace:</Text>\n                <pre style={{ \n                  backgroundColor: '#fff2f0',\n                  padding: '12px',\n                  borderRadius: '4px',\n                  marginTop: '8px',\n                  fontSize: '12px',\n                  border: '1px solid #ffccc7',\n                }}>\n                  {selectedEntry.stackTrace}\n                </pre>\n              </div>\n            )}\n          </div>\n        )}\n      </Modal>\n\n      {/* Settings Modal */}\n      <Modal\n        title=\"Log Viewer Settings\"\n        open={settingsVisible}\n        onCancel={() => setSettingsVisible(false)}\n        footer={[\n          <Button key=\"close\" onClick={() => setSettingsVisible(false)}>\n            Close\n          </Button>,\n        ]}\n      >\n        <Space direction=\"vertical\" style={{ width: '100%' }}>\n          <div>\n            <Text strong>Real-time Streaming:</Text>\n            <br />\n            <Switch checked={streaming} onChange={setStreaming} />\n          </div>\n          <div>\n            <Text strong>Auto Scroll:</Text>\n            <br />\n            <Switch checked={autoScroll} onChange={setAutoScroll} />\n          </div>\n          <div>\n            <Text strong>Follow Tail:</Text>\n            <br />\n            <Switch checked={followTail} onChange={setFollowTail} />\n          </div>\n          <div>\n            <Text strong>Max Entries:</Text>\n            <br />\n            <Select\n              value={maxEntries}\n              onChange={(value) => {\n                // In a real implementation, this would be handled by a prop or context\n                console.log('Max entries changed to:', value);\n              }}\n              style={{ width: 200 }}\n            >\n              <Option value={1000}>1,000</Option>\n              <Option value={5000}>5,000</Option>\n              <Option value={10000}>10,000</Option>\n              <Option value={50000}>50,000</Option>\n            </Select>\n          </div>\n        </Space>\n      </Modal>\n    </div>\n  );\n};\n\nexport default LogViewer;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/monitoring/SystemStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/permission-types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/tables/DataTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/tables/DataTableDemo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/tables/PerformanceTest.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/tables/TableActions.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":187,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3661,3664],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3661,3664],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":513,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":513,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useCallback, useState } from 'react';\nimport {\n  Space,\n  Button,\n  Dropdown,\n  Modal,\n  message,\n  Tooltip,\n  Badge,\n  Typography,\n  Input,\n  Select,\n  Divider,\n  Tag,\n} from 'antd';\nimport {\n  DeleteOutlined,\n  ExportOutlined,\n  MoreOutlined,\n  CopyOutlined,\n  ArchiveBoxOutlined,\n  EyeOutlined,\n  EyeInvisibleOutlined,\n  LockOutlined,\n  UnlockOutlined,\n  CheckCircleOutlined,\n  CloseCircleOutlined,\n  ReloadOutlined,\n} from '@ant-design/icons';\nimport type { MenuProps } from 'antd';\n\nconst { Text } = Typography;\nconst { TextArea } = Input;\n\n// 批量操作类型\nexport type BatchAction = \n  | 'delete'\n  | 'export'\n  | 'archive'\n  | 'publish'\n  | 'unpublish'\n  | 'enable'\n  | 'disable'\n  | 'approve'\n  | 'reject'\n  | 'lock'\n  | 'unlock'\n  | 'favorite'\n  | 'unfavorite'\n  | 'copy'\n  | 'move'\n  | 'tag'\n  | 'untag'\n  | 'assign'\n  | 'unassign'\n  | 'custom';\n\n// 批量操作配置\nexport interface BatchActionConfig {\n  key: BatchAction | string;\n  label: string;\n  icon?: React.ReactNode;\n  danger?: boolean;\n  disabled?: boolean;\n  tooltip?: string;\n  needConfirm?: boolean;\n  confirmTitle?: string;\n  confirmContent?: string;\n  requireInput?: boolean;\n  inputPlaceholder?: string;\n  inputType?: 'text' | 'textarea' | 'select';\n  inputOptions?: Array<{ label: string; value: unknown }>;\n  visible?: boolean;\n}\n\n// 表格操作属性\nexport interface TableActionsProps {\n  selectedCount: number;\n  totalCount: number;\n  loading?: boolean;\n  disabled?: boolean;\n  \n  // 批量操作配置\n  batchActions?: BatchActionConfig[];\n  defaultBatchActions?: boolean;\n  \n  // 事件回调\n  onClearSelection?: () => void;\n  onBatchAction?: (action: string, params?: unknown) => Promise<void> | void;\n  onRefresh?: () => void;\n  \n  // 自定义渲染\n  prefix?: React.ReactNode;\n  suffix?: React.ReactNode;\n  \n  // 样式\n  className?: string;\n  style?: React.CSSProperties;\n}\n\n// 预定义批量操作\nconst DEFAULT_BATCH_ACTIONS: BatchActionConfig[] = [\n  {\n    key: 'delete',\n    label: 'Delete',\n    icon: <DeleteOutlined />,\n    danger: true,\n    needConfirm: true,\n    confirmTitle: 'Delete Selected Items',\n    confirmContent: 'Are you sure you want to delete the selected items? This action cannot be undone.',\n  },\n  {\n    key: 'export',\n    label: 'Export',\n    icon: <ExportOutlined />,\n  },\n  {\n    key: 'archive',\n    label: 'Archive',\n    icon: <ArchiveBoxOutlined />,\n    needConfirm: true,\n    confirmTitle: 'Archive Selected Items',\n    confirmContent: 'Are you sure you want to archive the selected items?',\n  },\n  {\n    key: 'publish',\n    label: 'Publish',\n    icon: <CheckCircleOutlined />,\n  },\n  {\n    key: 'unpublish',\n    label: 'Unpublish',\n    icon: <CloseCircleOutlined />,\n  },\n  {\n    key: 'enable',\n    label: 'Enable',\n    icon: <EyeOutlined />,\n  },\n  {\n    key: 'disable',\n    label: 'Disable',\n    icon: <EyeInvisibleOutlined />,\n  },\n  {\n    key: 'lock',\n    label: 'Lock',\n    icon: <LockOutlined />,\n  },\n  {\n    key: 'unlock',\n    label: 'Unlock',\n    icon: <UnlockOutlined />,\n  },\n  {\n    key: 'copy',\n    label: 'Copy',\n    icon: <CopyOutlined />,\n  },\n  {\n    key: 'tag',\n    label: 'Add Tag',\n    icon: <Tag />,\n    requireInput: true,\n    inputType: 'select',\n    inputPlaceholder: 'Select tags to add',\n  },\n];\n\nexport const TableActions: React.FC<TableActionsProps> = ({\n  selectedCount,\n  totalCount,\n  loading = false,\n  disabled = false,\n  batchActions,\n  defaultBatchActions = true,\n  onClearSelection,\n  onBatchAction,\n  onRefresh,\n  prefix,\n  suffix,\n  className,\n  style,\n}) => {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [currentAction, setCurrentAction] = useState<BatchActionConfig | null>(null);\n  const [inputValue, setInputValue] = useState<any>('');\n  const [actionLoading, setActionLoading] = useState<string | null>(null);\n\n  // 合并批量操作配置\n  const allBatchActions = useMemo(() => {\n    const actions = defaultBatchActions ? [...DEFAULT_BATCH_ACTIONS] : [];\n    if (batchActions) {\n      return [...actions, ...batchActions];\n    }\n    return actions;\n  }, [batchActions, defaultBatchActions]);\n\n  // 可见的批量操作\n  const visibleBatchActions = useMemo(() => {\n    return allBatchActions.filter(action => action.visible !== false);\n  }, [allBatchActions]);\n\n  // 处理批量操作\n  const handleBatchAction = useCallback(async (actionConfig: BatchActionConfig, params?: unknown) => {\n    if (disabled || loading) return;\n\n    const { key, needConfirm, requireInput } = actionConfig;\n\n    try {\n      setActionLoading(key);\n\n      // 需要输入的操作\n      if (requireInput) {\n        setCurrentAction(actionConfig);\n        setInputValue('');\n        setModalVisible(true);\n        return;\n      }\n\n      // 需要确认的操作\n      if (needConfirm) {\n        Modal.confirm({\n          title: actionConfig.confirmTitle || 'Confirm Action',\n          content: actionConfig.confirmContent || `Are you sure you want to perform this action on ${selectedCount} items?`,\n          onOk: async () => {\n            await onBatchAction?.(key, params);\n            message.success(`Successfully performed ${actionConfig.label.toLowerCase()} on ${selectedCount} items`);\n          },\n        });\n        return;\n      }\n\n      // 直接执行操作\n      await onBatchAction?.(key, params);\n      message.success(`Successfully performed ${actionConfig.label.toLowerCase()} on ${selectedCount} items`);\n    } catch (error) {\n      console.error(`Error performing ${actionConfig.label}:`, error);\n      message.error(`Failed to perform ${actionConfig.label.toLowerCase()}`);\n    } finally {\n      setActionLoading(null);\n    }\n  }, [disabled, loading, selectedCount, onBatchAction]);\n\n  // 处理模态框确认\n  const handleModalOk = useCallback(async () => {\n    if (!currentAction) return;\n\n    try {\n      await onBatchAction?.(currentAction.key, inputValue);\n      message.success(`Successfully performed ${currentAction.label.toLowerCase()} on ${selectedCount} items`);\n      setModalVisible(false);\n      setCurrentAction(null);\n      setInputValue('');\n    } catch (error) {\n      console.error(`Error performing ${currentAction.label}:`, error);\n      message.error(`Failed to perform ${currentAction.label.toLowerCase()}`);\n    }\n  }, [currentAction, inputValue, selectedCount, onBatchAction]);\n\n  // 生成下拉菜单项\n  const menuItems: MenuProps['items'] = useMemo(() => {\n    return visibleBatchActions.map((action) => ({\n      key: action.key,\n      label: (\n        <span>\n          {action.icon}\n          <span style={{ marginLeft: 8 }}>{action.label}</span>\n        </span>\n      ),\n      disabled: action.disabled || loading,\n      danger: action.danger,\n      onClick: () => handleBatchAction(action),\n    }));\n  }, [visibleBatchActions, loading, handleBatchAction]);\n\n  // 主要批量操作（前3个）\n  const primaryActions = visibleBatchActions.slice(0, 3);\n  const secondaryActions = visibleBatchActions.slice(3);\n\n  // 渲染输入组件\n  const renderInput = () => {\n    if (!currentAction) return null;\n\n    const { inputType = 'text', inputPlaceholder, inputOptions } = currentAction;\n\n    switch (inputType) {\n      case 'textarea':\n        return (\n          <TextArea\n            placeholder={inputPlaceholder}\n            value={inputValue}\n            onChange={(e) => setInputValue(e.target.value)}\n            rows={4}\n          />\n        );\n      case 'select':\n        return (\n          <Select\n            placeholder={inputPlaceholder}\n            value={inputValue}\n            onChange={setInputValue}\n            style={{ width: '100%' }}\n            mode={inputOptions ? 'multiple' : undefined}\n            options={inputOptions}\n          />\n        );\n      default:\n        return (\n          <Input\n            placeholder={inputPlaceholder}\n            value={inputValue}\n            onChange={(e) => setInputValue(e.target.value)}\n          />\n        );\n    }\n  };\n\n  if (selectedCount === 0) {\n    return null;\n  }\n\n  return (\n    <div className={`table-actions ${className || ''}`} style={style}>\n      <div className=\"table-actions-content\">\n        {/* 前缀内容 */}\n        {prefix}\n\n        {/* 选择信息 */}\n        <div className=\"table-actions-info\">\n          <Badge count={selectedCount} color=\"#1890ff\" />\n          <Text style={{ marginLeft: 8 }}>\n            Selected {selectedCount} of {totalCount} items\n          </Text>\n          {onClearSelection && (\n            <Button\n              type=\"link\"\n              \n              onClick={onClearSelection}\n              style={{ marginLeft: 8 }}\n            >\n              Clear\n            </Button>\n          )}\n        </div>\n\n        <Divider type=\"vertical\" />\n\n        {/* 批量操作按钮 */}\n        <Space wrap>\n          {/* 主要操作按钮 */}\n          {primaryActions.map((action) => (\n            <Tooltip key={action.key} title={action.tooltip}>\n              <Button\n                type={action.danger ? 'primary' : 'default'}\n                danger={action.danger}\n                icon={action.icon}\n                loading={actionLoading === action.key}\n                disabled={action.disabled || loading || disabled}\n                onClick={() => handleBatchAction(action)}\n              >\n                {action.label}\n              </Button>\n            </Tooltip>\n          ))}\n\n          {/* 更多操作下拉菜单 */}\n          {secondaryActions.length > 0 && (\n            <Dropdown\n              menu={{ items: menuItems.slice(3) }}\n              trigger={['click']}\n              disabled={loading || disabled}\n            >\n              <Button icon={<MoreOutlined />}>\n                More Actions\n              </Button>\n            </Dropdown>\n          )}\n\n          {/* 刷新按钮 */}\n          {onRefresh && (\n            <Tooltip title=\"Refresh\">\n              <Button\n                icon={<ReloadOutlined />}\n                onClick={onRefresh}\n                loading={loading}\n                disabled={disabled}\n              />\n            </Tooltip>\n          )}\n        </Space>\n\n        {/* 后缀内容 */}\n        {suffix}\n      </div>\n\n      {/* 输入模态框 */}\n      <Modal\n        title={currentAction?.label}\n        open={modalVisible}\n        onOk={handleModalOk}\n        onCancel={() => {\n          setModalVisible(false);\n          setCurrentAction(null);\n          setInputValue('');\n        }}\n        confirmLoading={actionLoading === currentAction?.key}\n      >\n        <div style={{ marginBottom: 16 }}>\n          <Text>\n            This action will be applied to {selectedCount} selected items.\n          </Text>\n        </div>\n        {renderInput()}\n      </Modal>\n\n      <style>{`\n        .table-actions {\n          background: #fafafa;\n          border: 1px solid #d9d9d9;\n          border-radius: 6px;\n          padding: 12px 16px;\n          margin-bottom: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .table-actions-content {\n          display: flex;\n          align-items: center;\n          width: 100%;\n          gap: 12px;\n        }\n\n        .table-actions-info {\n          display: flex;\n          align-items: center;\n          flex: 1;\n        }\n\n        .table-actions-info .ant-badge {\n          line-height: 1;\n        }\n\n        /* 响应式设计 */\n        @media (max-width: 768px) {\n          .table-actions {\n            flex-direction: column;\n            align-items: stretch;\n            gap: 12px;\n          }\n\n          .table-actions-content {\n            flex-direction: column;\n            align-items: stretch;\n          }\n\n          .table-actions-info {\n            justify-content: center;\n          }\n\n          .ant-space {\n            justify-content: center;\n          }\n        }\n\n        /* 动画效果 */\n        .table-actions {\n          animation: slideDown 0.3s ease-out;\n        }\n\n        @keyframes slideDown {\n          from {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        /* 主题适配 */\n        .table-actions.dark {\n          background: #141414;\n          border-color: #434343;\n          color: #fff;\n        }\n\n        /* 加载状态 */\n        .table-actions.loading {\n          opacity: 0.7;\n          pointer-events: none;\n        }\n\n        /* 危险操作样式 */\n        .table-actions .ant-btn-dangerous {\n          border-color: #ff4d4f;\n        }\n\n        .table-actions .ant-btn-dangerous:hover {\n          background: #ff4d4f;\n          border-color: #ff4d4f;\n          color: white;\n        }\n      `}</style>\n    </div>\n  );\n};\n\n// 高阶组件：为表格添加批量操作功能\nexport const withTableActions = <T extends Record<string, unknown>>(\n  TableComponent: React.ComponentType<{ rowSelection?: unknown } & Record<string, unknown>>\n) => {\n  return React.forwardRef<HTMLDivElement, { rowSelection?: unknown } & Record<string, unknown>>((props, ref) => {\n    const { rowSelection, ...restProps } = props;\n    const [selectedRowKeys, setSelectedRowKeys] = useState<React.Key[]>([]);\n\n    const enhancedRowSelection = useMemo(() => {\n      if (!rowSelection) return undefined;\n\n      return {\n        ...rowSelection,\n        selectedRowKeys,\n        onChange: (keys: React.Key[], rows: T[]) => {\n          setSelectedRowKeys(keys);\n          rowSelection.onChange?.(keys, rows);\n        },\n      };\n    }, [rowSelection, selectedRowKeys]);\n\n    const handleClearSelection = useCallback(() => {\n      setSelectedRowKeys([]);\n      rowSelection?.onChange?.([], []);\n    }, [rowSelection]);\n\n    return (\n      <>\n        <TableActions\n          selectedCount={selectedRowKeys.length}\n          totalCount={props.dataSource?.length || 0}\n          onClearSelection={handleClearSelection}\n          {...props.tableActionsProps}\n        />\n        <TableComponent\n          {...restProps}\n          ref={ref}\n          rowSelection={enhancedRowSelection}\n        />\n      </>\n    );\n  });\n};\n\nexport default TableActions;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/tables/VirtualTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":172,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5610,5613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5610,5613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":504,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":504,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo, useCallback, useRef, useState } from 'react';\nimport { Table, Empty, Spin } from 'antd';\nimport type { TableProps, ColumnsType } from 'antd/es/table';\nimport { List } from 'react-window';\nimport type { ListChildComponentProps } from 'react-window';\nimport ResizeObserver from 'rc-resize-observer';\nimport classNames from 'classnames';\n\n// 虚拟滚动表格行高配置\ninterface VirtualTableProps<T = Record<string, unknown>> extends Omit<TableProps<T>, 'pagination'> {\n  itemHeight?: number; // 固定行高\n  estimatedItemHeight?: number; // 预估行高（动态高度时使用）\n  overscan?: number; // 预渲染行数\n  threshold?: number; // 启用虚拟滚动的最小行数\n  maxHeight?: number; // 表格最大高度\n  onScroll?: (scrollTop: number) => void;\n  onReachEnd?: () => void; // 滚动到底部时触发\n  enableInfiniteLoading?: boolean; // 是否启用无限加载\n  loadingMore?: boolean; // 是否正在加载更多\n}\n\n// 虚拟滚动表格行组件\nconst VirtualTableRow: React.FC<{\n  index: number;\n  style: React.CSSProperties;\n  data: {\n    columns: ColumnsType<Record<string, unknown>>;\n    dataSource: Record<string, unknown>[];\n    rowKey: string | ((record: Record<string, unknown>) => string);\n    onRow?: (record: Record<string, unknown>, index?: number) => React.HTMLAttributes<HTMLElement>;\n    rowClassName?: string | ((record: Record<string, unknown>, index: number) => string);\n    rowSelection?: Record<string, unknown>;\n    expandedRowRender?: (record: Record<string, unknown>, index: number, indent: number, expanded: boolean) => React.ReactNode;\n    expandRowByClick?: boolean;\n  };\n}> = ({ index, style, data }) => {\n  const {\n    columns,\n    dataSource,\n    rowKey,\n    onRow,\n    rowClassName,\n    rowSelection,\n    expandedRowRender,\n  } = data;\n\n  const record = dataSource[index];\n  if (!record) return null;\n\n  const key = typeof rowKey === 'function' ? rowKey(record) : record[rowKey];\n  const rowProps = onRow?.(record, index) || {};\n  const className = typeof rowClassName === 'function' ? rowClassName(record, index) : rowClassName;\n\n  return (\n    <div\n      style={style}\n      className={classNames('virtual-table-row', className)}\n      {...rowProps}\n    >\n      <div className=\"virtual-table-row-content\">\n        {/* 选择框 */}\n        {rowSelection && (\n          <div className=\"virtual-table-cell virtual-table-selection-cell\">\n            <input\n              type={rowSelection.type || 'checkbox'}\n              checked={rowSelection.selectedRowKeys?.includes(key)}\n              onChange={(e) => {\n                if (rowSelection.onSelect) {\n                  rowSelection.onSelect(record, e.target.checked, [], e.nativeEvent);\n                }\n              }}\n            />\n          </div>\n        )}\n\n        {/* 数据列 */}\n        {columns.map((col: Record<string, unknown>, colIndex) => {\n          const value = record[col.dataIndex] || record[col.key];\n          const cellContent = col.render \n            ? col.render(value, record, index)\n            : value;\n\n          return (\n            <div\n              key={col.key || colIndex}\n              className=\"virtual-table-cell\"\n              style={{\n                width: col.width || 'auto',\n                minWidth: col.minWidth || 50,\n                textAlign: col.align || 'left',\n              }}\n              title={typeof cellContent === 'string' ? cellContent : undefined}\n            >\n              {cellContent}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* 展开行 */}\n      {expandedRowRender && (\n        <div className=\"virtual-table-expanded-row\">\n          {expandedRowRender(record, index, 0, true)}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// 虚拟滚动表格头组件\nconst VirtualTableHeader: React.FC<{\n  columns: ColumnsType<Record<string, unknown>>;\n  rowSelection?: Record<string, unknown>;\n}> = ({ columns, rowSelection }) => {\n  return (\n    <div className=\"virtual-table-header\">\n      {/* 选择框列头 */}\n      {rowSelection && (\n        <div className=\"virtual-table-header-cell virtual-table-selection-cell\">\n          {rowSelection.type !== 'radio' && !rowSelection.hideSelectAll && (\n            <input\n              type=\"checkbox\"\n              checked={\n                rowSelection.selectedRowKeys?.length === rowSelection.dataSource?.length &&\n                rowSelection.selectedRowKeys?.length > 0\n              }\n              {...(\n                rowSelection.selectedRowKeys?.length > 0 &&\n                rowSelection.selectedRowKeys?.length < rowSelection.dataSource?.length\n                  ? { ref: (input: HTMLInputElement | null) => {\n                      if (input) input.indeterminate = true;\n                    }}\n                  : {}\n              )}\n              onChange={(e) => {\n                if (rowSelection.onSelectAll) {\n                  rowSelection.onSelectAll(e.target.checked, [], []);\n                }\n              }}\n            />\n          )}\n        </div>\n      )}\n\n      {/* 数据列头 */}\n      {columns.map((col: Record<string, unknown>, index) => (\n        <div\n          key={col.key || index}\n          className={classNames('virtual-table-header-cell', {\n            'virtual-table-header-sortable': col.sorter,\n          })}\n          style={{\n            width: col.width || 'auto',\n            minWidth: col.minWidth || 50,\n            textAlign: col.align || 'left',\n          }}\n        >\n          <div className=\"virtual-table-header-content\">\n            {col.title}\n            {col.sorter && (\n              <div className=\"virtual-table-sort-icon\">\n                ↕\n              </div>\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport const VirtualTable = <T extends Record<string, any>>(props: VirtualTableProps<T>) => {\n  const {\n    dataSource = [],\n    columns = [],\n    loading = false,\n    itemHeight = 54,\n  \n    overscan = 5,\n    threshold = 100,\n    maxHeight = 600,\n    scroll,\n    rowKey = 'id',\n    onRow,\n    rowClassName,\n    rowSelection,\n    expandedRowRender,\n    expandRowByClick,\n    onScroll,\n    onReachEnd,\n    enableInfiniteLoading = false,\n    loadingMore = false,\n    ...restProps\n  } = props;\n\n  const [containerHeight, setContainerHeight] = useState(maxHeight);\n\n  const listRef = useRef<List>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // 计算行高（支持动态高度）\n  const getItemHeight = useCallback((_index: number) => {\n    // 可以根据具体数据计算动态高度\n    // 这里简化为固定高度\n    return itemHeight;\n  }, [itemHeight]);\n\n  // 滚动事件处理\n  const handleScroll = useCallback(({ scrollTop: newScrollTop }: { scrollTop: number }) => {\n\n    onScroll?.(newScrollTop);\n\n    // 无限加载逻辑\n    if (enableInfiniteLoading && onReachEnd && !loadingMore) {\n      const scrollHeight = dataSource.length * itemHeight;\n      const containerHeight = listRef.current?.props.height || 0;\n      const scrollBottom = newScrollTop + containerHeight;\n      \n      // 距离底部50px时触发加载\n      if (scrollHeight - scrollBottom < 50) {\n        onReachEnd();\n      }\n    }\n  }, [onScroll, onReachEnd, enableInfiniteLoading, loadingMore, dataSource.length, itemHeight]);\n\n  // 容器尺寸变化监听\n  const handleResize = useCallback(({ height }: { height: number }) => {\n    const newHeight = Math.min(height, maxHeight);\n    setContainerHeight(newHeight);\n  }, [maxHeight]);\n\n\n\n  // 准备传递给行组件的数据\n  const rowData = useMemo(() => ({\n    columns,\n    dataSource,\n    rowKey,\n    onRow,\n    rowClassName,\n    rowSelection: rowSelection ? {\n      ...rowSelection,\n      dataSource,\n    } : undefined,\n    expandedRowRender,\n    expandRowByClick,\n  }), [columns, dataSource, rowKey, onRow, rowClassName, rowSelection, expandedRowRender, expandRowByClick]);\n\n  // 渲染虚拟行\n  const VirtualRow = useCallback(({ index, style }: ListChildComponentProps) => (\n    <VirtualTableRow\n      index={index}\n      style={style}\n      data={rowData}\n    />\n  ), [rowData]);\n\n  // 如果数据量小于阈值，使用原生Table组件\n  if (dataSource.length < threshold) {\n    return (\n      <Table\n        {...restProps}\n        dataSource={dataSource}\n        columns={columns}\n        loading={loading}\n        rowKey={rowKey}\n        onRow={onRow}\n        rowClassName={rowClassName}\n        rowSelection={rowSelection}\n        expandedRowRender={expandedRowRender}\n        expandRowByClick={expandRowByClick}\n        pagination={false}\n        scroll={scroll}\n      />\n    );\n  }\n\n  if (loading && dataSource.length === 0) {\n    return (\n      <div className=\"virtual-table-loading\">\n        <Spin size=\"large\" />\n      </div>\n    );\n  }\n\n  if (dataSource.length === 0) {\n    return <Empty description=\"No data\" />;\n  }\n\n  return (\n    <div className=\"virtual-table-container\" ref={containerRef}>\n      {/* 表头 */}\n      <VirtualTableHeader columns={columns} rowSelection={rowSelection} />\n\n      {/* 虚拟滚动内容 */}\n      <ResizeObserver onResize={handleResize}>\n        <div className=\"virtual-table-body\" style={{ height: containerHeight }}>\n          <List\n            ref={listRef}\n            height={containerHeight}\n            itemCount={dataSource.length}\n            itemSize={getItemHeight}\n            overscanCount={overscan}\n            onScroll={handleScroll}\n            itemData={rowData}\n            width=\"100%\"\n          >\n            {VirtualRow}\n          </List>\n        </div>\n      </ResizeObserver>\n\n      {/* 加载更多指示器 */}\n      {enableInfiniteLoading && loadingMore && (\n        <div className=\"virtual-table-loading-more\">\n          <Spin  />\n          <span style={{ marginLeft: 8 }}>Loading more...</span>\n        </div>\n      )}\n\n      <style>{`\n        .virtual-table-container {\n          border: 1px solid #f0f0f0;\n          border-radius: 6px;\n          overflow: hidden;\n          background: white;\n        }\n\n        .virtual-table-header {\n          display: flex;\n          background: #fafafa;\n          border-bottom: 1px solid #f0f0f0;\n          font-weight: 600;\n          position: sticky;\n          top: 0;\n          z-index: 10;\n        }\n\n        .virtual-table-header-cell {\n          padding: 16px;\n          border-right: 1px solid #f0f0f0;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          min-height: 54px;\n          display: flex;\n          align-items: center;\n        }\n\n        .virtual-table-header-cell:last-child {\n          border-right: none;\n        }\n\n        .virtual-table-header-sortable {\n          cursor: pointer;\n          user-select: none;\n        }\n\n        .virtual-table-header-sortable:hover {\n          background: #f5f5f5;\n        }\n\n        .virtual-table-header-content {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          width: 100%;\n        }\n\n        .virtual-table-sort-icon {\n          margin-left: 4px;\n          opacity: 0.5;\n        }\n\n        .virtual-table-selection-cell {\n          width: 60px;\n          min-width: 60px;\n          text-align: center;\n        }\n\n        .virtual-table-body {\n          overflow: auto;\n        }\n\n        .virtual-table-row {\n          border-bottom: 1px solid #f0f0f0;\n          transition: background-color 0.2s;\n        }\n\n        .virtual-table-row:hover {\n          background: #fafafa;\n        }\n\n        .virtual-table-row-content {\n          display: flex;\n          align-items: center;\n          min-height: 54px;\n        }\n\n        .virtual-table-cell {\n          padding: 16px;\n          border-right: 1px solid #f0f0f0;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          display: flex;\n          align-items: center;\n        }\n\n        .virtual-table-cell:last-child {\n          border-right: none;\n        }\n\n        .virtual-table-expanded-row {\n          padding: 16px;\n          background: #fafafa;\n          border-top: 1px solid #f0f0f0;\n        }\n\n        .virtual-table-loading {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          height: 200px;\n        }\n\n        .virtual-table-loading-more {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          padding: 16px;\n          border-top: 1px solid #f0f0f0;\n          background: #fafafa;\n        }\n\n        /* 响应式设计 */\n        @media (max-width: 768px) {\n          .virtual-table-header-cell,\n          .virtual-table-cell {\n            padding: 8px;\n            font-size: 12px;\n          }\n\n          .virtual-table-row-content {\n            min-height: 48px;\n          }\n        }\n\n        /* 滚动条样式 */\n        .virtual-table-body::-webkit-scrollbar {\n          width: 8px;\n          height: 8px;\n        }\n\n        .virtual-table-body::-webkit-scrollbar-track {\n          background: #f0f0f0;\n          border-radius: 4px;\n        }\n\n        .virtual-table-body::-webkit-scrollbar-thumb {\n          background: #d9d9d9;\n          border-radius: 4px;\n        }\n\n        .virtual-table-body::-webkit-scrollbar-thumb:hover {\n          background: #bfbfbf;\n        }\n\n        /* 选中状态 */\n        .virtual-table-row.selected {\n          background: #e6f7ff;\n        }\n\n        .virtual-table-row.selected:hover {\n          background: #bae7ff;\n        }\n\n        /* 加载状态 */\n        .virtual-table-row.loading {\n          opacity: 0.6;\n          pointer-events: none;\n        }\n\n        /* 错误状态 */\n        .virtual-table-row.error {\n          background: #fff2f0;\n          color: #ff4d4f;\n        }\n\n        /* 禁用状态 */\n        .virtual-table-row.disabled {\n          opacity: 0.5;\n          pointer-events: none;\n        }\n      `}</style>\n    </div>\n  );\n};\n\n// 导出相关工具函数和类型\nexport type { VirtualTableProps };\n\n// 性能优化工具函数\nexport const VirtualTableUtils = {\n  // 计算可见行范围\n  getVisibleRowRange: (scrollTop: number, containerHeight: number, itemHeight: number) => {\n    const startIndex = Math.floor(scrollTop / itemHeight);\n    const endIndex = Math.min(\n      startIndex + Math.ceil(containerHeight / itemHeight),\n      Number.MAX_SAFE_INTEGER\n    );\n    return { startIndex, endIndex };\n  },\n\n  // 计算总高度\n  getTotalHeight: (itemCount: number, itemHeight: number) => {\n    return itemCount * itemHeight;\n  },\n\n  // 优化数据处理\n  memoizeRowData: function<T>(data: T[], keyExtractor: (item: T) => string) {\n    const cache = new Map();\n    return data.map(item => {\n      const key = keyExtractor(item);\n      if (!cache.has(key)) {\n        cache.set(key, { ...item, _key: key });\n      }\n      return cache.get(key);\n    });\n  }\n};\n\nexport default VirtualTable;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/tables/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/users/RoleSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/components/users/UserForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":103,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2629,2632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2629,2632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":162,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4389,4392],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4389,4392],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\nimport {\n  Modal,\n  Form,\n  Input,\n  Select,\n  Upload,\n  Avatar,\n  Button,\n  Space,\n  Row,\n  Col,\n  Card,\n  Alert,\n  Tooltip,\n  message,\n  Progress} from 'antd';\nimport {\n  UserOutlined,\n  MailOutlined,\n  LockOutlined,\n  CameraOutlined,\n  EyeInvisibleOutlined,\n  EyeTwoTone,\n  InfoCircleOutlined,\n  SafetyOutlined,\n  TeamOutlined} from '@ant-design/icons';\nimport type { UploadProps } from 'antd/es/upload';\nimport type { RcFile } from 'antd/es/upload/interface';\nimport { useUserForm, useUserManagementStore } from '@/stores/userManagementStore';\nimport type { User, Role } from '@/types';\n\nconst { Option } = Select;\n\ninterface UserFormProps {}\n\nconst UserForm: React.FC<UserFormProps> = () => {\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [avatarUrl, setAvatarUrl] = useState<string>('');\n  const [fileList, setFileList] = useState<[]>([]);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [passwordStrength, setPasswordStrength] = useState(0);\n\n  const { visible, mode, data } = useUserForm();\n  const { closeUserForm, addUser, updateUser } = useUserManagementStore();\n\n  // Mock roles data\n  const mockRoles: Role[] = [\n    {\n      id: '1',\n      name: 'Administrator',\n      description: 'System administrator with full access',\n      permissions: [],\n      level: 1,\n      isBuiltIn: true},\n    {\n      id: '2',\n      name: 'Editor',\n      description: 'Content editor with publishing rights',\n      permissions: [],\n      level: 2,\n      isBuiltIn: true},\n    {\n      id: '3',\n      name: 'Author',\n      description: 'Content author with writing permissions',\n      permissions: [],\n      level: 3,\n      isBuiltIn: true},\n    {\n      id: '4',\n      name: 'User',\n      description: 'Regular user with basic permissions',\n      permissions: [],\n      level: 4,\n      isBuiltIn: true},\n  ];\n\n  // Reset form when modal opens/closes\n  useEffect(() => {\n    if (visible) {\n      if (mode === 'edit' && data) {\n        // Populate form with existing user data\n        form.setFieldsValue({\n          username: data.username,\n          email: data.email,\n          displayName: data.displayName,\n          status: data.status,\n          roleIds: data.roles?.map(role => role.id) || []});\n        setAvatarUrl(data.avatar || '');\n      } else {\n        // Reset form for create mode\n        form.resetFields();\n        setAvatarUrl('');\n        setFileList([]);\n        setPasswordStrength(0);\n      }\n    }\n  }, [visible, mode, data, form]);\n\n  // Handle form submission\n  const handleSubmit = async (values: any) => {\n    try {\n      setLoading(true);\n\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1500));\n\n      const userData: Partial<User> = {\n        username: values.username,\n        email: values.email,\n        displayName: values.displayName,\n        status: values.status || 'active',\n        avatar: avatarUrl,\n        roles: mockRoles.filter(role => values.roleIds?.includes(role.id)) || []};\n\n      if (mode === 'create') {\n        const newUser: User = {\n          id: `user_${Date.now()}`,\n          ...userData,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString()} as User;\n        \n        addUser(newUser);\n        message.success('用户创建成功');\n      } else if (mode === 'edit' && data) {\n        updateUser(data.id, {\n          ...userData,\n          updatedAt: new Date().toISOString()});\n        message.success('用户更新成功');\n      }\n\n      closeUserForm();\n    } catch (error) {\n      message.error('操作失败，请重试');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle avatar upload\n  const handleAvatarChange: UploadProps['onChange'] = (info) => {\n    setFileList(info.fileList);\n\n    if (info.file.status === 'uploading') {\n      setUploadProgress(info.file.percent || 0);\n    }\n\n    if (info.file.status === 'done') {\n      // Get this url from response in real world\n      setAvatarUrl(info.file.response?.url || URL.createObjectURL(info.file.originFileObj as RcFile));\n      setUploadProgress(0);\n      message.success('头像上传成功');\n    } else if (info.file.status === 'error') {\n      setUploadProgress(0);\n      message.error('头像上传失败');\n    }\n  };\n\n  // Custom upload function (simulate upload)\n  const customUpload = ({ file, onProgress, onSuccess, _onError }: any) => {\n    let progress = 0;\n    const timer = setInterval(() => {\n      progress += 10;\n      onProgress({ percent: progress });\n      \n      if (progress >= 100) {\n        clearInterval(timer);\n        onSuccess({\n          url: URL.createObjectURL(file)});\n      }\n    }, 100);\n\n    return {\n      abort() {\n        clearInterval(timer);\n      }};\n  };\n\n  // Upload props\n  const uploadProps: UploadProps = {\n    name: 'avatar',\n    listType: 'picture-card',\n    fileList,\n    showUploadList: false,\n    beforeUpload: (file) => {\n      const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\n      if (!isJpgOrPng) {\n        message.error('只支持 JPG/PNG 格式的图片');\n        return false;\n      }\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isLt2M) {\n        message.error('图片大小不能超过 2MB');\n        return false;\n      }\n      return true;\n    },\n    customRequest: customUpload,\n    onChange: handleAvatarChange};\n\n  // Password strength checker\n  const checkPasswordStrength = (password: string) => {\n    let strength = 0;\n    if (password.length >= 8) strength += 25;\n    if (/[a-z]/.test(password)) strength += 25;\n    if (/[A-Z]/.test(password)) strength += 25;\n    if (/[0-9]/.test(password) && /[^A-Za-z0-9]/.test(password)) strength += 25;\n    \n    setPasswordStrength(strength);\n    return strength;\n  };\n\n  // Get password strength color\n  const getPasswordStrengthColor = (strength: number) => {\n    if (strength < 25) return '#ff4d4f';\n    if (strength < 50) return '#faad14';\n    if (strength < 75) return '#1890ff';\n    return '#52c41a';\n  };\n\n  // Get password strength text\n  const getPasswordStrengthText = (strength: number) => {\n    if (strength < 25) return '弱';\n    if (strength < 50) return '一般';\n    if (strength < 75) return '良好';\n    return '强';\n  };\n\n  const title = mode === 'create' ? '新增用户' : mode === 'edit' ? '编辑用户' : '查看用户';\n  const isViewMode = mode === 'view';\n\n  return (\n    <Modal\n      title={title}\n      open={visible}\n      onCancel={closeUserForm}\n      width={800}\n      footer={\n        isViewMode ? (\n          <Button onClick={closeUserForm}>关闭</Button>\n        ) : (\n          <Space>\n            <Button onClick={closeUserForm}>取消</Button>\n            <Button\n              type=\"primary\"\n              loading={loading}\n              onClick={() => form.submit()}\n            >\n              {mode === 'create' ? '创建用户' : '保存更改'}\n            </Button>\n          </Space>\n        )\n      }\n      destroyOnClose\n    >\n      <Form\n        form={form}\n        layout=\"vertical\"\n        onFinish={handleSubmit}\n        disabled={isViewMode}\n      >\n        <Row gutter={24}>\n          {/* Left Column - Avatar */}\n          <Col xs={24} md={8}>\n            <Card  className=\"text-center\">\n              <div className=\"mb-4\">\n                <Upload {...uploadProps}>\n                  <div className=\"relative\">\n                    <Avatar\n                      size={120}\n                      src={avatarUrl}\n                      icon={<UserOutlined />}\n                      className=\"border-2 border-dashed border-gray-300 hover:border-blue-400 transition-colors cursor-pointer\"\n                    />\n                    {uploadProgress > 0 && uploadProgress < 100 && (\n                      <div className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-full\">\n                        <Progress\n                          type=\"circle\"\n                          percent={uploadProgress}\n                          size={60}\n                          strokeColor=\"#1890ff\"\n                        />\n                      </div>\n                    )}\n                    {!isViewMode && (\n                      <div className=\"absolute bottom-0 right-0 bg-blue-500 text-white rounded-full p-2 border-2 border-white\">\n                        <CameraOutlined />\n                      </div>\n                    )}\n                  </div>\n                </Upload>\n              </div>\n              {!isViewMode && (\n                <div className=\"text-sm text-gray-500\">\n                  <div>支持 JPG、PNG 格式</div>\n                  <div>文件大小不超过 2MB</div>\n                </div>\n              )}\n            </Card>\n          </Col>\n\n          {/* Right Column - Form Fields */}\n          <Col xs={24} md={16}>\n            <div className=\"space-y-4\">\n              {/* Basic Information */}\n              <Card  title=\"基本信息\">\n                <Row gutter={16}>\n                  <Col xs={24} md={12}>\n                    <Form.Item\n                      name=\"username\"\n                      label=\"用户名\"\n                      rules={[\n                        { required: true, message: '请输入用户名' },\n                        { min: 3, message: '用户名至少3个字符' },\n                        { max: 20, message: '用户名最多20个字符' },\n                        { pattern: /^[a-zA-Z0-9_]+$/, message: '只能包含字母、数字和下划线' },\n                      ]}\n                    >\n                      <Input\n                        prefix={<UserOutlined />}\n                        placeholder=\"请输入用户名\"\n                        disabled={mode === 'edit'} // Username cannot be changed\n                      />\n                    </Form.Item>\n                  </Col>\n                  <Col xs={24} md={12}>\n                    <Form.Item\n                      name=\"email\"\n                      label=\"邮箱地址\"\n                      rules={[\n                        { required: true, message: '请输入邮箱地址' },\n                        { type: 'email', message: '请输入有效的邮箱地址' },\n                      ]}\n                    >\n                      <Input\n                        prefix={<MailOutlined />}\n                        placeholder=\"请输入邮箱地址\"\n                      />\n                    </Form.Item>\n                  </Col>\n                </Row>\n\n                <Form.Item\n                  name=\"displayName\"\n                  label=\"显示名称\"\n                  rules={[\n                    { max: 50, message: '显示名称最多50个字符' },\n                  ]}\n                >\n                  <Input\n                    placeholder=\"请输入显示名称（可选）\"\n                  />\n                </Form.Item>\n\n                {mode === 'create' && (\n                  <>\n                    <Form.Item\n                      name=\"password\"\n                      label=\"密码\"\n                      rules={[\n                        { required: true, message: '请输入密码' },\n                        { min: 8, message: '密码至少8个字符' },\n                      ]}\n                    >\n                      <Input.Password\n                        prefix={<LockOutlined />}\n                        placeholder=\"请输入密码\"\n                        iconRender={(visible) => (visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />)}\n                        onChange={(e) => checkPasswordStrength(e.target.value)}\n                      />\n                    </Form.Item>\n\n                    {passwordStrength > 0 && (\n                      <div className=\"mb-4\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <span className=\"text-sm\">密码强度:</span>\n                          <span\n                            className=\"text-sm font-medium\"\n                            style={{ color: getPasswordStrengthColor(passwordStrength) }}\n                          >\n                            {getPasswordStrengthText(passwordStrength)}\n                          </span>\n                        </div>\n                        <Progress\n                          percent={passwordStrength}\n                          \n                          strokeColor={getPasswordStrengthColor(passwordStrength)}\n                          showInfo={false}\n                        />\n                      </div>\n                    )}\n\n                    <Form.Item\n                      name=\"confirmPassword\"\n                      label=\"确认密码\"\n                      dependencies={['password']}\n                      rules={[\n                        { required: true, message: '请确认密码' },\n                        ({ getFieldValue }) => ({\n                          validator(_, value) {\n                            if (!value || getFieldValue('password') === value) {\n                              return Promise.resolve();\n                            }\n                            return Promise.reject(new Error('两次密码输入不一致'));\n                          }}),\n                      ]}\n                    >\n                      <Input.Password\n                        prefix={<LockOutlined />}\n                        placeholder=\"请再次输入密码\"\n                        iconRender={(visible) => (visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />)}\n                      />\n                    </Form.Item>\n                  </>\n                )}\n              </Card>\n\n              {/* Account Settings */}\n              <Card  title=\"账户设置\">\n                <Row gutter={16}>\n                  <Col xs={24} md={12}>\n                    <Form.Item\n                      name=\"status\"\n                      label=\"账户状态\"\n                      initialValue=\"active\"\n                    >\n                      <Select>\n                        <Option value=\"active\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                            活跃\n                          </div>\n                        </Option>\n                        <Option value=\"inactive\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"w-2 h-2 bg-gray-400 rounded-full\"></div>\n                            非活跃\n                          </div>\n                        </Option>\n                        <Option value=\"banned\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"w-2 h-2 bg-red-500 rounded-full\"></div>\n                            已封禁\n                          </div>\n                        </Option>\n                        <Option value=\"pending\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n                            待激活\n                          </div>\n                        </Option>\n                      </Select>\n                    </Form.Item>\n                  </Col>\n                  <Col xs={24} md={12}>\n                    <Form.Item\n                      name=\"roleIds\"\n                      label={\n                        <span>\n                          用户角色\n                          <Tooltip title=\"用户可以拥有多个角色，权限将累加\">\n                            <InfoCircleOutlined className=\"ml-1 text-gray-400\" />\n                          </Tooltip>\n                        </span>\n                      }\n                      rules={[\n                        { required: true, message: '请选择至少一个角色' },\n                      ]}\n                    >\n                      <Select\n                        mode=\"multiple\"\n                        placeholder=\"请选择用户角色\"\n                        optionLabelProp=\"label\"\n                      >\n                        {mockRoles.map(role => (\n                          <Option\n                            key={role.id}\n                            value={role.id}\n                            label={role.name}\n                          >\n                            <div className=\"flex items-center justify-between\">\n                              <div className=\"flex items-center gap-2\">\n                                <TeamOutlined />\n                                <span>{role.name}</span>\n                              </div>\n                              <span className=\"text-xs text-gray-500\">\n                                级别 {role.level}\n                              </span>\n                            </div>\n                            <div className=\"text-xs text-gray-500 mt-1\">\n                              {role.description}\n                            </div>\n                          </Option>\n                        ))}\n                      </Select>\n                    </Form.Item>\n                  </Col>\n                </Row>\n              </Card>\n\n              {/* Security Notice */}\n              {mode === 'create' && (\n                <Alert\n                  type=\"info\"\n                  icon={<SafetyOutlined />}\n                  message=\"安全提示\"\n                  description=\"新用户创建后，系统将发送激活邮件到指定邮箱。用户需要点击邮件中的链接完成账户激活。\"\n                  showIcon\n                />\n              )}\n            </div>\n          </Col>\n        </Row>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default UserForm;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/contexts/MessageContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":15,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":15,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext } from 'react';\nimport { App } from 'antd';\nimport type { MessageInstance } from 'antd/es/message/interface';\nimport type { NotificationInstance } from 'antd/es/notification/interface';\nimport type { ModalStaticFunctions } from 'antd/es/modal/confirm';\n\ninterface MessageContextType {\n  message: MessageInstance;\n  notification: NotificationInstance;\n  modal: Omit<ModalStaticFunctions, 'warn'>;\n}\n\nconst MessageContext = createContext<MessageContextType | null>(null);\n\nexport const useMessage = (): MessageContextType => {\n  const context = useContext(MessageContext);\n  if (!context) {\n    throw new Error('useMessage must be used within a MessageProvider');\n  }\n  return context;\n};\n\ninterface MessageProviderProps {\n  children: React.ReactNode;\n}\n\nexport const MessageProvider: React.FC<MessageProviderProps> = ({ children }) => {\n  const { message, notification, modal } = App.useApp();\n\n  const contextValue: MessageContextType = {\n    message,\n    notification,\n    modal,\n  };\n\n  return (\n    <MessageContext.Provider value={contextValue}>\n      {children}\n    </MessageContext.Provider>\n  );\n};\n\nexport default MessageContext;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/contexts/PermissionContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":13,"column":13,"nodeType":"Identifier","messageId":"namedExport","endLine":13,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[540,543],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[540,543],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1123,1126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1123,1126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":172,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5121,5124],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5121,5124],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":393,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":393,"endColumn":34},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":404,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":404,"endColumn":26},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":409,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":409,"endColumn":29},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":414,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":414,"endColumn":29},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":419,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":419,"endColumn":30},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":424,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":424,"endColumn":31},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":429,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":429,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';\nimport { useAdminStore } from '@/stores/adminStore';\nimport type { User, Role } from '@/types';\n\n// 权限检查结果类型\nexport interface PermissionCheck {\n  hasPermission: boolean;\n  missingPermissions: string[];\n  reason?: string;\n}\n\n// 权限级别\nexport enum PermissionLevel {\n  NONE = 0,\n  READ = 1,\n  WRITE = 2,\n  DELETE = 3,\n  ADMIN = 4\n}\n\n// 资源权限类型\nexport interface ResourcePermission {\n  resource: string;\n  level: PermissionLevel;\n  conditions?: Record<string, any>;\n}\n\n// 权限上下文状态\nexport interface PermissionContextState {\n  // 基础权限检查\n  hasPermission: (permission: string | string[]) => boolean;\n  hasAllPermissions: (permissions: string[]) => boolean;\n  hasAnyPermission: (permissions: string[]) => boolean;\n  \n  // 角色检查\n  hasRole: (role: string | string[]) => boolean;\n  hasAllRoles: (roles: string[]) => boolean;\n  hasAnyRole: (roles: string[]) => boolean;\n  \n  // 高级权限检查\n  checkPermission: (permission: string | string[]) => PermissionCheck;\n  checkResourcePermission: (resource: string, level: PermissionLevel, conditions?: Record<string, any>) => boolean;\n  \n  // 层级权限检查\n  hasHierarchicalPermission: (permission: string, resource?: string) => boolean;\n  canAccessResource: (resource: string, action: string) => boolean;\n  \n  // 权限信息\n  getUserPermissions: () => string[];\n  getUserRoles: () => Role[];\n  getPermissionLevel: (resource: string) => PermissionLevel;\n  \n  // 权限调试\n  debugPermissions: () => void;\n  getPermissionTrace: (permission: string) => string[];\n  \n  // 权限缓存\n  refreshPermissions: () => Promise<void>;\n  clearPermissionCache: () => void;\n  \n  // 权限状态\n  isLoading: boolean;\n  isAuthenticated: boolean;\n  user: User | null;\n  lastUpdated: Date | null;\n}\n\n// 权限上下文\nconst PermissionContext = createContext<PermissionContextState | null>(null);\n\n// 权限提供者属性\nexport interface PermissionProviderProps {\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n  onPermissionDenied?: (permission: string, reason: string) => void;\n  enableDebug?: boolean;\n}\n\n// 权限缓存\nconst permissionCache = new Map<string, { result: boolean; timestamp: number }>();\n// const CACHE_DURATION = 5 * 60 * 1000; // 5分钟缓存\n\n// 权限提供者组件\nexport const PermissionProvider: React.FC<PermissionProviderProps> = ({\n  children,\n  fallback,\n  onPermissionDenied,\n  enableDebug = false\n}) => {\n  const { user, permissions } = useAdminStore();\n  const [isLoading, setIsLoading] = useState(false);\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\n\n  // 基础权限检查\n  const hasPermission = useMemo(() => (permission: string | string[]): boolean => {\n    if (!user || !permissions.length) return false;\n\n    if (Array.isArray(permission)) {\n      return permission.some(p => permissions.includes(p));\n    }\n\n    return permissions.includes(permission);\n  }, [user, permissions]);\n\n  const hasAllPermissions = useMemo(() => (requiredPermissions: string[]): boolean => {\n    if (!user || !permissions.length) return false;\n    return requiredPermissions.every(p => permissions.includes(p));\n  }, [user, permissions]);\n\n  const hasAnyPermission = useMemo(() => (requiredPermissions: string[]): boolean => {\n    if (!user || !permissions.length) return false;\n    return requiredPermissions.some(p => permissions.includes(p));\n  }, [user, permissions]);\n\n  // 角色检查\n  const hasRole = useMemo(() => (role: string | string[]): boolean => {\n    if (!user?.roles) return false;\n\n    const userRoles = user.roles.map(r => r.name);\n\n    if (Array.isArray(role)) {\n      return role.some(r => userRoles.includes(r));\n    }\n\n    return userRoles.includes(role);\n  }, [user]);\n\n  const hasAllRoles = useMemo(() => (roles: string[]): boolean => {\n    if (!user?.roles) return false;\n    const userRoles = user.roles.map(r => r.name);\n    return roles.every(r => userRoles.includes(r));\n  }, [user]);\n\n  const hasAnyRole = useMemo(() => (roles: string[]): boolean => {\n    if (!user?.roles) return false;\n    const userRoles = user.roles.map(r => r.name);\n    return roles.some(r => userRoles.includes(r));\n  }, [user]);\n\n  // 高级权限检查\n  const checkPermission = useMemo(() => (permission: string | string[]): PermissionCheck => {\n    if (!user) {\n      return {\n        hasPermission: false,\n        missingPermissions: Array.isArray(permission) ? permission : [permission],\n        reason: '用户未登录'\n      };\n    }\n\n    if (!permissions.length) {\n      return {\n        hasPermission: false,\n        missingPermissions: Array.isArray(permission) ? permission : [permission],\n        reason: '用户无任何权限'\n      };\n    }\n\n    const requiredPermissions = Array.isArray(permission) ? permission : [permission];\n    const missingPermissions = requiredPermissions.filter(p => !permissions.includes(p));\n\n    return {\n      hasPermission: missingPermissions.length === 0,\n      missingPermissions,\n      reason: missingPermissions.length > 0 ? `缺少权限: ${missingPermissions.join(', ')}` : undefined\n    };\n  }, [user, permissions]);\n\n  // 资源权限检查\n  const checkResourcePermission = useMemo(() => (\n    resource: string, \n    level: PermissionLevel, \n    _conditions?: Record<string, any>\n  ): boolean => {\n    if (!user || !permissions.length) return false;\n\n    // 根据权限级别检查\n    switch (level) {\n      case PermissionLevel.READ:\n        return hasAnyPermission([`${resource}.read`, `${resource}.write`, `${resource}.delete`, `${resource}.admin`]);\n      case PermissionLevel.WRITE:\n        return hasAnyPermission([`${resource}.write`, `${resource}.delete`, `${resource}.admin`]);\n      case PermissionLevel.DELETE:\n        return hasAnyPermission([`${resource}.delete`, `${resource}.admin`]);\n      case PermissionLevel.ADMIN:\n        return hasPermission(`${resource}.admin`);\n      default:\n        return false;\n    }\n  }, [user, permissions, hasAnyPermission, hasPermission]);\n\n  // 层级权限检查\n  const hasHierarchicalPermission = useMemo(() => (permission: string, resource?: string): boolean => {\n    if (!user || !permissions.length) return false;\n\n    // 检查超级管理员权限\n    if (hasRole('SuperAdmin') || hasPermission('system.admin')) {\n      return true;\n    }\n\n    // 检查具体权限\n    if (hasPermission(permission)) {\n      return true;\n    }\n\n    // 检查父级权限\n    const parts = permission.split('.');\n    for (let i = parts.length - 1; i > 0; i--) {\n      const parentPermission = parts.slice(0, i).join('.') + '.admin';\n      if (hasPermission(parentPermission)) {\n        return true;\n      }\n    }\n\n    // 检查资源所有者权限\n    if (resource && user.id) {\n      const ownerPermission = `${resource}.owner.${user.id}`;\n      if (hasPermission(ownerPermission)) {\n        return true;\n      }\n    }\n\n    return false;\n  }, [user, permissions, hasRole, hasPermission]);\n\n  // 资源访问检查\n  const canAccessResource = useMemo(() => (resource: string, action: string): boolean => {\n    const permission = `${resource}.${action}`;\n    return hasHierarchicalPermission(permission, resource);\n  }, [hasHierarchicalPermission]);\n\n  // 获取权限信息\n  const getUserPermissions = useMemo(() => (): string[] => {\n    return permissions;\n  }, [permissions]);\n\n  const getUserRoles = useMemo(() => (): Role[] => {\n    return user?.roles || [];\n  }, [user]);\n\n  const getPermissionLevel = useMemo(() => (resource: string): PermissionLevel => {\n    if (checkResourcePermission(resource, PermissionLevel.ADMIN)) {\n      return PermissionLevel.ADMIN;\n    }\n    if (checkResourcePermission(resource, PermissionLevel.DELETE)) {\n      return PermissionLevel.DELETE;\n    }\n    if (checkResourcePermission(resource, PermissionLevel.WRITE)) {\n      return PermissionLevel.WRITE;\n    }\n    if (checkResourcePermission(resource, PermissionLevel.READ)) {\n      return PermissionLevel.READ;\n    }\n    return PermissionLevel.NONE;\n  }, [checkResourcePermission]);\n\n  // 权限调试\n  const debugPermissions = useMemo(() => (): void => {\n    if (!enableDebug) return;\n\n    console.group('🔐 权限调试信息');\n    console.log('当前用户:', user);\n    console.log('用户角色:', user?.roles);\n    console.log('用户权限:', permissions);\n    console.log('权限缓存:', permissionCache);\n    console.log('最后更新:', lastUpdated);\n    console.groupEnd();\n  }, [user, permissions, lastUpdated, enableDebug]);\n\n  const getPermissionTrace = useMemo(() => (permission: string): string[] => {\n    const trace: string[] = [];\n\n    if (!user) {\n      trace.push('❌ 用户未登录');\n      return trace;\n    }\n\n    trace.push(`👤 当前用户: ${user.username} (${user.email})`);\n    \n    if (user.roles.length > 0) {\n      trace.push(`🏷️ 用户角色: ${user.roles.map(r => r.name).join(', ')}`);\n    }\n\n    if (hasPermission(permission)) {\n      trace.push(`✅ 拥有权限: ${permission}`);\n    } else {\n      trace.push(`❌ 缺少权限: ${permission}`);\n      \n      // 检查相关权限\n      const relatedPermissions = permissions.filter(p => \n        p.includes(permission.split('.')[0]) || permission.includes(p.split('.')[0])\n      );\n      \n      if (relatedPermissions.length > 0) {\n        trace.push(`🔍 相关权限: ${relatedPermissions.join(', ')}`);\n      }\n    }\n\n    return trace;\n  }, [user, permissions, hasPermission]);\n\n  // 权限刷新\n  const refreshPermissions = useMemo(() => async (): Promise<void> => {\n    if (!user) return;\n\n    setIsLoading(true);\n    try {\n      // 这里应该调用API刷新权限\n      // const response = await api.getUserPermissions(user.id);\n      // setPermissions(response.permissions);\n      \n      // 清除缓存\n      permissionCache.clear();\n      setLastUpdated(new Date());\n    } catch (error) {\n      console.error('刷新权限失败:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [user]);\n\n  const clearPermissionCache = useMemo(() => (): void => {\n    permissionCache.clear();\n    if (enableDebug) {\n      console.log('🗑️ 权限缓存已清除');\n    }\n  }, [enableDebug]);\n\n  // 权限变更监听\n  useEffect(() => {\n    if (user && permissions.length > 0) {\n      setLastUpdated(new Date());\n    }\n  }, [user, permissions]);\n\n  // 权限拒绝回调\n  useEffect(() => {\n    if (onPermissionDenied && user) {\n      // 可以在这里监听权限检查失败事件\n    }\n  }, [onPermissionDenied, user]);\n\n  const contextValue: PermissionContextState = {\n    // 基础权限检查\n    hasPermission,\n    hasAllPermissions,\n    hasAnyPermission,\n    \n    // 角色检查\n    hasRole,\n    hasAllRoles,\n    hasAnyRole,\n    \n    // 高级权限检查\n    checkPermission,\n    checkResourcePermission,\n    \n    // 层级权限检查\n    hasHierarchicalPermission,\n    canAccessResource,\n    \n    // 权限信息\n    getUserPermissions,\n    getUserRoles,\n    getPermissionLevel,\n    \n    // 权限调试\n    debugPermissions,\n    getPermissionTrace,\n    \n    // 权限缓存\n    refreshPermissions,\n    clearPermissionCache,\n    \n    // 权限状态\n    isLoading,\n    isAuthenticated: !!user,\n    user,\n    lastUpdated\n  };\n\n  if (!user && fallback) {\n    return <>{fallback}</>;\n  }\n\n  return (\n    <PermissionContext.Provider value={contextValue}>\n      {children}\n    </PermissionContext.Provider>\n  );\n};\n\n// 权限Hook\nexport const usePermissionContext = (): PermissionContextState => {\n  const context = useContext(PermissionContext);\n  \n  if (!context) {\n    throw new Error('usePermissionContext must be used within a PermissionProvider');\n  }\n  \n  return context;\n};\n\n// 便捷权限Hooks\nexport const useCanAccess = (permission: string | string[]) => {\n  const { hasPermission } = usePermissionContext();\n  return hasPermission(permission);\n};\n\nexport const useCanAccessAll = (permissions: string[]) => {\n  const { hasAllPermissions } = usePermissionContext();\n  return hasAllPermissions(permissions);\n};\n\nexport const useCanAccessAny = (permissions: string[]) => {\n  const { hasAnyPermission } = usePermissionContext();\n  return hasAnyPermission(permissions);\n};\n\nexport const useHasRoleAccess = (role: string | string[]) => {\n  const { hasRole } = usePermissionContext();\n  return hasRole(role);\n};\n\nexport const useResourceAccess = (resource: string, level: PermissionLevel = PermissionLevel.READ) => {\n  const { checkResourcePermission } = usePermissionContext();\n  return checkResourcePermission(resource, level);\n};\n\nexport const usePermissionCheck = (permission: string | string[]) => {\n  const { checkPermission } = usePermissionContext();\n  return checkPermission(permission);\n};\n\n// 错误边界组件\nexport class PermissionErrorBoundary extends React.Component<\n  { children: React.ReactNode; fallback?: React.ReactNode },\n  { hasError: boolean }\n> {\n  constructor(props: { children: React.ReactNode; fallback?: React.ReactNode }) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(): { hasError: boolean } {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('权限系统错误:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return this.props.fallback || (\n        <div className=\"p-4 text-center text-red-600\">\n          <h3>权限系统错误</h3>\n          <p>权限检查出现异常，请刷新页面重试。</p>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default PermissionContext;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/hooks/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1458,1461],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1458,1461],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1468,1471],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1468,1471],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1637,1640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1637,1640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2395,2398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2395,2398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2405,2408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2405,2408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2574,2577],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2574,2577],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":133,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3359,3362],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3359,3362],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":138,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3574,3577],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3574,3577],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'pagination'. Either include it or remove the dependency array. Mutable values like 'pagination.current' aren't valid dependencies because mutating them doesn't re-render the component.","line":155,"column":7,"nodeType":"ArrayExpression","endLine":155,"endColumn":86,"suggestions":[{"desc":"Update the dependencies array to be: [pagination, debouncedSearchText, sorter?.field, sorter?.order, filters]","fix":{"range":[4129,4208],"text":"[pagination, debouncedSearchText, sorter?.field, sorter?.order, filters]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4477,4480],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4477,4480],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4497,4500],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4497,4500],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4516,4519],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4516,4519],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":234,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5977,5980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5977,5980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":234,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5986,5989],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5986,5989],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'options?.manual' and 'run'. Either include them or remove the dependency array.","line":282,"column":6,"nodeType":"ArrayExpression","endLine":282,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [options?.manual, run]","fix":{"range":[7128,7130],"text":"[options?.manual, run]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":293,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":293,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7263,7266],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7263,7266],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":298,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":298,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7564,7567],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7564,7567],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'setTouched'. Either include it or remove the dependency array.","line":311,"column":6,"nodeType":"ArrayExpression","endLine":311,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [setTouched]","fix":{"range":[8008,8010],"text":"[setTouched]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'setTouched'. Either include it or remove the dependency array.","line":317,"column":6,"nodeType":"ArrayExpression","endLine":317,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [initialValues, setTouched]","fix":{"range":[8195,8210],"text":"[initialValues, setTouched]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'options'. Either include it or remove the dependency array. If 'setTime' needs the current value of 'options', you can also switch to useReducer instead of useState and read 'options' in the reducer.","line":447,"column":6,"nodeType":"ArrayExpression","endLine":447,"endColumn":39,"suggestions":[{"desc":"Update the dependencies array to be: [isRunning, time, options.onEnd, options]","fix":{"range":[11186,11219],"text":"[isRunning, time, options.onEnd, options]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback, useRef, useMemo } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { message } from 'antd';\nimport { debounce, throttle, storageUtils } from '@/utils';\nimport type { QueryParams, PaginatedResponse, ApiError } from '@/types';\n\n// 本地存储Hook\nexport const useLocalStorage = <T>(key: string, defaultValue: T) => {\n  const [value, setValue] = useState<T>(() => {\n    const stored = storageUtils.get(key);\n    return stored !== null ? stored : defaultValue;\n  });\n\n  const setStoredValue = useCallback((newValue: T | ((prev: T) => T)) => {\n    setValue(prevValue => {\n      const valueToStore = typeof newValue === 'function'\n        ? (newValue as (prev: T) => T)(prevValue)\n        : newValue;\n\n      storageUtils.set(key, valueToStore);\n      return valueToStore;\n    });\n  }, [key]);\n\n  const removeValue = useCallback(() => {\n    storageUtils.remove(key);\n    setValue(defaultValue);\n  }, [key, defaultValue]);\n\n  return [value, setStoredValue, removeValue] as const;\n};\n\n// 防抖Hook\nexport const useDebounce = <T>(value: T, delay: number): T => {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n};\n\n// 防抖回调Hook\nexport const useDebouncedCallback = <T extends (...args: any[]) => any>(\n  callback: T,\n  delay: number\n): T => {\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n\n  return useMemo(\n    () => debounce((...args: any[]) => callbackRef.current(...args), delay) as T,\n    [delay]\n  );\n};\n\n// 节流Hook\nexport const useThrottle = <T>(value: T, delay: number): T => {\n  const [throttledValue, setThrottledValue] = useState<T>(value);\n  const lastUpdated = useRef<number>(0);\n\n  useEffect(() => {\n    const now = Date.now();\n    if (now - lastUpdated.current >= delay) {\n      setThrottledValue(value);\n      lastUpdated.current = now;\n    } else {\n      const timer = setTimeout(() => {\n        setThrottledValue(value);\n        lastUpdated.current = Date.now();\n      }, delay - (now - lastUpdated.current));\n\n      return () => clearTimeout(timer);\n    }\n  }, [value, delay]);\n\n  return throttledValue;\n};\n\n// 节流回调Hook\nexport const useThrottledCallback = <T extends (...args: any[]) => any>(\n  callback: T,\n  delay: number\n): T => {\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n\n  return useMemo(\n    () => throttle((...args: any[]) => callbackRef.current(...args), delay) as T,\n    [delay]\n  );\n};\n\n// 分页Hook\nexport const usePagination = (\n  initialPage: number = 1,\n  initialPageSize: number = 10\n) => {\n  const [current, setCurrent] = useState(initialPage);\n  const [pageSize, setPageSize] = useState(initialPageSize);\n\n  const reset = useCallback(() => {\n    setCurrent(initialPage);\n    setPageSize(initialPageSize);\n  }, [initialPage, initialPageSize]);\n\n  const onChange = useCallback((page: number, size?: number) => {\n    setCurrent(page);\n    if (size && size !== pageSize) {\n      setPageSize(size);\n      setCurrent(1); // 重置到第一页\n    }\n  }, [pageSize]);\n\n  return {\n    current,\n    pageSize,\n    onChange,\n    reset,\n    setCurrent,\n    setPageSize,\n  };\n};\n\n// 表格Hook\nexport const useTable = <T = any>(\n  queryFn: (params: QueryParams) => Promise<PaginatedResponse<T>>,\n  options?: {\n    defaultPageSize?: number;\n    defaultSorter?: { field: string; order: 'asc' | 'desc' };\n    defaultFilters?: Record<string, any>;\n  }\n) => {\n  const [filters, setFilters] = useState(options?.defaultFilters || {});\n  const [sorter, setSorter] = useState(options?.defaultSorter);\n  const [searchText, setSearchText] = useState('');\n\n  const pagination = usePagination(1, options?.defaultPageSize || 10);\n  const debouncedSearchText = useDebounce(searchText, 300);\n\n  const queryParams = useMemo(() => ({\n    page: pagination.current,\n    pageSize: pagination.pageSize,\n    search: debouncedSearchText,\n    sortBy: sorter?.field,\n    sortOrder: sorter?.order,\n    ...filters,\n  }), [pagination.current, pagination.pageSize, debouncedSearchText, sorter, filters]);\n\n  const {\n    data,\n    isLoading,\n    error,\n    refetch,\n    isFetching,\n  } = useQuery({\n    queryKey: ['table', queryParams],\n    queryFn: () => queryFn(queryParams),\n    keepPreviousData: true,\n  });\n\n  const handleTableChange = useCallback((paginationConfig: any, filtersConfig: any, sorterConfig: any) => {\n    // 处理分页\n    if (paginationConfig) {\n      pagination.onChange(paginationConfig.current, paginationConfig.pageSize);\n    }\n\n    // 处理筛选\n    if (filtersConfig) {\n      setFilters(filtersConfig);\n    }\n\n    // 处理排序\n    if (sorterConfig) {\n      if (sorterConfig.field && sorterConfig.order) {\n        setSorter({\n          field: sorterConfig.field,\n          order: sorterConfig.order === 'ascend' ? 'asc' : 'desc',\n        });\n      } else {\n        setSorter(undefined);\n      }\n    }\n  }, [pagination]);\n\n  const resetFilters = useCallback(() => {\n    setFilters(options?.defaultFilters || {});\n    setSorter(options?.defaultSorter);\n    setSearchText('');\n    pagination.reset();\n  }, [options?.defaultFilters, options?.defaultSorter, pagination]);\n\n  return {\n    // 数据\n    dataSource: data?.data || [],\n    pagination: {\n      current: pagination.current,\n      pageSize: pagination.pageSize,\n      total: data?.pagination.total || 0,\n      showSizeChanger: true,\n      showQuickJumper: true,\n      showTotal: (total: number, range: [number, number]) =>\n        `第 ${range[0]}-${range[1]} 条，共 ${total} 条`,\n      onChange: pagination.onChange,\n    },\n    loading: isLoading || isFetching,\n    error,\n\n    // 搜索\n    searchText,\n    setSearchText,\n\n    // 筛选和排序\n    filters,\n    setFilters,\n    sorter,\n    setSorter,\n\n    // 事件处理\n    handleTableChange,\n    resetFilters,\n    refresh: refetch,\n  };\n};\n\n// 通用请求Hook\nexport const useRequest = <T = any, P = any>(\n  requestFn: (params?: P) => Promise<T>,\n  options?: {\n    manual?: boolean;\n    onSuccess?: (data: T) => void;\n    onError?: (error: ApiError) => void;\n    loadingMessage?: string;\n    successMessage?: string;\n  }\n) => {\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState<T | null>(null);\n  const [error, setError] = useState<ApiError | null>(null);\n\n  const run = useCallback(async (params?: P) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      if (options?.loadingMessage) {\n        message.loading(options.loadingMessage);\n      }\n\n      const result = await requestFn(params);\n      setData(result);\n\n      if (options?.successMessage) {\n        message.success(options.successMessage);\n      }\n\n      options?.onSuccess?.(result);\n      return result;\n    } catch (err) {\n      const apiError = err as ApiError;\n      setError(apiError);\n      options?.onError?.(apiError);\n      throw apiError;\n    } finally {\n      setLoading(false);\n      message.destroy();\n    }\n  }, [requestFn, options]);\n\n  // 自动执行\n  useEffect(() => {\n    if (!options?.manual) {\n      run();\n    }\n  }, []);\n\n  return {\n    data,\n    loading,\n    error,\n    run,\n  };\n};\n\n// 表单状态Hook\nexport const useFormState = <T extends Record<string, any>>(initialValues: T) => {\n  const [values, setValues] = useState<T>(initialValues);\n  const [errors, setErrors] = useState<Partial<Record<keyof T, string>>>({});\n  const [touched, setTouched] = useState<Partial<Record<keyof T, boolean>>>({});\n\n  const setValue = useCallback((name: keyof T, value: any) => {\n    setValues(prev => ({ ...prev, [name]: value }));\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: undefined }));\n    }\n  }, [errors]);\n\n  const setError = useCallback((name: keyof T, error: string) => {\n    setErrors(prev => ({ ...prev, [name]: error }));\n  }, []);\n\n  const setTouched = useCallback((name: keyof T, isTouched: boolean = true) => {\n    setTouched(prev => ({ ...prev, [name]: isTouched }));\n  }, []);\n\n  const reset = useCallback((newValues?: Partial<T>) => {\n    setValues(newValues ? { ...initialValues, ...newValues } : initialValues);\n    setErrors({});\n    setTouched({});\n  }, [initialValues]);\n\n  const isValid = useMemo(() => {\n    return Object.keys(errors).length === 0;\n  }, [errors]);\n\n  const isDirty = useMemo(() => {\n    return JSON.stringify(values) !== JSON.stringify(initialValues);\n  }, [values, initialValues]);\n\n  return {\n    values,\n    errors,\n    touched,\n    setValue,\n    setError,\n    setTouched,\n    reset,\n    isValid,\n    isDirty,\n  };\n};\n\n// 权限Hook\nexport const usePermissions = (permissions: string[]) => {\n  const userPermissions = useState<string[]>([]); // 从全局状态获取\n\n  return useMemo(() => {\n    if (!permissions.length) return true;\n    return permissions.some(permission => userPermissions.includes(permission));\n  }, [permissions, userPermissions]);\n};\n\n// 响应式Hook\nexport const useResponsive = () => {\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const isMobile = windowSize.width < 768;\n  const isTablet = windowSize.width >= 768 && windowSize.width < 1024;\n  const isDesktop = windowSize.width >= 1024;\n\n  return {\n    windowSize,\n    isMobile,\n    isTablet,\n    isDesktop,\n  };\n};\n\n// 复制到剪贴板Hook\nexport const useClipboard = () => {\n  const [copied, setCopied] = useState(false);\n\n  const copy = useCallback(async (text: string) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopied(true);\n      message.success('已复制到剪贴板');\n      setTimeout(() => setCopied(false), 2000);\n    } catch {\n      message.error('复制失败');\n    }\n  }, []);\n\n  return { copied, copy };\n};\n\n// 计时器Hook\nexport const useTimer = (initialTime: number, options?: {\n  onEnd?: () => void;\n  autoStart?: boolean;\n}) => {\n  const [time, setTime] = useState(initialTime);\n  const [isRunning, setIsRunning] = useState(options?.autoStart || false);\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  const start = useCallback(() => {\n    if (!isRunning) {\n      setIsRunning(true);\n    }\n  }, [isRunning]);\n\n  const pause = useCallback(() => {\n    setIsRunning(false);\n  }, []);\n\n  const reset = useCallback(() => {\n    setTime(initialTime);\n    setIsRunning(false);\n  }, [initialTime]);\n\n  useEffect(() => {\n    if (isRunning && time > 0) {\n      intervalRef.current = setInterval(() => {\n        setTime(prevTime => {\n          if (prevTime <= 1) {\n            setIsRunning(false);\n            options?.onEnd?.();\n            return 0;\n          }\n          return prevTime - 1;\n        });\n      }, 1000);\n    } else {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n    }\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [isRunning, time, options?.onEnd]);\n\n  return {\n    time,\n    isRunning,\n    start,\n    pause,\n    reset,\n  };\n};\n\n// Export additional specialized hooks\nexport { useWebSocket } from './useWebSocket';\nexport type { WebSocketMessage, UseWebSocketOptions, UseWebSocketReturn } from './useWebSocket';\n\nexport { default as usePermissions, PermissionLevel } from './usePermissions';\nexport type { Permission, PermissionCheckOptions } from './usePermissions';\n\nexport { default as useDashboard } from './useDashboard';\nexport type {\n  DashboardStats,\n  SystemMetrics,\n  RecentActivity,\n  DashboardFilters,\n} from './useDashboard';\n\nexport { default as useDataTable } from './useDataTable';\nexport type {\n  DataTableOptions,\n  FilterConfig,\n  SortConfig,\n  PaginationConfig,\n  UseDataTableReturn,\n} from './useDataTable';","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/hooks/useDashboard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/hooks/useDataTable.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[372,375],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[372,375],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[512,515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[512,515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[583,586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[583,586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1058,1061],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1058,1061],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":256,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":256,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7072,7075],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7072,7075],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":296,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":296,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8197,8200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8197,8200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has an unnecessary dependency: 'data'. Either exclude it or remove the dependency array.","line":408,"column":6,"nodeType":"ArrayExpression","endLine":408,"endColumn":59,"suggestions":[{"desc":"Update the dependencies array to be: [searchValue, filters, sortConfig, processData]","fix":{"range":[11109,11162],"text":"[searchValue, filters, sortConfig, processData]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'options.rowSelection?.onChange'. Either include it or remove the dependency array.","line":423,"column":6,"nodeType":"ArrayExpression","endLine":423,"endColumn":38,"suggestions":[{"desc":"Update the dependencies array to be: [options.rowSelection?.onChange, processedData, selectedRowKeys]","fix":{"range":[11580,11612],"text":"[options.rowSelection?.onChange, processedData, selectedRowKeys]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo, useCallback, useRef, useEffect, useState } from 'react';\nimport { message } from 'antd';\nimport { useDebouncedCallback } from 'use-debounce';\nimport type { DataTableColumn } from '../components/tables/DataTable';\n\n// 排序配置\nexport interface SortConfig {\n  field: string;\n  order: 'asc' | 'desc';\n}\n\n// 过滤配置\nexport interface FilterConfig {\n  [key: string]: any;\n}\n\n// 选择配置\nexport interface SelectionConfig {\n  selectedRowKeys: React.Key[];\n  onChange: (selectedRowKeys: React.Key[], selectedRows: any[]) => void;\n}\n\n// Hook 参数\nexport interface UseDataTableOptions<T = any> {\n  data: T[];\n  columns: DataTableColumn<T>[];\n  searchValue?: string;\n  filters?: FilterConfig;\n  sortConfig?: SortConfig | null;\n  rowSelection?: SelectionConfig;\n  \n  // 性能优化选项\n  enableVirtualization?: boolean;\n  virtualizationThreshold?: number;\n  debounceMs?: number;\n  \n  // 缓存选项\n  enableCache?: boolean;\n  cacheKey?: string;\n  \n  // 导出选项\n  exportFormat?: 'csv' | 'xlsx' | 'json';\n  exportFileName?: string;\n}\n\n// Hook 返回值\nexport interface UseDataTableResult<T = any> {\n  // 处理后的数据\n  processedData: T[];\n  originalData: T[];\n  \n  // 列配置\n  visibleColumns: DataTableColumn<T>[];\n  allColumns: DataTableColumn<T>[];\n  \n  // 选择状态\n  selectedRowKeys: React.Key[];\n  selectedRows: T[];\n  \n  // 状态标识\n  isProcessing: boolean;\n  isEmpty: boolean;\n  \n  // 统计信息\n  totalCount: number;\n  filteredCount: number;\n  selectedCount: number;\n  \n  // 数据操作方法\n  searchData: (value: string) => void;\n  filterData: (filters: FilterConfig) => void;\n  sortData: (field: string, order: 'asc' | 'desc' | null) => void;\n  \n  // 列操作方法\n  toggleColumnVisibility: (columnKey: string) => void;\n  resetColumns: () => void;\n  reorderColumns: (fromIndex: number, toIndex: number) => void;\n  \n  // 选择操作方法\n  selectRow: (rowKey: React.Key) => void;\n  selectRows: (rowKeys: React.Key[]) => void;\n  selectAll: () => void;\n  clearSelection: () => void;\n  toggleSelection: (rowKey: React.Key) => void;\n  \n  // 数据导出方法\n  exportData: (data?: T[], columns?: DataTableColumn<T>[]) => void;\n  exportSelected: () => void;\n  exportFiltered: () => void;\n  exportAll: () => void;\n  \n  // 实用工具方法\n  getRowByKey: (key: React.Key) => T | undefined;\n  getSelectedData: () => T[];\n  refreshData: () => void;\n  \n  // 性能监控\n  performance: {\n    searchTime: number;\n    filterTime: number;\n    sortTime: number;\n    renderTime: number;\n  };\n}\n\n// 数据处理工具函数\nconst DataProcessingUtils = {\n  // 搜索过滤\n  searchFilter: <T>(data: T[], searchValue: string, columns: DataTableColumn<T>[]): T[] => {\n    if (!searchValue.trim()) return data;\n    \n    const searchLower = searchValue.toLowerCase();\n    const searchableColumns = columns.filter(col => col.searchable !== false);\n    \n    return data.filter(item => {\n      return searchableColumns.some(col => {\n        const value = item[col.dataIndex || col.key];\n        if (value == null) return false;\n        \n        return String(value).toLowerCase().includes(searchLower);\n      });\n    });\n  },\n\n  // 高级过滤\n  advancedFilter: <T>(data: T[], filters: FilterConfig): T[] => {\n    if (!filters || Object.keys(filters).length === 0) return data;\n    \n    return data.filter(item => {\n      return Object.entries(filters).every(([field, filterValue]) => {\n        if (filterValue == null || filterValue === '') return true;\n        \n        const itemValue = item[field];\n        \n        // 数组类型过滤（多选）\n        if (Array.isArray(filterValue)) {\n          return filterValue.some(val => {\n            if (Array.isArray(itemValue)) {\n              return itemValue.includes(val);\n            }\n            return itemValue === val;\n          });\n        }\n        \n        // 对象类型过滤（范围、日期等）\n        if (typeof filterValue === 'object') {\n          const { min, max, start, end } = filterValue;\n          \n          // 数值范围过滤\n          if (min != null || max != null) {\n            const numValue = Number(itemValue);\n            if (min != null && numValue < min) return false;\n            if (max != null && numValue > max) return false;\n            return true;\n          }\n          \n          // 日期范围过滤\n          if (start || end) {\n            const dateValue = new Date(itemValue);\n            if (start && dateValue < new Date(start)) return false;\n            if (end && dateValue > new Date(end)) return false;\n            return true;\n          }\n        }\n        \n        // 字符串匹配\n        if (typeof filterValue === 'string') {\n          return String(itemValue).toLowerCase().includes(filterValue.toLowerCase());\n        }\n        \n        // 精确匹配\n        return itemValue === filterValue;\n      });\n    });\n  },\n\n  // 排序\n  sort: <T>(data: T[], sortConfig: SortConfig | null): T[] => {\n    if (!sortConfig) return data;\n    \n    const { field, order } = sortConfig;\n    \n    return [...data].sort((a, b) => {\n      const aVal = a[field];\n      const bVal = b[field];\n      \n      // 处理 null/undefined 值\n      if (aVal == null && bVal == null) return 0;\n      if (aVal == null) return order === 'asc' ? -1 : 1;\n      if (bVal == null) return order === 'asc' ? 1 : -1;\n      \n      // 数值比较\n      if (typeof aVal === 'number' && typeof bVal === 'number') {\n        return order === 'asc' ? aVal - bVal : bVal - aVal;\n      }\n      \n      // 日期比较\n      if (aVal instanceof Date && bVal instanceof Date) {\n        return order === 'asc' \n          ? aVal.getTime() - bVal.getTime()\n          : bVal.getTime() - aVal.getTime();\n      }\n      \n      // 字符串比较\n      const aStr = String(aVal).toLowerCase();\n      const bStr = String(bVal).toLowerCase();\n      \n      if (aStr < bStr) return order === 'asc' ? -1 : 1;\n      if (aStr > bStr) return order === 'asc' ? 1 : -1;\n      return 0;\n    });\n  },\n};\n\n// 导出工具函数\nconst ExportUtils = {\n  // 导出为 CSV\n  exportToCsv: <T>(data: T[], columns: DataTableColumn<T>[], filename: string) => {\n    const exportColumns = columns.filter(col => col.exportable !== false);\n    \n    // 创建 CSV 头部\n    const headers = exportColumns.map(col => col.title).join(',');\n    \n    // 创建 CSV 行\n    const rows = data.map(item => {\n      return exportColumns.map(col => {\n        const value = item[col.dataIndex || col.key];\n        // 处理包含逗号或换行的值\n        if (typeof value === 'string' && (value.includes(',') || value.includes('\\n'))) {\n          return `\"${value.replace(/\"/g, '\"\"')}\"`;\n        }\n        return value ?? '';\n      }).join(',');\n    });\n    \n    const csvContent = [headers, ...rows].join('\\n');\n    \n    // 下载文件\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    \n    link.setAttribute('href', url);\n    link.setAttribute('download', `${filename}.csv`);\n    link.style.visibility = 'hidden';\n    \n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  },\n\n  // 导出为 JSON\n  exportToJson: <T>(data: T[], columns: DataTableColumn<T>[], filename: string) => {\n    const exportColumns = columns.filter(col => col.exportable !== false);\n    const exportData = data.map(item => {\n      const exportItem: any = {};\n      exportColumns.forEach(col => {\n        exportItem[col.dataIndex || col.key] = item[col.dataIndex || col.key];\n      });\n      return exportItem;\n    });\n    \n    const jsonContent = JSON.stringify(exportData, null, 2);\n    const blob = new Blob([jsonContent], { type: 'application/json' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    \n    link.setAttribute('href', url);\n    link.setAttribute('download', `${filename}.json`);\n    link.style.visibility = 'hidden';\n    \n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  },\n};\n\n// 性能监控工具\nclass PerformanceMonitor {\n  private times: { [key: string]: number } = {};\n  \n  start(operation: string) {\n    this.times[operation] = performance.now();\n  }\n  \n  end(operation: string): number {\n    const startTime = this.times[operation];\n    if (!startTime) return 0;\n    \n    const duration = performance.now() - startTime;\n    delete this.times[operation];\n    return Math.round(duration * 100) / 100; // 保留两位小数\n  }\n}\n\nexport const useDataTable = <T extends Record<string, any>>(\n  options: UseDataTableOptions<T>\n): UseDataTableResult<T> => {\n  const {\n    data = [],\n    columns = [],\n    searchValue = '',\n    filters = {},\n    sortConfig = null,\n    rowSelection,\n    debounceMs = 300,\n    enableCache = true,\n    cacheKey = 'default',\n    exportFormat = 'csv',\n    exportFileName = 'table-data',\n  } = options;\n\n  // 状态管理\n  const [internalColumns, setInternalColumns] = useState<DataTableColumn<T>[]>(columns);\n  const [selectedRowKeys, setSelectedRowKeys] = useState<React.Key[]>([]);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [performance, setPerformance] = useState({\n    searchTime: 0,\n    filterTime: 0,\n    sortTime: 0,\n    renderTime: 0,\n  });\n\n  // 性能监控器\n  const performanceMonitor = useRef(new PerformanceMonitor());\n  \n  // 缓存引用\n  const cache = useRef(new Map());\n\n  // 防抖处理\n  const debouncedProcess = useDebouncedCallback(\n    (searchVal: string, filterVal: FilterConfig, sortVal: SortConfig | null) => {\n      processData(searchVal, filterVal, sortVal);\n    },\n    debounceMs\n  );\n\n  // 数据处理核心函数\n  const processData = useCallback((\n    searchVal: string,\n    filterVal: FilterConfig,\n    sortVal: SortConfig | null\n  ) => {\n    const monitor = performanceMonitor.current;\n    setIsProcessing(true);\n\n    try {\n      // 生成缓存键\n      const currentCacheKey = `${cacheKey}-${JSON.stringify({ searchVal, filterVal, sortVal })}`;\n      \n      // 检查缓存\n      if (enableCache && cache.current.has(currentCacheKey)) {\n        const cachedResult = cache.current.get(currentCacheKey);\n        setIsProcessing(false);\n        return cachedResult;\n      }\n\n      let result = [...data];\n\n      // 搜索过滤\n      monitor.start('search');\n      if (searchVal) {\n        result = DataProcessingUtils.searchFilter(result, searchVal, internalColumns);\n      }\n      const searchTime = monitor.end('search');\n\n      // 高级过滤\n      monitor.start('filter');\n      if (filterVal && Object.keys(filterVal).length > 0) {\n        result = DataProcessingUtils.advancedFilter(result, filterVal);\n      }\n      const filterTime = monitor.end('filter');\n\n      // 排序\n      monitor.start('sort');\n      if (sortVal) {\n        result = DataProcessingUtils.sort(result, sortVal);\n      }\n      const sortTime = monitor.end('sort');\n\n      // 更新性能统计\n      setPerformance(prev => ({\n        ...prev,\n        searchTime,\n        filterTime,\n        sortTime,\n      }));\n\n      // 缓存结果\n      if (enableCache) {\n        cache.current.set(currentCacheKey, result);\n        // 限制缓存大小\n        if (cache.current.size > 50) {\n          const firstKey = cache.current.keys().next().value;\n          cache.current.delete(firstKey);\n        }\n      }\n\n      return result;\n    } finally {\n      setIsProcessing(false);\n    }\n  }, [data, internalColumns, cacheKey, enableCache]);\n\n  // 处理后的数据\n  const processedData = useMemo(() => {\n    return processData(searchValue, filters, sortConfig);\n  }, [data, searchValue, filters, sortConfig, processData]);\n\n  // 可见列\n  const visibleColumns = useMemo(() => {\n    return internalColumns.filter(col => !col.hidden);\n  }, [internalColumns]);\n\n  // 选中的行数据\n  const selectedRows = useMemo(() => {\n    return processedData.filter(item => {\n      const key = typeof options.rowSelection?.onChange === 'function' \n        ? item.id || item.key\n        : item.id || item.key;\n      return selectedRowKeys.includes(key);\n    });\n  }, [processedData, selectedRowKeys]);\n\n  // 数据操作方法\n  const searchData = useCallback((value: string) => {\n    debouncedProcess(value, filters, sortConfig);\n  }, [filters, sortConfig, debouncedProcess]);\n\n  const filterData = useCallback((newFilters: FilterConfig) => {\n    debouncedProcess(searchValue, newFilters, sortConfig);\n  }, [searchValue, sortConfig, debouncedProcess]);\n\n  const sortData = useCallback((field: string, order: 'asc' | 'desc' | null) => {\n    const newSortConfig = order ? { field, order } : null;\n    debouncedProcess(searchValue, filters, newSortConfig);\n  }, [searchValue, filters, debouncedProcess]);\n\n  // 列操作方法\n  const toggleColumnVisibility = useCallback((columnKey: string) => {\n    setInternalColumns(prev => \n      prev.map(col => \n        col.key === columnKey ? { ...col, hidden: !col.hidden } : col\n      )\n    );\n  }, []);\n\n  const resetColumns = useCallback(() => {\n    setInternalColumns(columns);\n  }, [columns]);\n\n  const reorderColumns = useCallback((fromIndex: number, toIndex: number) => {\n    setInternalColumns(prev => {\n      const newColumns = [...prev];\n      const [movedColumn] = newColumns.splice(fromIndex, 1);\n      newColumns.splice(toIndex, 0, movedColumn);\n      return newColumns;\n    });\n  }, []);\n\n  // 选择操作方法\n  const selectRow = useCallback((rowKey: React.Key) => {\n    const newKeys = [...selectedRowKeys, rowKey];\n    setSelectedRowKeys(newKeys);\n    rowSelection?.onChange(newKeys, selectedRows);\n  }, [selectedRowKeys, selectedRows, rowSelection]);\n\n  const selectRows = useCallback((rowKeys: React.Key[]) => {\n    setSelectedRowKeys(rowKeys);\n    rowSelection?.onChange(rowKeys, selectedRows);\n  }, [selectedRows, rowSelection]);\n\n  const selectAll = useCallback(() => {\n    const allKeys = processedData.map(item => item.id || item.key);\n    setSelectedRowKeys(allKeys);\n    rowSelection?.onChange(allKeys, processedData);\n  }, [processedData, rowSelection]);\n\n  const clearSelection = useCallback(() => {\n    setSelectedRowKeys([]);\n    rowSelection?.onChange([], []);\n  }, [rowSelection]);\n\n  const toggleSelection = useCallback((rowKey: React.Key) => {\n    const newKeys = selectedRowKeys.includes(rowKey)\n      ? selectedRowKeys.filter(key => key !== rowKey)\n      : [...selectedRowKeys, rowKey];\n    setSelectedRowKeys(newKeys);\n    rowSelection?.onChange(newKeys, selectedRows);\n  }, [selectedRowKeys, selectedRows, rowSelection]);\n\n  // 导出方法\n  const exportData = useCallback((\n    exportData: T[] = processedData,\n    exportColumns: DataTableColumn<T>[] = visibleColumns\n  ) => {\n    try {\n      if (exportFormat === 'csv') {\n        ExportUtils.exportToCsv(exportData, exportColumns, exportFileName);\n      } else if (exportFormat === 'json') {\n        ExportUtils.exportToJson(exportData, exportColumns, exportFileName);\n      }\n      message.success(`Successfully exported ${exportData.length} records`);\n    } catch (error) {\n      console.error('Export error:', error);\n      message.error('Failed to export data');\n    }\n  }, [processedData, visibleColumns, exportFormat, exportFileName]);\n\n  const exportSelected = useCallback(() => {\n    exportData(selectedRows);\n  }, [exportData, selectedRows]);\n\n  const exportFiltered = useCallback(() => {\n    exportData(processedData);\n  }, [exportData, processedData]);\n\n  const exportAll = useCallback(() => {\n    exportData(data);\n  }, [exportData, data]);\n\n  // 实用工具方法\n  const getRowByKey = useCallback((key: React.Key) => {\n    return processedData.find(item => (item.id || item.key) === key);\n  }, [processedData]);\n\n  const getSelectedData = useCallback(() => {\n    return selectedRows;\n  }, [selectedRows]);\n\n  const refreshData = useCallback(() => {\n    cache.current.clear();\n    processData(searchValue, filters, sortConfig);\n  }, [searchValue, filters, sortConfig, processData]);\n\n  // 同步外部选择状态\n  useEffect(() => {\n    if (rowSelection?.selectedRowKeys) {\n      setSelectedRowKeys(rowSelection.selectedRowKeys);\n    }\n  }, [rowSelection?.selectedRowKeys]);\n\n  // 同步外部列配置\n  useEffect(() => {\n    setInternalColumns(columns);\n  }, [columns]);\n\n  return {\n    // 处理后的数据\n    processedData,\n    originalData: data,\n    \n    // 列配置\n    visibleColumns,\n    allColumns: internalColumns,\n    \n    // 选择状态\n    selectedRowKeys,\n    selectedRows,\n    \n    // 状态标识\n    isProcessing,\n    isEmpty: data.length === 0,\n    \n    // 统计信息\n    totalCount: data.length,\n    filteredCount: processedData.length,\n    selectedCount: selectedRowKeys.length,\n    \n    // 数据操作方法\n    searchData,\n    filterData,\n    sortData,\n    \n    // 列操作方法\n    toggleColumnVisibility,\n    resetColumns,\n    reorderColumns,\n    \n    // 选择操作方法\n    selectRow,\n    selectRows,\n    selectAll,\n    clearSelection,\n    toggleSelection,\n    \n    // 数据导出方法\n    exportData,\n    exportSelected,\n    exportFiltered,\n    exportAll,\n    \n    // 实用工具方法\n    getRowByKey,\n    getSelectedData,\n    refreshData,\n    \n    // 性能监控\n    performance,\n  };\n};\n\nexport default useDataTable;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/hooks/usePermissions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1599,1602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1599,1602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1655,1658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1655,1658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":286,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":286,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9104,9107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9104,9107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":299,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":299,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9492,9495],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9492,9495],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMemo, useCallback, useRef, useEffect } from 'react';\nimport { usePermissionContext, PermissionLevel } from '@/contexts/PermissionContext';\nimport { useAdminStore } from '@/stores/adminStore';\nimport type { User, Role } from '@/types';\n\n// 权限检查选项\nexport interface PermissionCheckOptions {\n  strict?: boolean; // 严格模式，所有权限都必须满足\n  fallback?: boolean; // 回退值，当权限检查失败时返回的默认值\n  cache?: boolean; // 是否缓存结果\n  onDenied?: (permission: string, reason: string) => void; // 权限拒绝回调\n  logAccess?: boolean; // 是否记录访问日志\n}\n\n// 批量权限检查结果\nexport interface BatchPermissionResult {\n  hasAll: boolean;\n  hasAny: boolean;\n  granted: string[];\n  denied: string[];\n  details: Record<string, boolean>;\n}\n\n// 权限Hook返回类型\nexport interface UsePermissionsReturn {\n  // 基础权限检查\n  can: (permission: string | string[], options?: PermissionCheckOptions) => boolean;\n  cannot: (permission: string | string[], options?: PermissionCheckOptions) => boolean;\n  canAll: (permissions: string[], options?: PermissionCheckOptions) => boolean;\n  canAny: (permissions: string[], options?: PermissionCheckOptions) => boolean;\n  \n  // 角色检查\n  hasRole: (role: string | string[]) => boolean;\n  hasAnyRole: (roles: string[]) => boolean;\n  hasAllRoles: (roles: string[]) => boolean;\n  \n  // 资源权限检查\n  canRead: (resource: string) => boolean;\n  canWrite: (resource: string) => boolean;\n  canDelete: (resource: string) => boolean;\n  canAdmin: (resource: string) => boolean;\n  getResourceLevel: (resource: string) => PermissionLevel;\n  \n  // 高级权限检查\n  canAccess: (resource: string, action: string) => boolean;\n  canModify: (resource: string, data?: any) => boolean;\n  canCreate: (resource: string, data?: any) => boolean;\n  \n  // 批量权限检查\n  checkBatch: (permissions: string[]) => BatchPermissionResult;\n  checkResources: (resources: string[], level: PermissionLevel) => Record<string, boolean>;\n  checkResourcePermission: (resource: string, level: PermissionLevel) => boolean;\n  \n  // 条件权限检查\n  canIf: (condition: boolean, permission: string | string[]) => boolean;\n  canWhen: (predicate: () => boolean, permission: string | string[]) => boolean;\n  \n  // 权限信息\n  permissions: string[];\n  roles: Role[];\n  user: User | null;\n  isAuthenticated: boolean;\n  \n  // 调试和分析\n  debug: () => void;\n  trace: (permission: string) => string[];\n  analyze: () => PermissionAnalysis;\n  \n  // 缓存管理\n  clearCache: () => void;\n  refreshPermissions: () => Promise<void>;\n}\n\n// 权限分析结果\nexport interface PermissionAnalysis {\n  totalPermissions: number;\n  categorizedPermissions: Record<string, string[]>;\n  roleHierarchy: string[];\n  missingCriticalPermissions: string[];\n  redundantPermissions: string[];\n  securityRisk: 'low' | 'medium' | 'high';\n}\n\n// 权限缓存\nconst permissionCache = new Map<string, { result: boolean; timestamp: number; ttl: number }>();\n\n// 关键权限列表\nconst CRITICAL_PERMISSIONS = [\n  'system.admin',\n  'user.admin',\n  'role.admin',\n  'permission.admin',\n  'system.settings',\n  'audit.admin'\n];\n\n/**\n * 增强的权限管理Hook\n * 提供全面的权限检查、角色管理和安全控制功能\n */\nexport const usePermissions = (options: PermissionCheckOptions = {}): UsePermissionsReturn => {\n  const context = usePermissionContext();\n  const { user } = useAdminStore();\n  const accessLogRef = useRef<Array<{ permission: string; granted: boolean; timestamp: Date; reason?: string }>>([]);\n\n  const {\n    hasPermission,\n    hasAllPermissions,\n    hasAnyPermission,\n    hasRole: contextHasRole,\n    hasAllRoles: contextHasAllRoles,\n    hasAnyRole: contextHasAnyRole,\n    checkResourcePermission,\n    canAccessResource,\n    getPermissionLevel,\n    getUserPermissions,\n    getUserRoles,\n    debugPermissions,\n    getPermissionTrace,\n    clearPermissionCache,\n    refreshPermissions\n  } = context;\n\n  // 记录访问日志\n  const logAccess = useCallback((permission: string, granted: boolean, reason?: string) => {\n    if (options.logAccess) {\n      accessLogRef.current.push({\n        permission,\n        granted,\n        timestamp: new Date(),\n        reason\n      });\n\n      // 限制日志大小\n      if (accessLogRef.current.length > 1000) {\n        accessLogRef.current = accessLogRef.current.slice(-500);\n      }\n    }\n  }, [options.logAccess]);\n\n  // 缓存键生成\n  const getCacheKey = useCallback((permission: string | string[], userId?: string): string => {\n    const permStr = Array.isArray(permission) ? permission.sort().join(',') : permission;\n    return `${userId || 'anonymous'}:${permStr}`;\n  }, []);\n\n  // 缓存检查\n  const checkCache = useCallback((key: string, ttl: number = 300000): boolean | null => {\n    if (!options.cache) return null;\n\n    const cached = permissionCache.get(key);\n    if (cached && Date.now() - cached.timestamp < (cached.ttl || ttl)) {\n      return cached.result;\n    }\n\n    permissionCache.delete(key);\n    return null;\n  }, [options.cache]);\n\n  // 设置缓存\n  const setCache = useCallback((key: string, result: boolean, ttl: number = 300000) => {\n    if (options.cache) {\n      permissionCache.set(key, {\n        result,\n        timestamp: Date.now(),\n        ttl\n      });\n    }\n  }, [options.cache]);\n\n  // 基础权限检查\n  const can = useCallback((permission: string | string[], checkOptions?: PermissionCheckOptions): boolean => {\n    const opts = { ...options, ...checkOptions };\n    const cacheKey = getCacheKey(permission, user?.id);\n    \n    // 检查缓存\n    const cached = checkCache(cacheKey);\n    if (cached !== null) {\n      logAccess(Array.isArray(permission) ? permission.join(',') : permission, cached, 'cached');\n      return cached;\n    }\n\n    const result = opts.strict \n      ? (Array.isArray(permission) ? hasAllPermissions(permission) : hasPermission(permission))\n      : hasPermission(permission);\n\n    // 设置缓存\n    setCache(cacheKey, result);\n\n    // 记录访问\n    logAccess(Array.isArray(permission) ? permission.join(',') : permission, result);\n\n    // 权限拒绝回调\n    if (!result && (opts.onDenied || options.onDenied)) {\n      const callback = opts.onDenied || options.onDenied;\n      const permStr = Array.isArray(permission) ? permission.join(', ') : permission;\n      callback?.(permStr, `缺少权限: ${permStr}`);\n    }\n\n    return result;\n  }, [hasPermission, hasAllPermissions, options, user?.id, getCacheKey, checkCache, setCache, logAccess]);\n\n  const cannot = useCallback((permission: string | string[], checkOptions?: PermissionCheckOptions): boolean => {\n    return !can(permission, checkOptions);\n  }, [can]);\n\n  const canAll = useCallback((permissions: string[], checkOptions?: PermissionCheckOptions): boolean => {\n    const cacheKey = getCacheKey(permissions, user?.id);\n    const cached = checkCache(cacheKey);\n    \n    if (cached !== null) {\n      logAccess(permissions.join(','), cached, 'cached');\n      return cached;\n    }\n\n    const result = hasAllPermissions(permissions);\n    setCache(cacheKey, result);\n    logAccess(permissions.join(','), result);\n\n    if (!result && checkOptions?.onDenied) {\n      checkOptions.onDenied(permissions.join(', '), '缺少部分权限');\n    }\n\n    return result;\n  }, [hasAllPermissions, user?.id, getCacheKey, checkCache, setCache, logAccess]);\n\n  const canAny = useCallback((permissions: string[], checkOptions?: PermissionCheckOptions): boolean => {\n    const cacheKey = getCacheKey(permissions, user?.id);\n    const cached = checkCache(cacheKey);\n    \n    if (cached !== null) {\n      logAccess(permissions.join(','), cached, 'cached');\n      return cached;\n    }\n\n    const result = hasAnyPermission(permissions);\n    setCache(cacheKey, result);\n    logAccess(permissions.join(','), result);\n\n    if (!result && checkOptions?.onDenied) {\n      checkOptions.onDenied(permissions.join(', '), '不具备任何所需权限');\n    }\n\n    return result;\n  }, [hasAnyPermission, user?.id, getCacheKey, checkCache, setCache, logAccess]);\n\n  // 角色检查\n  const hasRole = useCallback((role: string | string[]): boolean => {\n    return contextHasRole(role);\n  }, [contextHasRole]);\n\n  const hasAnyRole = useCallback((roles: string[]): boolean => {\n    return contextHasAnyRole(roles);\n  }, [contextHasAnyRole]);\n\n  const hasAllRoles = useCallback((roles: string[]): boolean => {\n    return contextHasAllRoles(roles);\n  }, [contextHasAllRoles]);\n\n  // 资源权限检查\n  const canRead = useCallback((resource: string): boolean => {\n    return checkResourcePermission(resource, PermissionLevel.READ);\n  }, [checkResourcePermission]);\n\n  const canWrite = useCallback((resource: string): boolean => {\n    return checkResourcePermission(resource, PermissionLevel.write);\n  }, [checkResourcePermission]);\n\n  const canDelete = useCallback((resource: string): boolean => {\n    return checkResourcePermission(resource, PermissionLevel.delete);\n  }, [checkResourcePermission]);\n\n  const canAdmin = useCallback((resource: string): boolean => {\n    return checkResourcePermission(resource, PermissionLevel.admin);\n  }, [checkResourcePermission]);\n\n  const getResourceLevel = useCallback((resource: string): PermissionLevel => {\n    return getPermissionLevel(resource);\n  }, [getPermissionLevel]);\n\n  // 高级权限检查\n  const canAccess = useCallback((resource: string, action: string): boolean => {\n    return canAccessResource(resource, action);\n  }, [canAccessResource]);\n\n  const canModify = useCallback((resource: string, data?: any): boolean => {\n    // 基础写权限检查\n    if (!canWrite(resource)) return false;\n\n    // 数据所有权检查\n    if (data && data.authorId && user?.id && data.authorId !== user.id) {\n      // 检查是否有管理员权限或特殊权限\n      return canAdmin(resource) || can(`${resource}.modify.others`);\n    }\n\n    return true;\n  }, [canWrite, canAdmin, can, user?.id]);\n\n  const canCreate = useCallback((resource: string, _data?: any): boolean => {\n    // 基础创建权限检查\n    if (!can(`${resource}.create`)) return false;\n\n    // 额外的业务逻辑检查可以在这里添加\n    // 例如：配额检查、时间限制等\n\n    return true;\n  }, [can]);\n\n  // 批量权限检查\n  const checkBatch = useCallback((permissions: string[]): BatchPermissionResult => {\n    const details: Record<string, boolean> = {};\n    const granted: string[] = [];\n    const denied: string[] = [];\n\n    permissions.forEach(permission => {\n      const hasPermissionResult = can(permission);\n      details[permission] = hasPermissionResult;\n      \n      if (hasPermissionResult) {\n        granted.push(permission);\n      } else {\n        denied.push(permission);\n      }\n    });\n\n    return {\n      hasAll: denied.length === 0,\n      hasAny: granted.length > 0,\n      granted,\n      denied,\n      details\n    };\n  }, [can]);\n\n  const checkResources = useCallback((resources: string[], level: PermissionLevel): Record<string, boolean> => {\n    const result: Record<string, boolean> = {};\n    \n    resources.forEach(resource => {\n      result[resource] = checkResourcePermission(resource, level);\n    });\n\n    return result;\n  }, [checkResourcePermission]);\n\n  // 条件权限检查\n  const canIf = useCallback((condition: boolean, permission: string | string[]): boolean => {\n    return condition ? can(permission) : false;\n  }, [can]);\n\n  const canWhen = useCallback((predicate: () => boolean, permission: string | string[]): boolean => {\n    try {\n      return predicate() ? can(permission) : false;\n    } catch (error) {\n      console.error('条件权限检查错误:', error);\n      return false;\n    }\n  }, [can]);\n\n  // 权限信息\n  const permissions = useMemo(() => getUserPermissions(), [getUserPermissions]);\n  const roles = useMemo(() => getUserRoles(), [getUserRoles]);\n  const isAuthenticated = useMemo(() => !!user, [user]);\n\n  // 调试和分析\n  const debug = useCallback(() => {\n    debugPermissions();\n    \n    if (accessLogRef.current.length > 0) {\n      console.group('📊 权限访问日志');\n      console.table(accessLogRef.current.slice(-20)); // 显示最近20条\n      console.groupEnd();\n    }\n  }, [debugPermissions]);\n\n  const trace = useCallback((permission: string): string[] => {\n    return getPermissionTrace(permission);\n  }, [getPermissionTrace]);\n\n  const analyze = useCallback((): PermissionAnalysis => {\n    const categorized: Record<string, string[]> = {};\n    \n    // 按类别分组权限\n    permissions.forEach(permission => {\n      const category = permission.split('.')[0] || 'other';\n      if (!categorized[category]) {\n        categorized[category] = [];\n      }\n      categorized[category].push(permission);\n    });\n\n    // 检查缺失的关键权限\n    const missingCritical = CRITICAL_PERMISSIONS.filter(perm => !permissions.includes(perm));\n\n    // 检查冗余权限（这里简化处理）\n    const redundant: string[] = [];\n\n    // 评估安全风险\n    let securityRisk: 'low' | 'medium' | 'high' = 'low';\n    if (permissions.includes('system.admin') || permissions.includes('*')) {\n      securityRisk = 'high';\n    } else if (missingCritical.length === 0) {\n      securityRisk = 'medium';\n    }\n\n    return {\n      totalPermissions: permissions.length,\n      categorizedPermissions: categorized,\n      roleHierarchy: roles.map(role => role.name).sort(),\n      missingCriticalPermissions: missingCritical,\n      redundantPermissions: redundant,\n      securityRisk\n    };\n  }, [permissions, roles]);\n\n  // 缓存管理\n  const clearCache = useCallback(() => {\n    clearPermissionCache();\n    permissionCache.clear();\n  }, [clearPermissionCache]);\n\n  // 清理访问日志\n  useEffect(() => {\n    const cleanup = () => {\n      // 保留最近100条记录\n      if (accessLogRef.current.length > 100) {\n        accessLogRef.current = accessLogRef.current.slice(-100);\n      }\n    };\n\n    const interval = setInterval(cleanup, 300000); // 5分钟清理一次\n    return () => clearInterval(interval);\n  }, []);\n\n  return {\n    // 基础权限检查\n    can,\n    cannot,\n    canAll,\n    canAny,\n    \n    // 角色检查\n    hasRole,\n    hasAnyRole,\n    hasAllRoles,\n    \n    // 资源权限检查\n    canRead,\n    canWrite,\n    canDelete,\n    canAdmin,\n    getResourceLevel,\n    checkResourcePermission,\n    \n    // 高级权限检查\n    canAccess,\n    canModify,\n    canCreate,\n    \n    // 批量权限检查\n    checkBatch,\n    checkResources,\n    \n    // 条件权限检查\n    canIf,\n    canWhen,\n    \n    // 权限信息\n    permissions,\n    roles,\n    user,\n    isAuthenticated,\n    \n    // 调试和分析\n    debug,\n    trace,\n    analyze,\n    \n    // 缓存管理\n    clearCache,\n    refreshPermissions\n  };\n};\n\n// 便捷Hook - 检查单个权限\nexport const useCanAccess = (permission: string | string[], options?: PermissionCheckOptions) => {\n  const { can } = usePermissions(options);\n  return can(permission, options);\n};\n\n// 便捷Hook - 检查资源权限\nexport const useResourcePermission = (resource: string, level: PermissionLevel = PermissionLevel.read) => {\n  const { checkResources } = usePermissions();\n  return useMemo(() => checkResources([resource], level)[resource], [checkResources, resource, level]);\n};\n\n// 便捷Hook - 角色检查\nexport const useRoleCheck = (role: string | string[]) => {\n  const { hasRole } = usePermissions();\n  return hasRole(role);\n};\n\n// 便捷Hook - 批量权限检查\nexport const useBatchPermissions = (permissions: string[], options?: PermissionCheckOptions) => {\n  const { checkBatch } = usePermissions(options);\n  return useMemo(() => checkBatch(permissions), [checkBatch, permissions]);\n};\n\nexport default usePermissions;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/hooks/useSystemConfig.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1355,1358],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1355,1358],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1467,1470],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1467,1470],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2833,2836],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2833,2836],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":174,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6183,6186],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6183,6186],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":227,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8316,8319],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8316,8319],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback, useEffect } from 'react';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { message } from 'antd';\nimport { systemConfigService } from '../services/systemConfigService';\nimport { SystemConfiguration, ConfigurationDiff, ConfigurationValidationError } from '../types/systemConfig';\n\ninterface UseSystemConfigReturn {\n  // Data state\n  configs: SystemConfiguration[];\n  currentConfig: SystemConfiguration | null;\n  configHistory: SystemConfiguration[];\n  validationErrors: ConfigurationValidationError[];\n\n  // Loading states\n  isLoading: boolean;\n  isSaving: boolean;\n  isValidating: boolean;\n\n  // Operations\n  loadConfigs: () => Promise<void>;\n  saveConfig: (config: Partial<SystemConfiguration>) => Promise<void>;\n  validateConfig: (config: Partial<SystemConfiguration>) => Promise<boolean>;\n  rollbackToVersion: (versionId: string) => Promise<void>;\n  createBackup: (description: string) => Promise<void>;\n  restoreFromBackup: (backupId: string) => Promise<void>;\n  compareVersions: (versionA: string, versionB: string) => Promise<ConfigurationDiff>;\n\n  // Template operations\n  applyTemplate: (templateId: string) => Promise<void>;\n  saveAsTemplate: (name: string, description: string) => Promise<void>;\n\n  // Conflict resolution\n  resolveConflict: (conflictId: string, resolution: any) => Promise<void>;\n\n  // Impact analysis\n  analyzeImpact: (config: Partial<SystemConfiguration>) => Promise<any>;\n}\n\nexport const useSystemConfig = (): UseSystemConfigReturn => {\n  const queryClient = useQueryClient();\n  const [validationErrors, setValidationErrors] = useState<ConfigurationValidationError[]>([]);\n  const [currentConfig, setCurrentConfig] = useState<SystemConfiguration | null>(null);\n\n  // Query for configurations\n  const {\n    data: configs = [],\n    isLoading\n  } = useQuery({\n    queryKey: ['systemConfigs'],\n    queryFn: systemConfigService.getConfigurations,\n    staleTime: 5 * 60 * 1000, // 5 minutes\n  });\n\n  // Query for configuration history\n  const {\n    data: configHistory = []\n  } = useQuery({\n    queryKey: ['configHistory'],\n    queryFn: systemConfigService.getConfigurationHistory,\n    staleTime: 10 * 60 * 1000, // 10 minutes\n  });\n\n  // Load current active configuration\n  useEffect(() => {\n    const activeConfig = configs.find(config => config.isActive);\n    setCurrentConfig(activeConfig || null);\n  }, [configs]);\n\n  // Save configuration mutation\n  const saveConfigMutation = useMutation({\n    mutationFn: systemConfigService.saveConfiguration,\n    onSuccess: (_data) => {\n      queryClient.invalidateQueries({ queryKey: ['systemConfigs'] });\n      queryClient.invalidateQueries({ queryKey: ['configHistory'] });\n      message.success('Configuration saved successfully');\n      setValidationErrors([]);\n    },\n    onError: (error: any) => {\n      console.error('Failed to save configuration:', error);\n      if (error.validationErrors) {\n        setValidationErrors(error.validationErrors);\n      }\n      message.error('Failed to save configuration');\n    },\n  });\n\n  // Validation mutation\n  const validateConfigMutation = useMutation({\n    mutationFn: systemConfigService.validateConfiguration,\n    onSuccess: (data) => {\n      setValidationErrors(data.errors || []);\n      if (data.isValid) {\n        message.success('Configuration is valid');\n      } else {\n        message.warning('Configuration has validation issues');\n      }\n    },\n    onError: (error) => {\n      console.error('Failed to validate configuration:', error);\n      message.error('Failed to validate configuration');\n    },\n  });\n\n  // Rollback mutation\n  const rollbackMutation = useMutation({\n    mutationFn: systemConfigService.rollbackToVersion,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['systemConfigs'] });\n      queryClient.invalidateQueries({ queryKey: ['configHistory'] });\n      message.success('Configuration rolled back successfully');\n    },\n    onError: (error) => {\n      console.error('Failed to rollback configuration:', error);\n      message.error('Failed to rollback configuration');\n    },\n  });\n\n  // Backup creation mutation\n  const createBackupMutation = useMutation({\n    mutationFn: ({ description }: { description: string }) =>\n      systemConfigService.createBackup(description),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['configHistory'] });\n      message.success('Backup created successfully');\n    },\n    onError: (error) => {\n      console.error('Failed to create backup:', error);\n      message.error('Failed to create backup');\n    },\n  });\n\n  // Restore from backup mutation\n  const restoreBackupMutation = useMutation({\n    mutationFn: systemConfigService.restoreFromBackup,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['systemConfigs'] });\n      queryClient.invalidateQueries({ queryKey: ['configHistory'] });\n      message.success('Configuration restored from backup');\n    },\n    onError: (error) => {\n      console.error('Failed to restore from backup:', error);\n      message.error('Failed to restore from backup');\n    },\n  });\n\n  // Apply template mutation\n  const applyTemplateMutation = useMutation({\n    mutationFn: systemConfigService.applyTemplate,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['systemConfigs'] });\n      message.success('Template applied successfully');\n    },\n    onError: (error) => {\n      console.error('Failed to apply template:', error);\n      message.error('Failed to apply template');\n    },\n  });\n\n  // Save as template mutation\n  const saveTemplateMutation = useMutation({\n    mutationFn: ({ name, description }: { name: string; description: string }) =>\n      systemConfigService.saveAsTemplate(name, description, currentConfig!),\n    onSuccess: () => {\n      message.success('Template saved successfully');\n    },\n    onError: (error) => {\n      console.error('Failed to save template:', error);\n      message.error('Failed to save template');\n    },\n  });\n\n  // Conflict resolution mutation\n  const resolveConflictMutation = useMutation({\n    mutationFn: ({ conflictId, resolution }: { conflictId: string; resolution: any }) =>\n      systemConfigService.resolveConflict(conflictId, resolution),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['systemConfigs'] });\n      message.success('Conflict resolved successfully');\n    },\n    onError: (error) => {\n      console.error('Failed to resolve conflict:', error);\n      message.error('Failed to resolve conflict');\n    },\n  });\n\n  // Operations\n  const loadConfigs = useCallback(async () => {\n    await queryClient.invalidateQueries({ queryKey: ['systemConfigs'] });\n  }, [queryClient]);\n\n  const saveConfig = useCallback(async (config: Partial<SystemConfiguration>) => {\n    await saveConfigMutation.mutateAsync(config);\n  }, [saveConfigMutation]);\n\n  const validateConfig = useCallback(async (config: Partial<SystemConfiguration>): Promise<boolean> => {\n    const result = await validateConfigMutation.mutateAsync(config);\n    return result.isValid;\n  }, [validateConfigMutation]);\n\n  const rollbackToVersion = useCallback(async (versionId: string) => {\n    await rollbackMutation.mutateAsync(versionId);\n  }, [rollbackMutation]);\n\n  const createBackup = useCallback(async (description: string) => {\n    await createBackupMutation.mutateAsync({ description });\n  }, [createBackupMutation]);\n\n  const restoreFromBackup = useCallback(async (backupId: string) => {\n    await restoreBackupMutation.mutateAsync(backupId);\n  }, [restoreBackupMutation]);\n\n  const compareVersions = useCallback(async (versionA: string, versionB: string): Promise<ConfigurationDiff> => {\n    return systemConfigService.compareVersions(versionA, versionB);\n  }, []);\n\n  const applyTemplate = useCallback(async (templateId: string) => {\n    await applyTemplateMutation.mutateAsync(templateId);\n  }, [applyTemplateMutation]);\n\n  const saveAsTemplate = useCallback(async (name: string, description: string) => {\n    if (!currentConfig) {\n      throw new Error('No current configuration to save as template');\n    }\n    await saveTemplateMutation.mutateAsync({ name, description });\n  }, [saveTemplateMutation, currentConfig]);\n\n  const resolveConflict = useCallback(async (conflictId: string, resolution: any) => {\n    await resolveConflictMutation.mutateAsync({ conflictId, resolution });\n  }, [resolveConflictMutation]);\n\n  const analyzeImpact = useCallback(async (config: Partial<SystemConfiguration>) => {\n    return systemConfigService.analyzeImpact(config);\n  }, []);\n\n  return {\n    // Data state\n    configs,\n    currentConfig,\n    configHistory,\n    validationErrors,\n\n    // Loading states\n    isLoading,\n    isSaving: saveConfigMutation.isPending,\n    isValidating: validateConfigMutation.isPending,\n\n    // Operations\n    loadConfigs,\n    saveConfig,\n    validateConfig,\n    rollbackToVersion,\n    createBackup,\n    restoreFromBackup,\n    compareVersions,\n\n    // Template operations\n    applyTemplate,\n    saveAsTemplate,\n\n    // Conflict resolution\n    resolveConflict,\n\n    // Impact analysis\n    analyzeImpact,\n  };\n};\n\nexport default useSystemConfig;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/hooks/useWebSocket.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/layouts/AdminLayout.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'handleSidebarCollapse' function makes the dependencies of useEffect Hook (at line 113) change on every render. To fix this, wrap the definition of 'handleSidebarCollapse' in its own useCallback() Hook.","line":71,"column":9,"nodeType":"VariableDeclarator","endLine":74,"endColumn":4,"suggestions":[{"desc":"Wrap the definition of 'handleSidebarCollapse' in its own useCallback() Hook.","fix":{"range":[1953,2056],"text":"useCallback((newCollapsed: boolean) => {\n    setSidebarCollapsed(newCollapsed);\n    setCollapsed(newCollapsed);\n  })"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { Outlet, useNavigate } from 'react-router-dom';\nimport {\n  Layout,\n  theme,\n  ConfigProvider,\n  App,\n  FloatButton,\n} from 'antd';\nimport {\n  CustomerServiceOutlined,\n  QuestionCircleOutlined,\n} from '@ant-design/icons';\nimport { Helmet } from 'react-helmet-async';\n\nimport Sidebar from '@/components/layout/Sidebar';\nimport Header from '@/components/layout/Header';\nimport Breadcrumb from '@/components/layout/Breadcrumb';\nimport { PermissionProvider } from '@/contexts/PermissionContext';\nimport { MessageProvider } from '@/contexts/MessageContext';\nimport { useAdminStore, useUser, useCollapsed, useNotifications, useTheme } from '@/stores/adminStore';\nimport { env } from '@/utils';\n\nconst { Content } = Layout;\n\nconst AdminLayout: React.FC = () => {\n  const navigate = useNavigate();\n  const { token } = theme.useToken();\n\n  const user = useUser();\n\n  // 所有 hooks 必须在条件返回之前调用\n  const collapsed = useCollapsed();\n  const notifications = useNotifications();\n  const currentTheme = useTheme();\n  const { setCollapsed, setTheme, clearNotifications } = useAdminStore();\n  \n  const [isMobile, setIsMobile] = useState(false);\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(collapsed);\n\n  // 检查登录状态，未登录则跳转到登录页\n  useEffect(() => {\n    if (!user) {\n      navigate('/login', { replace: true });\n    }\n  }, [user, navigate]);\n\n  // 响应式检测\n  useEffect(() => {\n    const checkMobile = () => {\n      const mobile = window.innerWidth < 992;\n      setIsMobile(mobile);\n      \n      // 移动端自动收起侧边栏\n      if (mobile && !sidebarCollapsed) {\n        setSidebarCollapsed(true);\n      }\n    };\n\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, [sidebarCollapsed]);\n\n  // 同步collapsed状态\n  useEffect(() => {\n    setSidebarCollapsed(collapsed);\n  }, [collapsed]);\n\n  // 处理侧边栏折叠\n  const handleSidebarCollapse = (newCollapsed: boolean) => {\n    setSidebarCollapsed(newCollapsed);\n    setCollapsed(newCollapsed);\n  };\n\n  // 处理主题切换\n  const handleThemeChange = (isDark: boolean) => {\n    setTheme(isDark ? 'dark' : 'light');\n  };\n\n  // 处理通知相关操作\n  const handleNotificationRead = (notificationId: string) => {\n    // 这里应该调用API标记通知为已读\n    console.log('Mark notification as read:', notificationId);\n  };\n\n  const handleNotificationClear = () => {\n    clearNotifications();\n  };\n\n  // 格式化通知数据\n  const formattedNotifications = notifications.map(notification => ({\n    id: notification.id,\n    title: notification.title,\n    content: notification.content,\n    type: notification.type as 'info' | 'success' | 'warning' | 'error',\n    time: new Date(notification.createdAt).toLocaleString(),\n    read: false, // 这里应该从服务器获取\n  }));\n\n  // 键盘快捷键\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Ctrl/Cmd + B 切换侧边栏\n      if ((e.ctrlKey || e.metaKey) && e.key === 'b') {\n        e.preventDefault();\n        handleSidebarCollapse(!sidebarCollapsed);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [sidebarCollapsed, handleSidebarCollapse]);\n\n  // 如果用户未登录，显示加载状态直到跳转完成\n  if (!user) {\n    return (\n      <div style={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        background: token.colorBgLayout\n      }}>\n        <div style={{ textAlign: 'center' }}>\n          <div style={{ \n            fontSize: 16, \n            color: token.colorTextSecondary,\n            marginBottom: 16 \n          }}>\n            检查登录状态...\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // 主题配置\n  const themeConfig = {\n    algorithm: currentTheme === 'dark' ? theme.darkAlgorithm : theme.defaultAlgorithm,\n    token: {\n      colorPrimary: '#1890ff',\n      borderRadius: 6,\n      wireframe: false,\n      ...(currentTheme === 'dark' && {\n        colorBgContainer: '#1f1f1f',\n        colorBgElevated: '#262626',\n        colorBgLayout: '#141414',\n      }),\n    },\n    components: {\n      Layout: {\n        siderBg: currentTheme === 'dark' ? '#1f1f1f' : '#ffffff',\n        headerBg: currentTheme === 'dark' ? '#1f1f1f' : '#ffffff',\n        bodyBg: currentTheme === 'dark' ? '#141414' : '#f5f5f5',\n      },\n      Menu: {\n        itemBg: 'transparent',\n        itemSelectedBg: currentTheme === 'dark' ? '#1890ff' : '#1890ff',\n        itemSelectedColor: '#ffffff',\n        itemHoverBg: currentTheme === 'dark' ? 'rgba(255, 255, 255, 0.08)' : 'rgba(24, 144, 255, 0.08)',\n        itemHoverColor: currentTheme === 'dark' ? '#ffffff' : '#1890ff',\n      },\n    },\n  };\n\n  return (\n    <ConfigProvider theme={themeConfig}>\n      <App>\n        <>\n          <Helmet>\n            <title>{env.appTitle}</title>\n            <meta name=\"description\" content=\"专业的博客管理后台系统\" />\n            <meta name=\"theme-color\" content={currentTheme === 'dark' ? '#1f1f1f' : '#ffffff'} />\n          </Helmet>\n\n          <Layout className=\"admin-layout\" style={{ minHeight: '100vh' }}>\n            {/* 侧边栏 */}\n            <Sidebar\n              collapsed={sidebarCollapsed}\n              onCollapse={handleSidebarCollapse}\n              className={isMobile ? 'mobile-sidebar' : ''}\n            />\n\n            {/* 移动端遮罩层 */}\n            {isMobile && !sidebarCollapsed && (\n              <div\n                className=\"sidebar-mask\"\n                onClick={() => handleSidebarCollapse(true)}\n                style={{\n                  position: 'fixed',\n                  top: 0,\n                  left: 0,\n                  right: 0,\n                  bottom: 0,\n                  background: 'rgba(0, 0, 0, 0.45)',\n                  zIndex: 1000,\n                }}\n              />\n            )}\n\n            <Layout style={{ marginLeft: isMobile ? 0 : undefined }}>\n              {/* 顶部导航 */}\n              <Header\n                collapsed={sidebarCollapsed}\n                onCollapse={handleSidebarCollapse}\n                user={user ? {\n                  id: user.id,\n                  username: user.username,\n                  displayName: user.displayName,\n                  email: user.email,\n                  avatar: user.avatar,\n                  role: user.roles[0]?.name,\n                } : undefined}\n                notifications={formattedNotifications}\n                onNotificationRead={handleNotificationRead}\n                onNotificationClear={handleNotificationClear}\n                isDarkMode={currentTheme === 'dark'}\n                onThemeChange={handleThemeChange}\n              />\n\n              {/* 面包屑导航 */}\n              <div\n                style={{\n                  background: token.colorBgContainer,\n                  padding: '12px 24px',\n                  borderBottom: `1px solid ${token.colorBorderSecondary}`,\n                }}\n              >\n                <Breadcrumb showIcon={!isMobile} />\n              </div>\n\n              {/* 内容区域 */}\n              <Content\n                className=\"admin-layout-content\"\n                style={{\n                  padding: isMobile ? '16px 12px' : '24px',\n                  background: token.colorBgLayout,\n                  minHeight: 'calc(100vh - 64px - 57px)', // 减去header和breadcrumb高度\n                  overflow: 'auto',\n                }}\n              >\n                <div\n                  className=\"content-wrapper\"\n                  style={{\n                    background: token.colorBgContainer,\n                    borderRadius: token.borderRadius,\n                    padding: isMobile ? '16px' : '24px',\n                    minHeight: '100%',\n                    boxShadow: '0 2px 8px 0 rgba(29, 35, 41, 0.05)',\n                  }}\n                >\n                  <PermissionProvider\n                    enableDebug={env.isDev}\n                  >\n                    <MessageProvider>\n                      <div className=\"fade-in\">\n                        <Outlet />\n                      </div>\n                    </MessageProvider>\n                  </PermissionProvider>\n                </div>\n              </Content>\n            </Layout>\n          </Layout>\n\n          {/* 浮动按钮 */}\n          <FloatButton.Group\n            trigger=\"hover\"\n            type=\"primary\"\n            style={{ right: 24, bottom: 24 }}\n            icon={<CustomerServiceOutlined />}\n          >\n            <FloatButton\n              icon={<QuestionCircleOutlined />}\n              tooltip=\"帮助文档\"\n              onClick={() => console.log('打开帮助文档')}\n            />\n            <FloatButton\n              icon={<CustomerServiceOutlined />}\n              tooltip=\"在线客服\"\n              onClick={() => console.log('打开在线客服')}\n            />\n          </FloatButton.Group>\n\n          {/* 全局样式 */}\n          <style>{`\n            .admin-layout {\n              position: relative;\n            }\n\n            .fade-in {\n              animation: fadeIn 0.3s ease-in-out;\n            }\n\n            @keyframes fadeIn {\n              from {\n                opacity: 0;\n                transform: translateY(8px);\n              }\n              to {\n                opacity: 1;\n                transform: translateY(0);\n              }\n            }\n\n            /* 移动端侧边栏样式 */\n            .mobile-sidebar {\n              position: fixed !important;\n              z-index: 1001;\n              height: 100vh;\n              left: 0;\n              top: 0;\n            }\n\n            /* 滚动条样式 */\n            .admin-layout-content::-webkit-scrollbar {\n              width: 6px;\n            }\n\n            .admin-layout-content::-webkit-scrollbar-track {\n              background: ${token.colorBgLayout};\n            }\n\n            .admin-layout-content::-webkit-scrollbar-thumb {\n              background: ${token.colorBorderSecondary};\n              border-radius: 3px;\n            }\n\n            .admin-layout-content::-webkit-scrollbar-thumb:hover {\n              background: ${token.colorBorder};\n            }\n\n            /* 响应式设计 */\n            @media (max-width: 768px) {\n              .content-wrapper {\n                margin: 0 !important;\n                border-radius: 0 !important;\n                padding: 16px !important;\n              }\n            }\n\n            /* 暗色主题下的特殊样式 */\n            [data-theme=\"dark\"] .admin-layout {\n              background: #141414;\n            }\n\n            [data-theme=\"dark\"] .sidebar-mask {\n              background: rgba(0, 0, 0, 0.65);\n            }\n\n            /* 打印样式 */\n            @media print {\n              .admin-layout .ant-layout-sider,\n              .admin-layout .ant-layout-header,\n              .ant-float-btn-group {\n                display: none !important;\n              }\n\n              .admin-layout-content {\n                margin: 0 !important;\n                padding: 0 !important;\n              }\n\n              .content-wrapper {\n                box-shadow: none !important;\n                border-radius: 0 !important;\n              }\n            }\n\n            /* 无障碍支持 */\n            @media (prefers-reduced-motion: reduce) {\n              .fade-in {\n                animation: none;\n              }\n\n              .admin-layout *,\n              .admin-layout *::before,\n              .admin-layout *::after {\n                animation-duration: 0.01ms !important;\n                animation-iteration-count: 1 !important;\n                transition-duration: 0.01ms !important;\n              }\n            }\n          `}</style>\n        </>\n      </App>\n    </ConfigProvider>\n  );\n};\n\nexport default AdminLayout;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/Analytics/ContentAnalytics.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4169,4172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4169,4172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4178,4181],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4178,4181],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\nimport { Row, Col, Card, Table, Tag, Space, DatePicker, Select, Button, Tabs, Statistic, Avatar, Typography, Badge, Progress, Tooltip, Radio, Segmented, Divider } from 'antd';\nimport {\n  FileTextOutlined,\n  EyeOutlined,\n  HeartOutlined,\n  CommentOutlined,\n  ShareAltOutlined,\n  RiseOutlined,\n  FallOutlined,\n  TrophyOutlined,\n  ThunderboltOutlined,\n  TagOutlined,\n  FolderOutlined,\n  BarChartOutlined,\n  PieChartOutlined,\n  HeatMapOutlined,\n  ExportOutlined\n} from '@ant-design/icons';\nimport { useQuery } from '@tanstack/react-query';\nimport dayjs from 'dayjs';\nimport AnalyticsChart from '@/components/analytics/AnalyticsChart';\nimport { analyticsService } from '@/services/analytics.service';\nimport type { ContentMetrics, AuthorPerformance, TimeRange } from '@/types/analytics';\n\nconst { Title, Text } = Typography;\nconst { RangePicker } = DatePicker;\nconst { TabPane } = Tabs;\n\nconst ContentAnalytics: React.FC = () => {\n  const [timeRange, setTimeRange] = useState<TimeRange>('month');\n  const [customDateRange, setCustomDateRange] = useState<[dayjs.Dayjs, dayjs.Dayjs]>([\n    dayjs().subtract(30, 'days'),\n    dayjs()\n  ]);\n  const [contentType, setContentType] = useState<'all' | 'post' | 'page' | 'media'>('all');\n  const [sortBy, setSortBy] = useState<'views' | 'engagement' | 'shares' | 'comments'>('views');\n  const [viewMode, setViewMode] = useState<'table' | 'cards' | 'heatmap'>('table');\n  const [selectedCategory, setSelectedCategory] = useState<string | undefined>();\n  const [selectedAuthor, setSelectedAuthor] = useState<string | undefined>();\n\n  // Fetch content metrics\n  const { data: contentMetrics, isLoading: metricsLoading } = useQuery({\n    queryKey: ['content-metrics', timeRange, customDateRange, contentType, selectedCategory, selectedAuthor],\n    queryFn: () => analyticsService.getContentMetrics({\n      timeRange,\n      startDate: timeRange === 'custom' ? customDateRange[0].format('YYYY-MM-DD') : undefined,\n      endDate: timeRange === 'custom' ? customDateRange[1].format('YYYY-MM-DD') : undefined,\n      contentType: contentType === 'all' ? undefined : contentType,\n      category: selectedCategory,\n      author: selectedAuthor\n    })\n  });\n\n  // Fetch content performance\n  const { data: contentPerformance, isLoading: performanceLoading } = useQuery({\n    queryKey: ['content-performance', timeRange, customDateRange],\n    queryFn: () => analyticsService.getContentPerformance({\n      timeRange,\n      startDate: timeRange === 'custom' ? customDateRange[0].format('YYYY-MM-DD') : undefined,\n      endDate: timeRange === 'custom' ? customDateRange[1].format('YYYY-MM-DD') : undefined\n    })\n  });\n\n  // Fetch author performance\n  const { data: authorPerformance, isLoading: authorLoading } = useQuery({\n    queryKey: ['author-performance', timeRange, customDateRange],\n    queryFn: () => analyticsService.getAuthorPerformance({\n      timeRange,\n      startDate: timeRange === 'custom' ? customDateRange[0].format('YYYY-MM-DD') : undefined,\n      endDate: timeRange === 'custom' ? customDateRange[1].format('YYYY-MM-DD') : undefined\n    })\n  });\n\n  // Fetch engagement metrics\n  const { data: engagementData, isLoading: engagementLoading } = useQuery({\n    queryKey: ['engagement-metrics', timeRange, customDateRange],\n    queryFn: () => analyticsService.getEngagementMetrics({\n      timeRange,\n      startDate: timeRange === 'custom' ? customDateRange[0].format('YYYY-MM-DD') : undefined,\n      endDate: timeRange === 'custom' ? customDateRange[1].format('YYYY-MM-DD') : undefined\n    })\n  });\n\n  // Sort content metrics\n  const sortedContent = contentMetrics ? [...contentMetrics].sort((a, b) => {\n    switch (sortBy) {\n      case 'views':\n        return b.views - a.views;\n      case 'engagement':\n        return b.engagementScore - a.engagementScore;\n      case 'shares':\n        return b.shares - a.shares;\n      case 'comments':\n        return b.comments - a.comments;\n      default:\n        return 0;\n    }\n  }) : [];\n\n  // Content table columns\n  const contentColumns = [\n    {\n      title: '排名',\n      key: 'rank',\n      width: 60,\n      fixed: 'left' as const,\n      render: (_: any, __: any, index: number) => {\n        const medals = ['🥇', '🥈', '🥉'];\n        return index < 3 ? medals[index] : `#${index + 1}`;\n      }\n    },\n    {\n      title: '内容标题',\n      dataIndex: 'title',\n      key: 'title',\n      width: 300,\n      fixed: 'left' as const,\n      render: (title: string, record: ContentMetrics) => (\n        <Space direction=\"vertical\" size={0}>\n          <Text strong>{title}</Text>\n          <Space >\n            <Tag color={record.type === 'post' ? 'blue' : record.type === 'page' ? 'green' : 'orange'}>\n              {record.type === 'post' ? '文章' : record.type === 'page' ? '页面' : '媒体'}\n            </Tag>\n            <Text type=\"secondary\" style={{ fontSize: 12 }}>\n              {dayjs(record.publishDate).format('YYYY-MM-DD')}\n            </Text>\n          </Space>\n        </Space>\n      )\n    },\n    {\n      title: '作者',\n      dataIndex: 'author',\n      key: 'author',\n      width: 120,\n      render: (author: string) => (\n        <Space>\n          <Avatar  style={{ backgroundColor: '#1890ff' }}>\n            {author.charAt(0).toUpperCase()}\n          </Avatar>\n          <Text>{author}</Text>\n        </Space>\n      )\n    },\n    {\n      title: '浏览量',\n      dataIndex: 'views',\n      key: 'views',\n      width: 100,\n      align: 'right' as const,\n      sorter: (a: ContentMetrics, b: ContentMetrics) => a.views - b.views,\n      render: (views: number) => (\n        <Text strong>{views.toLocaleString()}</Text>\n      )\n    },\n    {\n      title: '独立访客',\n      dataIndex: 'uniqueViews',\n      key: 'uniqueViews',\n      width: 100,\n      align: 'right' as const,\n      render: (views: number) => views.toLocaleString()\n    },\n    {\n      title: '平均停留时长',\n      dataIndex: 'avgTimeOnPage',\n      key: 'avgTimeOnPage',\n      width: 120,\n      align: 'right' as const,\n      render: (time: number) => {\n        const minutes = Math.floor(time / 60);\n        const seconds = time % 60;\n        return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n      }\n    },\n    {\n      title: '跳出率',\n      dataIndex: 'bounceRate',\n      key: 'bounceRate',\n      width: 100,\n      align: 'right' as const,\n      render: (rate: number) => (\n        <Text type={rate > 70 ? 'danger' : rate > 50 ? 'warning' : 'success'}>\n          {rate.toFixed(1)}%\n        </Text>\n      )\n    },\n    {\n      title: '互动',\n      key: 'engagement',\n      width: 200,\n      render: (record: ContentMetrics) => (\n        <Space>\n          <Tooltip title=\"点赞\">\n            <span><HeartOutlined /> {record.likes}</span>\n          </Tooltip>\n          <Tooltip title=\"评论\">\n            <span><CommentOutlined /> {record.comments}</span>\n          </Tooltip>\n          <Tooltip title=\"分享\">\n            <span><ShareAltOutlined /> {record.shares}</span>\n          </Tooltip>\n        </Space>\n      )\n    },\n    {\n      title: '参与度评分',\n      dataIndex: 'engagementScore',\n      key: 'engagementScore',\n      width: 120,\n      align: 'center' as const,\n      render: (score: number) => (\n        <Progress\n          type=\"circle\"\n          percent={score}\n          width={50}\n          strokeColor={score > 80 ? '#52c41a' : score > 60 ? '#1890ff' : '#faad14'}\n        />\n      )\n    },\n    {\n      title: '趋势',\n      dataIndex: 'trend',\n      key: 'trend',\n      width: 80,\n      align: 'center' as const,\n      render: (trend: number) => (\n        <Text type={trend > 0 ? 'success' : 'danger'}>\n          {trend > 0 ? <RiseOutlined /> : <FallOutlined />}\n          {Math.abs(trend).toFixed(1)}%\n        </Text>\n      )\n    }\n  ];\n\n  // Author performance columns\n  const authorColumns = [\n    {\n      title: '作者',\n      key: 'author',\n      render: (record: AuthorPerformance) => (\n        <Space>\n          <Avatar src={record.avatar} style={{ backgroundColor: '#1890ff' }}>\n            {record.authorName.charAt(0).toUpperCase()}\n          </Avatar>\n          <Space direction=\"vertical\" size={0}>\n            <Text strong>{record.authorName}</Text>\n            {record.followers && (\n              <Text type=\"secondary\" style={{ fontSize: 12 }}>\n                {record.followers} 关注者\n              </Text>\n            )}\n          </Space>\n        </Space>\n      )\n    },\n    {\n      title: '发布文章',\n      dataIndex: 'posts',\n      key: 'posts',\n      align: 'center' as const,\n      render: (posts: number) => <Badge count={posts} showZero style={{ backgroundColor: '#52c41a' }} />\n    },\n    {\n      title: '总浏览量',\n      dataIndex: 'totalViews',\n      key: 'totalViews',\n      align: 'right' as const,\n      render: (views: number) => <Text strong>{views.toLocaleString()}</Text>\n    },\n    {\n      title: '平均浏览量',\n      dataIndex: 'avgViews',\n      key: 'avgViews',\n      align: 'right' as const,\n      render: (views: number) => views.toLocaleString()\n    },\n    {\n      title: '总互动',\n      dataIndex: 'totalEngagement',\n      key: 'totalEngagement',\n      align: 'right' as const,\n      render: (engagement: number) => engagement.toLocaleString()\n    },\n    {\n      title: '平均互动率',\n      dataIndex: 'avgEngagement',\n      key: 'avgEngagement',\n      align: 'center' as const,\n      render: (rate: number) => (\n        <Progress percent={rate}  strokeColor=\"#1890ff\" />\n      )\n    },\n    {\n      title: '最热文章',\n      dataIndex: 'topPost',\n      key: 'topPost',\n      width: 200,\n      ellipsis: true,\n      render: (post: string) => (\n        <Tooltip title={post}>\n          <Text>{post}</Text>\n        </Tooltip>\n      )\n    },\n    {\n      title: '趋势',\n      dataIndex: 'trend',\n      key: 'trend',\n      align: 'center' as const,\n      render: (trend: number) => (\n        <Text type={trend > 0 ? 'success' : 'danger'}>\n          {trend > 0 ? <RiseOutlined /> : <FallOutlined />}\n          {Math.abs(trend).toFixed(1)}%\n        </Text>\n      )\n    }\n  ];\n\n  // Prepare chart data\n  const categoryChartData = {\n    categories: contentPerformance?.categories?.map(c => c.category) || [],\n    series: [\n      {\n        name: '文章数',\n        data: contentPerformance?.categories?.map(c => c.posts) || []\n      },\n      {\n        name: '总浏览量',\n        data: contentPerformance?.categories?.map(c => c.totalViews) || []\n      }\n    ]\n  };\n\n  const engagementChartData = {\n    indicators: [\n      { name: '点赞', max: 10000 },\n      { name: '评论', max: 5000 },\n      { name: '分享', max: 3000 },\n      { name: '收藏', max: 2000 },\n      { name: '互动率', max: 100 }\n    ],\n    series: [\n      {\n        name: '互动数据',\n        value: [\n          engagementData?.likes || 0,\n          engagementData?.comments || 0,\n          engagementData?.shares || 0,\n          engagementData?.saves || 0,\n          (engagementData?.engagementRate || 0) * 100\n        ]\n      }\n    ]\n  };\n\n  // Handle export\n  const handleExport = () => {\n    analyticsService.exportData({\n      format: 'excel',\n      dateRange: {\n        start: timeRange === 'custom' ? customDateRange[0].format('YYYY-MM-DD') : dayjs().subtract(30, 'days').format('YYYY-MM-DD'),\n        end: timeRange === 'custom' ? customDateRange[1].format('YYYY-MM-DD') : dayjs().format('YYYY-MM-DD')\n      },\n      metrics: ['views', 'uniqueViews', 'avgTimeOnPage', 'bounceRate', 'engagement'],\n      dimensions: ['content', 'author', 'category', 'tags']\n    }).then(blob => {\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `content-analytics-${dayjs().format('YYYY-MM-DD')}.xlsx`;\n      link.click();\n    });\n  };\n\n  return (\n    <div className=\"content-analytics\">\n      {/* Header */}\n      <div style={{ marginBottom: 24 }}>\n        <Row justify=\"space-between\" align=\"middle\">\n          <Col>\n            <Title level={2} style={{ margin: 0 }}>\n              内容分析\n            </Title>\n          </Col>\n          <Col>\n            <Space>\n              <Select\n                value={timeRange}\n                onChange={setTimeRange}\n                style={{ width: 120 }}\n                options={analyticsService.getTimeRangePresets()}\n              />\n              {timeRange === 'custom' && (\n                <RangePicker\n                  value={customDateRange}\n                  onChange={(dates) => dates && setCustomDateRange(dates as [dayjs.Dayjs, dayjs.Dayjs])}\n                />\n              )}\n              <Button icon={<ExportOutlined />} onClick={handleExport}>\n                导出报表\n              </Button>\n            </Space>\n          </Col>\n        </Row>\n      </div>\n\n      {/* Summary Stats */}\n      <Row gutter={[16, 16]} style={{ marginBottom: 24 }}>\n        <Col xs={24} sm={12} md={6}>\n          <Card>\n            <Statistic\n              title=\"总内容数\"\n              value={contentMetrics?.length || 0}\n              prefix={<FileTextOutlined />}\n              valueStyle={{ color: '#1890ff' }}\n            />\n            <div style={{ marginTop: 16 }}>\n              <Space>\n                <Tag color=\"blue\">文章 {sortedContent.filter(c => c.type === 'post').length}</Tag>\n                <Tag color=\"green\">页面 {sortedContent.filter(c => c.type === 'page').length}</Tag>\n              </Space>\n            </div>\n          </Card>\n        </Col>\n        <Col xs={24} sm={12} md={6}>\n          <Card>\n            <Statistic\n              title=\"总浏览量\"\n              value={sortedContent.reduce((sum, c) => sum + c.views, 0)}\n              prefix={<EyeOutlined />}\n              valueStyle={{ color: '#52c41a' }}\n            />\n            <div style={{ marginTop: 16 }}>\n              <Text type=\"secondary\">\n                平均每篇: {Math.round(sortedContent.reduce((sum, c) => sum + c.views, 0) / (sortedContent.length || 1)).toLocaleString()}\n              </Text>\n            </div>\n          </Card>\n        </Col>\n        <Col xs={24} sm={12} md={6}>\n          <Card>\n            <Statistic\n              title=\"总互动数\"\n              value={engagementData?.totalInteractions || 0}\n              prefix={<HeartOutlined />}\n              valueStyle={{ color: '#722ed1' }}\n            />\n            <div style={{ marginTop: 16 }}>\n              <Progress\n                percent={engagementData?.engagementRate ? engagementData.engagementRate * 100 : 0}\n                \n                format={(percent) => `互动率 ${percent?.toFixed(1)}%`}\n              />\n            </div>\n          </Card>\n        </Col>\n        <Col xs={24} sm={12} md={6}>\n          <Card>\n            <Statistic\n              title=\"病毒传播指数\"\n              value={engagementData?.viralityScore || 0}\n              prefix={<ThunderboltOutlined />}\n              valueStyle={{ color: '#fa8c16' }}\n              precision={2}\n            />\n            <div style={{ marginTop: 16 }}>\n              <Badge\n                status={engagementData?.viralityScore && engagementData.viralityScore > 5 ? 'processing' : 'default'}\n                text={engagementData?.viralityScore && engagementData.viralityScore > 5 ? '高传播性' : '普通传播'}\n              />\n            </div>\n          </Card>\n        </Col>\n      </Row>\n\n      {/* Main Content Area */}\n      <Tabs defaultActiveKey=\"content\">\n        <TabPane tab=\"内容表现\" key=\"content\">\n          {/* Filters */}\n          <Card style={{ marginBottom: 16 }}>\n            <Row gutter={[16, 16]} align=\"middle\">\n              <Col flex=\"auto\">\n                <Space size=\"middle\">\n                  <Radio.Group value={contentType} onChange={(e) => setContentType(e.target.value)}>\n                    <Radio.Button value=\"all\">全部</Radio.Button>\n                    <Radio.Button value=\"post\">文章</Radio.Button>\n                    <Radio.Button value=\"page\">页面</Radio.Button>\n                    <Radio.Button value=\"media\">媒体</Radio.Button>\n                  </Radio.Group>\n                  <Select\n                    placeholder=\"选择分类\"\n                    style={{ width: 150 }}\n                    allowClear\n                    value={selectedCategory}\n                    onChange={setSelectedCategory}\n                  >\n                    {contentPerformance?.categories?.map(cat => (\n                      <Select.Option key={cat.category} value={cat.category}>\n                        {cat.category}\n                      </Select.Option>\n                    ))}\n                  </Select>\n                  <Select\n                    placeholder=\"选择作者\"\n                    style={{ width: 150 }}\n                    allowClear\n                    value={selectedAuthor}\n                    onChange={setSelectedAuthor}\n                  >\n                    {authorPerformance?.map(author => (\n                      <Select.Option key={author.authorId} value={author.authorId}>\n                        {author.authorName}\n                      </Select.Option>\n                    ))}\n                  </Select>\n                </Space>\n              </Col>\n              <Col>\n                <Space>\n                  <Select value={sortBy} onChange={setSortBy} style={{ width: 120 }}>\n                    <Select.Option value=\"views\">按浏览量</Select.Option>\n                    <Select.Option value=\"engagement\">按互动率</Select.Option>\n                    <Select.Option value=\"shares\">按分享数</Select.Option>\n                    <Select.Option value=\"comments\">按评论数</Select.Option>\n                  </Select>\n                  <Segmented\n                    value={viewMode}\n                    onChange={setViewMode}\n                    options={[\n                      { label: '表格', value: 'table', icon: <BarChartOutlined /> },\n                      { label: '卡片', value: 'cards', icon: <PieChartOutlined /> },\n                      { label: '热图', value: 'heatmap', icon: <HeatMapOutlined /> }\n                    ]}\n                  />\n                </Space>\n              </Col>\n            </Row>\n          </Card>\n\n          {/* Content Table/Cards/Heatmap */}\n          {viewMode === 'table' ? (\n            <Card>\n              <Table\n                columns={contentColumns}\n                dataSource={sortedContent}\n                rowKey=\"contentId\"\n                loading={metricsLoading}\n                pagination={{\n                  showSizeChanger: true,\n                  showTotal: (total) => `共 ${total} 条`,\n                  pageSize: 20\n                }}\n                scroll={{ x: 1500 }}\n              />\n            </Card>\n          ) : viewMode === 'cards' ? (\n            <Row gutter={[16, 16]}>\n              {sortedContent.slice(0, 12).map((content, index) => (\n                <Col xs={24} sm={12} md={8} lg={6} key={content.contentId}>\n                  <Card hoverable>\n                    <Card.Meta\n                      avatar={\n                        <Badge count={`#${index + 1}`} style={{ backgroundColor: index < 3 ? '#f5222d' : '#8c8c8c' }}>\n                          <Avatar size={48} style={{ backgroundColor: '#1890ff' }}>\n                            {content.type === 'post' ? <FileTextOutlined /> : <FolderOutlined />}\n                          </Avatar>\n                        </Badge>\n                      }\n                      title={\n                        <Tooltip title={content.title}>\n                          <Text ellipsis>{content.title}</Text>\n                        </Tooltip>\n                      }\n                      description={content.author}\n                    />\n                    <div style={{ marginTop: 16 }}>\n                      <Row gutter={[8, 8]}>\n                        <Col span={12}>\n                          <Statistic\n                            title=\"浏览量\"\n                            value={content.views}\n                            valueStyle={{ fontSize: 14 }}\n                          />\n                        </Col>\n                        <Col span={12}>\n                          <Statistic\n                            title=\"互动率\"\n                            value={content.engagementScore}\n                            suffix=\"%\"\n                            valueStyle={{ fontSize: 14 }}\n                          />\n                        </Col>\n                      </Row>\n                      <Progress\n                        percent={content.engagementScore}\n                        \n                        strokeColor={{\n                          '0%': '#108ee9',\n                          '100%': '#87d068'\n                        }}\n                        style={{ marginTop: 8 }}\n                      />\n                    </div>\n                  </Card>\n                </Col>\n              ))}\n            </Row>\n          ) : (\n            <Card>\n              <AnalyticsChart\n                type=\"heatmap\"\n                title=\"内容表现热力图\"\n                data={{\n                  xAxis: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],\n                  yAxis: sortedContent.slice(0, 10).map(c => c.title.substring(0, 20) + '...'),\n                  values: sortedContent.slice(0, 10).flatMap((content, y) =>\n                    [0, 1, 2, 3, 4, 5, 6].map((x) => [x, y, Math.random() * 100])\n                  ),\n                  min: 0,\n                  max: 100\n                }}\n                height={400}\n                loading={metricsLoading}\n              />\n            </Card>\n          )}\n        </TabPane>\n\n        <TabPane tab=\"作者分析\" key=\"authors\">\n          <Row gutter={[16, 16]}>\n            <Col span={24}>\n              <Card title=\"作者表现排行\">\n                <Table\n                  columns={authorColumns}\n                  dataSource={authorPerformance}\n                  rowKey=\"authorId\"\n                  loading={authorLoading}\n                  pagination={{\n                    showSizeChanger: true,\n                    showTotal: (total) => `共 ${total} 位作者`\n                  }}\n                />\n              </Card>\n            </Col>\n            <Col xs={24} lg={12}>\n              <AnalyticsChart\n                type=\"bar\"\n                title=\"作者发文量对比\"\n                data={{\n                  categories: authorPerformance?.slice(0, 10).map(a => a.authorName) || [],\n                  series: [{\n                    name: '发文量',\n                    data: authorPerformance?.slice(0, 10).map(a => a.posts) || []\n                  }]\n                }}\n                height={350}\n                loading={authorLoading}\n              />\n            </Col>\n            <Col xs={24} lg={12}>\n              <AnalyticsChart\n                type=\"pie\"\n                title=\"作者贡献占比\"\n                data={{\n                  items: authorPerformance?.slice(0, 10).map(a => ({\n                    name: a.authorName,\n                    value: a.totalViews\n                  })) || []\n                }}\n                height={350}\n                loading={authorLoading}\n              />\n            </Col>\n          </Row>\n        </TabPane>\n\n        <TabPane tab=\"分类标签\" key=\"categories\">\n          <Row gutter={[16, 16]}>\n            <Col xs={24} lg={12}>\n              <Card title=\"分类表现\">\n                <Table\n                  dataSource={contentPerformance?.categories}\n                  rowKey=\"category\"\n                  loading={performanceLoading}\n                  pagination={false}\n                  columns={[\n                    {\n                      title: '分类',\n                      dataIndex: 'category',\n                      key: 'category',\n                      render: (cat: string) => <Tag color=\"blue\">{cat}</Tag>\n                    },\n                    {\n                      title: '文章数',\n                      dataIndex: 'posts',\n                      key: 'posts',\n                      align: 'right' as const\n                    },\n                    {\n                      title: '总浏览',\n                      dataIndex: 'totalViews',\n                      key: 'totalViews',\n                      align: 'right' as const,\n                      render: (views: number) => views.toLocaleString()\n                    },\n                    {\n                      title: '平均浏览',\n                      dataIndex: 'avgViews',\n                      key: 'avgViews',\n                      align: 'right' as const,\n                      render: (views: number) => views.toLocaleString()\n                    },\n                    {\n                      title: '互动率',\n                      dataIndex: 'engagementRate',\n                      key: 'engagementRate',\n                      align: 'center' as const,\n                      render: (rate: number) => (\n                        <Progress percent={rate}  strokeColor=\"#52c41a\" />\n                      )\n                    }\n                  ]}\n                />\n              </Card>\n            </Col>\n            <Col xs={24} lg={12}>\n              <Card title=\"标签云\">\n                <div style={{ minHeight: 300, display: 'flex', flexWrap: 'wrap', gap: 8, alignItems: 'center', justifyContent: 'center' }}>\n                  {contentPerformance?.tags?.map((tag, index) => (\n                    <Tag\n                      key={tag.tag}\n                      color={['magenta', 'red', 'volcano', 'orange', 'gold', 'lime', 'green', 'cyan', 'blue', 'geekblue', 'purple'][index % 11]}\n                      style={{\n                        fontSize: Math.min(24, Math.max(12, tag.views / 1000)),\n                        padding: '4px 12px',\n                        cursor: 'pointer'\n                      }}\n                    >\n                      {tag.tag} ({tag.posts})\n                    </Tag>\n                  ))}\n                </div>\n              </Card>\n            </Col>\n            <Col span={24}>\n              <AnalyticsChart\n                type=\"bar\"\n                title=\"分类内容分布\"\n                data={categoryChartData}\n                height={350}\n                loading={performanceLoading}\n              />\n            </Col>\n          </Row>\n        </TabPane>\n\n        <TabPane tab=\"互动分析\" key=\"engagement\">\n          <Row gutter={[16, 16]}>\n            <Col xs={24} lg={12}>\n              <AnalyticsChart\n                type=\"radar\"\n                title=\"互动类型分布\"\n                data={engagementChartData}\n                height={400}\n                loading={engagementLoading}\n              />\n            </Col>\n            <Col xs={24} lg={12}>\n              <Card title=\"互动趋势\">\n                <Row gutter={[16, 16]}>\n                  <Col span={12}>\n                    <Statistic\n                      title=\"总点赞数\"\n                      value={engagementData?.likes || 0}\n                      prefix={<HeartOutlined />}\n                      valueStyle={{ color: '#eb2f96' }}\n                    />\n                  </Col>\n                  <Col span={12}>\n                    <Statistic\n                      title=\"总评论数\"\n                      value={engagementData?.comments || 0}\n                      prefix={<CommentOutlined />}\n                      valueStyle={{ color: '#1890ff' }}\n                    />\n                  </Col>\n                  <Col span={12}>\n                    <Statistic\n                      title=\"总分享数\"\n                      value={engagementData?.shares || 0}\n                      prefix={<ShareAltOutlined />}\n                      valueStyle={{ color: '#52c41a' }}\n                    />\n                  </Col>\n                  <Col span={12}>\n                    <Statistic\n                      title=\"总收藏数\"\n                      value={engagementData?.saves || 0}\n                      prefix={<TagOutlined />}\n                      valueStyle={{ color: '#faad14' }}\n                    />\n                  </Col>\n                </Row>\n                <Divider />\n                <div>\n                  <Text type=\"secondary\">互动率</Text>\n                  <Progress\n                    percent={engagementData?.engagementRate ? engagementData.engagementRate * 100 : 0}\n                    strokeColor={{\n                      '0%': '#108ee9',\n                      '100%': '#87d068'\n                    }}\n                    style={{ marginTop: 8 }}\n                  />\n                </div>\n                <div style={{ marginTop: 16 }}>\n                  <Text type=\"secondary\">病毒传播指数</Text>\n                  <Progress\n                    percent={Math.min(100, (engagementData?.viralityScore || 0) * 10)}\n                    strokeColor={{\n                      '0%': '#fa8c16',\n                      '100%': '#f5222d'\n                    }}\n                    style={{ marginTop: 8 }}\n                    format={() => engagementData?.viralityScore?.toFixed(2) || '0'}\n                  />\n                </div>\n              </Card>\n            </Col>\n            <Col span={24}>\n              <Card title=\"热门内容互动排行\">\n                <div style={{ overflowX: 'auto' }}>\n                  <table style={{ width: '100%', minWidth: 800 }}>\n                    <thead>\n                      <tr style={{ borderBottom: '1px solid #f0f0f0' }}>\n                        <th style={{ padding: '12px', textAlign: 'left' }}>内容</th>\n                        <th style={{ padding: '12px', textAlign: 'center' }}>\n                          <HeartOutlined /> 点赞\n                        </th>\n                        <th style={{ padding: '12px', textAlign: 'center' }}>\n                          <CommentOutlined /> 评论\n                        </th>\n                        <th style={{ padding: '12px', textAlign: 'center' }}>\n                          <ShareAltOutlined /> 分享\n                        </th>\n                        <th style={{ padding: '12px', textAlign: 'center' }}>互动总分</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {sortedContent.slice(0, 10).map((content, index) => (\n                        <tr key={content.contentId} style={{ borderBottom: '1px solid #f0f0f0' }}>\n                          <td style={{ padding: '12px' }}>\n                            <Space>\n                              {index < 3 && <TrophyOutlined style={{ color: ['#ffd700', '#c0c0c0', '#cd7f32'][index] }} />}\n                              <Text>{content.title}</Text>\n                            </Space>\n                          </td>\n                          <td style={{ padding: '12px', textAlign: 'center' }}>\n                            <Text>{content.likes.toLocaleString()}</Text>\n                          </td>\n                          <td style={{ padding: '12px', textAlign: 'center' }}>\n                            <Text>{content.comments.toLocaleString()}</Text>\n                          </td>\n                          <td style={{ padding: '12px', textAlign: 'center' }}>\n                            <Text>{content.shares.toLocaleString()}</Text>\n                          </td>\n                          <td style={{ padding: '12px', textAlign: 'center' }}>\n                            <Badge\n                              count={content.engagementScore}\n                              style={{\n                                backgroundColor: content.engagementScore > 80 ? '#52c41a' :\n                                  content.engagementScore > 50 ? '#1890ff' : '#faad14'\n                              }}\n                            />\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </Card>\n            </Col>\n          </Row>\n        </TabPane>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default ContentAnalytics;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/Analytics/Overview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/Analytics/UserAnalytics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/Content/CategoryManagement.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has missing dependencies: 'handleEdit' and 'handleViewDetail'. Either include them or remove the dependency array.","line":393,"column":6,"nodeType":"ArrayExpression","endLine":393,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [categories, handleEdit, handleViewDetail]","fix":{"range":[9721,9733],"text":"[categories, handleEdit, handleViewDetail]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":414,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":414,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10285,10288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10285,10288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useMemo } from 'react';\nimport {\n  Card,\n  Table,\n  Button,\n  Space,\n  Tag,\n  Typography,\n  Input,\n  Modal,\n  Form,\n  message,\n  Dropdown,\n  Tooltip,\n  Badge,\n  Select,\n  Tree,\n  Row,\n  Col,\n  Statistic,\n  Drawer,\n  Switch,\n  ColorPicker,\n  Upload,\n  Avatar,\n  Divider\n} from 'antd';\nimport {\n  PlusOutlined,\n  EditOutlined,\n  DeleteOutlined,\n  MoreOutlined,\n  DragOutlined,\n  FileTextOutlined,\n  FolderOutlined,\n  FolderOpenOutlined,\n  PictureOutlined,\n  EyeOutlined,\n  SortAscendingOutlined,\n  ReloadOutlined,\n  ExportOutlined,\n  ImportOutlined,\n  CopyOutlined,\n  ArrowUpOutlined,\n  ArrowDownOutlined\n} from '@ant-design/icons';\nimport type { DataNode } from 'antd/es/tree';\nimport dayjs from 'dayjs';\n\nconst { Title, Text, Paragraph } = Typography;\nconst { Search } = Input;\nconst { Option } = Select;\n\n// Category interface\ninterface Category {\n  id: number;\n  name: string;\n  slug: string;\n  description: string;\n  parentId: number | null;\n  level: number;\n  sort: number;\n  isActive: boolean;\n  isVisible: boolean;\n  color: string;\n  icon: string | null;\n  image: string | null;\n  postCount: number;\n  childrenCount: number;\n  createdAt: string;\n  updatedAt: string;\n  path: string;\n  children?: Category[];\n}\n\n// Mock categories data with hierarchical structure\nconst mockCategories: Category[] = [\n  {\n    id: 1,\n    name: '前端技术',\n    slug: 'frontend',\n    description: '前端开发相关技术文章',\n    parentId: null,\n    level: 0,\n    sort: 1,\n    isActive: true,\n    isVisible: true,\n    color: '#1677ff',\n    icon: 'CodeOutlined',\n    image: 'https://via.placeholder.com/100x60',\n    postCount: 25,\n    childrenCount: 3,\n    createdAt: '2024-01-01T10:00:00Z',\n    updatedAt: '2024-01-15T14:30:00Z',\n    path: '前端技术',\n    children: [\n      {\n        id: 2,\n        name: 'React',\n        slug: 'react',\n        description: 'React 框架相关文章',\n        parentId: 1,\n        level: 1,\n        sort: 1,\n        isActive: true,\n        isVisible: true,\n        color: '#61dafb',\n        icon: null,\n        image: null,\n        postCount: 12,\n        childrenCount: 0,\n        createdAt: '2024-01-02T10:00:00Z',\n        updatedAt: '2024-01-12T16:20:00Z',\n        path: '前端技术 > React'\n      },\n      {\n        id: 3,\n        name: 'Vue.js',\n        slug: 'vuejs',\n        description: 'Vue.js 框架相关文章',\n        parentId: 1,\n        level: 1,\n        sort: 2,\n        isActive: true,\n        isVisible: true,\n        color: '#4fc08d',\n        icon: null,\n        image: null,\n        postCount: 8,\n        childrenCount: 0,\n        createdAt: '2024-01-03T10:00:00Z',\n        updatedAt: '2024-01-10T12:15:00Z',\n        path: '前端技术 > Vue.js'\n      },\n      {\n        id: 4,\n        name: 'TypeScript',\n        slug: 'typescript',\n        description: 'TypeScript 开发相关文章',\n        parentId: 1,\n        level: 1,\n        sort: 3,\n        isActive: true,\n        isVisible: true,\n        color: '#3178c6',\n        icon: null,\n        image: null,\n        postCount: 5,\n        childrenCount: 0,\n        createdAt: '2024-01-04T10:00:00Z',\n        updatedAt: '2024-01-08T09:45:00Z',\n        path: '前端技术 > TypeScript'\n      }\n    ]\n  },\n  {\n    id: 5,\n    name: '后端技术',\n    slug: 'backend',\n    description: '后端开发相关技术文章',\n    parentId: null,\n    level: 0,\n    sort: 2,\n    isActive: true,\n    isVisible: true,\n    color: '#52c41a',\n    icon: 'DatabaseOutlined',\n    image: null,\n    postCount: 18,\n    childrenCount: 2,\n    createdAt: '2024-01-05T10:00:00Z',\n    updatedAt: '2024-01-20T11:30:00Z',\n    path: '后端技术',\n    children: [\n      {\n        id: 6,\n        name: '.NET',\n        slug: 'dotnet',\n        description: '.NET 开发相关文章',\n        parentId: 5,\n        level: 1,\n        sort: 1,\n        isActive: true,\n        isVisible: true,\n        color: '#512bd4',\n        icon: null,\n        image: null,\n        postCount: 10,\n        childrenCount: 0,\n        createdAt: '2024-01-06T10:00:00Z',\n        updatedAt: '2024-01-18T15:20:00Z',\n        path: '后端技术 > .NET'\n      },\n      {\n        id: 7,\n        name: 'Node.js',\n        slug: 'nodejs',\n        description: 'Node.js 开发相关文章',\n        parentId: 5,\n        level: 1,\n        sort: 2,\n        isActive: true,\n        isVisible: true,\n        color: '#68a063',\n        icon: null,\n        image: null,\n        postCount: 8,\n        childrenCount: 0,\n        createdAt: '2024-01-07T10:00:00Z',\n        updatedAt: '2024-01-16T13:40:00Z',\n        path: '后端技术 > Node.js'\n      }\n    ]\n  },\n  {\n    id: 8,\n    name: '数据库',\n    slug: 'database',\n    description: '数据库技术相关文章',\n    parentId: null,\n    level: 0,\n    sort: 3,\n    isActive: true,\n    isVisible: true,\n    color: '#722ed1',\n    icon: 'ConsoleSqlOutlined',\n    image: null,\n    postCount: 12,\n    childrenCount: 0,\n    createdAt: '2024-01-08T10:00:00Z',\n    updatedAt: '2024-01-22T16:15:00Z',\n    path: '数据库'\n  },\n  {\n    id: 9,\n    name: '系统架构',\n    slug: 'architecture',\n    description: '系统架构设计相关文章',\n    parentId: null,\n    level: 0,\n    sort: 4,\n    isActive: false,\n    isVisible: false,\n    color: '#fa8c16',\n    icon: 'ClusterOutlined',\n    image: null,\n    postCount: 3,\n    childrenCount: 0,\n    createdAt: '2024-01-09T10:00:00Z',\n    updatedAt: '2024-01-09T10:00:00Z',\n    path: '系统架构'\n  }\n];\n\ninterface CategoryFilters {\n  search: string;\n  status: 'all' | 'active' | 'inactive';\n  visibility: 'all' | 'visible' | 'hidden';\n  parentId: number | null;\n}\n\nconst CategoryManagement: React.FC = () => {\n  const [categories, setCategories] = useState<Category[]>(mockCategories);\n  const [selectedRowKeys, setSelectedRowKeys] = useState<React.Key[]>([]);\n  const [filters, setFilters] = useState<CategoryFilters>({\n    search: '',\n    status: 'all',\n    visibility: 'all',\n    parentId: null\n  });\n  const [editModalVisible, setEditModalVisible] = useState(false);\n  const [editingCategory, setEditingCategory] = useState<Category | null>(null);\n  const [detailDrawerVisible, setDetailDrawerVisible] = useState(false);\n  const [selectedCategory, setSelectedCategory] = useState<Category | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [treeView, setTreeView] = useState(false);\n  const [form] = Form.useForm();\n\n  // Build flat category list from hierarchical data\n  const flatCategories = useMemo(() => {\n    const flatten = (cats: Category[], result: Category[] = []): Category[] => {\n      cats.forEach(cat => {\n        result.push(cat);\n        if (cat.children && cat.children.length > 0) {\n          flatten(cat.children, result);\n        }\n      });\n      return result;\n    };\n    return flatten(categories);\n  }, [categories]);\n\n  // Filter categories\n  const filteredCategories = useMemo(() => {\n    let filtered = [...flatCategories];\n\n    // Text search\n    if (filters.search) {\n      const searchLower = filters.search.toLowerCase();\n      filtered = filtered.filter(cat =>\n        cat.name.toLowerCase().includes(searchLower) ||\n        cat.description.toLowerCase().includes(searchLower) ||\n        cat.slug.toLowerCase().includes(searchLower)\n      );\n    }\n\n    // Status filter\n    if (filters.status !== 'all') {\n      filtered = filtered.filter(cat =>\n        filters.status === 'active' ? cat.isActive : !cat.isActive\n      );\n    }\n\n    // Visibility filter\n    if (filters.visibility !== 'all') {\n      filtered = filtered.filter(cat =>\n        filters.visibility === 'visible' ? cat.isVisible : !cat.isVisible\n      );\n    }\n\n    // Parent filter\n    if (filters.parentId !== null) {\n      filtered = filtered.filter(cat => cat.parentId === filters.parentId);\n    }\n\n    return filtered;\n  }, [flatCategories, filters]);\n\n  // Statistics\n  const statistics = useMemo(() => {\n    const total = flatCategories.length;\n    const active = flatCategories.filter(c => c.isActive).length;\n    const visible = flatCategories.filter(c => c.isVisible).length;\n    const totalPosts = flatCategories.reduce((sum, c) => sum + c.postCount, 0);\n    const rootCategories = flatCategories.filter(c => c.parentId === null).length;\n\n    return {\n      total,\n      active,\n      inactive: total - active,\n      visible,\n      hidden: total - visible,\n      totalPosts,\n      rootCategories\n    };\n  }, [flatCategories]);\n\n  // Convert categories to tree data\n  const treeData: DataNode[] = useMemo(() => {\n    const convertToTree = (cats: Category[]): DataNode[] => {\n      return cats.map(cat => ({\n        key: cat.id,\n        title: (\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              {cat.color && (\n                <div\n                  className=\"w-3 h-3 rounded-full\"\n                  style={{ backgroundColor: cat.color }}\n                />\n              )}\n              <span className={!cat.isActive ? 'opacity-50' : ''}>{cat.name}</span>\n              <Badge count={cat.postCount} showZero={false}  />\n              {!cat.isActive && <Tag  color=\"red\">停用</Tag>}\n              {!cat.isVisible && <Tag  color=\"orange\">隐藏</Tag>}\n            </div>\n            <Space >\n              <Button\n                type=\"text\"\n                \n                icon={<EditOutlined />}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleEdit(cat);\n                }}\n              />\n              <Button\n                type=\"text\"\n                \n                icon={<EyeOutlined />}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleViewDetail(cat);\n                }}\n              />\n            </Space>\n          </div>\n        ),\n        children: cat.children ? convertToTree(cat.children) : undefined\n      }));\n    };\n    return convertToTree(categories);\n  }, [categories]);\n\n  // Handle category actions\n  const handleEdit = useCallback((category: Category | null = null) => {\n    setEditingCategory(category);\n    setEditModalVisible(true);\n    if (category) {\n      form.setFieldsValue({\n        ...category,\n        parentId: category.parentId || undefined\n      });\n    } else {\n      form.resetFields();\n    }\n  }, [form]);\n\n  const handleViewDetail = useCallback((category: Category) => {\n    setSelectedCategory(category);\n    setDetailDrawerVisible(true);\n  }, []);\n\n  const handleSave = useCallback(async (values: any) => {\n    setLoading(true);\n\n    try {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      if (editingCategory) {\n        // Update existing category\n        const updateCategory = (cats: Category[]): Category[] => {\n          return cats.map(cat => {\n            if (cat.id === editingCategory.id) {\n              return {\n                ...cat,\n                ...values,\n                updatedAt: new Date().toISOString(),\n                path: values.parentId\n                  ? `${flatCategories.find(p => p.id === values.parentId)?.path} > ${values.name}`\n                  : values.name\n              };\n            }\n            if (cat.children) {\n              return { ...cat, children: updateCategory(cat.children) };\n            }\n            return cat;\n          });\n        };\n        setCategories(updateCategory(categories));\n        message.success('分类已更新');\n      } else {\n        // Create new category\n        const newCategory: Category = {\n          id: Date.now(),\n          ...values,\n          level: values.parentId ? 1 : 0,\n          sort: flatCategories.length + 1,\n          postCount: 0,\n          childrenCount: 0,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString(),\n          path: values.parentId\n            ? `${flatCategories.find(p => p.id === values.parentId)?.path} > ${values.name}`\n            : values.name\n        };\n\n        if (values.parentId) {\n          // Add to parent's children\n          const addToParent = (cats: Category[]): Category[] => {\n            return cats.map(cat => {\n              if (cat.id === values.parentId) {\n                return {\n                  ...cat,\n                  children: [...(cat.children || []), newCategory],\n                  childrenCount: (cat.childrenCount || 0) + 1\n                };\n              }\n              if (cat.children) {\n                return { ...cat, children: addToParent(cat.children) };\n              }\n              return cat;\n            });\n          };\n          setCategories(addToParent(categories));\n        } else {\n          // Add as root category\n          setCategories([...categories, newCategory]);\n        }\n        message.success('分类已创建');\n      }\n\n      setEditModalVisible(false);\n      setEditingCategory(null);\n    } catch (error) {\n      message.error('操作失败');\n    } finally {\n      setLoading(false);\n    }\n  }, [editingCategory, categories, flatCategories]);\n\n  const handleDelete = useCallback((categoryId: number) => {\n    const deleteCategory = (cats: Category[]): Category[] => {\n      return cats.filter(cat => {\n        if (cat.id === categoryId) {\n          return false;\n        }\n        if (cat.children) {\n          cat.children = deleteCategory(cat.children);\n          cat.childrenCount = cat.children.length;\n        }\n        return true;\n      });\n    };\n\n    setCategories(deleteCategory(categories));\n    message.success('分类已删除');\n  }, [categories]);\n\n  const handleStatusToggle = useCallback((categoryId: number, field: 'isActive' | 'isVisible') => {\n    const updateCategory = (cats: Category[]): Category[] => {\n      return cats.map(cat => {\n        if (cat.id === categoryId) {\n          return {\n            ...cat,\n            [field]: !cat[field],\n            updatedAt: new Date().toISOString()\n          };\n        }\n        if (cat.children) {\n          return { ...cat, children: updateCategory(cat.children) };\n        }\n        return cat;\n      });\n    };\n\n    setCategories(updateCategory(categories));\n    message.success(`分类${field === 'isActive' ? '状态' : '可见性'}已更新`);\n  }, [categories]);\n\n  // Table columns\n  const columns = [\n    {\n      title: '分类信息',\n      key: 'info',\n      width: 300,\n      render: (record: Category) => (\n        <div className=\"flex items-center gap-3\">\n          {record.image ? (\n            <Avatar src={record.image} size={40} shape=\"square\" />\n          ) : (\n            <Avatar\n              size={40}\n              shape=\"square\"\n              style={{ backgroundColor: record.color }}\n              icon={<FolderOutlined />}\n            />\n          )}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"font-medium\">{record.name}</span>\n              <Tag  color=\"blue\">{record.slug}</Tag>\n              {record.level > 0 && (\n                <Tag  color=\"green\">L{record.level}</Tag>\n              )}\n            </div>\n            <div className=\"text-sm text-gray-500 truncate\">{record.description}</div>\n            <div className=\"text-xs text-gray-400 mt-1\">{record.path}</div>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: '状态',\n      key: 'status',\n      width: 120,\n      render: (record: Category) => (\n        <div className=\"space-y-1\">\n          <div>\n            <Switch\n              \n              checked={record.isActive}\n              onChange={() => handleStatusToggle(record.id, 'isActive')}\n              checkedChildren=\"启用\"\n              unCheckedChildren=\"停用\"\n            />\n          </div>\n          <div>\n            <Switch\n              \n              checked={record.isVisible}\n              onChange={() => handleStatusToggle(record.id, 'isVisible')}\n              checkedChildren=\"显示\"\n              unCheckedChildren=\"隐藏\"\n            />\n          </div>\n        </div>\n      )\n    },\n    {\n      title: '统计',\n      key: 'stats',\n      width: 100,\n      render: (record: Category) => (\n        <div className=\"text-sm\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-500\">文章:</span>\n            <span>{record.postCount}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-500\">子分类:</span>\n            <span>{record.childrenCount}</span>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: '排序',\n      key: 'sort',\n      width: 80,\n      render: (record: Category) => (\n        <div className=\"text-center\">\n          <Space direction=\"vertical\" >\n            <Button type=\"text\"  icon={<ArrowUpOutlined />} />\n            <span className=\"text-xs\">{record.sort}</span>\n            <Button type=\"text\"  icon={<ArrowDownOutlined />} />\n          </Space>\n        </div>\n      )\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      width: 120,\n      render: (record: Category) => (\n        <Space >\n          <Tooltip title=\"查看详情\">\n            <Button\n              type=\"text\"\n              \n              icon={<EyeOutlined />}\n              onClick={() => handleViewDetail(record)}\n            />\n          </Tooltip>\n          <Tooltip title=\"编辑\">\n            <Button\n              type=\"text\"\n              \n              icon={<EditOutlined />}\n              onClick={() => handleEdit(record)}\n            />\n          </Tooltip>\n          <Dropdown\n            menu={{\n              items: [\n                {\n                  key: 'addChild',\n                  icon: <PlusOutlined />,\n                  label: '添加子分类',\n                  onClick: () => {\n                    form.setFieldsValue({ parentId: record.id });\n                    handleEdit(null);\n                  }\n                },\n                {\n                  key: 'copy',\n                  icon: <CopyOutlined />,\n                  label: '复制分类',\n                  onClick: () => message.info('复制分类功能')\n                },\n                {\n                  type: 'divider'\n                },\n                {\n                  key: 'delete',\n                  icon: <DeleteOutlined />,\n                  label: '删除分类',\n                  danger: true,\n                  disabled: record.postCount > 0 || record.childrenCount > 0,\n                  onClick: () => {\n                    Modal.confirm({\n                      title: '确认删除',\n                      content: '确定要删除这个分类吗？此操作不可恢复。',\n                      okType: 'danger',\n                      onOk: () => handleDelete(record.id)\n                    });\n                  }\n                }\n              ]\n            }}\n            trigger={['click']}\n          >\n            <Button type=\"text\"  icon={<MoreOutlined />} />\n          </Dropdown>\n        </Space>\n      )\n    }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Statistics Cards */}\n      <Row gutter={16}>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"总分类数\"\n              value={statistics.total}\n              prefix={<FolderOutlined />}\n              valueStyle={{ color: '#1677ff' }}\n            />\n          </Card>\n        </Col>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"启用分类\"\n              value={statistics.active}\n              prefix={<FolderOpenOutlined />}\n              valueStyle={{ color: '#52c41a' }}\n            />\n          </Card>\n        </Col>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"停用分类\"\n              value={statistics.inactive}\n              prefix={<FolderOutlined />}\n              valueStyle={{ color: '#ff4d4f' }}\n            />\n          </Card>\n        </Col>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"根分类\"\n              value={statistics.rootCategories}\n              prefix={<FileTextOutlined />}\n              valueStyle={{ color: '#722ed1' }}\n            />\n          </Card>\n        </Col>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"总文章数\"\n              value={statistics.totalPosts}\n              prefix={<FileTextOutlined />}\n              valueStyle={{ color: '#fa8c16' }}\n            />\n          </Card>\n        </Col>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"可见分类\"\n              value={statistics.visible}\n              prefix={<EyeOutlined />}\n              valueStyle={{ color: '#13c2c2' }}\n            />\n          </Card>\n        </Col>\n      </Row>\n\n      <Card>\n        <div className=\"flex justify-between items-center mb-4\">\n          <Title level={3} className=\"mb-0\">分类管理</Title>\n          <Space>\n            <Button\n              icon={treeView ? <SortAscendingOutlined /> : <DragOutlined />}\n              onClick={() => setTreeView(!treeView)}\n            >\n              {treeView ? '列表视图' : '树形视图'}\n            </Button>\n            <Button icon={<PlusOutlined />} type=\"primary\" onClick={() => handleEdit()}>\n              新建分类\n            </Button>\n            <Button icon={<ImportOutlined />}>\n              导入分类\n            </Button>\n            <Button icon={<ExportOutlined />}>\n              导出分类\n            </Button>\n          </Space>\n        </div>\n\n        {/* Filters */}\n        <div className=\"flex gap-4 mb-4 flex-wrap\">\n          <Search\n            placeholder=\"搜索分类名称、描述或别名\"\n            style={{ width: 300 }}\n            value={filters.search}\n            onChange={e => setFilters(prev => ({ ...prev, search: e.target.value }))}\n            allowClear\n          />\n          <Select\n            placeholder=\"状态筛选\"\n            style={{ width: 120 }}\n            value={filters.status}\n            onChange={value => setFilters(prev => ({ ...prev, status: value }))}\n          >\n            <Option value=\"all\">全部状态</Option>\n            <Option value=\"active\">已启用</Option>\n            <Option value=\"inactive\">已停用</Option>\n          </Select>\n          <Select\n            placeholder=\"可见性筛选\"\n            style={{ width: 120 }}\n            value={filters.visibility}\n            onChange={value => setFilters(prev => ({ ...prev, visibility: value }))}\n          >\n            <Option value=\"all\">全部</Option>\n            <Option value=\"visible\">可见</Option>\n            <Option value=\"hidden\">隐藏</Option>\n          </Select>\n          <Select\n            placeholder=\"父分类筛选\"\n            style={{ width: 150 }}\n            value={filters.parentId}\n            onChange={value => setFilters(prev => ({ ...prev, parentId: value }))}\n            allowClear\n          >\n            <Option value={null}>根分类</Option>\n            {flatCategories.filter(cat => cat.parentId === null).map(cat => (\n              <Option key={cat.id} value={cat.id}>{cat.name}</Option>\n            ))}\n          </Select>\n          <Button\n            icon={<ReloadOutlined />}\n            onClick={() => setFilters({\n              search: '',\n              status: 'all',\n              visibility: 'all',\n              parentId: null\n            })}\n          >\n            重置筛选\n          </Button>\n        </div>\n\n        {/* Content */}\n        {treeView ? (\n          <Tree\n            treeData={treeData}\n            defaultExpandAll\n            showLine\n            showIcon\n            blockNode\n            className=\"category-tree\"\n          />\n        ) : (\n          <Table\n            rowSelection={{\n              selectedRowKeys,\n              onChange: setSelectedRowKeys\n            }}\n            columns={columns}\n            dataSource={filteredCategories}\n            rowKey=\"id\"\n            pagination={{\n              total: filteredCategories.length,\n              pageSize: 10,\n              showSizeChanger: true,\n              showQuickJumper: true,\n              showTotal: (total, range) => `第 ${range[0]}-${range[1]} 条，共 ${total} 条`\n            }}\n            loading={loading}\n          />\n        )}\n      </Card>\n\n      {/* Edit Modal */}\n      <Modal\n        title={editingCategory ? '编辑分类' : '新建分类'}\n        open={editModalVisible}\n        onCancel={() => {\n          setEditModalVisible(false);\n          setEditingCategory(null);\n        }}\n        footer={null}\n        width={600}\n      >\n        <Form\n          form={form}\n          layout=\"vertical\"\n          onFinish={handleSave}\n          initialValues={{\n            isActive: true,\n            isVisible: true,\n            color: '#1677ff',\n            sort: flatCategories.length + 1\n          }}\n        >\n          <Row gutter={16}>\n            <Col span={12}>\n              <Form.Item\n                label=\"分类名称\"\n                name=\"name\"\n                rules={[{ required: true, message: '请输入分类名称' }]}\n              >\n                <Input placeholder=\"请输入分类名称\" />\n              </Form.Item>\n            </Col>\n            <Col span={12}>\n              <Form.Item\n                label=\"URL别名\"\n                name=\"slug\"\n                rules={[{ required: true, message: '请输入URL别名' }]}\n              >\n                <Input placeholder=\"请输入URL别名\" />\n              </Form.Item>\n            </Col>\n          </Row>\n\n          <Form.Item\n            label=\"分类描述\"\n            name=\"description\"\n          >\n            <Input.TextArea rows={3} placeholder=\"请输入分类描述\" />\n          </Form.Item>\n\n          <Row gutter={16}>\n            <Col span={12}>\n              <Form.Item\n                label=\"父分类\"\n                name=\"parentId\"\n              >\n                <Select placeholder=\"选择父分类（可选）\" allowClear>\n                  {flatCategories.filter(cat =>\n                    cat.parentId === null &&\n                    (!editingCategory || cat.id !== editingCategory.id)\n                  ).map(cat => (\n                    <Option key={cat.id} value={cat.id}>{cat.name}</Option>\n                  ))}\n                </Select>\n              </Form.Item>\n            </Col>\n            <Col span={12}>\n              <Form.Item\n                label=\"排序权重\"\n                name=\"sort\"\n                rules={[{ required: true, message: '请输入排序权重' }]}\n              >\n                <Input type=\"number\" placeholder=\"数字越小排序越靠前\" />\n              </Form.Item>\n            </Col>\n          </Row>\n\n          <Row gutter={16}>\n            <Col span={8}>\n              <Form.Item\n                label=\"主题色\"\n                name=\"color\"\n              >\n                <ColorPicker showText />\n              </Form.Item>\n            </Col>\n            <Col span={8}>\n              <Form.Item\n                label=\"启用状态\"\n                name=\"isActive\"\n                valuePropName=\"checked\"\n              >\n                <Switch checkedChildren=\"启用\" unCheckedChildren=\"停用\" />\n              </Form.Item>\n            </Col>\n            <Col span={8}>\n              <Form.Item\n                label=\"前台可见\"\n                name=\"isVisible\"\n                valuePropName=\"checked\"\n              >\n                <Switch checkedChildren=\"可见\" unCheckedChildren=\"隐藏\" />\n              </Form.Item>\n            </Col>\n          </Row>\n\n          <Form.Item\n            label=\"分类图标\"\n            name=\"image\"\n          >\n            <Upload\n              listType=\"picture-card\"\n              maxCount={1}\n              beforeUpload={() => false}\n            >\n              <div>\n                <PictureOutlined />\n                <div style={{ marginTop: 8 }}>上传图标</div>\n              </div>\n            </Upload>\n          </Form.Item>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button onClick={() => setEditModalVisible(false)}>\n              取消\n            </Button>\n            <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n              {editingCategory ? '更新' : '创建'}\n            </Button>\n          </div>\n        </Form>\n      </Modal>\n\n      {/* Detail Drawer */}\n      <Drawer\n        title=\"分类详情\"\n        placement=\"right\"\n        width={500}\n        onClose={() => setDetailDrawerVisible(false)}\n        open={detailDrawerVisible}\n      >\n        {selectedCategory && (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              {selectedCategory.image ? (\n                <Avatar src={selectedCategory.image} size={80} shape=\"square\" />\n              ) : (\n                <Avatar\n                  size={80}\n                  shape=\"square\"\n                  style={{ backgroundColor: selectedCategory.color }}\n                  icon={<FolderOutlined />}\n                />\n              )}\n              <Title level={4} className=\"mt-2 mb-1\">{selectedCategory.name}</Title>\n              <Text type=\"secondary\">{selectedCategory.slug}</Text>\n            </div>\n\n            <Divider />\n\n            <div>\n              <Text strong>描述</Text>\n              <Paragraph className=\"mt-1\">{selectedCategory.description || '暂无描述'}</Paragraph>\n            </div>\n\n            <div>\n              <Text strong>分类路径</Text>\n              <div className=\"mt-1\">\n                <Tag color=\"blue\">{selectedCategory.path}</Tag>\n              </div>\n            </div>\n\n            <Row gutter={16}>\n              <Col span={12}>\n                <Statistic title=\"文章数量\" value={selectedCategory.postCount} />\n              </Col>\n              <Col span={12}>\n                <Statistic title=\"子分类数\" value={selectedCategory.childrenCount} />\n              </Col>\n            </Row>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Text strong>状态</Text>\n                <div className=\"mt-1\">\n                  <Tag color={selectedCategory.isActive ? 'green' : 'red'}>\n                    {selectedCategory.isActive ? '启用' : '停用'}\n                  </Tag>\n                </div>\n              </div>\n              <div>\n                <Text strong>可见性</Text>\n                <div className=\"mt-1\">\n                  <Tag color={selectedCategory.isVisible ? 'blue' : 'orange'}>\n                    {selectedCategory.isVisible ? '可见' : '隐藏'}\n                  </Tag>\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <Text strong>主题色</Text>\n              <div className=\"mt-1 flex items-center gap-2\">\n                <div\n                  className=\"w-6 h-6 rounded border\"\n                  style={{ backgroundColor: selectedCategory.color }}\n                />\n                <Text code>{selectedCategory.color}</Text>\n              </div>\n            </div>\n\n            <Divider />\n\n            <div className=\"space-y-2\">\n              <div>\n                <Text strong>创建时间</Text>\n                <div>{dayjs(selectedCategory.createdAt).format('YYYY-MM-DD HH:mm:ss')}</div>\n              </div>\n              <div>\n                <Text strong>更新时间</Text>\n                <div>{dayjs(selectedCategory.updatedAt).format('YYYY-MM-DD HH:mm:ss')}</div>\n              </div>\n            </div>\n\n            <div className=\"flex gap-2\">\n              <Button type=\"primary\" icon={<EditOutlined />} onClick={() => {\n                setDetailDrawerVisible(false);\n                handleEdit(selectedCategory);\n              }}>\n                编辑分类\n              </Button>\n              <Button icon={<PlusOutlined />} onClick={() => {\n                setDetailDrawerVisible(false);\n                form.setFieldsValue({ parentId: selectedCategory.id });\n                handleEdit(null);\n              }}>\n                添加子分类\n              </Button>\n            </div>\n          </div>\n        )}\n      </Drawer>\n    </div>\n  );\n};\n\nexport default CategoryManagement;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/Content/MediaLibrary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/Content/PostManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1441,1444],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1441,1444],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":239,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":239,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6282,6285],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6282,6285],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":240,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":240,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6341,6344],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6341,6344],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'status' is assigned a value but never used.","line":414,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":414,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useMemo } from 'react';\nimport {\n  Card,\n  Table,\n  Button,\n  Space,\n  Tag,\n  Typography,\n  Select,\n  Input,\n  DatePicker,\n  Modal,\n  message,\n  Dropdown,\n  Tooltip,\n  Progress,\n  Popconfirm,\n  Form,\n  Row,\n  Col,\n  Image,\n  Drawer,\n  Tabs,\n  Statistic,\n} from 'antd';\nimport {\n  PlusOutlined,\n  EditOutlined,\n  DeleteOutlined,\n  EyeOutlined,\n  MoreOutlined,\n  ExportOutlined,\n  ImportOutlined,\n  FilterOutlined,\n  CalendarOutlined,\n  FileTextOutlined,\n  BarChartOutlined,\n  CheckCircleOutlined,\n  ClockCircleOutlined,\n  ExclamationCircleOutlined,\n  SendOutlined,\n  CopyOutlined,\n  ShareAltOutlined,\n  DownloadOutlined,\n  ReloadOutlined,\n  CommentOutlined\n} from '@ant-design/icons';\nimport dayjs, { Dayjs } from 'dayjs';\n\nconst { Title, Text, Paragraph } = Typography;\nconst { Search } = Input;\nconst { RangePicker } = DatePicker;\nconst { Option } = Select;\nconst { TabPane } = Tabs;\n\n// Post status configurations\nconst POST_STATUS = {\n  DRAFT: { color: 'default', icon: <FileTextOutlined />, text: '草稿' },\n  REVIEW: { color: 'warning', icon: <ClockCircleOutlined />, text: '待审核' },\n  PUBLISHED: { color: 'success', icon: <CheckCircleOutlined />, text: '已发布' },\n  ARCHIVED: { color: 'error', icon: <ExclamationCircleOutlined />, text: '已归档' },\n  SCHEDULED: { color: 'processing', icon: <CalendarOutlined />, text: '定时发布' }\n};\n\n// API service for posts\nconst postService = {\n  async getPosts(_params: any = {}) {\n    const response = await fetch('/api/posts', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to fetch posts');\n    }\n\n    return response.json();\n  },\n\n  async updatePostStatus(postId: number, status: string) {\n    const response = await fetch(`/api/posts/${postId}/status`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n      },\n      body: JSON.stringify({ status })\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to update post status');\n    }\n\n    return response.json();\n  },\n\n  async deletePosts(postIds: number[]) {\n    const response = await fetch('/api/posts/batch-delete', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n      },\n      body: JSON.stringify({ postIds })\n    });\n\n    if (!response.ok) {\n      throw new Error('Failed to delete posts');\n    }\n\n    return response.json();\n  }\n};\n\ninterface Post {\n  id: number;\n  title: string;\n  excerpt: string;\n  author: { name: string; avatar: string };\n  category: { id: number; name: string };\n  tags: { id: number; name: string }[];\n  status: keyof typeof POST_STATUS;\n  views: number;\n  comments: number;\n  likes: number;\n  shares: number;\n  publishDate: string | null;\n  createdAt: string;\n  updatedAt: string;\n  featured: boolean;\n  seoScore: number;\n  readingTime: number;\n  wordCount: number;\n  featuredImage: string | null;\n}\n\ninterface PostFilters {\n  search: string;\n  status: string[];\n  category: string[];\n  author: string[];\n  dateRange: [Dayjs, Dayjs] | null;\n  featured: boolean | null;\n  seoScoreRange: [number, number] | null;\n}\n\nconst PostManagement: React.FC = () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [selectedRowKeys, setSelectedRowKeys] = useState<React.Key[]>([]);\n  const [filters, setFilters] = useState<PostFilters>({\n    search: '',\n    status: [],\n    category: [],\n    author: [],\n    dateRange: null,\n    featured: null,\n    seoScoreRange: null\n  });\n  const [filterDrawerVisible, setFilterDrawerVisible] = useState(false);\n  const [postDetailVisible, setPostDetailVisible] = useState(false);\n  const [selectedPost, setSelectedPost] = useState<Post | null>(null);\n  const [batchActionModal, setBatchActionModal] = useState<{ visible: boolean; action: string }>({ visible: false, action: '' });\n  const [loading, setLoading] = useState(false);\n  const [sortConfig] = useState<{ field: string; direction: 'asc' | 'desc' }>({ field: 'updatedAt', direction: 'desc' });\n\n  // Load posts data from API\n  useEffect(() => {\n    const loadPosts = async () => {\n      try {\n        setLoading(true);\n        const data = await postService.getPosts();\n        setPosts(data.data || []);\n      } catch (error) {\n        console.error('Failed to load posts:', error);\n        message.error('加载文章数据失败');\n        setPosts([]); // Set empty array on error\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadPosts();\n  }, []);\n\n  // Filter and sort posts\n  const filteredPosts = useMemo(() => {\n    let filtered = [...posts];\n\n    // Text search\n    if (filters.search) {\n      const searchLower = filters.search.toLowerCase();\n      filtered = filtered.filter(post =>\n        post.title.toLowerCase().includes(searchLower) ||\n        post.excerpt.toLowerCase().includes(searchLower) ||\n        post.author.name.toLowerCase().includes(searchLower)\n      );\n    }\n\n    // Status filter\n    if (filters.status.length > 0) {\n      filtered = filtered.filter(post => filters.status.includes(post.status));\n    }\n\n    // Category filter\n    if (filters.category.length > 0) {\n      filtered = filtered.filter(post => filters.category.includes(post.category.name));\n    }\n\n    // Author filter\n    if (filters.author.length > 0) {\n      filtered = filtered.filter(post => filters.author.includes(post.author.name));\n    }\n\n    // Date range filter\n    if (filters.dateRange) {\n      const [start, end] = filters.dateRange;\n      filtered = filtered.filter(post => {\n        const postDate = dayjs(post.createdAt);\n        return postDate.isAfter(start) && postDate.isBefore(end);\n      });\n    }\n\n    // Featured filter\n    if (filters.featured !== null) {\n      filtered = filtered.filter(post => post.featured === filters.featured);\n    }\n\n    // SEO score filter\n    if (filters.seoScoreRange) {\n      const [min, max] = filters.seoScoreRange;\n      filtered = filtered.filter(post => post.seoScore >= min && post.seoScore <= max);\n    }\n\n    // Sort\n    filtered.sort((a, b) => {\n      let aValue: any = a[sortConfig.field as keyof Post];\n      let bValue: any = b[sortConfig.field as keyof Post];\n\n      if (sortConfig.field === 'author') {\n        aValue = a.author.name;\n        bValue = b.author.name;\n      } else if (sortConfig.field === 'category') {\n        aValue = a.category.name;\n        bValue = b.category.name;\n      }\n\n      if (typeof aValue === 'string') {\n        aValue = aValue.toLowerCase();\n        bValue = bValue.toLowerCase();\n      }\n\n      if (sortConfig.direction === 'asc') {\n        return aValue > bValue ? 1 : -1;\n      } else {\n        return aValue < bValue ? 1 : -1;\n      }\n    });\n\n    return filtered;\n  }, [posts, filters, sortConfig]);\n\n  // Statistics\n  const statistics = useMemo(() => {\n    const total = posts.length;\n    const published = posts.filter(p => p.status === 'PUBLISHED').length;\n    const draft = posts.filter(p => p.status === 'DRAFT').length;\n    const review = posts.filter(p => p.status === 'REVIEW').length;\n    const totalViews = posts.reduce((sum, p) => sum + p.views, 0);\n    const totalComments = posts.reduce((sum, p) => sum + p.comments, 0);\n    const avgSeoScore = posts.length > 0 ? posts.reduce((sum, p) => sum + p.seoScore, 0) / posts.length : 0;\n\n    return {\n      total,\n      published,\n      draft,\n      review,\n      totalViews,\n      totalComments,\n      avgSeoScore: Math.round(avgSeoScore)\n    };\n  }, [posts]);\n\n  // Handle post status change\n  const handleStatusChange = useCallback(async (postId: number, newStatus: keyof typeof POST_STATUS) => {\n    try {\n      setLoading(true);\n      await postService.updatePostStatus(postId, newStatus);\n\n      setPosts(prev => prev.map(post =>\n        post.id === postId\n          ? {\n              ...post,\n              status: newStatus,\n              publishDate: newStatus === 'PUBLISHED' ? new Date().toISOString() : post.publishDate,\n              updatedAt: new Date().toISOString()\n            }\n          : post\n      ));\n      message.success(`文章状态已更新为${POST_STATUS[newStatus].text}`);\n    } catch (error) {\n      console.error('Failed to update post status:', error);\n      message.error('更新文章状态失败');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Handle batch actions\n  const handleBatchAction = useCallback((action: string) => {\n    if (selectedRowKeys.length === 0) {\n      message.warning('请先选择要操作的文章');\n      return;\n    }\n    setBatchActionModal({ visible: true, action });\n  }, [selectedRowKeys]);\n\n  const confirmBatchAction = useCallback(async () => {\n    try {\n      setLoading(true);\n      const action = batchActionModal.action;\n      const count = selectedRowKeys.length;\n      const postIds = selectedRowKeys.map(key => Number(key));\n\n      if (action === 'delete') {\n        await postService.deletePosts(postIds);\n        setPosts(prev => prev.filter(post => !selectedRowKeys.includes(post.id)));\n        setSelectedRowKeys([]);\n        message.success(`已删除 ${count} 篇文章`);\n      } else if (action === 'publish') {\n        // Batch update status\n        await Promise.all(postIds.map(id => postService.updatePostStatus(id, 'PUBLISHED')));\n        setPosts(prev => prev.map(post =>\n          selectedRowKeys.includes(post.id)\n            ? { ...post, status: 'PUBLISHED' as keyof typeof POST_STATUS, publishDate: new Date().toISOString() }\n            : post\n        ));\n        setSelectedRowKeys([]);\n        message.success(`已发布 ${count} 篇文章`);\n      } else if (action === 'archive') {\n        // Batch update status\n        await Promise.all(postIds.map(id => postService.updatePostStatus(id, 'ARCHIVED')));\n        setPosts(prev => prev.map(post =>\n          selectedRowKeys.includes(post.id)\n            ? { ...post, status: 'ARCHIVED' as keyof typeof POST_STATUS }\n            : post\n        ));\n        setSelectedRowKeys([]);\n        message.success(`已归档 ${count} 篇文章`);\n      }\n\n      setBatchActionModal({ visible: false, action: '' });\n    } catch (error) {\n      console.error('Batch action failed:', error);\n      message.error('批量操作失败');\n    } finally {\n      setLoading(false);\n    }\n  }, [batchActionModal.action, selectedRowKeys]);\n\n  // Table columns\n  const columns = [\n    {\n      title: '文章信息',\n      key: 'info',\n      width: 300,\n      render: (record: Post) => (\n        <div className=\"flex gap-3\">\n          {record.featuredImage && (\n            <Image\n              src={record.featuredImage}\n              alt={record.title}\n              width={60}\n              height={40}\n              className=\"rounded object-cover\"\n              fallback=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3Ik1RUG8G+2gDcBMzkH2C5vAuQYbBdvYiEQY6vJDLshaBP7aQiKV9Xd06/fz9f/T+o2VRXd996rqnfP...\"\n            />\n          )}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"font-medium text-gray-900 truncate\">{record.title}</div>\n            <div className=\"text-sm text-gray-500 mt-1\">{record.excerpt}</div>\n            <div className=\"flex items-center gap-2 mt-2\">\n              <img src={record.author.avatar} alt={record.author.name} className=\"w-4 h-4 rounded-full\" />\n              <span className=\"text-xs text-gray-500\">{record.author.name}</span>\n              <span className=\"text-xs text-gray-400\">·</span>\n              <span className=\"text-xs text-gray-500\">{dayjs(record.createdAt).format('MM-DD HH:mm')}</span>\n            </div>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: '分类/标签',\n      key: 'category',\n      width: 150,\n      render: (record: Post) => (\n        <div>\n          <Tag color=\"blue\">{record.category.name}</Tag>\n          <div className=\"mt-1\">\n            {record.tags.map(tag => (\n              <Tag key={tag.id} >{tag.name}</Tag>\n            ))}\n          </div>\n        </div>\n      )\n    },\n    {\n      title: '状态',\n      key: 'status',\n      width: 100,\n      render: (record: Post) => {\n        const status = POST_STATUS[record.status];\n        return (\n          <Select\n            value={record.status}\n            \n            style={{ width: '100%' }}\n            onChange={(value) => handleStatusChange(record.id, value)}\n          >\n            {Object.entries(POST_STATUS).map(([key, config]) => (\n              <Option key={key} value={key}>\n                <Tag color={config.color} icon={config.icon}>{config.text}</Tag>\n              </Option>\n            ))}\n          </Select>\n        );\n      }\n    },\n    {\n      title: '数据统计',\n      key: 'stats',\n      width: 120,\n      render: (record: Post) => (\n        <div className=\"text-xs\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-500\">浏览:</span>\n            <span>{record.views}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-500\">评论:</span>\n            <span>{record.comments}</span>\n          </div>\n          <div className=\"flex justify-between\">\n            <span className=\"text-gray-500\">点赞:</span>\n            <span>{record.likes}</span>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: 'SEO',\n      key: 'seo',\n      width: 80,\n      render: (record: Post) => (\n        <div className=\"text-center\">\n          <Progress\n            type=\"circle\"\n            size={40}\n            percent={record.seoScore}\n            format={percent => `${percent}`}\n            strokeColor={record.seoScore >= 80 ? '#52c41a' : record.seoScore >= 60 ? '#faad14' : '#ff4d4f'}\n          />\n        </div>\n      )\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      width: 120,\n      render: (record: Post) => (\n        <Space >\n          <Tooltip title=\"查看详情\">\n            <Button\n              type=\"text\"\n              \n              icon={<EyeOutlined />}\n              onClick={() => {\n                setSelectedPost(record);\n                setPostDetailVisible(true);\n              }}\n            />\n          </Tooltip>\n          <Tooltip title=\"编辑\">\n            <Button\n              type=\"text\"\n              \n              icon={<EditOutlined />}\n              onClick={() => message.info('跳转到编辑页面')}\n            />\n          </Tooltip>\n          <Dropdown\n            menu={{\n              items: [\n                {\n                  key: 'copy',\n                  icon: <CopyOutlined />,\n                  label: '复制文章',\n                  onClick: () => message.info('复制文章功能')\n                },\n                {\n                  key: 'share',\n                  icon: <ShareAltOutlined />,\n                  label: '分享文章',\n                  onClick: () => message.info('分享文章功能')\n                },\n                {\n                  key: 'export',\n                  icon: <DownloadOutlined />,\n                  label: '导出文章',\n                  onClick: () => message.info('导出文章功能')\n                },\n                {\n                  type: 'divider'\n                },\n                {\n                  key: 'delete',\n                  icon: <DeleteOutlined />,\n                  label: '删除文章',\n                  danger: true,\n                  onClick: () => {\n                    Modal.confirm({\n                      title: '确认删除',\n                      content: '确定要删除这篇文章吗？此操作不可恢复。',\n                      okType: 'danger',\n                      onOk: () => {\n                        setPosts(prev => prev.filter(p => p.id !== record.id));\n                        message.success('文章已删除');\n                      }\n                    });\n                  }\n                }\n              ]\n            }}\n            trigger={['click']}\n          >\n            <Button type=\"text\"  icon={<MoreOutlined />} />\n          </Dropdown>\n        </Space>\n      )\n    }\n  ];\n\n  const rowSelection = {\n    selectedRowKeys,\n    onChange: setSelectedRowKeys,\n    selections: [\n      Table.SELECTION_ALL,\n      Table.SELECTION_INVERT,\n      Table.SELECTION_NONE,\n      {\n        key: 'published',\n        text: '选择已发布',\n        onSelect: (_changeableRowKeys: React.Key[]) => {\n          const publishedKeys = posts\n            .filter(post => post.status === 'PUBLISHED')\n            .map(post => post.id);\n          setSelectedRowKeys(publishedKeys);\n        }\n      }\n    ]\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Statistics Cards */}\n      <Row gutter={16}>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"总文章数\"\n              value={statistics.total}\n              prefix={<FileTextOutlined />}\n              valueStyle={{ color: '#1677ff' }}\n            />\n          </Card>\n        </Col>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"已发布\"\n              value={statistics.published}\n              prefix={<CheckCircleOutlined />}\n              valueStyle={{ color: '#52c41a' }}\n            />\n          </Card>\n        </Col>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"草稿\"\n              value={statistics.draft}\n              prefix={<FileTextOutlined />}\n              valueStyle={{ color: '#faad14' }}\n            />\n          </Card>\n        </Col>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"待审核\"\n              value={statistics.review}\n              prefix={<ClockCircleOutlined />}\n              valueStyle={{ color: '#fa8c16' }}\n            />\n          </Card>\n        </Col>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"总浏览量\"\n              value={statistics.totalViews}\n              prefix={<EyeOutlined />}\n              valueStyle={{ color: '#722ed1' }}\n            />\n          </Card>\n        </Col>\n        <Col span={4}>\n          <Card>\n            <Statistic\n              title=\"平均SEO\"\n              value={statistics.avgSeoScore}\n              suffix=\"%\"\n              prefix={<BarChartOutlined />}\n              valueStyle={{ color: statistics.avgSeoScore >= 80 ? '#52c41a' : '#faad14' }}\n            />\n          </Card>\n        </Col>\n      </Row>\n\n      <Card>\n        <div className=\"flex justify-between items-center mb-4\">\n          <Title level={3} className=\"mb-0\">文章管理</Title>\n          <Space>\n            <Button icon={<PlusOutlined />} type=\"primary\">\n              新建文章\n            </Button>\n            <Button icon={<ImportOutlined />}>\n              导入文章\n            </Button>\n            <Button icon={<ExportOutlined />}>\n              导出文章\n            </Button>\n          </Space>\n        </div>\n\n        {/* Filters and Search */}\n        <div className=\"flex gap-4 mb-4 flex-wrap\">\n          <Search\n            placeholder=\"搜索文章标题、内容或作者\"\n            style={{ width: 300 }}\n            value={filters.search}\n            onChange={e => setFilters(prev => ({ ...prev, search: e.target.value }))}\n            allowClear\n          />\n          <Select\n            mode=\"multiple\"\n            placeholder=\"状态筛选\"\n            style={{ width: 200 }}\n            value={filters.status}\n            onChange={value => setFilters(prev => ({ ...prev, status: value }))}\n            allowClear\n          >\n            {Object.entries(POST_STATUS).map(([key, config]) => (\n              <Option key={key} value={key}>\n                <Tag color={config.color} icon={config.icon}>{config.text}</Tag>\n              </Option>\n            ))}\n          </Select>\n          <Button\n            icon={<FilterOutlined />}\n            onClick={() => setFilterDrawerVisible(true)}\n          >\n            高级筛选\n          </Button>\n          <Button\n            icon={<ReloadOutlined />}\n            onClick={() => {\n              setFilters({\n                search: '',\n                status: [],\n                category: [],\n                author: [],\n                dateRange: null,\n                featured: null,\n                seoScoreRange: null\n              });\n              message.success('筛选条件已重置');\n            }}\n          >\n            重置筛选\n          </Button>\n        </div>\n\n        {/* Batch Actions */}\n        {selectedRowKeys.length > 0 && (\n          <div className=\"bg-blue-50 border border-blue-200 rounded p-3 mb-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-blue-700\">\n                已选择 {selectedRowKeys.length} 篇文章\n              </span>\n              <Space>\n                <Button\n                  \n                  icon={<SendOutlined />}\n                  onClick={() => handleBatchAction('publish')}\n                >\n                  批量发布\n                </Button>\n                <Button\n                  \n                  icon={<ExclamationCircleOutlined />}\n                  onClick={() => handleBatchAction('archive')}\n                >\n                  批量归档\n                </Button>\n                <Button\n                  \n                  icon={<ExportOutlined />}\n                  onClick={() => handleBatchAction('export')}\n                >\n                  批量导出\n                </Button>\n                <Popconfirm\n                  title=\"确认删除\"\n                  description={`确定要删除选中的 ${selectedRowKeys.length} 篇文章吗？`}\n                  onConfirm={() => handleBatchAction('delete')}\n                  okType=\"danger\"\n                >\n                  <Button\n                    \n                    danger\n                    icon={<DeleteOutlined />}\n                  >\n                    批量删除\n                  </Button>\n                </Popconfirm>\n              </Space>\n            </div>\n          </div>\n        )}\n\n        {/* Posts Table */}\n        <Table\n          rowSelection={rowSelection}\n          columns={columns}\n          dataSource={filteredPosts}\n          rowKey=\"id\"\n          pagination={{\n            total: filteredPosts.length,\n            pageSize: 10,\n            showSizeChanger: true,\n            showQuickJumper: true,\n            showTotal: (total, range) => `第 ${range[0]}-${range[1]} 条，共 ${total} 条`\n          }}\n          scroll={{ x: 1200 }}\n          loading={loading}\n        />\n      </Card>\n\n      {/* Advanced Filter Drawer */}\n      <Drawer\n        title=\"高级筛选\"\n        placement=\"right\"\n        width={400}\n        onClose={() => setFilterDrawerVisible(false)}\n        open={filterDrawerVisible}\n      >\n        <Form layout=\"vertical\">\n          <Form.Item label=\"发布时间范围\">\n            <RangePicker\n              style={{ width: '100%' }}\n              value={filters.dateRange}\n              onChange={value => setFilters(prev => ({ ...prev, dateRange: value }))}\n            />\n          </Form.Item>\n          <Form.Item label=\"分类筛选\">\n            <Select\n              mode=\"multiple\"\n              placeholder=\"选择分类\"\n              style={{ width: '100%' }}\n              value={filters.category}\n              onChange={value => setFilters(prev => ({ ...prev, category: value }))}\n            >\n              <Option value=\"前端技术\">前端技术</Option>\n              <Option value=\"系统架构\">系统架构</Option>\n              <Option value=\"数据库\">数据库</Option>\n            </Select>\n          </Form.Item>\n          <Form.Item label=\"作者筛选\">\n            <Select\n              mode=\"multiple\"\n              placeholder=\"选择作者\"\n              style={{ width: '100%' }}\n              value={filters.author}\n              onChange={value => setFilters(prev => ({ ...prev, author: value }))}\n            >\n              <Option value=\"张三\">张三</Option>\n              <Option value=\"李四\">李四</Option>\n              <Option value=\"王五\">王五</Option>\n            </Select>\n          </Form.Item>\n          <Form.Item label=\"精选文章\">\n            <Select\n              placeholder=\"选择精选状态\"\n              style={{ width: '100%' }}\n              value={filters.featured}\n              onChange={value => setFilters(prev => ({ ...prev, featured: value }))}\n              allowClear\n            >\n              <Option value={true}>精选文章</Option>\n              <Option value={false}>普通文章</Option>\n            </Select>\n          </Form.Item>\n        </Form>\n      </Drawer>\n\n      {/* Post Detail Modal */}\n      <Modal\n        title=\"文章详情\"\n        open={postDetailVisible}\n        onCancel={() => setPostDetailVisible(false)}\n        footer={[\n          <Button key=\"close\" onClick={() => setPostDetailVisible(false)}>\n            关闭\n          </Button>,\n          <Button key=\"edit\" type=\"primary\" icon={<EditOutlined />}>\n            编辑文章\n          </Button>\n        ]}\n        width={800}\n      >\n        {selectedPost && (\n          <Tabs defaultActiveKey=\"info\">\n            <TabPane tab=\"基本信息\" key=\"info\">\n              <div className=\"space-y-4\">\n                <div>\n                  <Text strong>标题：</Text>\n                  <Paragraph copyable>{selectedPost.title}</Paragraph>\n                </div>\n                <div>\n                  <Text strong>摘要：</Text>\n                  <Paragraph>{selectedPost.excerpt}</Paragraph>\n                </div>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Text strong>作者：</Text>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <img src={selectedPost.author.avatar} alt={selectedPost.author.name} className=\"w-6 h-6 rounded-full\" />\n                      <span>{selectedPost.author.name}</span>\n                    </div>\n                  </div>\n                  <div>\n                    <Text strong>分类：</Text>\n                    <div className=\"mt-1\">\n                      <Tag color=\"blue\">{selectedPost.category.name}</Tag>\n                    </div>\n                  </div>\n                </div>\n                <div>\n                  <Text strong>标签：</Text>\n                  <div className=\"mt-1\">\n                    {selectedPost.tags.map(tag => (\n                      <Tag key={tag.id}>{tag.name}</Tag>\n                    ))}\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Text strong>字数：</Text>\n                    <span className=\"ml-2\">{selectedPost.wordCount} 字</span>\n                  </div>\n                  <div>\n                    <Text strong>阅读时间：</Text>\n                    <span className=\"ml-2\">{selectedPost.readingTime} 分钟</span>\n                  </div>\n                </div>\n              </div>\n            </TabPane>\n            <TabPane tab=\"数据统计\" key=\"stats\">\n              <Row gutter={16}>\n                <Col span={6}>\n                  <Statistic title=\"浏览量\" value={selectedPost.views} prefix={<EyeOutlined />} />\n                </Col>\n                <Col span={6}>\n                  <Statistic title=\"评论数\" value={selectedPost.comments} prefix={<CommentOutlined />} />\n                </Col>\n                <Col span={6}>\n                  <Statistic title=\"点赞数\" value={selectedPost.likes} prefix={<CheckCircleOutlined />} />\n                </Col>\n                <Col span={6}>\n                  <Statistic title=\"分享数\" value={selectedPost.shares} prefix={<ShareAltOutlined />} />\n                </Col>\n              </Row>\n              <div className=\"mt-6\">\n                <Text strong>SEO 得分：</Text>\n                <div className=\"mt-2\">\n                  <Progress\n                    percent={selectedPost.seoScore}\n                    strokeColor={selectedPost.seoScore >= 80 ? '#52c41a' : selectedPost.seoScore >= 60 ? '#faad14' : '#ff4d4f'}\n                  />\n                </div>\n              </div>\n            </TabPane>\n            <TabPane tab=\"时间信息\" key=\"time\">\n              <div className=\"space-y-4\">\n                <div>\n                  <Text strong>创建时间：</Text>\n                  <div className=\"mt-1\">{dayjs(selectedPost.createdAt).format('YYYY-MM-DD HH:mm:ss')}</div>\n                </div>\n                <div>\n                  <Text strong>更新时间：</Text>\n                  <div className=\"mt-1\">{dayjs(selectedPost.updatedAt).format('YYYY-MM-DD HH:mm:ss')}</div>\n                </div>\n                {selectedPost.publishDate && (\n                  <div>\n                    <Text strong>发布时间：</Text>\n                    <div className=\"mt-1\">{dayjs(selectedPost.publishDate).format('YYYY-MM-DD HH:mm:ss')}</div>\n                  </div>\n                )}\n              </div>\n            </TabPane>\n          </Tabs>\n        )}\n      </Modal>\n\n      {/* Batch Action Confirmation Modal */}\n      <Modal\n        title=\"批量操作确认\"\n        open={batchActionModal.visible}\n        onOk={confirmBatchAction}\n        onCancel={() => setBatchActionModal({ visible: false, action: '' })}\n        confirmLoading={loading}\n        okType={batchActionModal.action === 'delete' ? 'danger' : 'primary'}\n      >\n        {batchActionModal.action === 'publish' && (\n          <p>确定要发布选中的 {selectedRowKeys.length} 篇文章吗？</p>\n        )}\n        {batchActionModal.action === 'archive' && (\n          <p>确定要归档选中的 {selectedRowKeys.length} 篇文章吗？</p>\n        )}\n        {batchActionModal.action === 'delete' && (\n          <p>确定要删除选中的 {selectedRowKeys.length} 篇文章吗？此操作不可恢复。</p>\n        )}\n      </Modal>\n    </div>\n  );\n};\n\nexport default PostManagement;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/Dashboard/index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isFullscreen' is assigned a value but never used.","line":93,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setIsFullscreen' is assigned a value but never used.","line":93,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hasPermission' is assigned a value but never used.","line":95,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":121,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2246,2249],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2246,2249],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":264,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":264,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6152,6155],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6152,6155],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback } from 'react';\nimport {\n  Row,\n  Col,\n  Card,\n  Space,\n  Button,\n  Dropdown,\n  Switch,\n  InputNumber,\n  Alert,\n  Tag,\n  Avatar,\n  List,\n  Typography,\n  Progress,\n  Divider,\n} from 'antd';\nimport {\n  ReloadOutlined,\n  SettingOutlined,\n  FullscreenOutlined,\n  UserOutlined,\n  FileTextOutlined,\n  EyeOutlined,\n  CommentOutlined,\n  ClockCircleOutlined,\n  CheckCircleOutlined,\n  ExclamationCircleOutlined,\n  CloseCircleOutlined,\n} from '@ant-design/icons';\nimport dayjs from 'dayjs';\nimport { StatCardVariants, StatCardFormatters } from '@/components/charts/StatCard';\nimport LineChart from '@/components/charts/LineChart';\nimport { useDashboard, useDashboardConfig } from '@/hooks/useDashboard';\nimport { usePermissions } from '@/hooks/usePermissions';\nimport type { Activity, HealthCheck } from '@/types';\n\nconst { Text, Title } = Typography;\n\n// Dashboard layout configurations\nconst DASHBOARD_LAYOUTS = {\n  default: {\n    statsCards: {\n      xs: 24,\n      sm: 12,\n      md: 6,\n      lg: 6,\n      xl: 6,\n    },\n    charts: {\n      xs: 24,\n      sm: 24,\n      md: 12,\n      lg: 12,\n      xl: 8,\n    },\n    activity: {\n      xs: 24,\n      sm: 24,\n      md: 24,\n      lg: 24,\n      xl: 8,\n    },\n  },\n  compact: {\n    statsCards: {\n      xs: 24,\n      sm: 12,\n      md: 8,\n      lg: 6,\n      xl: 4,\n    },\n    charts: {\n      xs: 24,\n      sm: 24,\n      md: 12,\n      lg: 8,\n      xl: 8,\n    },\n    activity: {\n      xs: 24,\n      sm: 24,\n      md: 12,\n      lg: 8,\n      xl: 8,\n    },\n  },\n};\n\nconst Dashboard: React.FC = () => {\n  const [currentLayout, setCurrentLayout] = useState<'default' | 'compact'>('default');\n  const [isFullscreen, setIsFullscreen] = useState(false);\n\n  const { hasPermission } = usePermissions();\n\n  const {\n    stats,\n    metrics,\n    healthCheck,\n    activities,\n    isLoading,\n    isRefreshing,\n    hasErrors,\n    isConnected,\n    refreshAll,\n    exportData,\n    getChartData,\n    getTrendData,\n  } = useDashboard();\n\n  const {\n    autoRefresh,\n    refreshInterval,\n    updateRefreshSettings,\n  } = useDashboardConfig();\n\n  const layout = DASHBOARD_LAYOUTS[currentLayout];\n\n  // Handle refresh settings change\n  const handleRefreshSettingsChange = useCallback((key: string, value: any) => {\n    updateRefreshSettings({ [key]: value });\n  }, [updateRefreshSettings]);\n\n  // Handle export\n  const handleExport = useCallback((format: 'json' | 'csv' | 'excel') => {\n    exportData(format);\n  }, [exportData]);\n\n  // Render dashboard toolbar\n  const renderToolbar = () => {\n    const settingsMenu = {\n      items: [\n        {\n          key: 'auto-refresh',\n          label: (\n            <div className=\"flex items-center justify-between w-48\">\n              <span>自动刷新</span>\n              <Switch\n                \n                checked={autoRefresh}\n                onChange={(checked) => handleRefreshSettingsChange('autoRefresh', checked)}\n              />\n            </div>\n          ),\n        },\n        {\n          key: 'refresh-interval',\n          label: (\n            <div className=\"flex items-center justify-between w-48\">\n              <span>刷新间隔(秒)</span>\n              <InputNumber\n                \n                min={5}\n                max={300}\n                value={refreshInterval}\n                onChange={(value) => handleRefreshSettingsChange('refreshInterval', value)}\n                style={{ width: 80 }}\n              />\n            </div>\n          ),\n        },\n        { type: 'divider' },\n        {\n          key: 'layout-default',\n          label: '默认布局',\n          onClick: () => setCurrentLayout('default'),\n        },\n        {\n          key: 'layout-compact',\n          label: '紧凑布局',\n          onClick: () => setCurrentLayout('compact'),\n        },\n        { type: 'divider' },\n        {\n          key: 'export-json',\n          label: '导出 JSON',\n          onClick: () => handleExport('json'),\n        },\n        {\n          key: 'export-csv',\n          label: '导出 CSV',\n          onClick: () => handleExport('csv'),\n        },\n        {\n          key: 'export-excel',\n          label: '导出 Excel',\n          onClick: () => handleExport('excel'),\n        },\n      ],\n    };\n\n    return (\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <Title level={2} className=\"mb-0\">\n            管理仪表盘\n          </Title>\n          <Text type=\"secondary\">\n            实时监控系统状态和关键指标\n            {!isConnected && (\n              <Tag color=\"orange\" className=\"ml-2\">\n                离线模式\n              </Tag>\n            )}\n          </Text>\n        </div>\n\n        <Space>\n          <Button\n            type=\"text\"\n            icon={<ReloadOutlined />}\n            loading={isRefreshing}\n            onClick={refreshAll}\n          >\n            刷新\n          </Button>\n\n          <Dropdown menu={settingsMenu} placement=\"bottomRight\">\n            <Button type=\"text\" icon={<SettingOutlined />}>\n              设置\n            </Button>\n          </Dropdown>\n\n          <Button\n            type=\"text\"\n            icon={<FullscreenOutlined />}\n            onClick={() => {\n              if (document.fullscreenElement) {\n                document.exitFullscreen();\n              } else {\n                document.documentElement.requestFullscreen();\n              }\n            }}\n          >\n            全屏\n          </Button>\n        </Space>\n      </div>\n    );\n  };\n\n  // Render system health status\n  const renderHealthStatus = () => {\n    if (!healthCheck) return null;\n\n    const getStatusConfig = (status: HealthCheck['status']) => {\n      switch (status) {\n        case 'healthy':\n          return { color: 'success', icon: <CheckCircleOutlined />, text: '健康' };\n        case 'degraded':\n          return { color: 'warning', icon: <ExclamationCircleOutlined />, text: '降级' };\n        case 'unhealthy':\n          return { color: 'error', icon: <CloseCircleOutlined />, text: '异常' };\n        default:\n          return { color: 'default', icon: <ClockCircleOutlined />, text: '未知' };\n      }\n    };\n\n    const statusConfig = getStatusConfig(healthCheck.status);\n\n    return (\n      <Alert\n        type={statusConfig.color as any}\n        showIcon\n        icon={statusConfig.icon}\n        message={`系统状态：${statusConfig.text}`}\n        description={\n          <div className=\"mt-2\">\n            <Text type=\"secondary\">\n              检查时间：{dayjs(healthCheck.timestamp).format('YYYY-MM-DD HH:mm:ss')}\n            </Text>\n            <div className=\"mt-2 grid grid-cols-2 md:grid-cols-4 gap-2\">\n              {Object.entries(healthCheck.checks).map(([key, check]) => (\n                <div key={key} className=\"flex items-center gap-2\">\n                  <div\n                    className={`w-2 h-2 rounded-full ${\n                      check.status === 'pass'\n                        ? 'bg-green-500'\n                        : check.status === 'warn'\n                        ? 'bg-yellow-500'\n                        : 'bg-red-500'\n                    }`}\n                  />\n                  <Text style={{ fontSize: 12 }}>{key}</Text>\n                </div>\n              ))}\n            </div>\n          </div>\n        }\n        className=\"mb-6\"\n      />\n    );\n  };\n\n  // Render statistics cards\n  const renderStatsCards = () => {\n    if (!stats) return null;\n\n    const trendData = getTrendData();\n\n    const cards = [\n      {\n        Component: StatCardVariants.UserStats,\n        props: {\n          title: '用户统计',\n          value: stats.userStats.total,\n          formatter: StatCardFormatters.number,\n          trend: {\n            value: trendData?.userTrend || 0,\n            label: '较昨日',\n          },\n          tooltip: `活跃用户：${stats.userStats.active}，今日新增：${stats.userStats.newToday}`,\n        },\n      },\n      {\n        Component: StatCardVariants.ContentStats,\n        props: {\n          title: '内容统计',\n          value: stats.contentStats.publishedPosts,\n          suffix: '篇',\n          trend: {\n            value: trendData?.contentTrend || 0,\n            label: '较昨日',\n          },\n          tooltip: `草稿：${stats.contentStats.drafts}，今日新增：${stats.contentStats.postsToday}`,\n        },\n      },\n      {\n        Component: StatCardVariants.SystemStats,\n        props: {\n          title: '总浏览量',\n          value: stats.systemStats.viewsTotal,\n          formatter: StatCardFormatters.number,\n          tooltip: `今日浏览：${stats.systemStats.viewsToday}`,\n        },\n      },\n      {\n        Component: StatCardVariants.PerformanceStats,\n        props: {\n          title: '性能评分',\n          value: stats.systemStats.performanceScore,\n          precision: 1,\n          suffix: '分',\n          tooltip: '系统综合性能评分',\n        },\n      },\n    ];\n\n    return (\n      <Row gutter={[16, 16]} className=\"mb-6\">\n        {cards.map((card, index) => (\n          <Col key={index} {...layout.statsCards}>\n            <card.Component\n              {...card.props}\n              loading={isLoading}\n              size={currentLayout === 'compact' ? 'small' : 'default'}\n            />\n          </Col>\n        ))}\n      </Row>\n    );\n  };\n\n  // Render charts section\n  const renderCharts = () => {\n    const charts = [\n      {\n        title: '流量趋势',\n        type: 'traffic' as const,\n        description: '网站访问量变化趋势',\n      },\n      {\n        title: '系统性能',\n        type: 'performance' as const,\n        description: '系统资源使用情况',\n      },\n      {\n        title: '用户增长',\n        type: 'users' as const,\n        description: '用户注册和活跃趋势',\n      },\n    ];\n\n    return (\n      <Row gutter={[16, 16]} className=\"mb-6\">\n        {charts.map((chart) => (\n          <Col key={chart.type} {...layout.charts}>\n            <LineChart\n              title={chart.title}\n              data={getChartData(chart.type)}\n              loading={isLoading}\n              height={currentLayout === 'compact' ? 250 : 300}\n              onRefresh={refreshAll}\n              showToolbar={true}\n            />\n          </Col>\n        ))}\n      </Row>\n    );\n  };\n\n  // Render activity feed\n  const renderActivityFeed = () => {\n    if (!activities) return null;\n\n    const getActivityIcon = (type: Activity['type']) => {\n      switch (type) {\n        case 'user_login':\n        case 'user_register':\n          return <UserOutlined className=\"text-blue-500\" />;\n        case 'post_create':\n        case 'post_update':\n        case 'post_delete':\n          return <FileTextOutlined className=\"text-green-500\" />;\n        case 'comment_create':\n          return <CommentOutlined className=\"text-orange-500\" />;\n        default:\n          return <ClockCircleOutlined className=\"text-gray-500\" />;\n      }\n    };\n\n    return (\n      <Col {...layout.activity}>\n        <Card\n          title=\"最近活动\"\n          bordered={false}\n          className=\"h-full\"\n          extra={\n            <Button type=\"text\"  icon={<EyeOutlined />}>\n              查看全部\n            </Button>\n          }\n        >\n          <List\n            loading={isLoading}\n            dataSource={activities.slice(0, 10)}\n            renderItem={(activity) => (\n              <List.Item>\n                <List.Item.Meta\n                  avatar={\n                    <Avatar\n                      \n                      icon={getActivityIcon(activity.type)}\n                      src={activity.user.avatar}\n                    />\n                  }\n                  title={\n                    <div className=\"flex items-center justify-between\">\n                      <Text>{activity.description}</Text>\n                      <Text type=\"secondary\" style={{ fontSize: 12 }}>\n                        {dayjs(activity.createdAt).fromNow()}\n                      </Text>\n                    </div>\n                  }\n                  description={\n                    <Text type=\"secondary\" style={{ fontSize: 12 }}>\n                      {activity.user.displayName || activity.user.username}\n                    </Text>\n                  }\n                />\n              </List.Item>\n            )}\n          />\n        </Card>\n      </Col>\n    );\n  };\n\n  // Render system metrics\n  const renderSystemMetrics = () => {\n    if (!metrics) return null;\n\n    return (\n      <Row gutter={[16, 16]}>\n        <Col span={24}>\n          <Card title=\"系统监控\" bordered={false}>\n            <Row gutter={[16, 16]}>\n              <Col xs={24} sm={12} md={6}>\n                <div className=\"text-center\">\n                  <Progress\n                    type=\"circle\"\n                    percent={metrics.cpu.usage}\n                    size={80}\n                    status={metrics.cpu.usage > 80 ? 'exception' : 'normal'}\n                  />\n                  <div className=\"mt-2\">\n                    <Text strong>CPU 使用率</Text>\n                    <br />\n                    <Text type=\"secondary\">{metrics.cpu.cores} 核心</Text>\n                  </div>\n                </div>\n              </Col>\n              <Col xs={24} sm={12} md={6}>\n                <div className=\"text-center\">\n                  <Progress\n                    type=\"circle\"\n                    percent={metrics.memory.usage}\n                    size={80}\n                    status={metrics.memory.usage > 80 ? 'exception' : 'normal'}\n                  />\n                  <div className=\"mt-2\">\n                    <Text strong>内存使用率</Text>\n                    <br />\n                    <Text type=\"secondary\">\n                      {StatCardFormatters.fileSize(metrics.memory.used)} /\n                      {StatCardFormatters.fileSize(metrics.memory.total)}\n                    </Text>\n                  </div>\n                </div>\n              </Col>\n              <Col xs={24} sm={12} md={6}>\n                <div className=\"text-center\">\n                  <Progress\n                    type=\"circle\"\n                    percent={metrics.disk.usage}\n                    size={80}\n                    status={metrics.disk.usage > 90 ? 'exception' : 'normal'}\n                  />\n                  <div className=\"mt-2\">\n                    <Text strong>磁盘使用率</Text>\n                    <br />\n                    <Text type=\"secondary\">\n                      {StatCardFormatters.fileSize(metrics.disk.used)} /\n                      {StatCardFormatters.fileSize(metrics.disk.total)}\n                    </Text>\n                  </div>\n                </div>\n              </Col>\n              <Col xs={24} sm={12} md={6}>\n                <div className=\"text-center\">\n                  <div className=\"mb-4\">\n                    <Text strong display=\"block\">应用状态</Text>\n                    <Text type=\"secondary\">\n                      运行时间：{StatCardFormatters.duration(metrics.application.uptime)}\n                    </Text>\n                  </div>\n                  <Space direction=\"vertical\" >\n                    <div>\n                      <Text>请求数：{StatCardFormatters.number(metrics.application.requestCount)}</Text>\n                    </div>\n                    <div>\n                      <Text>错误数：{metrics.application.errorCount}</Text>\n                    </div>\n                    <div>\n                      <Text>响应时间：{metrics.application.responseTime}ms</Text>\n                    </div>\n                  </Space>\n                </div>\n              </Col>\n            </Row>\n          </Card>\n        </Col>\n      </Row>\n    );\n  };\n\n  // Handle errors\n  if (hasErrors) {\n    return (\n      <div className=\"p-6\">\n        <Alert\n          type=\"error\"\n          message=\"数据加载失败\"\n          description=\"无法获取仪表盘数据，请检查网络连接或稍后重试。\"\n          showIcon\n          action={\n            <Button  danger onClick={refreshAll}>\n              重试\n            </Button>\n          }\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard-page\">\n      {renderToolbar()}\n      {renderHealthStatus()}\n      {renderStatsCards()}\n      {renderCharts()}\n      <Row gutter={[16, 16]}>\n        {renderActivityFeed()}\n      </Row>\n      <Divider />\n      {renderSystemMetrics()}\n    </div>\n  );\n};\n\nexport default Dashboard;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/System/Logs.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'analyticsModalVisible' is assigned a value but never used.","line":86,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":86,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setAnalyticsModalVisible' is assigned a value but never used.","line":86,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":86,"endColumn":57},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":253,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":253,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7165,7168],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7165,7168],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":266,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":266,"endColumn":94},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":267,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":277,"endColumn":11},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Modal' is not defined.","line":910,"column":8,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":910,"endColumn":13},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Modal' is not defined.","line":1005,"column":8,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":1005,"endColumn":13}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Card,\n  Row,\n  Col,\n  Typography,\n  Space,\n  Button,\n  Tabs,\n  Select,\n  Input,\n  DatePicker,\n  Switch,\n  Badge,\n  Tag,\n  Statistic,\n  List,\n  Dropdown,\n  Menu,\n  notification,\n  Progress,\n  Timeline,\n  Empty,\n} from 'antd';\nimport {\n  FileTextOutlined,\n  SearchOutlined,\n  DownloadOutlined,\n  ReloadOutlined,\n  SettingOutlined,\n  ClearOutlined,\n  PlayCircleOutlined,\n  PauseCircleOutlined,\n  EyeOutlined,\n  WarningOutlined,\n  BugOutlined,\n  InfoCircleOutlined,\n  CloseCircleOutlined,\n  CloudDownloadOutlined,\n  BarChartOutlined,\n  DatabaseOutlined,\n} from '@ant-design/icons';\nimport LogViewer from '../../components/logs/LogViewer';\nimport PieChart from '../../components/charts/PieChart';\nimport BarChart from '../../components/charts/BarChart';\nimport dayjs from 'dayjs';\n\nconst { Title, Text, Paragraph } = Typography;\nconst { TabPane } = Tabs;\nconst { Option } = Select;\nconst { RangePicker } = DatePicker;\nconst { Search } = Input;\n\ninterface LogAnalytics {\n  totalLogs: number;\n  errorRate: number;\n  topSources: Array<{ name: string; count: number; percentage: number }>;\n  logLevels: Array<{ level: string; count: number; color: string }>;\n  hourlyDistribution: Array<{ hour: string; count: number }>;\n  recentErrors: Array<{\n    id: string;\n    timestamp: string;\n    level: string;\n    source: string;\n    message: string;\n  }>;\n}\n\ninterface LogExportConfig {\n  format: 'json' | 'csv' | 'txt';\n  levels: string[];\n  sources: string[];\n  dateRange: [string, string] | null;\n  maxEntries: number;\n}\n\nconst SystemLogs: React.FC = () => {\n  const [activeTab, setActiveTab] = useState('viewer');\n  const [loading, setLoading] = useState(false);\n  const [streaming, setStreaming] = useState(true);\n  const [autoRefresh, setAutoRefresh] = useState(true);\n  const [refreshInterval, setRefreshInterval] = useState(30);\n  \n  // Modals\n  const [exportModalVisible, setExportModalVisible] = useState(false);\n  const [analyticsModalVisible, setAnalyticsModalVisible] = useState(false);\n  const [settingsModalVisible, setSettingsModalVisible] = useState(false);\n\n  // Analytics data\n  const [analytics, setAnalytics] = useState<LogAnalytics>({\n    totalLogs: 15423,\n    errorRate: 2.8,\n    topSources: [\n      { name: 'MapleBlog.API', count: 5432, percentage: 35.2 },\n      { name: 'Authentication', count: 3421, percentage: 22.2 },\n      { name: 'Database', count: 2856, percentage: 18.5 },\n      { name: 'Cache', count: 1923, percentage: 12.5 },\n      { name: 'BackgroundService', count: 1791, percentage: 11.6 },\n    ],\n    logLevels: [\n      { level: 'Info', count: 8945, color: '#1890ff' },\n      { level: 'Warning', count: 3421, color: '#faad14' },\n      { level: 'Error', count: 2134, color: '#ff4d4f' },\n      { level: 'Debug', count: 823, color: '#722ed1' },\n      { level: 'Fatal', count: 100, color: '#a8071a' },\n    ],\n    hourlyDistribution: Array.from({ length: 24 }, (_, i) => ({\n      hour: i.toString().padStart(2, '0') + ':00',\n      count: Math.floor(Math.random() * 500) + 100 + Math.sin(i / 4) * 200,\n    })),\n    recentErrors: [\n      {\n        id: '1',\n        timestamp: dayjs().subtract(5, 'minute').toISOString(),\n        level: 'error',\n        source: 'Database',\n        message: 'Connection timeout after 30 seconds',\n      },\n      {\n        id: '2',\n        timestamp: dayjs().subtract(12, 'minute').toISOString(),\n        level: 'error',\n        source: 'MapleBlog.API',\n        message: 'Validation failed for user input',\n      },\n      {\n        id: '3',\n        timestamp: dayjs().subtract(25, 'minute').toISOString(),\n        level: 'fatal',\n        source: 'Authentication',\n        message: 'JWT validation service unavailable',\n      },\n      {\n        id: '4',\n        timestamp: dayjs().subtract(38, 'minute').toISOString(),\n        level: 'error',\n        source: 'Cache',\n        message: 'Redis connection lost',\n      },\n      {\n        id: '5',\n        timestamp: dayjs().subtract(45, 'minute').toISOString(),\n        level: 'error',\n        source: 'MapleBlog.API',\n        message: 'File upload failed - storage quota exceeded',\n      },\n    ],\n  });\n\n  // Export configuration\n  const [exportConfig, setExportConfig] = useState<LogExportConfig>({\n    format: 'json',\n    levels: ['info', 'warn', 'error', 'fatal'],\n    sources: [],\n    dateRange: null,\n    maxEntries: 10000,\n  });\n\n  // Log viewer settings\n  const [logViewerSettings, setLogViewerSettings] = useState({\n    realTime: true,\n    autoRefresh: true,\n    refreshInterval: 5000,\n    maxEntries: 10000,\n    height: 600,\n  });\n\n  // Auto-refresh analytics\n  useEffect(() => {\n    if (!autoRefresh) return;\n\n    const interval = setInterval(() => {\n      refreshAnalytics();\n    }, refreshInterval * 1000);\n\n    return () => clearInterval(interval);\n  }, [autoRefresh, refreshInterval]);\n\n  // Refresh analytics data\n  const refreshAnalytics = async () => {\n    setLoading(true);\n    try {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Update analytics with some variation\n      setAnalytics(prev => ({\n        ...prev,\n        totalLogs: prev.totalLogs + Math.floor(Math.random() * 50),\n        errorRate: Math.max(0, prev.errorRate + (Math.random() - 0.5) * 0.5),\n        hourlyDistribution: prev.hourlyDistribution.map(item => ({\n          ...item,\n          count: Math.max(0, item.count + Math.floor((Math.random() - 0.5) * 50)),\n        })),\n      }));\n\n      notification.success({\n        message: 'Analytics Updated',\n        description: 'Log analytics data has been refreshed',\n        duration: 2,\n      });\n    } catch (error) {\n      console.error('Failed to refresh analytics:', error);\n      notification.error({\n        message: 'Refresh Failed',\n        description: 'Unable to refresh analytics data',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Clear all logs\n  const clearAllLogs = () => {\n    Modal.confirm({\n      title: 'Clear All Logs',\n      content: 'Are you sure you want to clear all log entries? This action cannot be undone and will affect system monitoring.',\n      okText: 'Clear All',\n      okType: 'danger',\n      onOk: () => {\n        notification.success({\n          message: 'Logs Cleared',\n          description: 'All log entries have been cleared successfully',\n        });\n      },\n    });\n  };\n\n  // Archive logs\n  const archiveLogs = () => {\n    Modal.confirm({\n      title: 'Archive Logs',\n      content: 'Archive logs older than 30 days? Archived logs will be moved to long-term storage.',\n      onOk: async () => {\n        try {\n          // Simulate archive operation\n          await new Promise(resolve => setTimeout(resolve, 2000));\n          notification.success({\n            message: 'Logs Archived',\n            description: 'Older logs have been successfully archived',\n          });\n        } catch (error) {\n          notification.error({\n            message: 'Archive Failed',\n            description: 'Failed to archive logs. Please try again.',\n          });\n        }\n      },\n    });\n  };\n\n  // Handle log export\n  const handleLogExport = (entries: any[], format: string) => {\n    const timestamp = dayjs().format('YYYY-MM-DD_HH-mm-ss');\n    let content = '';\n    let mimeType = 'text/plain';\n    let extension = 'txt';\n\n    switch (format) {\n      case 'json':\n        content = JSON.stringify(entries, null, 2);\n        mimeType = 'application/json';\n        extension = 'json';\n        break;\n      case 'csv':\n        const headers = ['Timestamp', 'Level', 'Source', 'Message', 'User ID', 'Request ID'];\n        const csvRows = [\n          headers.join(','),\n          ...entries.map(entry => [\n            entry.timestamp,\n            entry.level,\n            entry.source,\n            `\"${entry.message.replace(/\"/g, '\"\"')}\"`,\n            entry.userId || '',\n            entry.requestId || '',\n          ].join(','))\n        ];\n        content = csvRows.join('\\n');\n        mimeType = 'text/csv';\n        extension = 'csv';\n        break;\n      default:\n        content = entries.map(entry => \n          `${entry.timestamp} [${entry.level.toUpperCase()}] ${entry.source}: ${entry.message}`\n        ).join('\\n');\n        break;\n    }\n\n    const blob = new Blob([content], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `logs_export_${timestamp}.${extension}`;\n    link.click();\n    URL.revokeObjectURL(url);\n\n    notification.success({\n      message: 'Export Complete',\n      description: `${entries.length} log entries exported as ${format.toUpperCase()}`,\n    });\n  };\n\n  // Get level icon\n  const getLevelIcon = (level: string) => {\n    switch (level.toLowerCase()) {\n      case 'error':\n      case 'fatal':\n        return <CloseCircleOutlined style={{ color: '#ff4d4f' }} />;\n      case 'warning':\n      case 'warn':\n        return <WarningOutlined style={{ color: '#faad14' }} />;\n      case 'info':\n        return <InfoCircleOutlined style={{ color: '#1890ff' }} />;\n      case 'debug':\n        return <BugOutlined style={{ color: '#722ed1' }} />;\n      default:\n        return <InfoCircleOutlined style={{ color: '#d9d9d9' }} />;\n    }\n  };\n\n  // Get level color\n  const getLevelColor = (level: string) => {\n    switch (level.toLowerCase()) {\n      case 'error':\n      case 'fatal':\n        return '#ff4d4f';\n      case 'warning':\n      case 'warn':\n        return '#faad14';\n      case 'info':\n        return '#1890ff';\n      case 'debug':\n        return '#722ed1';\n      default:\n        return '#d9d9d9';\n    }\n  };\n\n  return (\n    <div className=\"system-logs\">\n      {/* Header */}\n      <div style={{ marginBottom: 24 }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n          <div>\n            <Title level={2}>\n              <Space>\n                <FileTextOutlined />\n                System Logs\n              </Space>\n            </Title>\n            <Paragraph type=\"secondary\">\n              View, search, and analyze system logs in real-time. Monitor application behavior and troubleshoot issues.\n            </Paragraph>\n          </div>\n          <Space>\n            <Badge\n              status={streaming ? 'processing' : 'default'}\n              text={streaming ? 'Live' : 'Paused'}\n            />\n            <Switch\n              checked={autoRefresh}\n              onChange={setAutoRefresh}\n              checkedChildren=\"Auto\"\n              unCheckedChildren=\"Manual\"\n            />\n            <Select\n              value={refreshInterval}\n              onChange={setRefreshInterval}\n              style={{ width: 120 }}\n              disabled={!autoRefresh}\n            >\n              <Option value={10}>10s</Option>\n              <Option value={30}>30s</Option>\n              <Option value={60}>1m</Option>\n              <Option value={300}>5m</Option>\n            </Select>\n            <Button\n              icon={<ReloadOutlined />}\n              loading={loading}\n              onClick={refreshAnalytics}\n            >\n              Refresh\n            </Button>\n          </Space>\n        </div>\n\n        {/* Quick Stats */}\n        <Row gutter={[16, 8]} style={{ marginTop: 16 }}>\n          <Col span={6}>\n            <Card >\n              <Statistic\n                title=\"Total Logs\"\n                value={analytics.totalLogs}\n                prefix={<FileTextOutlined />}\n                valueStyle={{ color: '#1890ff' }}\n              />\n            </Card>\n          </Col>\n          <Col span={6}>\n            <Card >\n              <Statistic\n                title=\"Error Rate\"\n                value={analytics.errorRate}\n                suffix=\"%\"\n                prefix={<WarningOutlined />}\n                valueStyle={{ color: analytics.errorRate > 5 ? '#ff4d4f' : '#52c41a' }}\n              />\n            </Card>\n          </Col>\n          <Col span={6}>\n            <Card >\n              <Statistic\n                title=\"Recent Errors\"\n                value={analytics.recentErrors.length}\n                prefix={<CloseCircleOutlined />}\n                valueStyle={{ color: analytics.recentErrors.length > 3 ? '#ff4d4f' : '#52c41a' }}\n              />\n            </Card>\n          </Col>\n          <Col span={6}>\n            <Card >\n              <Statistic\n                title=\"Log Sources\"\n                value={analytics.topSources.length}\n                prefix={<DatabaseOutlined />}\n                valueStyle={{ color: '#722ed1' }}\n              />\n            </Card>\n          </Col>\n        </Row>\n      </div>\n\n      {/* Main Content */}\n      <Tabs activeKey={activeTab} onChange={setActiveTab} type=\"card\">\n        {/* Log Viewer Tab */}\n        <TabPane\n          tab={\n            <Space>\n              <EyeOutlined />\n              Log Viewer\n              {streaming && <Badge status=\"processing\" />}\n            </Space>\n          }\n          key=\"viewer\"\n        >\n          <Card\n            title=\"Real-time Log Stream\"\n            extra={\n              <Space>\n                <Switch\n                  checked={streaming}\n                  onChange={setStreaming}\n                  checkedChildren={<PlayCircleOutlined />}\n                  unCheckedChildren={<PauseCircleOutlined />}\n                />\n                <Button\n                  icon={<SettingOutlined />}\n                  onClick={() => setSettingsModalVisible(true)}\n                >\n                  Settings\n                </Button>\n                <Dropdown\n                  overlay={\n                    <Menu>\n                      <Menu.Item\n                        key=\"export\"\n                        icon={<DownloadOutlined />}\n                        onClick={() => setExportModalVisible(true)}\n                      >\n                        Export Logs\n                      </Menu.Item>\n                      <Menu.Item\n                        key=\"clear\"\n                        icon={<ClearOutlined />}\n                        onClick={clearAllLogs}\n                      >\n                        Clear All Logs\n                      </Menu.Item>\n                      <Menu.Item\n                        key=\"archive\"\n                        icon={<CloudDownloadOutlined />}\n                        onClick={archiveLogs}\n                      >\n                        Archive Old Logs\n                      </Menu.Item>\n                    </Menu>\n                  }\n                >\n                  <Button icon={<SettingOutlined />}>\n                    Actions\n                  </Button>\n                </Dropdown>\n              </Space>\n            }\n            bodyStyle={{ padding: 0 }}\n          >\n            <LogViewer\n              height={logViewerSettings.height}\n              realTime={logViewerSettings.realTime}\n              autoRefresh={logViewerSettings.autoRefresh}\n              refreshInterval={logViewerSettings.refreshInterval}\n              maxEntries={logViewerSettings.maxEntries}\n              onExport={handleLogExport}\n            />\n          </Card>\n        </TabPane>\n\n        {/* Analytics Tab */}\n        <TabPane\n          tab={\n            <Space>\n              <BarChartOutlined />\n              Analytics\n            </Space>\n          }\n          key=\"analytics\"\n        >\n          <Row gutter={[16, 16]}>\n            {/* Log Level Distribution */}\n            <Col span={12}>\n              <Card title=\"Log Level Distribution\" >\n                <PieChart\n                  data={analytics.logLevels.map(item => ({\n                    name: item.level,\n                    value: item.count,\n                    color: item.color,\n                  }))}\n                  height={300}\n                />\n                <List\n                  \n                  dataSource={analytics.logLevels}\n                  renderItem={(item) => (\n                    <List.Item>\n                      <Space style={{ width: '100%', justifyContent: 'space-between' }}>\n                        <Space>\n                          {getLevelIcon(item.level)}\n                          <Text>{item.level}</Text>\n                        </Space>\n                        <Text strong>{item.count.toLocaleString()}</Text>\n                      </Space>\n                    </List.Item>\n                  )}\n                />\n              </Card>\n            </Col>\n\n            {/* Top Log Sources */}\n            <Col span={12}>\n              <Card title=\"Top Log Sources\" >\n                <List\n                  dataSource={analytics.topSources}\n                  renderItem={(item) => (\n                    <List.Item>\n                      <div style={{ width: '100%' }}>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: 4 }}>\n                          <Text strong>{item.name}</Text>\n                          <Text>{item.count.toLocaleString()} ({item.percentage}%)</Text>\n                        </div>\n                        <Progress\n                          percent={item.percentage}\n                          showInfo={false}\n                          strokeColor={`hsl(${200 + item.percentage * 2}, 70%, 50%)`}\n                        />\n                      </div>\n                    </List.Item>\n                  )}\n                />\n              </Card>\n            </Col>\n\n            {/* Hourly Distribution */}\n            <Col span={24}>\n              <Card title=\"Hourly Log Distribution (Last 24 Hours)\" >\n                <BarChart\n                  data={analytics.hourlyDistribution.map(item => ({\n                    name: item.hour,\n                    value: item.count,\n                  }))}\n                  height={300}\n                  color=\"#1890ff\"\n                />\n              </Card>\n            </Col>\n\n            {/* Recent Errors */}\n            <Col span={24}>\n              <Card title=\"Recent Errors\" >\n                <Timeline>\n                  {analytics.recentErrors.map((error) => (\n                    <Timeline.Item\n                      key={error.id}\n                      dot={getLevelIcon(error.level)}\n                      color={getLevelColor(error.level)}\n                    >\n                      <div>\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                          <Space>\n                            <Tag color={getLevelColor(error.level)}>\n                              {error.level.toUpperCase()}\n                            </Tag>\n                            <Text strong>{error.source}</Text>\n                          </Space>\n                          <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n                            {dayjs(error.timestamp).format('MM-DD HH:mm:ss')}\n                          </Text>\n                        </div>\n                        <Paragraph style={{ margin: '4px 0 0 0', fontSize: '13px' }}>\n                          {error.message}\n                        </Paragraph>\n                      </div>\n                    </Timeline.Item>\n                  ))}\n                </Timeline>\n                {analytics.recentErrors.length === 0 && (\n                  <Empty\n                    description=\"No recent errors\"\n                    image={Empty.PRESENTED_IMAGE_SIMPLE}\n                  />\n                )}\n              </Card>\n            </Col>\n          </Row>\n        </TabPane>\n\n        {/* Search & Filter Tab */}\n        <TabPane\n          tab={\n            <Space>\n              <SearchOutlined />\n              Search & Filter\n            </Space>\n          }\n          key=\"search\"\n        >\n          <Row gutter={[16, 16]}>\n            <Col span={24}>\n              <Card title=\"Advanced Log Search\" >\n                <Space direction=\"vertical\" style={{ width: '100%' }}>\n                  <Row gutter={[16, 16]}>\n                    <Col span={12}>\n                      <Text strong>Search Query:</Text>\n                      <Search\n                        placeholder=\"Search in log messages, sources, user IDs...\"\n                        allowClear\n                        enterButton=\"Search\"\n                        size=\"large\"\n                      />\n                    </Col>\n                    <Col span={12}>\n                      <Text strong>Date Range:</Text>\n                      <RangePicker\n                        showTime\n                        style={{ width: '100%' }}\n                        size=\"large\"\n                      />\n                    </Col>\n                  </Row>\n                  \n                  <Row gutter={[16, 16]}>\n                    <Col span={8}>\n                      <Text strong>Log Levels:</Text>\n                      <Select\n                        mode=\"multiple\"\n                        placeholder=\"Select log levels\"\n                        style={{ width: '100%' }}\n                        options={[\n                          { label: 'Trace', value: 'trace' },\n                          { label: 'Debug', value: 'debug' },\n                          { label: 'Info', value: 'info' },\n                          { label: 'Warning', value: 'warn' },\n                          { label: 'Error', value: 'error' },\n                          { label: 'Fatal', value: 'fatal' },\n                        ]}\n                      />\n                    </Col>\n                    <Col span={8}>\n                      <Text strong>Sources:</Text>\n                      <Select\n                        mode=\"multiple\"\n                        placeholder=\"Select log sources\"\n                        style={{ width: '100%' }}\n                        options={analytics.topSources.map(source => ({\n                          label: source.name,\n                          value: source.name,\n                        }))}\n                      />\n                    </Col>\n                    <Col span={8}>\n                      <Text strong>User ID:</Text>\n                      <Input placeholder=\"Filter by user ID\" />\n                    </Col>\n                  </Row>\n\n                  <Row gutter={[16, 16]}>\n                    <Col span={8}>\n                      <Text strong>Request ID:</Text>\n                      <Input placeholder=\"Filter by request ID\" />\n                    </Col>\n                    <Col span={8}>\n                      <Text strong>Response Time:</Text>\n                      <Select placeholder=\"Filter by response time\" style={{ width: '100%' }}>\n                        <Option value=\"fast\">Fast (&lt; 100ms)</Option>\n                        <Option value=\"normal\">Normal (100ms - 1s)</Option>\n                        <Option value=\"slow\">Slow (&gt; 1s)</Option>\n                      </Select>\n                    </Col>\n                    <Col span={8}>\n                      <Text strong>Has Errors:</Text>\n                      <Select placeholder=\"Filter by error presence\" style={{ width: '100%' }}>\n                        <Option value=\"yes\">With Errors</Option>\n                        <Option value=\"no\">Without Errors</Option>\n                      </Select>\n                    </Col>\n                  </Row>\n\n                  <div style={{ textAlign: 'center', marginTop: 16 }}>\n                    <Space>\n                      <Button type=\"primary\" icon={<SearchOutlined />} size=\"large\">\n                        Search Logs\n                      </Button>\n                      <Button icon={<ClearOutlined />} size=\"large\">\n                        Clear Filters\n                      </Button>\n                      <Button icon={<DownloadOutlined />} size=\"large\">\n                        Export Results\n                      </Button>\n                    </Space>\n                  </div>\n                </Space>\n              </Card>\n            </Col>\n\n            {/* Search Results */}\n            <Col span={24}>\n              <Card title=\"Search Results\" >\n                <Empty\n                  description=\"Enter search criteria above to find specific log entries\"\n                  image={Empty.PRESENTED_IMAGE_SIMPLE}\n                />\n              </Card>\n            </Col>\n          </Row>\n        </TabPane>\n\n        {/* Configuration Tab */}\n        <TabPane\n          tab={\n            <Space>\n              <SettingOutlined />\n              Configuration\n            </Space>\n          }\n          key=\"config\"\n        >\n          <Row gutter={[16, 16]}>\n            <Col span={12}>\n              <Card title=\"Log Retention Settings\" >\n                <Space direction=\"vertical\" style={{ width: '100%' }}>\n                  <div>\n                    <Text strong>Retention Period:</Text>\n                    <Select defaultValue=\"30\" style={{ width: '100%', marginTop: 8 }}>\n                      <Option value=\"7\">7 days</Option>\n                      <Option value=\"30\">30 days</Option>\n                      <Option value=\"90\">90 days</Option>\n                      <Option value=\"365\">1 year</Option>\n                      <Option value=\"forever\">Forever</Option>\n                    </Select>\n                  </div>\n                  <div>\n                    <Text strong>Archive After:</Text>\n                    <Select defaultValue=\"30\" style={{ width: '100%', marginTop: 8 }}>\n                      <Option value=\"7\">7 days</Option>\n                      <Option value=\"30\">30 days</Option>\n                      <Option value=\"90\">90 days</Option>\n                    </Select>\n                  </div>\n                  <div>\n                    <Text strong>Max Log Size:</Text>\n                    <Select defaultValue=\"100\" style={{ width: '100%', marginTop: 8 }}>\n                      <Option value=\"50\">50 MB</Option>\n                      <Option value=\"100\">100 MB</Option>\n                      <Option value=\"500\">500 MB</Option>\n                      <Option value=\"1000\">1 GB</Option>\n                    </Select>\n                  </div>\n                </Space>\n              </Card>\n            </Col>\n\n            <Col span={12}>\n              <Card title=\"Log Level Configuration\" >\n                <Space direction=\"vertical\" style={{ width: '100%' }}>\n                  <div>\n                    <Text strong>Global Log Level:</Text>\n                    <Select defaultValue=\"info\" style={{ width: '100%', marginTop: 8 }}>\n                      <Option value=\"trace\">Trace</Option>\n                      <Option value=\"debug\">Debug</Option>\n                      <Option value=\"info\">Info</Option>\n                      <Option value=\"warn\">Warning</Option>\n                      <Option value=\"error\">Error</Option>\n                      <Option value=\"fatal\">Fatal</Option>\n                    </Select>\n                  </div>\n                  <div>\n                    <Text strong>Enable Debug Logging:</Text>\n                    <br />\n                    <Switch defaultChecked={false} style={{ marginTop: 8 }} />\n                  </div>\n                  <div>\n                    <Text strong>Log Performance Metrics:</Text>\n                    <br />\n                    <Switch defaultChecked={true} style={{ marginTop: 8 }} />\n                  </div>\n                  <div>\n                    <Text strong>Log User Actions:</Text>\n                    <br />\n                    <Switch defaultChecked={true} style={{ marginTop: 8 }} />\n                  </div>\n                </Space>\n              </Card>\n            </Col>\n\n            <Col span={12}>\n              <Card title=\"Export Settings\" >\n                <Space direction=\"vertical\" style={{ width: '100%' }}>\n                  <div>\n                    <Text strong>Default Export Format:</Text>\n                    <Select defaultValue=\"json\" style={{ width: '100%', marginTop: 8 }}>\n                      <Option value=\"json\">JSON</Option>\n                      <Option value=\"csv\">CSV</Option>\n                      <Option value=\"txt\">Text</Option>\n                    </Select>\n                  </div>\n                  <div>\n                    <Text strong>Max Export Size:</Text>\n                    <Select defaultValue=\"10000\" style={{ width: '100%', marginTop: 8 }}>\n                      <Option value=\"1000\">1,000 entries</Option>\n                      <Option value=\"10000\">10,000 entries</Option>\n                      <Option value=\"100000\">100,000 entries</Option>\n                      <Option value=\"unlimited\">Unlimited</Option>\n                    </Select>\n                  </div>\n                  <div>\n                    <Text strong>Include Stack Traces:</Text>\n                    <br />\n                    <Switch defaultChecked={true} style={{ marginTop: 8 }} />\n                  </div>\n                  <div>\n                    <Text strong>Include Context Data:</Text>\n                    <br />\n                    <Switch defaultChecked={true} style={{ marginTop: 8 }} />\n                  </div>\n                </Space>\n              </Card>\n            </Col>\n\n            <Col span={12}>\n              <Card title=\"Real-time Settings\" >\n                <Space direction=\"vertical\" style={{ width: '100%' }}>\n                  <div>\n                    <Text strong>Auto Refresh Interval:</Text>\n                    <Select defaultValue=\"5\" style={{ width: '100%', marginTop: 8 }}>\n                      <Option value=\"1\">1 second</Option>\n                      <Option value=\"5\">5 seconds</Option>\n                      <Option value=\"10\">10 seconds</Option>\n                      <Option value=\"30\">30 seconds</Option>\n                    </Select>\n                  </div>\n                  <div>\n                    <Text strong>Max Live Entries:</Text>\n                    <Select defaultValue=\"1000\" style={{ width: '100%', marginTop: 8 }}>\n                      <Option value=\"500\">500</Option>\n                      <Option value=\"1000\">1,000</Option>\n                      <Option value=\"5000\">5,000</Option>\n                      <Option value=\"10000\">10,000</Option>\n                    </Select>\n                  </div>\n                  <div>\n                    <Text strong>Auto Scroll to Latest:</Text>\n                    <br />\n                    <Switch defaultChecked={true} style={{ marginTop: 8 }} />\n                  </div>\n                  <div>\n                    <Text strong>Highlight Errors:</Text>\n                    <br />\n                    <Switch defaultChecked={true} style={{ marginTop: 8 }} />\n                  </div>\n                </Space>\n              </Card>\n            </Col>\n\n            <Col span={24}>\n              <div style={{ textAlign: 'center' }}>\n                <Space>\n                  <Button type=\"primary\" size=\"large\">\n                    Save Configuration\n                  </Button>\n                  <Button size=\"large\">\n                    Reset to Defaults\n                  </Button>\n                </Space>\n              </div>\n            </Col>\n          </Row>\n        </TabPane>\n      </Tabs>\n\n      {/* Log Export Modal */}\n      <Modal\n        title=\"Export Logs\"\n        open={exportModalVisible}\n        onCancel={() => setExportModalVisible(false)}\n        footer={[\n          <Button key=\"cancel\" onClick={() => setExportModalVisible(false)}>\n            Cancel\n          </Button>,\n          <Button key=\"export\" type=\"primary\" onClick={() => {\n            setExportModalVisible(false);\n            notification.success({\n              message: 'Export Started',\n              description: 'Log export has been initiated. Download will start shortly.',\n            });\n          }}>\n            Export Logs\n          </Button>,\n        ]}\n        width={600}\n      >\n        <Space direction=\"vertical\" style={{ width: '100%' }}>\n          <div>\n            <Text strong>Export Format:</Text>\n            <Select\n              value={exportConfig.format}\n              onChange={(format) => setExportConfig(prev => ({ ...prev, format }))}\n              style={{ width: '100%', marginTop: 8 }}\n            >\n              <Option value=\"json\">JSON</Option>\n              <Option value=\"csv\">CSV</Option>\n              <Option value=\"txt\">Plain Text</Option>\n            </Select>\n          </div>\n          <div>\n            <Text strong>Log Levels:</Text>\n            <Select\n              mode=\"multiple\"\n              value={exportConfig.levels}\n              onChange={(levels) => setExportConfig(prev => ({ ...prev, levels }))}\n              style={{ width: '100%', marginTop: 8 }}\n              placeholder=\"Select log levels to export\"\n            >\n              <Option value=\"trace\">Trace</Option>\n              <Option value=\"debug\">Debug</Option>\n              <Option value=\"info\">Info</Option>\n              <Option value=\"warn\">Warning</Option>\n              <Option value=\"error\">Error</Option>\n              <Option value=\"fatal\">Fatal</Option>\n            </Select>\n          </div>\n          <div>\n            <Text strong>Log Sources:</Text>\n            <Select\n              mode=\"multiple\"\n              value={exportConfig.sources}\n              onChange={(sources) => setExportConfig(prev => ({ ...prev, sources }))}\n              style={{ width: '100%', marginTop: 8 }}\n              placeholder=\"Select log sources to export\"\n            >\n              {analytics.topSources.map(source => (\n                <Option key={source.name} value={source.name}>{source.name}</Option>\n              ))}\n            </Select>\n          </div>\n          <div>\n            <Text strong>Date Range:</Text>\n            <RangePicker\n              showTime\n              value={exportConfig.dateRange ? [dayjs(exportConfig.dateRange[0]), dayjs(exportConfig.dateRange[1])] : null}\n              onChange={(dates) => {\n                setExportConfig(prev => ({\n                  ...prev,\n                  dateRange: dates ? [dates[0]!.toISOString(), dates[1]!.toISOString()] : null,\n                }));\n              }}\n              style={{ width: '100%', marginTop: 8 }}\n            />\n          </div>\n          <div>\n            <Text strong>Max Entries:</Text>\n            <Select\n              value={exportConfig.maxEntries}\n              onChange={(maxEntries) => setExportConfig(prev => ({ ...prev, maxEntries }))}\n              style={{ width: '100%', marginTop: 8 }}\n            >\n              <Option value={1000}>1,000</Option>\n              <Option value={10000}>10,000</Option>\n              <Option value={50000}>50,000</Option>\n              <Option value={100000}>100,000</Option>\n            </Select>\n          </div>\n        </Space>\n      </Modal>\n\n      {/* Log Viewer Settings Modal */}\n      <Modal\n        title=\"Log Viewer Settings\"\n        open={settingsModalVisible}\n        onCancel={() => setSettingsModalVisible(false)}\n        footer={[\n          <Button key=\"cancel\" onClick={() => setSettingsModalVisible(false)}>\n            Cancel\n          </Button>,\n          <Button key=\"save\" type=\"primary\" onClick={() => setSettingsModalVisible(false)}>\n            Save Settings\n          </Button>,\n        ]}\n      >\n        <Space direction=\"vertical\" style={{ width: '100%' }}>\n          <div>\n            <Text strong>Real-time Streaming:</Text>\n            <br />\n            <Switch\n              checked={logViewerSettings.realTime}\n              onChange={(realTime) => setLogViewerSettings(prev => ({ ...prev, realTime }))}\n              style={{ marginTop: 8 }}\n            />\n          </div>\n          <div>\n            <Text strong>Auto Refresh:</Text>\n            <br />\n            <Switch\n              checked={logViewerSettings.autoRefresh}\n              onChange={(autoRefresh) => setLogViewerSettings(prev => ({ ...prev, autoRefresh }))}\n              style={{ marginTop: 8 }}\n            />\n          </div>\n          <div>\n            <Text strong>Refresh Interval:</Text>\n            <Select\n              value={logViewerSettings.refreshInterval}\n              onChange={(refreshInterval) => setLogViewerSettings(prev => ({ ...prev, refreshInterval }))}\n              style={{ width: '100%', marginTop: 8 }}\n            >\n              <Option value={1000}>1 second</Option>\n              <Option value={5000}>5 seconds</Option>\n              <Option value={10000}>10 seconds</Option>\n              <Option value={30000}>30 seconds</Option>\n            </Select>\n          </div>\n          <div>\n            <Text strong>Max Entries:</Text>\n            <Select\n              value={logViewerSettings.maxEntries}\n              onChange={(maxEntries) => setLogViewerSettings(prev => ({ ...prev, maxEntries }))}\n              style={{ width: '100%', marginTop: 8 }}\n            >\n              <Option value={1000}>1,000</Option>\n              <Option value={5000}>5,000</Option>\n              <Option value={10000}>10,000</Option>\n              <Option value={50000}>50,000</Option>\n            </Select>\n          </div>\n          <div>\n            <Text strong>Viewer Height:</Text>\n            <Select\n              value={logViewerSettings.height}\n              onChange={(height) => setLogViewerSettings(prev => ({ ...prev, height }))}\n              style={{ width: '100%', marginTop: 8 }}\n            >\n              <Option value={400}>400px</Option>\n              <Option value={600}>600px</Option>\n              <Option value={800}>800px</Option>\n              <Option value={1000}>1000px</Option>\n            </Select>\n          </div>\n        </Space>\n      </Modal>\n    </div>\n  );\n};\n\nexport default SystemLogs;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/System/Monitoring.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1397,1400],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1397,1400],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedDateRange' is assigned a value but never used.","line":94,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setSelectedDateRange' is assigned a value but never used.","line":94,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":49}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Card,\n  Row,\n  Col,\n  Typography,\n  Space,\n  Button,\n  Tabs,\n  Alert,\n  Statistic,\n  Badge,\n  Tag,\n  Modal,\n  Table,\n  List,\n  Avatar,\n  Switch,\n  Select,\n  Input,\n  notification,\n  Divider,\n} from 'antd';\nimport {\n  DashboardOutlined,\n  MonitorOutlined,\n  AlertOutlined,\n  SettingOutlined,\n  ReloadOutlined,\n  BellOutlined,\n  CloudServerOutlined,\n  WifiOutlined,\n  CheckCircleOutlined,\n  ExclamationCircleOutlined,\n  CloseCircleOutlined,\n  EyeOutlined,\n  EditOutlined,\n  DeleteOutlined,\n  PlusOutlined,\n  InfoCircleOutlined,\n  WarningOutlined,\n  UserOutlined,\n} from '@ant-design/icons';\nimport SystemStatus from '../../components/monitoring/SystemStatus';\nimport LineChart from '../../components/charts/LineChart';\nimport dayjs from 'dayjs';\n\nconst { Title, Text, Paragraph } = Typography;\nconst { TabPane } = Tabs;\nconst { Option } = Select;\n\ninterface AlertRule {\n  id: string;\n  name: string;\n  description: string;\n  metric: string;\n  condition: 'greater_than' | 'less_than' | 'equals' | 'not_equals';\n  threshold: number;\n  severity: 'info' | 'warning' | 'error' | 'critical';\n  enabled: boolean;\n  channels: string[];\n  createdAt: string;\n  lastTriggered?: string;\n  triggerCount: number;\n}\n\ninterface NotificationChannel {\n  id: string;\n  name: string;\n  type: 'email' | 'slack' | 'webhook' | 'sms';\n  config: Record<string, any>;\n  enabled: boolean;\n  createdAt: string;\n}\n\ninterface SystemAlert {\n  id: string;\n  type: 'info' | 'warning' | 'error' | 'critical';\n  title: string;\n  message: string;\n  source: string;\n  timestamp: string;\n  acknowledged: boolean;\n  resolved: boolean;\n  assignee?: string;\n  ruleId?: string;\n}\n\nconst SystemMonitoring: React.FC = () => {\n  const [activeTab, setActiveTab] = useState('overview');\n  const [loading, setLoading] = useState(false);\n  const [autoRefresh, setAutoRefresh] = useState(true);\n  const [refreshInterval, setRefreshInterval] = useState(30); // seconds\n  const [selectedDateRange, setSelectedDateRange] = useState<[dayjs.Dayjs, dayjs.Dayjs] | null>(null);\n\n  // Modals\n  const [alertRuleModalVisible, setAlertRuleModalVisible] = useState(false);\n  const [channelModalVisible, setChannelModalVisible] = useState(false);\n  const [alertDetailsModalVisible, setAlertDetailsModalVisible] = useState(false);\n  const [selectedAlert, setSelectedAlert] = useState<SystemAlert | null>(null);\n\n  // Mock data\n  const [alertRules, setAlertRules] = useState<AlertRule[]>([\n    {\n      id: '1',\n      name: 'High CPU Usage',\n      description: 'Alert when CPU usage exceeds 80%',\n      metric: 'cpu_usage',\n      condition: 'greater_than',\n      threshold: 80,\n      severity: 'warning',\n      enabled: true,\n      channels: ['email', 'slack'],\n      createdAt: '2024-01-15T10:00:00Z',\n      lastTriggered: '2024-01-20T14:30:00Z',\n      triggerCount: 3,\n    },\n    {\n      id: '2',\n      name: 'Database Connection Failure',\n      description: 'Alert when database connection fails',\n      metric: 'db_connection',\n      condition: 'equals',\n      threshold: 0,\n      severity: 'critical',\n      enabled: true,\n      channels: ['email', 'slack', 'sms'],\n      createdAt: '2024-01-15T10:00:00Z',\n      triggerCount: 0,\n    },\n    {\n      id: '3',\n      name: 'Low Disk Space',\n      description: 'Alert when disk usage exceeds 90%',\n      metric: 'disk_usage',\n      condition: 'greater_than',\n      threshold: 90,\n      severity: 'error',\n      enabled: true,\n      channels: ['email'],\n      createdAt: '2024-01-15T10:00:00Z',\n      triggerCount: 1,\n    },\n  ]);\n\n  const [notificationChannels, setNotificationChannels] = useState<NotificationChannel[]>([\n    {\n      id: 'email',\n      name: 'Email Notifications',\n      type: 'email',\n      config: { recipients: ['admin@mapleblog.com', 'ops@mapleblog.com'] },\n      enabled: true,\n      createdAt: '2024-01-15T10:00:00Z',\n    },\n    {\n      id: 'slack',\n      name: 'Slack #alerts',\n      type: 'slack',\n      config: { webhook: 'https://hooks.slack.com/services/...', channel: '#alerts' },\n      enabled: true,\n      createdAt: '2024-01-15T10:00:00Z',\n    },\n    {\n      id: 'sms',\n      name: 'SMS Alerts',\n      type: 'sms',\n      config: { numbers: ['+1234567890'] },\n      enabled: false,\n      createdAt: '2024-01-15T10:00:00Z',\n    },\n  ]);\n\n  const [systemAlerts, setSystemAlerts] = useState<SystemAlert[]>([\n    {\n      id: '1',\n      type: 'warning',\n      title: 'High CPU Usage Detected',\n      message: 'CPU usage has been above 85% for the last 5 minutes',\n      source: 'System Monitor',\n      timestamp: '2024-01-20T14:30:00Z',\n      acknowledged: false,\n      resolved: false,\n      ruleId: '1',\n    },\n    {\n      id: '2',\n      type: 'error',\n      title: 'API Response Time Degradation',\n      message: 'Average API response time has increased to 1.2s',\n      source: 'Performance Monitor',\n      timestamp: '2024-01-20T13:45:00Z',\n      acknowledged: true,\n      resolved: false,\n      assignee: 'John Doe',\n    },\n    {\n      id: '3',\n      type: 'info',\n      title: 'Scheduled Maintenance Reminder',\n      message: 'Database maintenance scheduled for tonight at 2:00 AM',\n      source: 'Maintenance Scheduler',\n      timestamp: '2024-01-20T12:00:00Z',\n      acknowledged: true,\n      resolved: false,\n    },\n  ]);\n\n  // Performance metrics data\n  const [performanceMetrics, setPerformanceMetrics] = useState({\n    responseTime: Array.from({ length: 24 }, (_, i) => ({\n      time: dayjs().subtract(23 - i, 'hour').format('HH:mm'),\n      value: Math.random() * 500 + 200 + Math.sin(i / 4) * 100,\n    })),\n    throughput: Array.from({ length: 24 }, (_, i) => ({\n      time: dayjs().subtract(23 - i, 'hour').format('HH:mm'),\n      value: Math.random() * 1000 + 500 + Math.sin(i / 6) * 200,\n    })),\n    errorRate: Array.from({ length: 24 }, (_, i) => ({\n      time: dayjs().subtract(23 - i, 'hour').format('HH:mm'),\n      value: Math.random() * 5 + Math.sin(i / 3) * 2,\n    })),\n  });\n\n  // Auto-refresh effect\n  useEffect(() => {\n    if (!autoRefresh) return;\n\n    const interval = setInterval(() => {\n      refreshData();\n    }, refreshInterval * 1000);\n\n    return () => clearInterval(interval);\n  }, [autoRefresh, refreshInterval]);\n\n  // Refresh all data\n  const refreshData = async () => {\n    setLoading(true);\n    try {\n      // Simulate API calls\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Update performance metrics with new data points\n      setPerformanceMetrics(prev => ({\n        responseTime: [...prev.responseTime.slice(1), {\n          time: dayjs().format('HH:mm'),\n          value: Math.random() * 500 + 200,\n        }],\n        throughput: [...prev.throughput.slice(1), {\n          time: dayjs().format('HH:mm'),\n          value: Math.random() * 1000 + 500,\n        }],\n        errorRate: [...prev.errorRate.slice(1), {\n          time: dayjs().format('HH:mm'),\n          value: Math.random() * 5,\n        }],\n      }));\n\n      notification.success({\n        message: 'Data Refreshed',\n        description: 'Monitoring data has been updated',\n        duration: 2,\n      });\n    } catch (error) {\n      console.error('Failed to refresh data:', error);\n      notification.error({\n        message: 'Refresh Failed',\n        description: 'Unable to refresh monitoring data',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle alert acknowledgment\n  const acknowledgeAlert = (alertId: string) => {\n    setSystemAlerts(prev => prev.map(alert => \n      alert.id === alertId ? { ...alert, acknowledged: true } : alert\n    ));\n    notification.success({\n      message: 'Alert Acknowledged',\n      description: 'Alert has been marked as acknowledged',\n    });\n  };\n\n  // Handle alert resolution\n  const resolveAlert = (alertId: string) => {\n    setSystemAlerts(prev => prev.map(alert => \n      alert.id === alertId ? { ...alert, resolved: true } : alert\n    ));\n    notification.success({\n      message: 'Alert Resolved',\n      description: 'Alert has been marked as resolved',\n    });\n  };\n\n  // Toggle alert rule\n  const toggleAlertRule = (ruleId: string) => {\n    setAlertRules(prev => prev.map(rule => \n      rule.id === ruleId ? { ...rule, enabled: !rule.enabled } : rule\n    ));\n  };\n\n  // Toggle notification channel\n  const toggleNotificationChannel = (channelId: string) => {\n    setNotificationChannels(prev => prev.map(channel => \n      channel.id === channelId ? { ...channel, enabled: !channel.enabled } : channel\n    ));\n  };\n\n  // Get severity color\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'info': return '#1890ff';\n      case 'warning': return '#faad14';\n      case 'error': return '#ff4d4f';\n      case 'critical': return '#a8071a';\n      default: return '#d9d9d9';\n    }\n  };\n\n  // Get severity icon\n  const getSeverityIcon = (severity: string) => {\n    switch (severity) {\n      case 'info': return <InfoCircleOutlined />;\n      case 'warning': return <WarningOutlined />;\n      case 'error': return <CloseCircleOutlined />;\n      case 'critical': return <ExclamationCircleOutlined />;\n      default: return <InfoCircleOutlined />;\n    }\n  };\n\n  const unacknowledgedAlerts = systemAlerts.filter(alert => !alert.acknowledged && !alert.resolved);\n  const activeAlerts = systemAlerts.filter(alert => !alert.resolved);\n\n  return (\n    <div className=\"system-monitoring\">\n      {/* Header */}\n      <div style={{ marginBottom: 24 }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n          <div>\n            <Title level={2}>\n              <Space>\n                <MonitorOutlined />\n                System Monitoring\n                {unacknowledgedAlerts.length > 0 && (\n                  <Badge count={unacknowledgedAlerts.length} />\n                )}\n              </Space>\n            </Title>\n            <Paragraph type=\"secondary\">\n              Monitor system performance, manage alerts, and track service health in real-time.\n            </Paragraph>\n          </div>\n          <Space>\n            <Switch\n              checked={autoRefresh}\n              onChange={setAutoRefresh}\n              checkedChildren=\"Auto\"\n              unCheckedChildren=\"Manual\"\n            />\n            <Select\n              value={refreshInterval}\n              onChange={setRefreshInterval}\n              style={{ width: 120 }}\n              disabled={!autoRefresh}\n            >\n              <Option value={10}>10s</Option>\n              <Option value={30}>30s</Option>\n              <Option value={60}>1m</Option>\n              <Option value={300}>5m</Option>\n            </Select>\n            <Button\n              icon={<ReloadOutlined />}\n              loading={loading}\n              onClick={refreshData}\n            >\n              Refresh\n            </Button>\n          </Space>\n        </div>\n\n        {/* Active alerts banner */}\n        {unacknowledgedAlerts.length > 0 && (\n          <Alert\n            type=\"warning\"\n            message={`${unacknowledgedAlerts.length} unacknowledged alert(s) require attention`}\n            description=\"Review and acknowledge active alerts to ensure system stability\"\n            showIcon\n            closable\n            action={\n              <Button\n                \n                type=\"primary\"\n                onClick={() => setActiveTab('alerts')}\n              >\n                View Alerts\n              </Button>\n            }\n            style={{ marginTop: 16 }}\n          />\n        )}\n      </div>\n\n      {/* Main Content */}\n      <Tabs activeKey={activeTab} onChange={setActiveTab} type=\"card\">\n        {/* Overview Tab */}\n        <TabPane\n          tab={\n            <Space>\n              <DashboardOutlined />\n              Overview\n            </Space>\n          }\n          key=\"overview\"\n        >\n          <Row gutter={[16, 16]}>\n            {/* System Status Component */}\n            <Col span={24}>\n              <SystemStatus\n                refreshInterval={refreshInterval * 1000}\n                onAlert={(alert) => {\n                  setSystemAlerts(prev => [alert, ...prev]);\n                  notification.warning({\n                    message: alert.title,\n                    description: alert.message,\n                    duration: 5,\n                  });\n                }}\n              />\n            </Col>\n\n            {/* Performance Charts */}\n            <Col span={8}>\n              <Card title=\"API Response Time (24h)\" >\n                <LineChart\n                  data={performanceMetrics.responseTime}\n                  height={200}\n                  color=\"#1890ff\"\n                  smooth\n                />\n                <div style={{ textAlign: 'center', marginTop: 8 }}>\n                  <Statistic\n                    value={performanceMetrics.responseTime[performanceMetrics.responseTime.length - 1]?.value || 0}\n                    suffix=\"ms\"\n                    precision={0}\n                    valueStyle={{ fontSize: '14px' }}\n                  />\n                </div>\n              </Card>\n            </Col>\n\n            <Col span={8}>\n              <Card title=\"Throughput (24h)\" >\n                <LineChart\n                  data={performanceMetrics.throughput}\n                  height={200}\n                  color=\"#52c41a\"\n                  smooth\n                />\n                <div style={{ textAlign: 'center', marginTop: 8 }}>\n                  <Statistic\n                    value={performanceMetrics.throughput[performanceMetrics.throughput.length - 1]?.value || 0}\n                    suffix=\"/min\"\n                    precision={0}\n                    valueStyle={{ fontSize: '14px' }}\n                  />\n                </div>\n              </Card>\n            </Col>\n\n            <Col span={8}>\n              <Card title=\"Error Rate (24h)\" >\n                <LineChart\n                  data={performanceMetrics.errorRate}\n                  height={200}\n                  color=\"#ff4d4f\"\n                  smooth\n                />\n                <div style={{ textAlign: 'center', marginTop: 8 }}>\n                  <Statistic\n                    value={performanceMetrics.errorRate[performanceMetrics.errorRate.length - 1]?.value || 0}\n                    suffix=\"%\"\n                    precision={2}\n                    valueStyle={{ fontSize: '14px' }}\n                  />\n                </div>\n              </Card>\n            </Col>\n          </Row>\n        </TabPane>\n\n        {/* Alerts Tab */}\n        <TabPane\n          tab={\n            <Space>\n              <AlertOutlined />\n              Alerts\n              <Badge count={unacknowledgedAlerts.length} />\n            </Space>\n          }\n          key=\"alerts\"\n        >\n          <Row gutter={[16, 16]}>\n            {/* Alert Summary */}\n            <Col span={24}>\n              <Row gutter={[16, 16]}>\n                <Col span={6}>\n                  <Card >\n                    <Statistic\n                      title=\"Active Alerts\"\n                      value={activeAlerts.length}\n                      prefix={<AlertOutlined />}\n                      valueStyle={{ color: activeAlerts.length > 0 ? '#ff4d4f' : '#52c41a' }}\n                    />\n                  </Card>\n                </Col>\n                <Col span={6}>\n                  <Card >\n                    <Statistic\n                      title=\"Unacknowledged\"\n                      value={unacknowledgedAlerts.length}\n                      prefix={<ExclamationCircleOutlined />}\n                      valueStyle={{ color: unacknowledgedAlerts.length > 0 ? '#faad14' : '#52c41a' }}\n                    />\n                  </Card>\n                </Col>\n                <Col span={6}>\n                  <Card >\n                    <Statistic\n                      title=\"Alert Rules\"\n                      value={alertRules.filter(rule => rule.enabled).length}\n                      suffix={`/ ${alertRules.length}`}\n                      prefix={<SettingOutlined />}\n                    />\n                  </Card>\n                </Col>\n                <Col span={6}>\n                  <Card >\n                    <Statistic\n                      title=\"Notification Channels\"\n                      value={notificationChannels.filter(channel => channel.enabled).length}\n                      suffix={`/ ${notificationChannels.length}`}\n                      prefix={<BellOutlined />}\n                    />\n                  </Card>\n                </Col>\n              </Row>\n            </Col>\n\n            {/* Active Alerts List */}\n            <Col span={24}>\n              <Card\n                title=\"Active Alerts\"\n                extra={\n                  <Button\n                    type=\"primary\"\n                    icon={<PlusOutlined />}\n                    onClick={() => setAlertRuleModalVisible(true)}\n                  >\n                    New Alert Rule\n                  </Button>\n                }\n              >\n                <Table\n                  dataSource={activeAlerts}\n                  rowKey=\"id\"\n                  pagination={{ pageSize: 10 }}\n                  \n                  columns={[\n                    {\n                      title: 'Severity',\n                      dataIndex: 'type',\n                      key: 'type',\n                      width: 100,\n                      render: (type) => (\n                        <Tag\n                          icon={getSeverityIcon(type)}\n                          color={getSeverityColor(type)}\n                        >\n                          {type.toUpperCase()}\n                        </Tag>\n                      ),\n                    },\n                    {\n                      title: 'Alert',\n                      dataIndex: 'title',\n                      key: 'title',\n                      render: (title, record) => (\n                        <div>\n                          <Text strong>{title}</Text>\n                          <br />\n                          <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n                            {record.message}\n                          </Text>\n                        </div>\n                      ),\n                    },\n                    {\n                      title: 'Source',\n                      dataIndex: 'source',\n                      key: 'source',\n                      width: 120,\n                    },\n                    {\n                      title: 'Time',\n                      dataIndex: 'timestamp',\n                      key: 'timestamp',\n                      width: 120,\n                      render: (timestamp) => dayjs(timestamp).format('MM-DD HH:mm'),\n                      sorter: (a, b) => dayjs(a.timestamp).unix() - dayjs(b.timestamp).unix(),\n                    },\n                    {\n                      title: 'Status',\n                      key: 'status',\n                      width: 120,\n                      render: (_, record) => (\n                        <Space direction=\"vertical\" >\n                          {record.acknowledged && <Tag color=\"blue\">ACKNOWLEDGED</Tag>}\n                          {record.assignee && (\n                            <Tag icon={<UserOutlined />}>{record.assignee}</Tag>\n                          )}\n                        </Space>\n                      ),\n                    },\n                    {\n                      title: 'Actions',\n                      key: 'actions',\n                      width: 150,\n                      render: (_, record) => (\n                        <Space>\n                          <Button\n                            \n                            icon={<EyeOutlined />}\n                            onClick={() => {\n                              setSelectedAlert(record);\n                              setAlertDetailsModalVisible(true);\n                            }}\n                          >\n                            Details\n                          </Button>\n                          {!record.acknowledged && (\n                            <Button\n                              \n                              onClick={() => acknowledgeAlert(record.id)}\n                            >\n                              ACK\n                            </Button>\n                          )}\n                          {!record.resolved && (\n                            <Button\n                              \n                              type=\"primary\"\n                              onClick={() => resolveAlert(record.id)}\n                            >\n                              Resolve\n                            </Button>\n                          )}\n                        </Space>\n                      ),\n                    },\n                  ]}\n                />\n              </Card>\n            </Col>\n          </Row>\n        </TabPane>\n\n        {/* Alert Rules Tab */}\n        <TabPane\n          tab={\n            <Space>\n              <SettingOutlined />\n              Alert Rules\n            </Space>\n          }\n          key=\"rules\"\n        >\n          <Card\n            title=\"Alert Rules Configuration\"\n            extra={\n              <Button\n                type=\"primary\"\n                icon={<PlusOutlined />}\n                onClick={() => setAlertRuleModalVisible(true)}\n              >\n                Add Rule\n              </Button>\n            }\n          >\n            <Table\n              dataSource={alertRules}\n              rowKey=\"id\"\n              pagination={false}\n              \n              columns={[\n                {\n                  title: 'Rule Name',\n                  dataIndex: 'name',\n                  key: 'name',\n                  render: (name, record) => (\n                    <div>\n                      <Text strong>{name}</Text>\n                      <br />\n                      <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n                        {record.description}\n                      </Text>\n                    </div>\n                  ),\n                },\n                {\n                  title: 'Condition',\n                  key: 'condition',\n                  render: (_, record) => (\n                    <Text code>\n                      {record.metric} {record.condition.replace('_', ' ')} {record.threshold}\n                    </Text>\n                  ),\n                },\n                {\n                  title: 'Severity',\n                  dataIndex: 'severity',\n                  key: 'severity',\n                  render: (severity) => (\n                    <Tag\n                      icon={getSeverityIcon(severity)}\n                      color={getSeverityColor(severity)}\n                    >\n                      {severity.toUpperCase()}\n                    </Tag>\n                  ),\n                },\n                {\n                  title: 'Channels',\n                  dataIndex: 'channels',\n                  key: 'channels',\n                  render: (channels) => (\n                    <Space>\n                      {channels.map((channel: string) => (\n                        <Tag key={channel}>{channel}</Tag>\n                      ))}\n                    </Space>\n                  ),\n                },\n                {\n                  title: 'Triggers',\n                  dataIndex: 'triggerCount',\n                  key: 'triggerCount',\n                  render: (count, record) => (\n                    <div>\n                      <Text>{count}</Text>\n                      {record.lastTriggered && (\n                        <>\n                          <br />\n                          <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n                            Last: {dayjs(record.lastTriggered).format('MM-DD HH:mm')}\n                          </Text>\n                        </>\n                      )}\n                    </div>\n                  ),\n                },\n                {\n                  title: 'Status',\n                  dataIndex: 'enabled',\n                  key: 'enabled',\n                  render: (enabled, record) => (\n                    <Switch\n                      checked={enabled}\n                      onChange={() => toggleAlertRule(record.id)}\n                    />\n                  ),\n                },\n                {\n                  title: 'Actions',\n                  key: 'actions',\n                  render: (_, _record) => (\n                    <Space>\n                      <Button  icon={<EditOutlined />}>\n                        Edit\n                      </Button>\n                      <Button  icon={<DeleteOutlined />} danger>\n                        Delete\n                      </Button>\n                    </Space>\n                  ),\n                },\n              ]}\n            />\n          </Card>\n        </TabPane>\n\n        {/* Notification Channels Tab */}\n        <TabPane\n          tab={\n            <Space>\n              <BellOutlined />\n              Notifications\n            </Space>\n          }\n          key=\"notifications\"\n        >\n          <Card\n            title=\"Notification Channels\"\n            extra={\n              <Button\n                type=\"primary\"\n                icon={<PlusOutlined />}\n                onClick={() => setChannelModalVisible(true)}\n              >\n                Add Channel\n              </Button>\n            }\n          >\n            <List\n              dataSource={notificationChannels}\n              renderItem={(channel) => (\n                <List.Item\n                  actions={[\n                    <Switch\n                      key=\"toggle\"\n                      checked={channel.enabled}\n                      onChange={() => toggleNotificationChannel(channel.id)}\n                    />,\n                    <Button key=\"edit\"  icon={<EditOutlined />}>\n                      Edit\n                    </Button>,\n                    <Button key=\"test\" >\n                      Test\n                    </Button>,\n                    <Button key=\"delete\"  icon={<DeleteOutlined />} danger>\n                      Delete\n                    </Button>,\n                  ]}\n                >\n                  <List.Item.Meta\n                    avatar={\n                      <Avatar\n                        icon={\n                          channel.type === 'email' ? <BellOutlined /> :\n                          channel.type === 'slack' ? <WifiOutlined /> :\n                          channel.type === 'webhook' ? <CloudServerOutlined /> :\n                          <BellOutlined />\n                        }\n                        style={{\n                          backgroundColor: channel.enabled ? '#52c41a' : '#d9d9d9',\n                        }}\n                      />\n                    }\n                    title={\n                      <Space>\n                        {channel.name}\n                        <Tag>{channel.type.toUpperCase()}</Tag>\n                        {!channel.enabled && <Tag color=\"red\">DISABLED</Tag>}\n                      </Space>\n                    }\n                    description={\n                      <div>\n                        <Text type=\"secondary\">\n                          Created: {dayjs(channel.createdAt).format('YYYY-MM-DD')}\n                        </Text>\n                        <br />\n                        <Text code style={{ fontSize: '12px' }}>\n                          {JSON.stringify(channel.config, null, 0)}\n                        </Text>\n                      </div>\n                    }\n                  />\n                </List.Item>\n              )}\n            />\n          </Card>\n        </TabPane>\n      </Tabs>\n\n      {/* Alert Details Modal */}\n      <Modal\n        title={\n          <Space>\n            <AlertOutlined />\n            Alert Details\n            {selectedAlert && (\n              <Tag\n                icon={getSeverityIcon(selectedAlert.type)}\n                color={getSeverityColor(selectedAlert.type)}\n              >\n                {selectedAlert.type.toUpperCase()}\n              </Tag>\n            )}\n          </Space>\n        }\n        open={alertDetailsModalVisible}\n        onCancel={() => setAlertDetailsModalVisible(false)}\n        footer={[\n          <Button key=\"close\" onClick={() => setAlertDetailsModalVisible(false)}>\n            Close\n          </Button>,\n          selectedAlert && !selectedAlert.acknowledged && (\n            <Button\n              key=\"ack\"\n              onClick={() => {\n                acknowledgeAlert(selectedAlert.id);\n                setAlertDetailsModalVisible(false);\n              }}\n            >\n              Acknowledge\n            </Button>\n          ),\n          selectedAlert && !selectedAlert.resolved && (\n            <Button\n              key=\"resolve\"\n              type=\"primary\"\n              onClick={() => {\n                resolveAlert(selectedAlert.id);\n                setAlertDetailsModalVisible(false);\n              }}\n            >\n              Resolve\n            </Button>\n          ),\n        ]}\n        width={600}\n      >\n        {selectedAlert && (\n          <div>\n            <Row gutter={[16, 16]}>\n              <Col span={12}>\n                <Text strong>Title:</Text>\n                <br />\n                <Text>{selectedAlert.title}</Text>\n              </Col>\n              <Col span={12}>\n                <Text strong>Source:</Text>\n                <br />\n                <Text>{selectedAlert.source}</Text>\n              </Col>\n              <Col span={12}>\n                <Text strong>Timestamp:</Text>\n                <br />\n                <Text>{dayjs(selectedAlert.timestamp).format('YYYY-MM-DD HH:mm:ss')}</Text>\n              </Col>\n              <Col span={12}>\n                <Text strong>Severity:</Text>\n                <br />\n                <Tag\n                  icon={getSeverityIcon(selectedAlert.type)}\n                  color={getSeverityColor(selectedAlert.type)}\n                >\n                  {selectedAlert.type.toUpperCase()}\n                </Tag>\n              </Col>\n              {selectedAlert.assignee && (\n                <Col span={12}>\n                  <Text strong>Assignee:</Text>\n                  <br />\n                  <Text>{selectedAlert.assignee}</Text>\n                </Col>\n              )}\n              {selectedAlert.ruleId && (\n                <Col span={12}>\n                  <Text strong>Alert Rule:</Text>\n                  <br />\n                  <Text>{alertRules.find(rule => rule.id === selectedAlert.ruleId)?.name || selectedAlert.ruleId}</Text>\n                </Col>\n              )}\n            </Row>\n            \n            <Divider />\n            \n            <div>\n              <Text strong>Message:</Text>\n              <Paragraph style={{ marginTop: 8 }}>\n                {selectedAlert.message}\n              </Paragraph>\n            </div>\n\n            <div style={{ marginTop: 16 }}>\n              <Text strong>Status:</Text>\n              <div style={{ marginTop: 8 }}>\n                <Space direction=\"vertical\">\n                  {selectedAlert.acknowledged && (\n                    <Tag color=\"blue\" icon={<CheckCircleOutlined />}>\n                      ACKNOWLEDGED\n                    </Tag>\n                  )}\n                  {selectedAlert.resolved && (\n                    <Tag color=\"green\" icon={<CheckCircleOutlined />}>\n                      RESOLVED\n                    </Tag>\n                  )}\n                  {!selectedAlert.acknowledged && !selectedAlert.resolved && (\n                    <Tag color=\"red\" icon={<ExclamationCircleOutlined />}>\n                      ACTIVE\n                    </Tag>\n                  )}\n                </Space>\n              </div>\n            </div>\n          </div>\n        )}\n      </Modal>\n\n      {/* Alert Rule Modal */}\n      <Modal\n        title=\"Add Alert Rule\"\n        open={alertRuleModalVisible}\n        onCancel={() => setAlertRuleModalVisible(false)}\n        footer={[\n          <Button key=\"cancel\" onClick={() => setAlertRuleModalVisible(false)}>\n            Cancel\n          </Button>,\n          <Button key=\"save\" type=\"primary\">\n            Save Rule\n          </Button>,\n        ]}\n        width={600}\n      >\n        <Space direction=\"vertical\" style={{ width: '100%' }}>\n          <div>\n            <Text strong>Rule Name:</Text>\n            <Input placeholder=\"Enter rule name\" />\n          </div>\n          <div>\n            <Text strong>Description:</Text>\n            <Input.TextArea placeholder=\"Enter rule description\" rows={2} />\n          </div>\n          <Row gutter={16}>\n            <Col span={8}>\n              <Text strong>Metric:</Text>\n              <Select placeholder=\"Select metric\" style={{ width: '100%' }}>\n                <Option value=\"cpu_usage\">CPU Usage</Option>\n                <Option value=\"memory_usage\">Memory Usage</Option>\n                <Option value=\"disk_usage\">Disk Usage</Option>\n                <Option value=\"response_time\">Response Time</Option>\n                <Option value=\"error_rate\">Error Rate</Option>\n              </Select>\n            </Col>\n            <Col span={8}>\n              <Text strong>Condition:</Text>\n              <Select placeholder=\"Select condition\" style={{ width: '100%' }}>\n                <Option value=\"greater_than\">Greater than</Option>\n                <Option value=\"less_than\">Less than</Option>\n                <Option value=\"equals\">Equals</Option>\n                <Option value=\"not_equals\">Not equals</Option>\n              </Select>\n            </Col>\n            <Col span={8}>\n              <Text strong>Threshold:</Text>\n              <Input placeholder=\"Enter threshold value\" type=\"number\" />\n            </Col>\n          </Row>\n          <div>\n            <Text strong>Severity:</Text>\n            <Select placeholder=\"Select severity\" style={{ width: '100%' }}>\n              <Option value=\"info\">Info</Option>\n              <Option value=\"warning\">Warning</Option>\n              <Option value=\"error\">Error</Option>\n              <Option value=\"critical\">Critical</Option>\n            </Select>\n          </div>\n          <div>\n            <Text strong>Notification Channels:</Text>\n            <Select\n              mode=\"multiple\"\n              placeholder=\"Select channels\"\n              style={{ width: '100%' }}\n            >\n              {notificationChannels\n                .filter(channel => channel.enabled)\n                .map(channel => (\n                  <Option key={channel.id} value={channel.id}>\n                    {channel.name}\n                  </Option>\n                ))}\n            </Select>\n          </div>\n        </Space>\n      </Modal>\n\n      {/* Notification Channel Modal */}\n      <Modal\n        title=\"Add Notification Channel\"\n        open={channelModalVisible}\n        onCancel={() => setChannelModalVisible(false)}\n        footer={[\n          <Button key=\"cancel\" onClick={() => setChannelModalVisible(false)}>\n            Cancel\n          </Button>,\n          <Button key=\"save\" type=\"primary\">\n            Save Channel\n          </Button>,\n        ]}\n        width={600}\n      >\n        <Space direction=\"vertical\" style={{ width: '100%' }}>\n          <div>\n            <Text strong>Channel Name:</Text>\n            <Input placeholder=\"Enter channel name\" />\n          </div>\n          <div>\n            <Text strong>Channel Type:</Text>\n            <Select placeholder=\"Select channel type\" style={{ width: '100%' }}>\n              <Option value=\"email\">Email</Option>\n              <Option value=\"slack\">Slack</Option>\n              <Option value=\"webhook\">Webhook</Option>\n              <Option value=\"sms\">SMS</Option>\n            </Select>\n          </div>\n          <div>\n            <Text strong>Configuration:</Text>\n            <Input.TextArea\n              placeholder=\"Enter channel configuration (JSON format)\"\n              rows={4}\n            />\n          </div>\n        </Space>\n      </Modal>\n    </div>\n  );\n};\n\nexport default SystemMonitoring;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/System/Settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'conflictModalVisible' is assigned a value but never used.","line":59,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setConflictModalVisible' is assigned a value but never used.","line":59,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'approvalModalVisible' is assigned a value but never used.","line":60,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setApprovalModalVisible' is assigned a value but never used.","line":60,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedAudit' is assigned a value but never used.","line":61,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isSaving' is assigned a value but never used.","line":69,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isValidating' is assigned a value but never used.","line":70,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'saveConfig' is assigned a value but never used.","line":71,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":71,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'validateConfig' is assigned a value but never used.","line":72,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":72,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'restoreFromBackup' is assigned a value but never used.","line":75,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":75,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'resolveConflict' is assigned a value but never used.","line":79,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":79,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'analyzeImpact' is assigned a value but never used.","line":80,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":80,"endColumn":18}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect } from 'react';\nimport {\n  Card,\n  Row,\n  Col,\n  Button,\n  Space,\n  Tabs,\n  Alert,\n  Spin,\n  Typography,\n  Modal,\n  Input,\n  Table,\n  Tag,\n  Dropdown,\n  Menu,\n  message,\n  Statistic,\n  Timeline,\n  List,\n  Avatar,\n  Badge,\n} from 'antd';\nimport {\n  SettingOutlined,\n  HistoryOutlined,\n  CloudDownloadOutlined,\n  UserOutlined,\n  LockOutlined,\n  ThunderboltOutlined,\n  ExperimentOutlined,\n  SyncOutlined,\n  CheckCircleOutlined,\n  ExclamationCircleOutlined,\n  InfoCircleOutlined,\n  EditOutlined,\n  EyeOutlined,\n  CopyOutlined,\n  DeleteOutlined,\n  CloudUploadOutlined,\n  CloudDownloadOutlined,\n  DiffOutlined,\n  SecurityScanOutlined,\n} from '@ant-design/icons';\nimport ConfigEditor from '../../components/config/ConfigEditor';\nimport useSystemConfig from '../../hooks/useSystemConfig';\nimport { ConfigurationTemplate, ConfigurationAudit } from '../../types/systemConfig';\n\nconst { Title, Text, Paragraph } = Typography;\nconst { TabPane } = Tabs;\nconst { TextArea } = Input;\n\nconst SystemSettings: React.FC = () => {\n  const [activeTab, setActiveTab] = useState('configuration');\n  const [,] = useState<ConfigurationTemplate | null>(null);\n  const [templateModalVisible, setTemplateModalVisible] = useState(false);\n  const [auditModalVisible, setAuditModalVisible] = useState(false);\n  const [conflictModalVisible, setConflictModalVisible] = useState(false);\n  const [approvalModalVisible, setApprovalModalVisible] = useState(false);\n  const [selectedAudit, setSelectedAudit] = useState<ConfigurationAudit | null>(null);\n\n  const {\n    configs,\n    currentConfig,\n    configHistory,\n    validationErrors,\n    isLoading,\n    isSaving,\n    isValidating,\n    saveConfig,\n    validateConfig,\n    rollbackToVersion,\n    createBackup,\n    restoreFromBackup,\n    compareVersions,\n    applyTemplate,\n    saveAsTemplate,\n    resolveConflict,\n    analyzeImpact,\n  } = useSystemConfig();\n\n  // Mock data for demonstration\n  const [templates] = useState<ConfigurationTemplate[]>([\n    {\n      id: 'default',\n      name: 'Default Configuration',\n      description: 'Standard configuration for new installations',\n      category: 'General',\n      config: {},\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    },\n    {\n      id: 'production',\n      name: 'Production Configuration',\n      description: 'Optimized settings for production environments',\n      category: 'Environment',\n      config: {},\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    },\n    {\n      id: 'development',\n      name: 'Development Configuration',\n      description: 'Debug-friendly settings for development',\n      category: 'Environment',\n      config: {},\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    },\n  ]);\n\n  const [auditLogs] = useState<ConfigurationAudit[]>([\n    {\n      id: '1',\n      action: 'UPDATE',\n      configId: currentConfig?.id || '1',\n      userId: 'admin',\n      userName: 'System Administrator',\n      changes: { siteName: { from: 'Old Name', to: 'New Name' } },\n      timestamp: new Date().toISOString(),\n      ip: '192.168.1.100',\n      userAgent: 'Mozilla/5.0...',\n    },\n    {\n      id: '2',\n      action: 'ROLLBACK',\n      configId: currentConfig?.id || '1',\n      userId: 'admin',\n      userName: 'System Administrator',\n      changes: {},\n      timestamp: new Date(Date.now() - 3600000).toISOString(),\n      ip: '192.168.1.100',\n      userAgent: 'Mozilla/5.0...',\n    },\n  ]);\n\n  const [systemStats, setSystemStats] = useState({\n    totalConfigurations: configs.length,\n    activeConfiguration: currentConfig?.version || 'N/A',\n    lastModified: currentConfig?.updatedAt || new Date().toISOString(),\n    validationStatus: validationErrors.length === 0 ? 'Valid' : 'Invalid',\n    backupCount: configHistory.length,\n    templateCount: templates.length,\n  });\n\n  // Update stats when configs change\n  useEffect(() => {\n    setSystemStats({\n      totalConfigurations: configs.length,\n      activeConfiguration: currentConfig?.version || 'N/A',\n      lastModified: currentConfig?.updatedAt || new Date().toISOString(),\n      validationStatus: validationErrors.length === 0 ? 'Valid' : 'Invalid',\n      backupCount: configHistory.length,\n      templateCount: templates.length,\n    });\n  }, [configs, currentConfig, validationErrors, configHistory, templates]);\n\n  // Handle template application\n  const handleApplyTemplate = useCallback(async (templateId: string) => {\n    try {\n      await applyTemplate(templateId);\n      message.success('Template applied successfully');\n      setTemplateModalVisible(false);\n    } catch (error) {\n      console.error('Failed to apply template:', error);\n      message.error('Failed to apply template');\n    }\n  }, [applyTemplate]);\n\n  // Handle save as template\n  const handleSaveAsTemplate = useCallback(async (name: string, description: string) => {\n    try {\n      await saveAsTemplate(name, description);\n      message.success('Configuration saved as template');\n      setTemplateModalVisible(false);\n    } catch (error) {\n      console.error('Failed to save template:', error);\n      message.error('Failed to save template');\n    }\n  }, [saveAsTemplate]);\n\n  // Render overview tab\n  const renderOverviewTab = () => (\n    <Row gutter={[16, 16]}>\n      {/* System Status Cards */}\n      <Col span={24}>\n        <Row gutter={[16, 16]}>\n          <Col span={6}>\n            <Card>\n              <Statistic\n                title=\"Active Configuration\"\n                value={systemStats.activeConfiguration}\n                prefix={<SettingOutlined />}\n                valueStyle={{ color: '#1890ff' }}\n              />\n            </Card>\n          </Col>\n          <Col span={6}>\n            <Card>\n              <Statistic\n                title=\"Validation Status\"\n                value={systemStats.validationStatus}\n                prefix={\n                  systemStats.validationStatus === 'Valid' ? (\n                    <CheckCircleOutlined style={{ color: '#52c41a' }} />\n                  ) : (\n                    <ExclamationCircleOutlined style={{ color: '#ff4d4f' }} />\n                  )\n                }\n                valueStyle={{\n                  color: systemStats.validationStatus === 'Valid' ? '#52c41a' : '#ff4d4f',\n                }}\n              />\n            </Card>\n          </Col>\n          <Col span={6}>\n            <Card>\n              <Statistic\n                title=\"Total Backups\"\n                value={systemStats.backupCount}\n                prefix={<CloudDownloadOutlined />}\n                valueStyle={{ color: '#722ed1' }}\n              />\n            </Card>\n          </Col>\n          <Col span={6}>\n            <Card>\n              <Statistic\n                title=\"Available Templates\"\n                value={systemStats.templateCount}\n                prefix={<ExperimentOutlined />}\n                valueStyle={{ color: '#fa8c16' }}\n              />\n            </Card>\n          </Col>\n        </Row>\n      </Col>\n\n      {/* Quick Actions */}\n      <Col span={24}>\n        <Card title=\"Quick Actions\" >\n          <Space wrap>\n            <Button\n              type=\"primary\"\n              icon={<EditOutlined />}\n              onClick={() => setActiveTab('configuration')}\n            >\n              Edit Configuration\n            </Button>\n            <Button\n              icon={<EyeOutlined />}\n              onClick={() => setActiveTab('history')}\n            >\n              View History\n            </Button>\n            <Button\n              icon={<CloudDownloadOutlined />}\n              onClick={async () => {\n                const description = `Manual backup - ${new Date().toLocaleString()}`;\n                await createBackup(description);\n              }}\n            >\n              Create Backup\n            </Button>\n            <Button\n              icon={<ExperimentOutlined />}\n              onClick={() => setTemplateModalVisible(true)}\n            >\n              Manage Templates\n            </Button>\n            <Button\n              icon={<HistoryOutlined />}\n              onClick={() => setAuditModalVisible(true)}\n            >\n              View Audit Log\n            </Button>\n            <Button\n              icon={<SecurityScanOutlined />}\n              onClick={() => setActiveTab('security')}\n            >\n              Security Settings\n            </Button>\n          </Space>\n        </Card>\n      </Col>\n\n      {/* Current Configuration Summary */}\n      <Col span={12}>\n        <Card title=\"Current Configuration Summary\" >\n          {currentConfig ? (\n            <List\n              \n              dataSource={[\n                { label: 'Site Name', value: currentConfig.siteName || 'Not Set' },\n                { label: 'Environment', value: currentConfig.environment || 'Not Set' },\n                { label: 'Version', value: currentConfig.version || 'N/A' },\n                { label: 'Last Modified', value: new Date(currentConfig.updatedAt).toLocaleString() },\n                { label: 'Modified By', value: currentConfig.modifiedBy || 'System' },\n              ]}\n              renderItem={(item) => (\n                <List.Item>\n                  <Text strong>{item.label}:</Text> <Text>{item.value}</Text>\n                </List.Item>\n              )}\n            />\n          ) : (\n            <Text type=\"secondary\">No configuration loaded</Text>\n          )}\n        </Card>\n      </Col>\n\n      {/* Recent Changes */}\n      <Col span={12}>\n        <Card title=\"Recent Changes\" >\n          <Timeline >\n            {configHistory.slice(0, 5).map((config, index) => (\n              <Timeline.Item\n                key={config.id}\n                color={index === 0 ? 'green' : 'blue'}\n                dot={index === 0 ? <CheckCircleOutlined /> : <HistoryOutlined />}\n              >\n                <Text strong>v{config.version}</Text>\n                <br />\n                <Text type=\"secondary\">\n                  {new Date(config.createdAt).toLocaleString()}\n                </Text>\n                <br />\n                <Text>{config.description || 'Configuration update'}</Text>\n              </Timeline.Item>\n            ))}\n          </Timeline>\n        </Card>\n      </Col>\n\n      {/* Validation Status */}\n      {validationErrors.length > 0 && (\n        <Col span={24}>\n          <Alert\n            type=\"error\"\n            message={`Configuration has ${validationErrors.length} validation error(s)`}\n            description={\n              <List\n                \n                dataSource={validationErrors.slice(0, 3)}\n                renderItem={(error) => (\n                  <List.Item>\n                    <strong>{error.field}</strong>: {error.message}\n                  </List.Item>\n                )}\n              />\n            }\n            showIcon\n            action={\n              <Button\n                \n                type=\"primary\"\n                onClick={() => setActiveTab('configuration')}\n              >\n                Fix Issues\n              </Button>\n            }\n          />\n        </Col>\n      )}\n    </Row>\n  );\n\n  // Render configuration tab\n  const renderConfigurationTab = () => (\n    <ConfigEditor height={800} />\n  );\n\n  // Render history tab\n  const renderHistoryTab = () => (\n    <Card>\n      <Table\n        dataSource={configHistory}\n        rowKey=\"id\"\n        pagination={{ pageSize: 10 }}\n        columns={[\n          {\n            title: 'Version',\n            dataIndex: 'version',\n            key: 'version',\n            render: (version, record) => (\n              <Space>\n                <Badge\n                  status={record.isActive ? 'success' : 'default'}\n                  text={`v${version}`}\n                />\n                {record.isActive && <Tag color=\"green\">ACTIVE</Tag>}\n              </Space>\n            ),\n          },\n          {\n            title: 'Description',\n            dataIndex: 'description',\n            key: 'description',\n            ellipsis: true,\n          },\n          {\n            title: 'Created',\n            dataIndex: 'createdAt',\n            key: 'createdAt',\n            render: (date) => new Date(date).toLocaleString(),\n            sorter: (a, b) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime(),\n          },\n          {\n            title: 'Modified By',\n            dataIndex: 'modifiedBy',\n            key: 'modifiedBy',\n            render: (user) => (\n              <Space>\n                <Avatar  icon={<UserOutlined />} />\n                {user || 'System'}\n              </Space>\n            ),\n          },\n          {\n            title: 'Size',\n            dataIndex: 'size',\n            key: 'size',\n            render: (size) => `${(size || 0)} KB`,\n          },\n          {\n            title: 'Actions',\n            key: 'actions',\n            render: (_, record) => (\n              <Space>\n                <Button\n                  \n                  icon={<EyeOutlined />}\n                  onClick={() => {\n                    // View configuration details\n                  }}\n                >\n                  View\n                </Button>\n                {!record.isActive && (\n                  <Button\n                    \n                    icon={<SyncOutlined />}\n                    onClick={() => rollbackToVersion(record.id)}\n                  >\n                    Restore\n                  </Button>\n                )}\n                <Dropdown\n                  overlay={\n                    <Menu>\n                      <Menu.Item\n                        key=\"copy\"\n                        icon={<CopyOutlined />}\n                      >\n                        Duplicate\n                      </Menu.Item>\n                      <Menu.Item\n                        key=\"compare\"\n                        icon={<DiffOutlined />}\n                        onClick={() => {\n                          if (currentConfig) {\n                            compareVersions(currentConfig.id, record.id);\n                          }\n                        }}\n                      >\n                        Compare with Current\n                      </Menu.Item>\n                      <Menu.Item\n                        key=\"export\"\n                        icon={<CloudDownloadOutlined />}\n                      >\n                        Export\n                      </Menu.Item>\n                      {!record.isActive && (\n                        <Menu.Item\n                          key=\"delete\"\n                          icon={<DeleteOutlined />}\n                          danger\n                        >\n                          Delete\n                        </Menu.Item>\n                      )}\n                    </Menu>\n                  }\n                >\n                  <Button >More</Button>\n                </Dropdown>\n              </Space>\n            ),\n          },\n        ]}\n      />\n    </Card>\n  );\n\n  // Render templates tab\n  const renderTemplatesTab = () => (\n    <Row gutter={[16, 16]}>\n      <Col span={24}>\n        <Card\n          title=\"Configuration Templates\"\n          extra={\n            <Space>\n              <Button\n                type=\"primary\"\n                icon={<CloudUploadOutlined />}\n                onClick={() => setTemplateModalVisible(true)}\n              >\n                Save Current as Template\n              </Button>\n            </Space>\n          }\n        >\n          <Row gutter={[16, 16]}>\n            {templates.map((template) => (\n              <Col key={template.id} span={8}>\n                <Card\n                  \n                  title={template.name}\n                  extra={\n                    <Dropdown\n                      overlay={\n                        <Menu>\n                          <Menu.Item\n                            key=\"apply\"\n                            icon={<ThunderboltOutlined />}\n                            onClick={() => handleApplyTemplate(template.id)}\n                          >\n                            Apply Template\n                          </Menu.Item>\n                          <Menu.Item\n                            key=\"edit\"\n                            icon={<EditOutlined />}\n                          >\n                            Edit Template\n                          </Menu.Item>\n                          <Menu.Item\n                            key=\"copy\"\n                            icon={<CopyOutlined />}\n                          >\n                            Duplicate\n                          </Menu.Item>\n                          <Menu.Item\n                            key=\"export\"\n                            icon={<CloudDownloadOutlined />}\n                          >\n                            Export\n                          </Menu.Item>\n                          <Menu.Item\n                            key=\"delete\"\n                            icon={<DeleteOutlined />}\n                            danger\n                          >\n                            Delete\n                          </Menu.Item>\n                        </Menu>\n                      }\n                    >\n                      <Button  type=\"text\">•••</Button>\n                    </Dropdown>\n                  }\n                >\n                  <Paragraph ellipsis={{ rows: 2 }}>\n                    {template.description}\n                  </Paragraph>\n                  <Space direction=\"vertical\" style={{ width: '100%' }}>\n                    <Tag color=\"blue\">{template.category}</Tag>\n                    <Text type=\"secondary\" style={{ fontSize: '12px' }}>\n                      Updated {new Date(template.updatedAt).toLocaleDateString()}\n                    </Text>\n                    <Button\n                      type=\"primary\"\n                      \n                      block\n                      onClick={() => handleApplyTemplate(template.id)}\n                    >\n                      Apply Template\n                    </Button>\n                  </Space>\n                </Card>\n              </Col>\n            ))}\n          </Row>\n        </Card>\n      </Col>\n    </Row>\n  );\n\n  // Render security tab\n  const renderSecurityTab = () => (\n    <Row gutter={[16, 16]}>\n      <Col span={24}>\n        <Alert\n          type=\"info\"\n          message=\"Security Configuration\"\n          description=\"Configure security settings and access controls for the system configuration management.\"\n          showIcon\n          style={{ marginBottom: 16 }}\n        />\n      </Col>\n      <Col span={12}>\n        <Card title=\"Access Control\" >\n          <Space direction=\"vertical\" style={{ width: '100%' }}>\n            <div>\n              <Text strong>Configuration Admin Role:</Text>\n              <br />\n              <Text type=\"secondary\">Users who can modify system configuration</Text>\n            </div>\n            <div>\n              <Text strong>Configuration Viewer Role:</Text>\n              <br />\n              <Text type=\"secondary\">Users who can view configuration (read-only)</Text>\n            </div>\n            <div>\n              <Text strong>Approval Required:</Text>\n              <br />\n              <Text type=\"secondary\">Changes require approval before applying</Text>\n            </div>\n          </Space>\n        </Card>\n      </Col>\n      <Col span={12}>\n        <Card title=\"Audit & Compliance\" >\n          <Space direction=\"vertical\" style={{ width: '100%' }}>\n            <div>\n              <Text strong>Change Tracking:</Text>\n              <br />\n              <Tag color=\"green\">Enabled</Tag>\n            </div>\n            <div>\n              <Text strong>Backup Retention:</Text>\n              <br />\n              <Text type=\"secondary\">30 days</Text>\n            </div>\n            <div>\n              <Text strong>Validation Required:</Text>\n              <br />\n              <Tag color=\"green\">Enabled</Tag>\n            </div>\n          </Space>\n        </Card>\n      </Col>\n    </Row>\n  );\n\n  if (isLoading) {\n    return (\n      <div style={{ textAlign: 'center', padding: '50px' }}>\n        <Spin size=\"large\" />\n        <div style={{ marginTop: 16 }}>\n          <Text>Loading system configuration...</Text>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"system-settings\">\n      <div style={{ marginBottom: 24 }}>\n        <Title level={2}>\n          <Space>\n            <SettingOutlined />\n            System Settings\n          </Space>\n        </Title>\n        <Paragraph type=\"secondary\">\n          Manage system configuration, templates, and security settings.\n        </Paragraph>\n      </div>\n\n      <Tabs\n        activeKey={activeTab}\n        onChange={setActiveTab}\n        type=\"card\"\n      >\n        <TabPane\n          tab={\n            <Space>\n              <InfoCircleOutlined />\n              Overview\n            </Space>\n          }\n          key=\"overview\"\n        >\n          {renderOverviewTab()}\n        </TabPane>\n\n        <TabPane\n          tab={\n            <Space>\n              <SettingOutlined />\n              Configuration\n            </Space>\n          }\n          key=\"configuration\"\n        >\n          {renderConfigurationTab()}\n        </TabPane>\n\n        <TabPane\n          tab={\n            <Space>\n              <HistoryOutlined />\n              History\n              <Badge count={configHistory.length}  />\n            </Space>\n          }\n          key=\"history\"\n        >\n          {renderHistoryTab()}\n        </TabPane>\n\n        <TabPane\n          tab={\n            <Space>\n              <ExperimentOutlined />\n              Templates\n              <Badge count={templates.length}  />\n            </Space>\n          }\n          key=\"templates\"\n        >\n          {renderTemplatesTab()}\n        </TabPane>\n\n        <TabPane\n          tab={\n            <Space>\n              <LockOutlined />\n              Security\n            </Space>\n          }\n          key=\"security\"\n        >\n          {renderSecurityTab()}\n        </TabPane>\n      </Tabs>\n\n      {/* Template Modal */}\n      <Modal\n        title=\"Save Configuration as Template\"\n        open={templateModalVisible}\n        onCancel={() => setTemplateModalVisible(false)}\n        onOk={() => {\n          const nameInput = document.getElementById('template-name') as HTMLInputElement;\n          const descInput = document.getElementById('template-desc') as HTMLTextAreaElement;\n          if (nameInput?.value && descInput?.value) {\n            handleSaveAsTemplate(nameInput.value, descInput.value);\n          }\n        }}\n      >\n        <Space direction=\"vertical\" style={{ width: '100%' }}>\n          <div>\n            <Text strong>Template Name:</Text>\n            <Input id=\"template-name\" placeholder=\"Enter template name\" />\n          </div>\n          <div>\n            <Text strong>Description:</Text>\n            <TextArea id=\"template-desc\" rows={3} placeholder=\"Enter template description\" />\n          </div>\n        </Space>\n      </Modal>\n\n      {/* Audit Modal */}\n      <Modal\n        title=\"Configuration Audit Log\"\n        open={auditModalVisible}\n        onCancel={() => setAuditModalVisible(false)}\n        footer={null}\n        width={1000}\n      >\n        <Table\n          dataSource={auditLogs}\n          rowKey=\"id\"\n          pagination={{ pageSize: 10 }}\n          \n          columns={[\n            {\n              title: 'Action',\n              dataIndex: 'action',\n              key: 'action',\n              render: (action) => (\n                <Tag color={action === 'UPDATE' ? 'blue' : action === 'ROLLBACK' ? 'orange' : 'green'}>\n                  {action}\n                </Tag>\n              ),\n            },\n            {\n              title: 'User',\n              dataIndex: 'userName',\n              key: 'userName',\n              render: (name, _record) => (\n                <Space>\n                  <Avatar  icon={<UserOutlined />} />\n                  {name}\n                </Space>\n              ),\n            },\n            {\n              title: 'Timestamp',\n              dataIndex: 'timestamp',\n              key: 'timestamp',\n              render: (timestamp) => new Date(timestamp).toLocaleString(),\n            },\n            {\n              title: 'IP Address',\n              dataIndex: 'ip',\n              key: 'ip',\n            },\n            {\n              title: 'Changes',\n              dataIndex: 'changes',\n              key: 'changes',\n              render: (changes) => (\n                <Text code>{Object.keys(changes).length} field(s)</Text>\n              ),\n            },\n            {\n              title: 'Actions',\n              key: 'actions',\n              render: (_, record) => (\n                <Button\n                  \n                  onClick={() => setSelectedAudit(record)}\n                >\n                  View Details\n                </Button>\n              ),\n            },\n          ]}\n        />\n      </Modal>\n    </div>\n  );\n};\n\nexport default SystemSettings;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/Users/UserDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/Users/UserManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/__tests__/Dashboard.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1642,1645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1642,1645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2032,2035],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2032,2035],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2206,2209],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2206,2209],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2382,2385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2382,2385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":81,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2562,2565],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2562,2565],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":95,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2983,2986],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2983,2986],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":114,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3513,3516],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3513,3516],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { render, screen, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { MemoryRouter } from 'react-router-dom';\nimport { vi, describe, it, expect, beforeEach, afterEach } from 'vitest';\nimport '@testing-library/jest-dom';\n\nimport Dashboard from '../Dashboard';\nimport { PermissionProvider } from '../../contexts/PermissionContext';\n\n// Mock dependencies\nconst mockRefreshAll = vi.fn();\nconst mockExportData = vi.fn();\nconst mockGetChartData = vi.fn();\nconst mockGetTrendData = vi.fn();\nconst mockUpdateRefreshSettings = vi.fn();\n\nvi.mock('../../hooks/useDashboard', () => ({\n  useDashboard: () => ({\n    stats: mockDashboardStats,\n    metrics: mockSystemMetrics,\n    healthCheck: mockHealthCheck,\n    activities: mockActivities,\n    isLoading: false,\n    isRefreshing: false,\n    hasErrors: false,\n    isConnected: true,\n    refreshAll: mockRefreshAll,\n    exportData: mockExportData,\n    getChartData: mockGetChartData,\n    getTrendData: mockGetTrendData,\n  }),\n}));\n\nvi.mock('../../hooks/useDashboard', () => ({\n  useDashboardConfig: () => ({\n    autoRefresh: true,\n    refreshInterval: 30,\n    updateRefreshSettings: mockUpdateRefreshSettings,\n  }),\n}));\n\nvi.mock('../../hooks/usePermissions', () => ({\n  usePermissions: () => ({\n    hasPermission: vi.fn().mockReturnValue(true),\n    userRole: 'admin',\n    permissions: ['dashboard:read', 'dashboard:export', 'system:monitor'],\n  }),\n}));\n\nvi.mock('../../components/charts/StatCard', () => ({\n  default: ({ title, value, loading }: any) => (\n    <div data-testid={`stat-card-${title.toLowerCase()}`}>\n      {loading ? (\n        <span data-testid=\"stat-loading\">Loading...</span>\n      ) : (\n        <div>\n          <span data-testid=\"stat-title\">{title}</span>\n          <span data-testid=\"stat-value\">{value}</span>\n        </div>\n      )}\n    </div>\n  ),\n  StatCardVariants: {\n    UserStats: ({ title, value, loading }: any) => (\n      <div data-testid=\"user-stats-card\">\n        {loading ? 'Loading...' : `${title}: ${value}`}\n      </div>\n    ),\n    ContentStats: ({ title, value, loading }: any) => (\n      <div data-testid=\"content-stats-card\">\n        {loading ? 'Loading...' : `${title}: ${value}`}\n      </div>\n    ),\n    SystemStats: ({ title, value, loading }: any) => (\n      <div data-testid=\"system-stats-card\">\n        {loading ? 'Loading...' : `${title}: ${value}`}\n      </div>\n    ),\n    PerformanceStats: ({ title, value, loading }: any) => (\n      <div data-testid=\"performance-stats-card\">\n        {loading ? 'Loading...' : `${title}: ${value}`}\n      </div>\n    ),\n  },\n  StatCardFormatters: {\n    number: (num: number) => num.toLocaleString(),\n    fileSize: (bytes: number) => `${bytes} bytes`,\n    duration: (ms: number) => `${ms}ms`,\n  },\n}));\n\nvi.mock('../../components/charts/LineChart', () => ({\n  default: ({ title, data, loading, onRefresh }: any) => (\n    <div data-testid={`line-chart-${title.toLowerCase()}`}>\n      {loading ? (\n        <span data-testid=\"chart-loading\">Loading chart...</span>\n      ) : (\n        <div>\n          <h3 data-testid=\"chart-title\">{title}</h3>\n          <div data-testid=\"chart-data\">{JSON.stringify(data)}</div>\n          <button data-testid=\"chart-refresh\" onClick={onRefresh}>\n            Refresh Chart\n          </button>\n        </div>\n      )}\n    </div>\n  ),\n}));\n\n// Mock dayjs\nvi.mock('dayjs', () => {\n  const mockDayjs = (_date?: any) => ({\n    format: (format: string) => {\n      if (format === 'YYYY-MM-DD HH:mm:ss') return '2024-01-15 10:30:00';\n      return '2024-01-15';\n    },\n    fromNow: () => '2 hours ago',\n  });\n  return { default: mockDayjs };\n});\n\n// Mock data\nconst mockDashboardStats = {\n  userStats: {\n    total: 1234,\n    active: 567,\n    newToday: 12,\n  },\n  contentStats: {\n    publishedPosts: 89,\n    drafts: 15,\n    postsToday: 3,\n  },\n  systemStats: {\n    viewsTotal: 45678,\n    viewsToday: 234,\n    performanceScore: 92.5,\n  },\n};\n\nconst mockSystemMetrics = {\n  cpu: {\n    usage: 65,\n    cores: 8,\n  },\n  memory: {\n    usage: 78,\n    used: 6442450944,\n    total: 8589934592,\n  },\n  disk: {\n    usage: 45,\n    used: 4831838208,\n    total: 10737418240,\n  },\n  application: {\n    uptime: 864000000,\n    requestCount: 15432,\n    errorCount: 23,\n    responseTime: 125,\n  },\n};\n\nconst mockHealthCheck = {\n  status: 'healthy' as const,\n  timestamp: '2024-01-15T10:30:00Z',\n  checks: {\n    database: { status: 'pass' as const },\n    cache: { status: 'pass' as const },\n    storage: { status: 'warn' as const },\n    api: { status: 'pass' as const },\n  },\n};\n\nconst mockActivities = [\n  {\n    id: '1',\n    type: 'user_login' as const,\n    description: 'User logged in',\n    user: {\n      id: '1',\n      username: 'john_doe',\n      displayName: 'John Doe',\n      avatar: 'https://example.com/avatar1.jpg',\n    },\n    createdAt: '2024-01-15T08:30:00Z',\n  },\n  {\n    id: '2',\n    type: 'post_create' as const,\n    description: 'New blog post created',\n    user: {\n      id: '2',\n      username: 'jane_smith',\n      displayName: 'Jane Smith',\n      avatar: null,\n    },\n    createdAt: '2024-01-15T07:15:00Z',\n  },\n  {\n    id: '3',\n    type: 'comment_create' as const,\n    description: 'Comment added to post',\n    user: {\n      id: '3',\n      username: 'bob_johnson',\n      displayName: 'Bob Johnson',\n      avatar: 'https://example.com/avatar3.jpg',\n    },\n    createdAt: '2024-01-15T06:45:00Z',\n  },\n];\n\n// Test wrapper component\nconst TestWrapper: React.FC<{ children: React.ReactNode; route?: string }> = ({ \n  children, \n  route = '/dashboard' \n}) => {\n  const queryClient = new QueryClient({\n    defaultOptions: {\n      queries: { retry: false },\n      mutations: { retry: false },\n    },\n  });\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <MemoryRouter initialEntries={[route]}>\n        <PermissionProvider initialPermissions={['dashboard:read', 'dashboard:export', 'system:monitor']}>\n          {children}\n        </PermissionProvider>\n      </MemoryRouter>\n    </QueryClientProvider>\n  );\n};\n\nconst renderDashboard = (route?: string) => {\n  return render(\n    <TestWrapper route={route}>\n      <Dashboard />\n    </TestWrapper>\n  );\n};\n\ndescribe('Dashboard Component', () => {\n  let user: ReturnType<typeof userEvent.setup>;\n\n  beforeEach(() => {\n    user = userEvent.setup();\n    vi.clearAllMocks();\n    \n    // Mock chart data\n    mockGetChartData.mockImplementation((type: string) => {\n      switch (type) {\n        case 'traffic':\n          return [{ name: 'Jan', value: 100 }, { name: 'Feb', value: 200 }];\n        case 'performance':\n          return [{ name: 'CPU', value: 65 }, { name: 'Memory', value: 78 }];\n        case 'users':\n          return [{ name: 'Active', value: 567 }, { name: 'New', value: 12 }];\n        default:\n          return [];\n      }\n    });\n\n    mockGetTrendData.mockReturnValue({\n      userTrend: 5.2,\n      contentTrend: -2.1,\n    });\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('Basic Rendering', () => {\n    it('renders dashboard title and description', () => {\n      renderDashboard();\n\n      expect(screen.getByText('管理仪表盘')).toBeInTheDocument();\n      expect(screen.getByText('实时监控系统状态和关键指标')).toBeInTheDocument();\n    });\n\n    it('renders toolbar with action buttons', () => {\n      renderDashboard();\n\n      expect(screen.getByRole('button', { name: /刷新/i })).toBeInTheDocument();\n      expect(screen.getByRole('button', { name: /设置/i })).toBeInTheDocument();\n      expect(screen.getByRole('button', { name: /全屏/i })).toBeInTheDocument();\n    });\n\n    it('shows connection status when offline', () => {\n      // Mock offline state\n      vi.mocked(vi.importMock('../../hooks/useDashboard')).mockReturnValueOnce({\n        ...vi.mocked(vi.importMock('../../hooks/useDashboard')),\n        isConnected: false,\n      });\n\n      renderDashboard();\n\n      expect(screen.getByText('离线模式')).toBeInTheDocument();\n    });\n  });\n\n  describe('Statistics Cards', () => {\n    it('renders all statistics cards with correct data', () => {\n      renderDashboard();\n\n      expect(screen.getByTestId('user-stats-card')).toBeInTheDocument();\n      expect(screen.getByTestId('content-stats-card')).toBeInTheDocument();\n      expect(screen.getByTestId('system-stats-card')).toBeInTheDocument();\n      expect(screen.getByTestId('performance-stats-card')).toBeInTheDocument();\n    });\n\n    it('displays loading state for statistics cards', () => {\n      // Mock loading state\n      vi.mocked(vi.importMock('../../hooks/useDashboard')).mockReturnValueOnce({\n        ...vi.mocked(vi.importMock('../../hooks/useDashboard')),\n        isLoading: true,\n      });\n\n      renderDashboard();\n\n      const loadingElements = screen.getAllByText('Loading...');\n      expect(loadingElements.length).toBeGreaterThan(0);\n    });\n\n    it('shows correct user statistics', () => {\n      renderDashboard();\n\n      const userStatsCard = screen.getByTestId('user-stats-card');\n      expect(userStatsCard).toHaveTextContent('1234');\n    });\n\n    it('displays trend indicators correctly', () => {\n      renderDashboard();\n\n      // Verify that trend data is being used\n      expect(mockGetTrendData).toHaveBeenCalled();\n    });\n  });\n\n  describe('Health Status', () => {\n    it('renders health status alert', () => {\n      renderDashboard();\n\n      expect(screen.getByText('系统状态：健康')).toBeInTheDocument();\n      expect(screen.getByText('检查时间：2024-01-15 10:30:00')).toBeInTheDocument();\n    });\n\n    it('shows individual health check statuses', () => {\n      renderDashboard();\n\n      expect(screen.getByText('database')).toBeInTheDocument();\n      expect(screen.getByText('cache')).toBeInTheDocument();\n      expect(screen.getByText('storage')).toBeInTheDocument();\n      expect(screen.getByText('api')).toBeInTheDocument();\n    });\n\n    it('displays appropriate status colors', () => {\n      renderDashboard();\n\n      // Check for status indicator elements\n      const statusIndicators = document.querySelectorAll('.w-2.h-2.rounded-full');\n      expect(statusIndicators.length).toBeGreaterThan(0);\n    });\n\n    it('handles degraded system status', () => {\n      // Mock degraded status\n      vi.mocked(vi.importMock('../../hooks/useDashboard')).mockReturnValueOnce({\n        ...vi.mocked(vi.importMock('../../hooks/useDashboard')),\n        healthCheck: {\n          ...mockHealthCheck,\n          status: 'degraded',\n        },\n      });\n\n      renderDashboard();\n\n      expect(screen.getByText('系统状态：降级')).toBeInTheDocument();\n    });\n\n    it('handles unhealthy system status', () => {\n      // Mock unhealthy status\n      vi.mocked(vi.importMock('../../hooks/useDashboard')).mockReturnValueOnce({\n        ...vi.mocked(vi.importMock('../../hooks/useDashboard')),\n        healthCheck: {\n          ...mockHealthCheck,\n          status: 'unhealthy',\n        },\n      });\n\n      renderDashboard();\n\n      expect(screen.getByText('系统状态：异常')).toBeInTheDocument();\n    });\n  });\n\n  describe('Charts Section', () => {\n    it('renders all chart components', () => {\n      renderDashboard();\n\n      expect(screen.getByTestId('line-chart-流量趋势')).toBeInTheDocument();\n      expect(screen.getByTestId('line-chart-系统性能')).toBeInTheDocument();\n      expect(screen.getByTestId('line-chart-用户增长')).toBeInTheDocument();\n    });\n\n    it('passes correct data to charts', () => {\n      renderDashboard();\n\n      // Verify chart data fetching\n      expect(mockGetChartData).toHaveBeenCalledWith('traffic');\n      expect(mockGetChartData).toHaveBeenCalledWith('performance');\n      expect(mockGetChartData).toHaveBeenCalledWith('users');\n    });\n\n    it('handles chart refresh', async () => {\n      renderDashboard();\n\n      const chartRefreshButton = screen.getAllByTestId('chart-refresh')[0];\n      await user.click(chartRefreshButton);\n\n      expect(mockRefreshAll).toHaveBeenCalled();\n    });\n\n    it('shows loading state for charts', () => {\n      // Mock loading state\n      vi.mocked(vi.importMock('../../hooks/useDashboard')).mockReturnValueOnce({\n        ...vi.mocked(vi.importMock('../../hooks/useDashboard')),\n        isLoading: true,\n      });\n\n      renderDashboard();\n\n      const chartLoadingElements = screen.getAllByTestId('chart-loading');\n      expect(chartLoadingElements.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Activity Feed', () => {\n    it('renders activity feed with recent activities', () => {\n      renderDashboard();\n\n      expect(screen.getByText('最近活动')).toBeInTheDocument();\n      expect(screen.getByText('User logged in')).toBeInTheDocument();\n      expect(screen.getByText('New blog post created')).toBeInTheDocument();\n      expect(screen.getByText('Comment added to post')).toBeInTheDocument();\n    });\n\n    it('displays user information for each activity', () => {\n      renderDashboard();\n\n      expect(screen.getByText('John Doe')).toBeInTheDocument();\n      expect(screen.getByText('Jane Smith')).toBeInTheDocument();\n      expect(screen.getByText('Bob Johnson')).toBeInTheDocument();\n    });\n\n    it('shows relative timestamps', () => {\n      renderDashboard();\n\n      const timeElements = screen.getAllByText('2 hours ago');\n      expect(timeElements.length).toBeGreaterThan(0);\n    });\n\n    it('renders view all button', () => {\n      renderDashboard();\n\n      expect(screen.getByRole('button', { name: /查看全部/i })).toBeInTheDocument();\n    });\n\n    it('displays appropriate icons for different activity types', () => {\n      renderDashboard();\n\n      // Check for avatar elements (representing activity type icons)\n      const avatars = document.querySelectorAll('.ant-avatar');\n      expect(avatars.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('System Metrics', () => {\n    it('renders system monitoring section', () => {\n      renderDashboard();\n\n      expect(screen.getByText('系统监控')).toBeInTheDocument();\n    });\n\n    it('displays CPU usage with progress circle', () => {\n      renderDashboard();\n\n      expect(screen.getByText('CPU 使用率')).toBeInTheDocument();\n      expect(screen.getByText('8 核心')).toBeInTheDocument();\n    });\n\n    it('displays memory usage information', () => {\n      renderDashboard();\n\n      expect(screen.getByText('内存使用率')).toBeInTheDocument();\n      expect(screen.getByText('6442450944 bytes / 8589934592 bytes')).toBeInTheDocument();\n    });\n\n    it('displays disk usage information', () => {\n      renderDashboard();\n\n      expect(screen.getByText('磁盘使用率')).toBeInTheDocument();\n      expect(screen.getByText('4831838208 bytes / 10737418240 bytes')).toBeInTheDocument();\n    });\n\n    it('displays application metrics', () => {\n      renderDashboard();\n\n      expect(screen.getByText('应用状态')).toBeInTheDocument();\n      expect(screen.getByText('运行时间：864000000ms')).toBeInTheDocument();\n      expect(screen.getByText('请求数：15,432')).toBeInTheDocument();\n      expect(screen.getByText('错误数：23')).toBeInTheDocument();\n      expect(screen.getByText('响应时间：125ms')).toBeInTheDocument();\n    });\n\n    it('shows warning status for high resource usage', () => {\n      // Mock high usage\n      vi.mocked(vi.importMock('../../hooks/useDashboard')).mockReturnValueOnce({\n        ...vi.mocked(vi.importMock('../../hooks/useDashboard')),\n        metrics: {\n          ...mockSystemMetrics,\n          cpu: { usage: 95, cores: 8 },\n          memory: { usage: 85, used: 7301439232, total: 8589934592 },\n        },\n      });\n\n      renderDashboard();\n\n      // Should show exception status for high usage\n      const progressCircles = document.querySelectorAll('.ant-progress-circle');\n      expect(progressCircles.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Toolbar Actions', () => {\n    it('handles refresh action', async () => {\n      renderDashboard();\n\n      const refreshButton = screen.getByRole('button', { name: /刷新/i });\n      await user.click(refreshButton);\n\n      expect(mockRefreshAll).toHaveBeenCalled();\n    });\n\n    it('shows loading state during refresh', () => {\n      // Mock refreshing state\n      vi.mocked(vi.importMock('../../hooks/useDashboard')).mockReturnValueOnce({\n        ...vi.mocked(vi.importMock('../../hooks/useDashboard')),\n        isRefreshing: true,\n      });\n\n      renderDashboard();\n\n      const refreshButton = screen.getByRole('button', { name: /刷新/i });\n      expect(refreshButton).toHaveClass('ant-btn-loading');\n    });\n\n    it('opens settings dropdown', async () => {\n      renderDashboard();\n\n      const settingsButton = screen.getByRole('button', { name: /设置/i });\n      await user.click(settingsButton);\n\n      await waitFor(() => {\n        expect(screen.getByText('自动刷新')).toBeInTheDocument();\n        expect(screen.getByText('刷新间隔(秒)')).toBeInTheDocument();\n      });\n    });\n\n    it('toggles auto refresh setting', async () => {\n      renderDashboard();\n\n      const settingsButton = screen.getByRole('button', { name: /设置/i });\n      await user.click(settingsButton);\n\n      await waitFor(async () => {\n        const autoRefreshSwitch = screen.getByRole('switch');\n        await user.click(autoRefreshSwitch);\n\n        expect(mockUpdateRefreshSettings).toHaveBeenCalledWith({\n          autoRefresh: expect.any(Boolean),\n        });\n      });\n    });\n\n    it('changes refresh interval', async () => {\n      renderDashboard();\n\n      const settingsButton = screen.getByRole('button', { name: /设置/i });\n      await user.click(settingsButton);\n\n      await waitFor(async () => {\n        const intervalInput = screen.getByDisplayValue('30');\n        await user.clear(intervalInput);\n        await user.type(intervalInput, '60');\n\n        expect(mockUpdateRefreshSettings).toHaveBeenCalledWith({\n          refreshInterval: 60,\n        });\n      });\n    });\n\n    it('changes dashboard layout', async () => {\n      renderDashboard();\n\n      const settingsButton = screen.getByRole('button', { name: /设置/i });\n      await user.click(settingsButton);\n\n      await waitFor(async () => {\n        const compactLayoutOption = screen.getByText('紧凑布局');\n        await user.click(compactLayoutOption);\n\n        // Should apply compact layout styles\n        const dashboard = document.querySelector('.dashboard-page');\n        expect(dashboard).toBeInTheDocument();\n      });\n    });\n\n    it('handles export actions', async () => {\n      renderDashboard();\n\n      const settingsButton = screen.getByRole('button', { name: /设置/i });\n      await user.click(settingsButton);\n\n      await waitFor(async () => {\n        const exportJsonOption = screen.getByText('导出 JSON');\n        await user.click(exportJsonOption);\n\n        expect(mockExportData).toHaveBeenCalledWith('json');\n      });\n    });\n\n    it('handles fullscreen toggle', async () => {\n      renderDashboard();\n\n      const fullscreenButton = screen.getByRole('button', { name: /全屏/i });\n      \n      // Mock fullscreen API\n      const mockRequestFullscreen = vi.fn();\n      const mockExitFullscreen = vi.fn();\n      \n      Object.defineProperty(document, 'fullscreenElement', {\n        value: null,\n        writable: true,\n      });\n      \n      Object.defineProperty(document.documentElement, 'requestFullscreen', {\n        value: mockRequestFullscreen,\n        writable: true,\n      });\n      \n      Object.defineProperty(document, 'exitFullscreen', {\n        value: mockExitFullscreen,\n        writable: true,\n      });\n\n      await user.click(fullscreenButton);\n\n      expect(mockRequestFullscreen).toHaveBeenCalled();\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('displays error state when data loading fails', () => {\n      // Mock error state\n      vi.mocked(vi.importMock('../../hooks/useDashboard')).mockReturnValueOnce({\n        ...vi.mocked(vi.importMock('../../hooks/useDashboard')),\n        hasErrors: true,\n      });\n\n      renderDashboard();\n\n      expect(screen.getByText('数据加载失败')).toBeInTheDocument();\n      expect(screen.getByText('无法获取仪表盘数据，请检查网络连接或稍后重试。')).toBeInTheDocument();\n    });\n\n    it('provides retry option on error', async () => {\n      // Mock error state\n      vi.mocked(vi.importMock('../../hooks/useDashboard')).mockReturnValueOnce({\n        ...vi.mocked(vi.importMock('../../hooks/useDashboard')),\n        hasErrors: true,\n      });\n\n      renderDashboard();\n\n      const retryButton = screen.getByRole('button', { name: /重试/i });\n      await user.click(retryButton);\n\n      expect(mockRefreshAll).toHaveBeenCalled();\n    });\n\n    it('handles missing data gracefully', () => {\n      // Mock missing data\n      vi.mocked(vi.importMock('../../hooks/useDashboard')).mockReturnValueOnce({\n        ...vi.mocked(vi.importMock('../../hooks/useDashboard')),\n        stats: null,\n        metrics: null,\n        healthCheck: null,\n        activities: null,\n      });\n\n      renderDashboard();\n\n      // Should still render basic structure\n      expect(screen.getByText('管理仪表盘')).toBeInTheDocument();\n    });\n  });\n\n  describe('Responsive Design', () => {\n    it('adapts layout for mobile screens', () => {\n      // Mock mobile viewport\n      Object.defineProperty(window, 'innerWidth', {\n        writable: true,\n        configurable: true,\n        value: 768,\n      });\n\n      renderDashboard();\n\n      // Should render without errors on mobile\n      expect(screen.getByText('管理仪表盘')).toBeInTheDocument();\n    });\n\n    it('uses appropriate grid columns for different screen sizes', () => {\n      renderDashboard();\n\n      // Should use responsive grid system\n      const gridRows = document.querySelectorAll('.ant-row');\n      expect(gridRows.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('has proper heading hierarchy', () => {\n      renderDashboard();\n\n      const mainHeading = screen.getByRole('heading', { level: 2 });\n      expect(mainHeading).toHaveTextContent('管理仪表盘');\n    });\n\n    it('provides proper labels for interactive elements', () => {\n      renderDashboard();\n\n      const refreshButton = screen.getByRole('button', { name: /刷新/i });\n      const settingsButton = screen.getByRole('button', { name: /设置/i });\n      const fullscreenButton = screen.getByRole('button', { name: /全屏/i });\n\n      expect(refreshButton).toBeInTheDocument();\n      expect(settingsButton).toBeInTheDocument();\n      expect(fullscreenButton).toBeInTheDocument();\n    });\n\n    it('supports keyboard navigation', async () => {\n      renderDashboard();\n\n      const refreshButton = screen.getByRole('button', { name: /刷新/i });\n      refreshButton.focus();\n\n      expect(refreshButton).toHaveFocus();\n\n      // Tab navigation should work\n      await user.tab();\n      const settingsButton = screen.getByRole('button', { name: /设置/i });\n      expect(settingsButton).toHaveFocus();\n    });\n\n    it('provides appropriate ARIA labels for progress indicators', () => {\n      renderDashboard();\n\n      const progressElements = document.querySelectorAll('[role=\"progressbar\"]');\n      progressElements.forEach((element) => {\n        expect(element).toHaveAttribute('aria-valuemin');\n        expect(element).toHaveAttribute('aria-valuemax');\n        expect(element).toHaveAttribute('aria-valuenow');\n      });\n    });\n\n    it('announces status changes to screen readers', async () => {\n      renderDashboard();\n\n      // Status alerts should have appropriate roles\n      const alerts = document.querySelectorAll('[role=\"alert\"]');\n      expect(alerts.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Performance', () => {\n    it('renders efficiently with large datasets', () => {\n      const startTime = performance.now();\n      renderDashboard();\n      const endTime = performance.now();\n\n      // Should render within reasonable time\n      expect(endTime - startTime).toBeLessThan(1000);\n    });\n\n    it('memoizes expensive computations', () => {\n      const { rerender } = renderDashboard();\n\n      // Re-render with same data shouldn't cause unnecessary updates\n      rerender(\n        <TestWrapper>\n          <Dashboard />\n        </TestWrapper>\n      );\n\n      // Chart data should be memoized\n      expect(mockGetChartData).toHaveBeenCalledTimes(3); // Called once per chart type\n    });\n  });\n\n  describe('Integration', () => {\n    it('works with permission system', () => {\n      renderDashboard();\n\n      // Should render all sections when user has permissions\n      expect(screen.getByText('管理仪表盘')).toBeInTheDocument();\n      expect(screen.getByText('系统监控')).toBeInTheDocument();\n    });\n\n    it('respects permission restrictions', () => {\n      // Mock restricted permissions\n      vi.mocked(vi.importMock('../../hooks/usePermissions')).mockReturnValueOnce({\n        hasPermission: vi.fn().mockImplementation((permission: string) => {\n          return permission !== 'system:monitor';\n        }),\n        userRole: 'user',\n        permissions: ['dashboard:read'],\n      });\n\n      renderDashboard();\n\n      // Should hide restricted sections based on permissions\n      expect(screen.getByText('管理仪表盘')).toBeInTheDocument();\n    });\n\n    it('integrates with routing system', () => {\n      renderDashboard('/dashboard');\n\n      // Should render correctly when accessed via route\n      expect(screen.getByText('管理仪表盘')).toBeInTheDocument();\n    });\n\n    it('integrates with data fetching system', () => {\n      renderDashboard();\n\n      // Should use query hooks for data fetching\n      expect(mockGetChartData).toHaveBeenCalled();\n      expect(mockGetTrendData).toHaveBeenCalled();\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/analytics/Analytics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/auth/Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/content/PostEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/content/TagManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/dashboard/Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/error/NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/profile/Profile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/system/AuditLogs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/system/SystemLogs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/system/SystemMonitoring.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/system/SystemSettings.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/users/RoleManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/users/UserDetail.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/pages/users/UserManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/router/index.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Move your component(s) to a separate file.","line":9,"column":7,"nodeType":"Identifier","messageId":"localComponents","endLine":9,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Suspense, lazy } from 'react';\nimport { createBrowserRouter, Navigate } from 'react-router-dom';\nimport { Spin } from 'antd';\nimport AdminLayout from '@/layouts/AdminLayout';\nimport LoginPage from '@/pages/auth/Login';\nimport type { RouteConfig } from '@/types';\n\n// 加载器组件\nconst PageLoader = () => (\n  <div style={{\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: '400px'\n  }}>\n    <Spin size=\"large\" tip=\"页面加载中...\" />\n  </div>\n);\n\n// 懒加载页面组件\nconst Dashboard = lazy(() => import('@/pages/Dashboard'));\nconst UserManagement = lazy(() => import('@/pages/users/UserManagement'));\nconst UserDetail = lazy(() => import('@/pages/users/UserDetail'));\nconst RoleManagement = lazy(() => import('@/pages/users/RoleManagement'));\nconst PostManagement = lazy(() => import('@/pages/Content/PostManagement'));\nconst PostEditor = lazy(() => import('@/pages/content/PostEditor'));\nconst CategoryManagement = lazy(() => import('@/pages/Content/CategoryManagement'));\nconst TagManagement = lazy(() => import('@/pages/content/TagManagement'));\nconst MediaLibrary = lazy(() => import('@/pages/Content/MediaLibrary'));\nconst Analytics = lazy(() => import('@/pages/analytics/Analytics'));\nconst ContentAnalytics = lazy(() => import('@/pages/Analytics/ContentAnalytics'));\nconst UserAnalytics = lazy(() => import('@/pages/Analytics/UserAnalytics'));\nconst SystemSettings = lazy(() => import('@/pages/System/Settings'));\nconst SystemMonitoring = lazy(() => import('@/pages/System/Monitoring'));\nconst SystemLogs = lazy(() => import('@/pages/System/Logs'));\nconst AuditLogs = lazy(() => import('@/pages/system/AuditLogs'));\nconst Profile = lazy(() => import('@/pages/profile/Profile'));\nconst NotFound = lazy(() => import('@/pages/error/NotFound'));\n\n// 路由配置\nexport const routeConfigs: RouteConfig[] = [\n  {\n    path: '/',\n    component: Dashboard,\n    meta: {\n      title: '仪表盘',\n      requiresAuth: true,\n      icon: '📊',\n    },\n  },\n  {\n    path: '/users',\n    component: UserManagement,\n    meta: {\n      title: '用户管理',\n      requiresAuth: true,\n      permissions: ['user.read'],\n      icon: '👥',\n    },\n    children: [\n      {\n        path: '/users/:id',\n        component: UserDetail,\n        meta: {\n          title: '用户详情',\n          requiresAuth: true,\n          permissions: ['user.read'],\n          hideInMenu: true,\n        },\n      },\n    ],\n  },\n  {\n    path: '/roles',\n    component: RoleManagement,\n    meta: {\n      title: '角色管理',\n      requiresAuth: true,\n      permissions: ['role.read'],\n      icon: '🔐',\n    },\n  },\n  {\n    path: '/content',\n    component: PostManagement,\n    meta: {\n      title: '内容管理',\n      requiresAuth: true,\n      permissions: ['post.read'],\n      icon: '📝',\n    },\n    children: [\n      {\n        path: '/content/posts',\n        component: PostManagement,\n        meta: {\n          title: '文章管理',\n          requiresAuth: true,\n          permissions: ['post.read'],\n        },\n      },\n      {\n        path: '/content/posts/new',\n        component: PostEditor,\n        meta: {\n          title: '新建文章',\n          requiresAuth: true,\n          permissions: ['post.create'],\n          hideInMenu: true,\n        },\n      },\n      {\n        path: '/content/posts/:id/edit',\n        component: PostEditor,\n        meta: {\n          title: '编辑文章',\n          requiresAuth: true,\n          permissions: ['post.update'],\n          hideInMenu: true,\n        },\n      },\n      {\n        path: '/content/categories',\n        component: CategoryManagement,\n        meta: {\n          title: '分类管理',\n          requiresAuth: true,\n          permissions: ['category.read'],\n        },\n      },\n      {\n        path: '/content/tags',\n        component: TagManagement,\n        meta: {\n          title: '标签管理',\n          requiresAuth: true,\n          permissions: ['tag.read'],\n        },\n      },\n      {\n        path: '/content/media',\n        component: MediaLibrary,\n        meta: {\n          title: '媒体库',\n          requiresAuth: true,\n          permissions: ['media.read'],\n        },\n      },\n    ],\n  },\n  {\n    path: '/analytics',\n    component: Analytics,\n    meta: {\n      title: '数据分析',\n      requiresAuth: true,\n      permissions: ['analytics.read'],\n      icon: '📈',\n    },\n    children: [\n      {\n        path: '/analytics/overview',\n        component: Analytics,\n        meta: {\n          title: '概览',\n          requiresAuth: true,\n          permissions: ['analytics.read'],\n        },\n      },\n      {\n        path: '/analytics/content',\n        component: ContentAnalytics,\n        meta: {\n          title: '内容分析',\n          requiresAuth: true,\n          permissions: ['analytics.read'],\n        },\n      },\n      {\n        path: '/analytics/users',\n        component: UserAnalytics,\n        meta: {\n          title: '用户分析',\n          requiresAuth: true,\n          permissions: ['analytics.read'],\n        },\n      },\n    ],\n  },\n  {\n    path: '/system',\n    component: SystemSettings,\n    meta: {\n      title: '系统管理',\n      requiresAuth: true,\n      permissions: ['system.read'],\n      icon: '⚙️',\n    },\n    children: [\n      {\n        path: '/system/settings',\n        component: SystemSettings,\n        meta: {\n          title: '系统设置',\n          requiresAuth: true,\n          permissions: ['system.update'],\n        },\n      },\n      {\n        path: '/system/monitoring',\n        component: SystemMonitoring,\n        meta: {\n          title: '系统监控',\n          requiresAuth: true,\n          permissions: ['system.read'],\n        },\n      },\n      {\n        path: '/system/logs',\n        component: SystemLogs,\n        meta: {\n          title: '系统日志',\n          requiresAuth: true,\n          permissions: ['system.read'],\n        },\n      },\n      {\n        path: '/system/audit',\n        component: AuditLogs,\n        meta: {\n          title: '审计日志',\n          requiresAuth: true,\n          permissions: ['audit.read'],\n        },\n      },\n    ],\n  },\n  {\n    path: '/profile',\n    component: Profile,\n    meta: {\n      title: '个人资料',\n      requiresAuth: true,\n      hideInMenu: true,\n    },\n  },\n];\n\n// 创建路由\nexport const router = createBrowserRouter([\n  {\n    path: '/login',\n    element: <LoginPage />,\n  },\n  {\n    path: '/',\n    element: <AdminLayout />,\n    children: [\n      {\n        index: true,\n        element: <Navigate to=\"/dashboard\" replace />,\n      },\n      {\n        path: 'dashboard',\n        element: (\n          <Suspense fallback={<PageLoader />}>\n            <Dashboard />\n          </Suspense>\n        ),\n      },\n      {\n        path: 'users',\n        element: (\n          <Suspense fallback={<PageLoader />}>\n            <UserManagement />\n          </Suspense>\n        ),\n      },\n      {\n        path: 'users/:id',\n        element: (\n          <Suspense fallback={<PageLoader />}>\n            <UserDetail />\n          </Suspense>\n        ),\n      },\n      {\n        path: 'roles',\n        element: (\n          <Suspense fallback={<PageLoader />}>\n            <RoleManagement />\n          </Suspense>\n        ),\n      },\n      {\n        path: 'content',\n        children: [\n          {\n            index: true,\n            element: <Navigate to=\"/content/posts\" replace />,\n          },\n          {\n            path: 'posts',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <PostManagement />\n              </Suspense>\n            ),\n          },\n          {\n            path: 'posts/new',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <PostEditor />\n              </Suspense>\n            ),\n          },\n          {\n            path: 'posts/:id/edit',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <PostEditor />\n              </Suspense>\n            ),\n          },\n          {\n            path: 'categories',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <CategoryManagement />\n              </Suspense>\n            ),\n          },\n          {\n            path: 'tags',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <TagManagement />\n              </Suspense>\n            ),\n          },\n          {\n            path: 'media',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <MediaLibrary />\n              </Suspense>\n            ),\n          },\n        ],\n      },\n      {\n        path: 'analytics',\n        children: [\n          {\n            index: true,\n            element: <Navigate to=\"/analytics/overview\" replace />,\n          },\n          {\n            path: 'overview',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <Analytics />\n              </Suspense>\n            ),\n          },\n          {\n            path: 'content',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <ContentAnalytics />\n              </Suspense>\n            ),\n          },\n          {\n            path: 'users',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <UserAnalytics />\n              </Suspense>\n            ),\n          },\n        ],\n      },\n      {\n        path: 'system',\n        children: [\n          {\n            index: true,\n            element: <Navigate to=\"/system/settings\" replace />,\n          },\n          {\n            path: 'settings',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <SystemSettings />\n              </Suspense>\n            ),\n          },\n          {\n            path: 'monitoring',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <SystemMonitoring />\n              </Suspense>\n            ),\n          },\n          {\n            path: 'logs',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <SystemLogs />\n              </Suspense>\n            ),\n          },\n          {\n            path: 'audit',\n            element: (\n              <Suspense fallback={<PageLoader />}>\n                <AuditLogs />\n              </Suspense>\n            ),\n          },\n        ],\n      },\n      {\n        path: 'profile',\n        element: (\n          <Suspense fallback={<PageLoader />}>\n            <Profile />\n          </Suspense>\n        ),\n      },\n      {\n        path: '*',\n        element: (\n          <Suspense fallback={<PageLoader />}>\n            <NotFound />\n          </Suspense>\n        ),\n      },\n    ],\n  },\n]);\n\nexport default router;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/services/analytics.service.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2015,2018],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2015,2018],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":75,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2155,2158],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2155,2158],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2967,2970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2967,2970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3108,3111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3108,3111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":113,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3622,3625],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3622,3625],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":139,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4419,4422],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4419,4422],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4563,4566],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4563,4566],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":152,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4883,4886],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4883,4886],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":156,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5032,5035],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5032,5035],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":165,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5360,5363],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5360,5363],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5512,5515],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5512,5515],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":194,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6429,6432],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6429,6432],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":236,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7817,7820],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7817,7820],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":248,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":248,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8054,8057],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8054,8057],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":261,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":261,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8315,8318],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8315,8318],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":273,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":273,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8575,8578],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8575,8578],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":284,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":284,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8799,8802],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8799,8802],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":314,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":314,"endColumn":48},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":315,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":315,"endColumn":36}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ApiService } from './api';\nimport type {\n  AnalyticsOverview,\n  TrafficData,\n  TrafficSource,\n  DeviceAnalytics,\n  GeographicData,\n  UserBehavior,\n  UserFlow,\n  UserSegment,\n  UserActivity,\n  ContentMetrics,\n  ContentPerformance,\n  AuthorPerformance,\n  EngagementMetrics,\n  ConversionFunnel,\n  GoalMetrics,\n  RealTimeData,\n  SEOMetrics,\n  PerformanceMetrics,\n  RevenueMetrics,\n  CustomReport,\n  AnalyticsFilter,\n  ExportOptions,\n  AnalyticsAlert,\n  TimeRange\n} from '@/types/analytics';\n\nclass AnalyticsService {\n  private baseUrl = '/analytics';\n\n  // Overview Analytics\n  async getOverview(filter?: AnalyticsFilter): Promise<AnalyticsOverview> {\n    return ApiService.get(`${this.baseUrl}/overview`, filter);\n  }\n\n  // Traffic Analytics\n  async getTrafficData(filter?: AnalyticsFilter): Promise<TrafficData[]> {\n    return ApiService.get(`${this.baseUrl}/traffic`, filter);\n  }\n\n  async getTrafficSources(filter?: AnalyticsFilter): Promise<TrafficSource[]> {\n    return ApiService.get(`${this.baseUrl}/traffic/sources`, filter);\n  }\n\n  async getDeviceAnalytics(filter?: AnalyticsFilter): Promise<DeviceAnalytics[]> {\n    return ApiService.get(`${this.baseUrl}/devices`, filter);\n  }\n\n  async getGeographicData(filter?: AnalyticsFilter): Promise<GeographicData[]> {\n    return ApiService.get(`${this.baseUrl}/geographic`, filter);\n  }\n\n  // User Analytics\n  async getUserBehavior(filter?: AnalyticsFilter): Promise<UserBehavior[]> {\n    return ApiService.get(`${this.baseUrl}/users/behavior`, filter);\n  }\n\n  async getUserFlow(filter?: AnalyticsFilter): Promise<UserFlow[]> {\n    return ApiService.get(`${this.baseUrl}/users/flow`, filter);\n  }\n\n  async getUserSegments(filter?: AnalyticsFilter): Promise<UserSegment[]> {\n    return ApiService.get(`${this.baseUrl}/users/segments`, filter);\n  }\n\n  async getUserActivity(filter?: AnalyticsFilter): Promise<UserActivity[]> {\n    return ApiService.get(`${this.baseUrl}/users/activity`, filter);\n  }\n\n  async getUserCohorts(filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/users/cohorts`, filter);\n  }\n\n  async getUserRetention(filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/users/retention`, filter);\n  }\n\n  // Content Analytics\n  async getContentMetrics(filter?: AnalyticsFilter): Promise<ContentMetrics[]> {\n    return ApiService.get(`${this.baseUrl}/content/metrics`, filter);\n  }\n\n  async getContentPerformance(filter?: AnalyticsFilter): Promise<ContentPerformance> {\n    return ApiService.get(`${this.baseUrl}/content/performance`, filter);\n  }\n\n  async getAuthorPerformance(filter?: AnalyticsFilter): Promise<AuthorPerformance[]> {\n    return ApiService.get(`${this.baseUrl}/content/authors`, filter);\n  }\n\n  async getEngagementMetrics(filter?: AnalyticsFilter): Promise<EngagementMetrics> {\n    return ApiService.get(`${this.baseUrl}/content/engagement`, filter);\n  }\n\n  async getContentTrends(filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/content/trends`, filter);\n  }\n\n  async getSocialMetrics(filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/content/social`, filter);\n  }\n\n  // Conversion Analytics\n  async getConversionFunnel(funnelId: string, filter?: AnalyticsFilter): Promise<ConversionFunnel[]> {\n    return ApiService.get(`${this.baseUrl}/conversions/funnel/${funnelId}`, filter);\n  }\n\n  async getGoalMetrics(filter?: AnalyticsFilter): Promise<GoalMetrics[]> {\n    return ApiService.get(`${this.baseUrl}/conversions/goals`, filter);\n  }\n\n  async getAttributionData(filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/conversions/attribution`, filter);\n  }\n\n  // Real-time Analytics\n  async getRealTimeData(): Promise<RealTimeData> {\n    return ApiService.get(`${this.baseUrl}/realtime`);\n  }\n\n  async subscribeToRealTime(callback: (data: RealTimeData) => void): () => void {\n    // WebSocket subscription implementation\n    const ws = new WebSocket(`${process.env.VITE_WS_URL}/analytics/realtime`);\n\n    ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      callback(data);\n    };\n\n    return () => ws.close();\n  }\n\n  // SEO Analytics\n  async getSEOMetrics(filter?: AnalyticsFilter): Promise<SEOMetrics> {\n    return ApiService.get(`${this.baseUrl}/seo/metrics`, filter);\n  }\n\n  async getSearchConsoleData(filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/seo/search-console`, filter);\n  }\n\n  async getPageRankings(filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/seo/rankings`, filter);\n  }\n\n  // Performance Analytics\n  async getPerformanceMetrics(filter?: AnalyticsFilter): Promise<PerformanceMetrics> {\n    return ApiService.get(`${this.baseUrl}/performance/metrics`, filter);\n  }\n\n  async getPageSpeedData(url?: string): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/performance/pagespeed`, { url });\n  }\n\n  async getCoreWebVitals(filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/performance/web-vitals`, filter);\n  }\n\n  // Revenue Analytics\n  async getRevenueMetrics(filter?: AnalyticsFilter): Promise<RevenueMetrics> {\n    return ApiService.get(`${this.baseUrl}/revenue/metrics`, filter);\n  }\n\n  async getTransactionData(filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/revenue/transactions`, filter);\n  }\n\n  async getProductPerformance(filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/revenue/products`, filter);\n  }\n\n  // Custom Reports\n  async getCustomReports(): Promise<CustomReport[]> {\n    return ApiService.get(`${this.baseUrl}/reports`);\n  }\n\n  async getCustomReport(reportId: string): Promise<CustomReport> {\n    return ApiService.get(`${this.baseUrl}/reports/${reportId}`);\n  }\n\n  async createCustomReport(report: Omit<CustomReport, 'id' | 'createdAt'>): Promise<CustomReport> {\n    return ApiService.post(`${this.baseUrl}/reports`, report);\n  }\n\n  async updateCustomReport(reportId: string, updates: Partial<CustomReport>): Promise<CustomReport> {\n    return ApiService.put(`${this.baseUrl}/reports/${reportId}`, updates);\n  }\n\n  async deleteCustomReport(reportId: string): Promise<void> {\n    return ApiService.delete(`${this.baseUrl}/reports/${reportId}`);\n  }\n\n  async runCustomReport(reportId: string, filter?: AnalyticsFilter): Promise<any> {\n    return ApiService.post(`${this.baseUrl}/reports/${reportId}/run`, filter);\n  }\n\n  // Data Export\n  async exportData(options: ExportOptions): Promise<Blob> {\n    const response = await ApiService.post(`${this.baseUrl}/export`, options, {\n      responseType: 'blob'\n    });\n    return response as unknown as Blob;\n  }\n\n  async scheduleExport(options: ExportOptions & { schedule: string }): Promise<void> {\n    return ApiService.post(`${this.baseUrl}/export/schedule`, options);\n  }\n\n  // Analytics Alerts\n  async getAlerts(): Promise<AnalyticsAlert[]> {\n    return ApiService.get(`${this.baseUrl}/alerts`);\n  }\n\n  async createAlert(alert: Omit<AnalyticsAlert, 'id' | 'createdAt'>): Promise<AnalyticsAlert> {\n    return ApiService.post(`${this.baseUrl}/alerts`, alert);\n  }\n\n  async updateAlert(alertId: string, updates: Partial<AnalyticsAlert>): Promise<AnalyticsAlert> {\n    return ApiService.put(`${this.baseUrl}/alerts/${alertId}`, updates);\n  }\n\n  async deleteAlert(alertId: string): Promise<void> {\n    return ApiService.delete(`${this.baseUrl}/alerts/${alertId}`);\n  }\n\n  async testAlert(alertId: string): Promise<void> {\n    return ApiService.post(`${this.baseUrl}/alerts/${alertId}/test`);\n  }\n\n  // Comparison Analytics\n  async compareTimeRanges(\n    range1: { start: string; end: string },\n    range2: { start: string; end: string },\n    metrics: string[]\n  ): Promise<any> {\n    return ApiService.post(`${this.baseUrl}/compare/time`, {\n      range1,\n      range2,\n      metrics\n    });\n  }\n\n  async compareSegments(\n    segments: string[],\n    metrics: string[],\n    filter?: AnalyticsFilter\n  ): Promise<any> {\n    return ApiService.post(`${this.baseUrl}/compare/segments`, {\n      segments,\n      metrics,\n      ...filter\n    });\n  }\n\n  // Predictive Analytics\n  async getForecast(\n    metric: string,\n    period: number,\n    filter?: AnalyticsFilter\n  ): Promise<any> {\n    return ApiService.post(`${this.baseUrl}/predict/forecast`, {\n      metric,\n      period,\n      ...filter\n    });\n  }\n\n  async getAnomalies(\n    metrics: string[],\n    sensitivity: 'low' | 'medium' | 'high',\n    filter?: AnalyticsFilter\n  ): Promise<any> {\n    return ApiService.post(`${this.baseUrl}/predict/anomalies`, {\n      metrics,\n      sensitivity,\n      ...filter\n    });\n  }\n\n  async getTrendAnalysis(\n    metric: string,\n    filter?: AnalyticsFilter\n  ): Promise<any> {\n    return ApiService.get(`${this.baseUrl}/predict/trends`, {\n      metric,\n      ...filter\n    });\n  }\n\n  // Helper Methods\n  getTimeRangePresets(): Array<{ label: string; value: TimeRange; days?: number }> {\n    return [\n      { label: '今天', value: 'today', days: 1 },\n      { label: '昨天', value: 'yesterday', days: 1 },\n      { label: '最近7天', value: 'week', days: 7 },\n      { label: '最近30天', value: 'month', days: 30 },\n      { label: '最近90天', value: 'quarter', days: 90 },\n      { label: '最近365天', value: 'year', days: 365 },\n      { label: '自定义', value: 'custom' }\n    ];\n  }\n\n  formatMetricValue(value: number, type: string): string {\n    switch (type) {\n      case 'currency':\n        return new Intl.NumberFormat('zh-CN', {\n          style: 'currency',\n          currency: 'CNY'\n        }).format(value);\n      case 'percentage':\n        return `${(value * 100).toFixed(2)}%`;\n      case 'duration':\n        const minutes = Math.floor(value / 60);\n        const seconds = value % 60;\n        return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n      case 'number':\n        return new Intl.NumberFormat('zh-CN').format(value);\n      default:\n        return value.toString();\n    }\n  }\n\n  calculateGrowthRate(current: number, previous: number): number {\n    if (previous === 0) return current > 0 ? 100 : 0;\n    return ((current - previous) / previous) * 100;\n  }\n}\n\nexport const analyticsService = new AnalyticsService();","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/services/api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4329,4332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4329,4332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":180,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4380,4383],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4380,4383],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":188,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":188,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4589,4592],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4589,4592],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":190,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4623,4626],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4623,4626],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":198,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":198,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4821,4824],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4821,4824],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":200,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4855,4858],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4855,4858],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5056,5059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5056,5059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":210,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5090,5093],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5090,5093],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":218,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5295,5298],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5295,5298],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":227,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5509,5512],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5509,5512],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6779,6782],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6779,6782],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":276,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":276,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6819,6822],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6819,6822],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse, AxiosError } from 'axios';\nimport { message } from 'antd';\nimport { env, storageUtils, errorUtils } from '@/utils';\nimport type { BaseResponse, ApiError } from '@/types';\n\n// 创建axios实例\nconst createAxiosInstance = (): AxiosInstance => {\n  const instance = axios.create({\n    baseURL: env.apiBaseUrl + env.apiPrefix,\n    timeout: 30000,\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n\n  // 请求拦截器\n  instance.interceptors.request.use(\n    (config) => {\n      // 添加认证token\n      const token = storageUtils.get('access_token');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n\n      // 添加请求ID用于追踪\n      config.headers['X-Request-ID'] = generateRequestId();\n\n      // 开发环境日志\n      if (env.isDev) {\n        console.log('🚀 Request:', {\n          method: config.method?.toUpperCase(),\n          url: config.url,\n          data: config.data,\n          params: config.params,\n        });\n      }\n\n      return config;\n    },\n    (error) => {\n      errorUtils.log(error, 'Request Interceptor');\n      return Promise.reject(error);\n    }\n  );\n\n  // 响应拦截器\n  instance.interceptors.response.use(\n    (response: AxiosResponse<BaseResponse>) => {\n      // 开发环境日志\n      if (env.isDev) {\n        console.log('✅ Response:', {\n          status: response.status,\n          url: response.config.url,\n          data: response.data,\n        });\n      }\n\n      const { data } = response;\n\n      // 检查业务状态\n      if (!data.success) {\n        const error: ApiError = {\n          message: data.message || '请求失败',\n          code: data.code?.toString(),\n          status: response.status,\n        };\n        throw error;\n      }\n\n      return response;\n    },\n    async (error: AxiosError<BaseResponse>) => {\n      const { response, config } = error;\n\n      // 开发环境日志\n      if (env.isDev) {\n        console.error('❌ Response Error:', {\n          status: response?.status,\n          url: config?.url,\n          message: response?.data?.message || error.message,\n        });\n      }\n\n      // 处理不同的HTTP状态码\n      if (response) {\n        switch (response.status) {\n          case 401:\n            await handleUnauthorized();\n            break;\n          case 403:\n            message.error('没有权限访问该资源');\n            break;\n          case 404:\n            message.error('请求的资源不存在');\n            break;\n          case 429:\n            message.error('请求过于频繁，请稍后再试');\n            break;\n          case 500:\n            message.error('服务器内部错误');\n            break;\n          default:\n            message.error(response.data?.message || '请求失败');\n        }\n      } else {\n        // 网络错误\n        message.error('网络连接失败，请检查网络状态');\n      }\n\n      const apiError: ApiError = {\n        message: response?.data?.message || error.message || '未知错误',\n        code: response?.data?.code?.toString(),\n        status: response?.status,\n        details: response?.data,\n      };\n\n      return Promise.reject(apiError);\n    }\n  );\n\n  return instance;\n};\n\n// 处理401未授权\nconst handleUnauthorized = async () => {\n  const refreshToken = storageUtils.get('refresh_token');\n\n  if (refreshToken) {\n    try {\n      // 尝试刷新token\n      const response = await axios.post(`${env.apiBaseUrl}${env.apiPrefix}/auth/refresh`, {\n        refreshToken,\n      });\n\n      const { token, refreshToken: newRefreshToken } = response.data.data;\n      storageUtils.set('access_token', token);\n      storageUtils.set('refresh_token', newRefreshToken);\n\n      // 重新发起原请求\n      window.location.reload();\n    } catch {\n      // 刷新失败，清除token并跳转到登录页\n      clearAuthData();\n      redirectToLogin();\n    }\n  } else {\n    clearAuthData();\n    redirectToLogin();\n  }\n};\n\n// 清除认证数据\nconst clearAuthData = () => {\n  storageUtils.remove('access_token');\n  storageUtils.remove('refresh_token');\n  storageUtils.remove('user_info');\n};\n\n// 跳转到登录页\nconst redirectToLogin = () => {\n  const currentPath = window.location.pathname;\n  if (currentPath !== '/login') {\n    window.location.href = `/login?redirect=${encodeURIComponent(currentPath)}`;\n  }\n};\n\n// 生成请求ID\nconst generateRequestId = (): string => {\n  return `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n};\n\n// 创建API实例\nexport const api = createAxiosInstance();\n\n// API请求方法封装\nexport class ApiService {\n  // GET请求\n  static async get<T = any>(\n    url: string,\n    params?: Record<string, any>,\n    config?: AxiosRequestConfig\n  ): Promise<T> {\n    const response = await api.get<BaseResponse<T>>(url, { params, ...config });\n    return response.data.data;\n  }\n\n  // POST请求\n  static async post<T = any>(\n    url: string,\n    data?: any,\n    config?: AxiosRequestConfig\n  ): Promise<T> {\n    const response = await api.post<BaseResponse<T>>(url, data, config);\n    return response.data.data;\n  }\n\n  // PUT请求\n  static async put<T = any>(\n    url: string,\n    data?: any,\n    config?: AxiosRequestConfig\n  ): Promise<T> {\n    const response = await api.put<BaseResponse<T>>(url, data, config);\n    return response.data.data;\n  }\n\n  // PATCH请求\n  static async patch<T = any>(\n    url: string,\n    data?: any,\n    config?: AxiosRequestConfig\n  ): Promise<T> {\n    const response = await api.patch<BaseResponse<T>>(url, data, config);\n    return response.data.data;\n  }\n\n  // DELETE请求\n  static async delete<T = any>(\n    url: string,\n    config?: AxiosRequestConfig\n  ): Promise<T> {\n    const response = await api.delete<BaseResponse<T>>(url, config);\n    return response.data.data;\n  }\n\n  // 文件上传\n  static async upload<T = any>(\n    url: string,\n    file: File,\n    onProgress?: (progress: number) => void,\n    config?: AxiosRequestConfig\n  ): Promise<T> {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await api.post<BaseResponse<T>>(url, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n      onUploadProgress: (progressEvent) => {\n        if (onProgress && progressEvent.total) {\n          const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n          onProgress(progress);\n        }\n      },\n      ...config,\n    });\n\n    return response.data.data;\n  }\n\n  // 文件下载\n  static async download(\n    url: string,\n    filename?: string,\n    config?: AxiosRequestConfig\n  ): Promise<void> {\n    const response = await api.get(url, {\n      responseType: 'blob',\n      ...config,\n    });\n\n    const blob = new Blob([response.data]);\n    const downloadUrl = window.URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = downloadUrl;\n    link.download = filename || 'download';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    window.URL.revokeObjectURL(downloadUrl);\n  }\n\n  // 批量请求\n  static async batch<T = any>(\n    requests: Array<() => Promise<any>>\n  ): Promise<T[]> {\n    const results = await Promise.allSettled(requests.map(request => request()));\n    return results.map(result => {\n      if (result.status === 'fulfilled') {\n        return result.value;\n      } else {\n        throw result.reason;\n      }\n    });\n  }\n}\n\nexport default ApiService;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/services/systemConfigService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1876,1879],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1876,1879],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2469,2472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2469,2472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":269,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":269,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9371,9374],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9371,9374],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  SystemConfiguration,\n  ConfigurationTemplate,\n  ConfigurationValidationResult,\n  ConfigurationDiff,\n  ConfigurationBackup,\n  ConfigurationConflict,\n  ConfigurationApproval,\n  ConfigurationAudit,\n  ConfigurationImpactAnalysis,\n  ConfigurationDeployment,\n  ConfigurationSchema,\n  SystemConfigResponse,\n  ConfigurationListResponse,\n  ConfigurationHistoryResponse,\n  ConfigurationTemplateResponse,\n} from '../types/systemConfig';\nimport apiClient from './api';\n\nclass SystemConfigService {\n  private readonly baseUrl = '/api/admin/system/config';\n\n  // Configuration Management\n  async getConfigurations(): Promise<SystemConfiguration[]> {\n    try {\n      const response = await apiClient.get<ConfigurationListResponse>(`${this.baseUrl}`);\n      return response.data.configs;\n    } catch (error) {\n      console.error('Failed to fetch configurations:', error);\n      throw new Error('Failed to fetch configurations');\n    }\n  }\n\n  async getCurrentConfiguration(): Promise<SystemConfiguration | null> {\n    try {\n      const response = await apiClient.get<SystemConfigResponse>(`${this.baseUrl}/current`);\n      return response.data.config;\n    } catch (error) {\n      console.error('Failed to fetch current configuration:', error);\n      return null;\n    }\n  }\n\n  async getConfiguration(id: string): Promise<SystemConfiguration> {\n    try {\n      const response = await apiClient.get<SystemConfiguration>(`${this.baseUrl}/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error(`Failed to fetch configuration ${id}:`, error);\n      throw new Error(`Failed to fetch configuration ${id}`);\n    }\n  }\n\n  async saveConfiguration(config: Partial<SystemConfiguration>): Promise<SystemConfiguration> {\n    try {\n      const response = await apiClient.post<SystemConfiguration>(`${this.baseUrl}`, config);\n      return response.data;\n    } catch (error: any) {\n      console.error('Failed to save configuration:', error);\n      if (error.response?.data?.validationErrors) {\n        throw {\n          message: 'Validation failed',\n          validationErrors: error.response.data.validationErrors,\n        };\n      }\n      throw new Error('Failed to save configuration');\n    }\n  }\n\n  async updateConfiguration(id: string, config: Partial<SystemConfiguration>): Promise<SystemConfiguration> {\n    try {\n      const response = await apiClient.put<SystemConfiguration>(`${this.baseUrl}/${id}`, config);\n      return response.data;\n    } catch (error: any) {\n      console.error(`Failed to update configuration ${id}:`, error);\n      if (error.response?.data?.validationErrors) {\n        throw {\n          message: 'Validation failed',\n          validationErrors: error.response.data.validationErrors,\n        };\n      }\n      throw new Error(`Failed to update configuration ${id}`);\n    }\n  }\n\n  async deleteConfiguration(id: string): Promise<void> {\n    try {\n      await apiClient.delete(`${this.baseUrl}/${id}`);\n    } catch (error) {\n      console.error(`Failed to delete configuration ${id}:`, error);\n      throw new Error(`Failed to delete configuration ${id}`);\n    }\n  }\n\n  // Configuration Validation\n  async validateConfiguration(config: Partial<SystemConfiguration>): Promise<ConfigurationValidationResult> {\n    try {\n      const response = await apiClient.post<ConfigurationValidationResult>(`${this.baseUrl}/validate`, config);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to validate configuration:', error);\n      throw new Error('Failed to validate configuration');\n    }\n  }\n\n  async getConfigurationSchema(): Promise<ConfigurationSchema> {\n    try {\n      const response = await apiClient.get<ConfigurationSchema>(`${this.baseUrl}/schema`);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to fetch configuration schema:', error);\n      throw new Error('Failed to fetch configuration schema');\n    }\n  }\n\n  // Version Management\n  async getConfigurationHistory(): Promise<SystemConfiguration[]> {\n    try {\n      const response = await apiClient.get<ConfigurationHistoryResponse>(`${this.baseUrl}/history`);\n      return response.data.history;\n    } catch (error) {\n      console.error('Failed to fetch configuration history:', error);\n      throw new Error('Failed to fetch configuration history');\n    }\n  }\n\n  async rollbackToVersion(versionId: string): Promise<SystemConfiguration> {\n    try {\n      const response = await apiClient.post<SystemConfiguration>(`${this.baseUrl}/rollback/${versionId}`);\n      return response.data;\n    } catch (error) {\n      console.error(`Failed to rollback to version ${versionId}:`, error);\n      throw new Error(`Failed to rollback to version ${versionId}`);\n    }\n  }\n\n  async compareVersions(versionA: string, versionB: string): Promise<ConfigurationDiff> {\n    try {\n      const response = await apiClient.get<ConfigurationDiff>(\n        `${this.baseUrl}/compare`,\n        {\n          params: { versionA, versionB }\n        }\n      );\n      return response.data;\n    } catch (error) {\n      console.error('Failed to compare versions:', error);\n      throw new Error('Failed to compare versions');\n    }\n  }\n\n  // Backup Management\n  async createBackup(description: string): Promise<ConfigurationBackup> {\n    try {\n      const response = await apiClient.post<ConfigurationBackup>(`${this.baseUrl}/backup`, {\n        description,\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to create backup:', error);\n      throw new Error('Failed to create backup');\n    }\n  }\n\n  async getBackups(): Promise<ConfigurationBackup[]> {\n    try {\n      const response = await apiClient.get<ConfigurationBackup[]>(`${this.baseUrl}/backups`);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to fetch backups:', error);\n      throw new Error('Failed to fetch backups');\n    }\n  }\n\n  async restoreFromBackup(backupId: string): Promise<SystemConfiguration> {\n    try {\n      const response = await apiClient.post<SystemConfiguration>(`${this.baseUrl}/restore/${backupId}`);\n      return response.data;\n    } catch (error) {\n      console.error(`Failed to restore from backup ${backupId}:`, error);\n      throw new Error(`Failed to restore from backup ${backupId}`);\n    }\n  }\n\n  async deleteBackup(backupId: string): Promise<void> {\n    try {\n      await apiClient.delete(`${this.baseUrl}/backups/${backupId}`);\n    } catch (error) {\n      console.error(`Failed to delete backup ${backupId}:`, error);\n      throw new Error(`Failed to delete backup ${backupId}`);\n    }\n  }\n\n  // Template Management\n  async getTemplates(): Promise<ConfigurationTemplate[]> {\n    try {\n      const response = await apiClient.get<ConfigurationTemplateResponse>(`${this.baseUrl}/templates`);\n      return response.data.templates;\n    } catch (error) {\n      console.error('Failed to fetch templates:', error);\n      throw new Error('Failed to fetch templates');\n    }\n  }\n\n  async getTemplate(templateId: string): Promise<ConfigurationTemplate> {\n    try {\n      const response = await apiClient.get<ConfigurationTemplate>(`${this.baseUrl}/templates/${templateId}`);\n      return response.data;\n    } catch (error) {\n      console.error(`Failed to fetch template ${templateId}:`, error);\n      throw new Error(`Failed to fetch template ${templateId}`);\n    }\n  }\n\n  async saveAsTemplate(name: string, description: string, config: SystemConfiguration): Promise<ConfigurationTemplate> {\n    try {\n      const response = await apiClient.post<ConfigurationTemplate>(`${this.baseUrl}/templates`, {\n        name,\n        description,\n        config,\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to save template:', error);\n      throw new Error('Failed to save template');\n    }\n  }\n\n  async updateTemplate(templateId: string, template: Partial<ConfigurationTemplate>): Promise<ConfigurationTemplate> {\n    try {\n      const response = await apiClient.put<ConfigurationTemplate>(`${this.baseUrl}/templates/${templateId}`, template);\n      return response.data;\n    } catch (error) {\n      console.error(`Failed to update template ${templateId}:`, error);\n      throw new Error(`Failed to update template ${templateId}`);\n    }\n  }\n\n  async applyTemplate(templateId: string): Promise<SystemConfiguration> {\n    try {\n      const response = await apiClient.post<SystemConfiguration>(`${this.baseUrl}/templates/${templateId}/apply`);\n      return response.data;\n    } catch (error) {\n      console.error(`Failed to apply template ${templateId}:`, error);\n      throw new Error(`Failed to apply template ${templateId}`);\n    }\n  }\n\n  async deleteTemplate(templateId: string): Promise<void> {\n    try {\n      await apiClient.delete(`${this.baseUrl}/templates/${templateId}`);\n    } catch (error) {\n      console.error(`Failed to delete template ${templateId}:`, error);\n      throw new Error(`Failed to delete template ${templateId}`);\n    }\n  }\n\n  // Conflict Resolution\n  async getConflicts(): Promise<ConfigurationConflict[]> {\n    try {\n      const response = await apiClient.get<ConfigurationConflict[]>(`${this.baseUrl}/conflicts`);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to fetch conflicts:', error);\n      throw new Error('Failed to fetch conflicts');\n    }\n  }\n\n  async resolveConflict(conflictId: string, resolution: any): Promise<void> {\n    try {\n      await apiClient.post(`${this.baseUrl}/conflicts/${conflictId}/resolve`, resolution);\n    } catch (error) {\n      console.error(`Failed to resolve conflict ${conflictId}:`, error);\n      throw new Error(`Failed to resolve conflict ${conflictId}`);\n    }\n  }\n\n  // Approval Workflow\n  async getApprovals(): Promise<ConfigurationApproval[]> {\n    try {\n      const response = await apiClient.get<ConfigurationApproval[]>(`${this.baseUrl}/approvals`);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to fetch approvals:', error);\n      throw new Error('Failed to fetch approvals');\n    }\n  }\n\n  async requestApproval(configId: string, changes: Partial<SystemConfiguration>, reason: string): Promise<ConfigurationApproval> {\n    try {\n      const response = await apiClient.post<ConfigurationApproval>(`${this.baseUrl}/approvals`, {\n        configId,\n        changes,\n        reason,\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to request approval:', error);\n      throw new Error('Failed to request approval');\n    }\n  }\n\n  async approveConfiguration(approvalId: string, reason?: string): Promise<void> {\n    try {\n      await apiClient.post(`${this.baseUrl}/approvals/${approvalId}/approve`, { reason });\n    } catch (error) {\n      console.error(`Failed to approve configuration ${approvalId}:`, error);\n      throw new Error(`Failed to approve configuration ${approvalId}`);\n    }\n  }\n\n  async rejectConfiguration(approvalId: string, reason: string): Promise<void> {\n    try {\n      await apiClient.post(`${this.baseUrl}/approvals/${approvalId}/reject`, { reason });\n    } catch (error) {\n      console.error(`Failed to reject configuration ${approvalId}:`, error);\n      throw new Error(`Failed to reject configuration ${approvalId}`);\n    }\n  }\n\n  // Impact Analysis\n  async analyzeImpact(config: Partial<SystemConfiguration>): Promise<ConfigurationImpactAnalysis> {\n    try {\n      const response = await apiClient.post<ConfigurationImpactAnalysis>(`${this.baseUrl}/analyze-impact`, config);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to analyze impact:', error);\n      throw new Error('Failed to analyze impact');\n    }\n  }\n\n  // Audit Trail\n  async getAuditLogs(configId?: string): Promise<ConfigurationAudit[]> {\n    try {\n      const params = configId ? { configId } : {};\n      const response = await apiClient.get<ConfigurationAudit[]>(`${this.baseUrl}/audit`, { params });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to fetch audit logs:', error);\n      throw new Error('Failed to fetch audit logs');\n    }\n  }\n\n  // Deployment Management\n  async deployConfiguration(configId: string, environment: string): Promise<ConfigurationDeployment> {\n    try {\n      const response = await apiClient.post<ConfigurationDeployment>(`${this.baseUrl}/deploy`, {\n        configId,\n        environment,\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to deploy configuration:', error);\n      throw new Error('Failed to deploy configuration');\n    }\n  }\n\n  async getDeployments(): Promise<ConfigurationDeployment[]> {\n    try {\n      const response = await apiClient.get<ConfigurationDeployment[]>(`${this.baseUrl}/deployments`);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to fetch deployments:', error);\n      throw new Error('Failed to fetch deployments');\n    }\n  }\n\n  async rollbackDeployment(deploymentId: string, reason: string): Promise<void> {\n    try {\n      await apiClient.post(`${this.baseUrl}/deployments/${deploymentId}/rollback`, { reason });\n    } catch (error) {\n      console.error(`Failed to rollback deployment ${deploymentId}:`, error);\n      throw new Error(`Failed to rollback deployment ${deploymentId}`);\n    }\n  }\n\n  // Configuration Export/Import\n  async exportConfiguration(configId: string, format: 'json' | 'yaml' = 'json'): Promise<Blob> {\n    try {\n      const response = await apiClient.get(`${this.baseUrl}/${configId}/export`, {\n        params: { format },\n        responseType: 'blob',\n      });\n      return response.data;\n    } catch (error) {\n      console.error(`Failed to export configuration ${configId}:`, error);\n      throw new Error(`Failed to export configuration ${configId}`);\n    }\n  }\n\n  async importConfiguration(file: File): Promise<SystemConfiguration> {\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const response = await apiClient.post<SystemConfiguration>(`${this.baseUrl}/import`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to import configuration:', error);\n      throw new Error('Failed to import configuration');\n    }\n  }\n\n  // Environment Management\n  async syncConfigurationBetweenEnvironments(\n    sourceEnv: string,\n    targetEnv: string,\n    configId: string\n  ): Promise<SystemConfiguration> {\n    try {\n      const response = await apiClient.post<SystemConfiguration>(`${this.baseUrl}/sync`, {\n        sourceEnvironment: sourceEnv,\n        targetEnvironment: targetEnv,\n        configId,\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to sync configuration between environments:', error);\n      throw new Error('Failed to sync configuration between environments');\n    }\n  }\n\n  // Health and Status\n  async getConfigurationHealth(): Promise<{\n    status: 'healthy' | 'warning' | 'error';\n    lastChecked: string;\n    issues: Array<{\n      severity: 'error' | 'warning' | 'info';\n      message: string;\n      field?: string;\n    }>;\n  }> {\n    try {\n      const response = await apiClient.get(`${this.baseUrl}/health`);\n      return response.data;\n    } catch (error) {\n      console.error('Failed to fetch configuration health:', error);\n      throw new Error('Failed to fetch configuration health');\n    }\n  }\n\n  // Configuration Migration\n  async migrateConfiguration(fromVersion: string, toVersion: string): Promise<SystemConfiguration> {\n    try {\n      const response = await apiClient.post<SystemConfiguration>(`${this.baseUrl}/migrate`, {\n        fromVersion,\n        toVersion,\n      });\n      return response.data;\n    } catch (error) {\n      console.error('Failed to migrate configuration:', error);\n      throw new Error('Failed to migrate configuration');\n    }\n  }\n\n  // Real-time Updates\n  subscribeToConfigurationChanges(_callback: (config: SystemConfiguration) => void): () => void {\n    // This would typically use WebSockets or Server-Sent Events\n    // For now, return a no-op unsubscribe function\n    return () => {};\n  }\n\n  // Cache Management\n  async clearConfigurationCache(): Promise<void> {\n    try {\n      await apiClient.post(`${this.baseUrl}/cache/clear`);\n    } catch (error) {\n      console.error('Failed to clear configuration cache:', error);\n      throw new Error('Failed to clear configuration cache');\n    }\n  }\n\n  async warmupConfigurationCache(): Promise<void> {\n    try {\n      await apiClient.post(`${this.baseUrl}/cache/warmup`);\n    } catch (error) {\n      console.error('Failed to warmup configuration cache:', error);\n      throw new Error('Failed to warmup configuration cache');\n    }\n  }\n}\n\nexport const systemConfigService = new SystemConfigService();\nexport default systemConfigService;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/stores/adminStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/stores/dashboardStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/stores/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":148,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3607,3610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3607,3610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":151,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3701,3704],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3701,3704],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":152,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3736,3739],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3736,3739],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":155,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3832,3835],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3832,3835],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":156,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3869,3872],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3869,3872],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":159,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3975,3978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3975,3978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":160,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":160,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4012,4015],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4012,4015],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":163,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4119,4122],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4119,4122],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":164,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":164,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4168,4171],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4168,4171],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":175,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4414,4417],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4414,4417],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":180,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4601,4604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4601,4604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":181,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4651,4654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4651,4654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":190,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4917,4920],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4917,4920],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":191,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4979,4982],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4979,4982],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":246,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":246,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6653,6656],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6653,6656],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":247,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":247,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6687,6690],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6687,6690],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":247,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":247,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6707,6710],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6707,6710],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Main admin store exports\nimport { useAdminStore } from './adminStore';\nexport {\n  useAdminStore,\n  type AdminState,\n  // Basic selectors\n  useUser,\n  usePermissions,\n  useCollapsed,\n  useTheme,\n  useLoading,\n  useNotifications,\n  // Extended selectors\n  usePageTitle,\n  useBreadcrumbs,\n  useSessionState,\n  useFeatures,\n  useSettings,\n  useConnectionStatus,\n  usePerformanceMetrics,\n  // Permission hooks\n  useHasPermission,\n  useHasAllPermissions,\n  useHasRole,\n  useFeatureEnabled,\n  // Computed selectors\n  useUnreadNotifications,\n  useIsSessionActive,\n  useConnectionHealth,\n  usePerformanceStatus,\n  useStoreSubscription,\n} from './adminStore';\n\n// Dashboard store exports\nimport { useDashboardStore } from './dashboardStore';\nexport {\n  useDashboardStore,\n  type DashboardState,\n  // Dashboard selectors\n  useStats,\n  useMetrics,\n  useHealthCheck,\n  useActivities,\n  useChartConfigs,\n  useRefreshState,\n  useDashboardLayout,\n  useRealTimeData,\n  // Computed dashboard selectors\n  useSystemStatus,\n  usePerformanceScore,\n  useTrendData,\n} from './dashboardStore';\n\n// User management store exports\nimport { useUserManagementStore } from './userManagementStore';\nexport {\n  useUserManagementStore,\n  type UserManagementState,\n  // User management selectors\n  useUsers,\n  useSelectedUsers,\n  useCurrentUser,\n  usePagination,\n  useQuery,\n  useUserManagementLoading,\n  useUserManagementError,\n  useBulkOperationProgress,\n  useUserForm,\n  useRoleAssignment,\n  useUserDetails,\n  // Computed user management selectors\n  useSelectedUsersCount,\n  useHasSelectedUsers,\n  useUserStats,\n} from './userManagementStore';\n\n// Permission store exports\nimport { usePermissionStore } from './permissionStore';\nexport {\n  usePermissionStore,\n  type PermissionState,\n  // Permission selectors\n  usePermissions as usePermissionsList,\n  useRoles,\n  useCurrentRole,\n  useSelectedPermissions,\n  useSelectedRoles,\n  useRolePermissionMatrix,\n  usePermissionCategories,\n  usePermissionLoading,\n  usePermissionError,\n  usePermissionForm,\n  useRoleForm,\n  useRolePermissionAssignment,\n  useUserRoleAssignment,\n  // Computed permission selectors\n  usePermissionStats,\n  useRoleStats,\n} from './permissionStore';\n\n// Real-time store exports\nimport { useRealTimeStore } from './realTimeStore';\nexport {\n  useRealTimeStore,\n  type RealTimeState,\n  // Real-time selectors\n  useRealTimeConnection,\n  useLiveActivities,\n  useLiveMetrics,\n  useLiveNotifications,\n  // Real-time hooks\n  useRealTimeChannel,\n  useRealTimeEvent,\n} from './realTimeStore';\n\n// Store utility types\nexport interface StoreHydration {\n  adminStore: boolean;\n  dashboardStore: boolean;\n  userManagementStore: boolean;\n  permissionStore: boolean;\n  realTimeStore: boolean;\n}\n\n// Cross-store communication utilities\nexport const storeUtils = {\n  // Reset all stores\n  resetAllStores: () => {\n    useAdminStore.getState().reset();\n    useDashboardStore.getState().reset();\n    useUserManagementStore.getState().reset();\n    usePermissionStore.getState().reset();\n    useRealTimeStore.getState().reset();\n  },\n\n  // Check if stores are hydrated from persistence\n  getHydrationStatus: (): StoreHydration => {\n    return {\n      adminStore: !!useAdminStore.getState().user,\n      dashboardStore: !!useDashboardStore.getState().stats,\n      userManagementStore: useUserManagementStore.getState().users.length > 0,\n      permissionStore: usePermissionStore.getState().permissions.length > 0,\n      realTimeStore: useRealTimeStore.getState().isConnected,\n    };\n  },\n\n  // Subscribe to cross-store updates\n  subscribeToStoreUpdates: (callback: (storeName: string, state: any) => void) => {\n    const unsubscribers = [\n      useAdminStore.subscribe(\n        (state: any) => state.user,\n        (user: any) => callback('admin', { user })\n      ),\n      useDashboardStore.subscribe(\n        (state: any) => state.stats,\n        (stats: any) => callback('dashboard', { stats })\n      ),\n      useUserManagementStore.subscribe(\n        (state: any) => state.users,\n        (users: any) => callback('userManagement', { users })\n      ),\n      usePermissionStore.subscribe(\n        (state: any) => state.permissions,\n        (permissions: any) => callback('permission', { permissions })\n      ),\n    ];\n\n    // Return cleanup function\n    return () => {\n      unsubscribers.forEach(unsub => unsub());\n    };\n  },\n\n  // Sync user permissions across stores\n  syncUserPermissions: (user: any) => {\n    const adminStore = useAdminStore.getState();\n    const permissionStore = usePermissionStore.getState();\n\n    if (user) {\n      const permissions = user.roles.flatMap((role: any) =>\n        role.permissions.map((permission: any) => permission.code)\n      );\n\n      adminStore.setPermissions(permissions);\n\n      // Update permission store with user's roles if needed\n      const userRoles = user.roles;\n      const existingRoles = permissionStore.roles;\n\n      userRoles.forEach((userRole: any) => {\n        const existingRole = existingRoles.find((r: any) => r.id === userRole.id);\n        if (!existingRole) {\n          permissionStore.addRole(userRole);\n        }\n      });\n    }\n  },\n\n  // Performance monitoring across stores\n  measureStorePerformance: () => {\n    const startTime = performance.now();\n\n    return {\n      end: (operation: string) => {\n        const endTime = performance.now();\n        const duration = endTime - startTime;\n\n        useAdminStore.getState().updatePerformanceMetrics({\n          renderTime: duration,\n        });\n\n        if (process.env.NODE_ENV === 'development') {\n          console.log(`Store operation \"${operation}\" took ${duration.toFixed(2)}ms`);\n        }\n      },\n    };\n  },\n};\n\n// Store debugging utilities (development only)\nexport const storeDebug = process.env.NODE_ENV === 'development' ? {\n  // Log current state of all stores\n  logAllStores: () => {\n    console.group('Store States');\n    console.log('Admin Store:', useAdminStore.getState());\n    console.log('Dashboard Store:', useDashboardStore.getState());\n    console.log('User Management Store:', useUserManagementStore.getState());\n    console.log('Permission Store:', usePermissionStore.getState());\n    console.groupEnd();\n  },\n\n  // Monitor store changes\n  monitorStoreChanges: (storeName?: string) => {\n    const stores = {\n      admin: useAdminStore,\n      dashboard: useDashboardStore,\n      userManagement: useUserManagementStore,\n      permission: usePermissionStore,\n    };\n\n    const targetStores = storeName ? [storeName] : Object.keys(stores);\n\n    const unsubscribers = targetStores.map(name => {\n      const store = stores[name as keyof typeof stores];\n      return store.subscribe(\n        (state: any) => state,\n        (newState: any, previousState: any) => {\n          console.log(`Store \"${name}\" changed:`, {\n            previous: previousState,\n            current: newState,\n          });\n        }\n      );\n    });\n\n    return () => unsubscribers.forEach(unsub => unsub());\n  },\n\n  // Validate store state integrity\n  validateStoreIntegrity: () => {\n    const issues: string[] = [];\n\n    // Check admin store\n    const adminState = useAdminStore.getState();\n    if (adminState.user && adminState.permissions.length === 0) {\n      issues.push('Admin store: User exists but no permissions set');\n    }\n\n    // Check user management store\n    const userMgmtState = useUserManagementStore.getState();\n    if (userMgmtState.selectedUsers.length > userMgmtState.users.length) {\n      issues.push('User management store: More selected users than total users');\n    }\n\n    // Check permission store\n    const permissionState = usePermissionStore.getState();\n    if (permissionState.roles.length > 0 && permissionState.permissions.length === 0) {\n      issues.push('Permission store: Roles exist but no permissions defined');\n    }\n\n    if (issues.length > 0) {\n      console.warn('Store integrity issues found:', issues);\n    } else {\n      console.log('All stores are in valid state');\n    }\n\n    return issues;\n  },\n} : {};\n\n// Export store instances for direct access (use sparingly)\nexport const stores = {\n  admin: useAdminStore,\n  dashboard: useDashboardStore,\n  userManagement: useUserManagementStore,\n  permission: usePermissionStore,\n  realTime: useRealTimeStore,\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/stores/permissionStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/stores/realTimeStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[806,809],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[806,809],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1209,1212],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1209,1212],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1348,1351],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1348,1351],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1386,1389],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1386,1389],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2188,2191],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2188,2191],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":252,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":252,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7102,7105],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7102,7105],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":276,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":276,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7894,7897],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7894,7897],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":338,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":338,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9582,9585],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9582,9585],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":362,"column":13,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":362,"endColumn":60},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":411,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":411,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11600,11603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11600,11603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has missing dependencies: 'addEventListener', 'handler', and 'removeEventListener'. Either include them or remove the dependency array.","line":423,"column":6,"nodeType":"ArrayExpression","endLine":423,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [addEventListener, event, handler, removeEventListener]","fix":{"range":[11981,11997],"text":"[addEventListener, event, handler, removeEventListener]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useEffect has a spread element in its dependency array. This means we can't statically verify whether you've passed the correct dependencies.","line":423,"column":14,"nodeType":"SpreadElement","endLine":423,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { create } from 'zustand';\nimport { devtools } from 'zustand/middleware';\nimport { immer } from 'zustand/middleware/immer';\nimport type { Activity, SystemMetrics, Notification } from '@/types';\n\nexport interface RealTimeState {\n  // Connection management\n  isConnected: boolean;\n  connectionId: string | null;\n  reconnectAttempts: number;\n  maxReconnectAttempts: number;\n  reconnectInterval: number;\n\n  // WebSocket instance\n  ws: WebSocket | null;\n\n  // Subscriptions\n  subscriptions: Set<string>;\n  subscribedChannels: Map<string, Set<string>>; // channel -> subscriber IDs\n\n  // Real-time data streams\n  liveActivities: Activity[];\n  liveMetrics: SystemMetrics | null;\n  liveNotifications: Notification[];\n\n  // Event handlers\n  eventHandlers: Map<string, Array<(data: any) => void>>;\n\n  // Actions\n  connect: (url: string) => Promise<void>;\n  disconnect: () => void;\n  reconnect: () => void;\n\n  // Subscription management\n  subscribe: (channel: string, subscriberId: string) => void;\n  unsubscribe: (channel: string, subscriberId: string) => void;\n  unsubscribeAll: (subscriberId: string) => void;\n\n  // Event handling\n  addEventListener: (event: string, handler: (data: any) => void) => string;\n  removeEventListener: (event: string, handlerId: string) => void;\n\n  // Message sending\n  sendMessage: (message: any) => void;\n  handleMessage: (data: any) => void;\n\n  // Data updates\n  updateLiveActivities: (activities: Activity[]) => void;\n  addLiveActivity: (activity: Activity) => void;\n  updateLiveMetrics: (metrics: SystemMetrics) => void;\n  addLiveNotification: (notification: Notification) => void;\n\n  // State management\n  setConnectionStatus: (connected: boolean) => void;\n  incrementReconnectAttempts: () => void;\n  resetReconnectAttempts: () => void;\n\n  reset: () => void;\n}\n\nconst initialState = {\n  isConnected: false,\n  connectionId: null,\n  reconnectAttempts: 0,\n  maxReconnectAttempts: 5,\n  reconnectInterval: 5000,\n\n  ws: null,\n\n  subscriptions: new Set<string>(),\n  subscribedChannels: new Map<string, Set<string>>(),\n\n  liveActivities: [],\n  liveMetrics: null,\n  liveNotifications: [],\n\n  eventHandlers: new Map<string, Array<(data: any) => void>>(),\n};\n\nexport const useRealTimeStore = create<RealTimeState>()(\n  devtools(\n    immer((set, get) => ({\n      ...initialState,\n\n      connect: async (url: string) => {\n        const state = get();\n\n        // Close existing connection\n        if (state.ws) {\n          state.ws.close();\n        }\n\n        try {\n          const ws = new WebSocket(url);\n\n          ws.onopen = () => {\n            console.log('WebSocket connected');\n            set((state) => {\n              state.isConnected = true;\n              state.reconnectAttempts = 0;\n              state.ws = ws;\n            });\n\n            // Send initial subscriptions\n            const subscriptions = Array.from(state.subscriptions);\n            if (subscriptions.length > 0) {\n              ws.send(JSON.stringify({\n                type: 'subscribe',\n                channels: subscriptions,\n              }));\n            }\n          };\n\n          ws.onmessage = (event) => {\n            try {\n              const data = JSON.parse(event.data);\n              get().handleMessage(data);\n            } catch (error) {\n              console.error('Failed to parse WebSocket message:', error);\n            }\n          };\n\n          ws.onerror = (error) => {\n            console.error('WebSocket error:', error);\n            set((state) => {\n              state.isConnected = false;\n            });\n          };\n\n          ws.onclose = () => {\n            console.log('WebSocket disconnected');\n            set((state) => {\n              state.isConnected = false;\n              state.ws = null;\n            });\n\n            // Attempt to reconnect\n            const currentState = get();\n            if (currentState.reconnectAttempts < currentState.maxReconnectAttempts) {\n              setTimeout(() => {\n                get().reconnect();\n              }, currentState.reconnectInterval);\n            }\n          };\n\n          set((state) => {\n            state.ws = ws;\n          });\n\n        } catch (error) {\n          console.error('Failed to connect to WebSocket:', error);\n          set((state) => {\n            state.isConnected = false;\n          });\n        }\n      },\n\n      disconnect: () => {\n        const state = get();\n        if (state.ws) {\n          state.ws.close();\n        }\n\n        set((state) => {\n          state.isConnected = false;\n          state.ws = null;\n          state.reconnectAttempts = 0;\n        });\n      },\n\n      reconnect: () => {\n        get();\n        set((state) => {\n          state.reconnectAttempts += 1;\n        });\n\n        // This would need the original URL, which should be stored\n        console.log('Attempting to reconnect...');\n      },\n\n      subscribe: (channel: string, subscriberId: string) => {\n        set((state) => {\n          state.subscriptions.add(channel);\n\n          if (!state.subscribedChannels.has(channel)) {\n            state.subscribedChannels.set(channel, new Set());\n          }\n          state.subscribedChannels.get(channel)!.add(subscriberId);\n\n          // Send subscription to server if connected\n          if (state.ws && state.isConnected) {\n            state.ws.send(JSON.stringify({\n              type: 'subscribe',\n              channel,\n              subscriberId,\n            }));\n          }\n        });\n      },\n\n      unsubscribe: (channel: string, subscriberId: string) => {\n        set((state) => {\n          const subscribers = state.subscribedChannels.get(channel);\n          if (subscribers) {\n            subscribers.delete(subscriberId);\n\n            // Remove channel if no more subscribers\n            if (subscribers.size === 0) {\n              state.subscribedChannels.delete(channel);\n              state.subscriptions.delete(channel);\n\n              // Send unsubscription to server if connected\n              if (state.ws && state.isConnected) {\n                state.ws.send(JSON.stringify({\n                  type: 'unsubscribe',\n                  channel,\n                }));\n              }\n            }\n          }\n        });\n      },\n\n      unsubscribeAll: (subscriberId: string) => {\n        const state = get();\n        const channelsToRemove: string[] = [];\n\n        state.subscribedChannels.forEach((subscribers, channel) => {\n          subscribers.delete(subscriberId);\n          if (subscribers.size === 0) {\n            channelsToRemove.push(channel);\n          }\n        });\n\n        set((state) => {\n          channelsToRemove.forEach(channel => {\n            state.subscribedChannels.delete(channel);\n            state.subscriptions.delete(channel);\n          });\n        });\n\n        // Send bulk unsubscription to server\n        if (state.ws && state.isConnected && channelsToRemove.length > 0) {\n          state.ws.send(JSON.stringify({\n            type: 'unsubscribe_bulk',\n            channels: channelsToRemove,\n          }));\n        }\n      },\n\n      addEventListener: (event: string, handler: (data: any) => void) => {\n        const handlerId = `${event}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n        set((state) => {\n          if (!state.eventHandlers.has(event)) {\n            state.eventHandlers.set(event, []);\n          }\n          state.eventHandlers.get(event)!.push(handler);\n        });\n\n        return handlerId;\n      },\n\n      removeEventListener: (event: string, _handlerId: string) => {\n        set((state) => {\n          const handlers = state.eventHandlers.get(event);\n          if (handlers) {\n            // For simplicity, remove by index matching handlerId\n            // In real implementation, you'd store handler with ID\n            state.eventHandlers.set(event, handlers.slice(1));\n          }\n        });\n      },\n\n      sendMessage: (message: any) => {\n        const state = get();\n        if (state.ws && state.isConnected) {\n          state.ws.send(JSON.stringify(message));\n        } else {\n          console.warn('Cannot send message: WebSocket not connected');\n        }\n      },\n\n      updateLiveActivities: (activities: Activity[]) => {\n        set((state) => {\n          state.liveActivities = activities;\n        });\n      },\n\n      addLiveActivity: (activity: Activity) => {\n        set((state) => {\n          state.liveActivities.unshift(activity);\n\n          // Keep only the latest 100 activities\n          if (state.liveActivities.length > 100) {\n            state.liveActivities = state.liveActivities.slice(0, 100);\n          }\n        });\n      },\n\n      updateLiveMetrics: (metrics: SystemMetrics) => {\n        set((state) => {\n          state.liveMetrics = metrics;\n        });\n      },\n\n      addLiveNotification: (notification: Notification) => {\n        set((state) => {\n          state.liveNotifications.unshift(notification);\n\n          // Keep only the latest 20 notifications\n          if (state.liveNotifications.length > 20) {\n            state.liveNotifications = state.liveNotifications.slice(0, 20);\n          }\n        });\n      },\n\n      setConnectionStatus: (connected: boolean) => {\n        set((state) => {\n          state.isConnected = connected;\n        });\n      },\n\n      incrementReconnectAttempts: () => {\n        set((state) => {\n          state.reconnectAttempts += 1;\n        });\n      },\n\n      resetReconnectAttempts: () => {\n        set((state) => {\n          state.reconnectAttempts = 0;\n        });\n      },\n\n      // Handle incoming WebSocket messages\n      handleMessage: (data: any) => {\n        const { type, payload } = data;\n\n        switch (type) {\n          case 'activity':\n            get().addLiveActivity(payload);\n            break;\n\n          case 'metrics':\n            get().updateLiveMetrics(payload);\n            break;\n\n          case 'notification':\n            get().addLiveNotification(payload);\n            break;\n\n          case 'connection_id':\n            set((state) => {\n              state.connectionId = payload.id;\n            });\n            break;\n\n          default:\n            // Call custom event handlers\n            const handlers = get().eventHandlers.get(type);\n            if (handlers) {\n              handlers.forEach(handler => handler(payload));\n            }\n        }\n      },\n\n      reset: () => {\n        const state = get();\n        if (state.ws) {\n          state.ws.close();\n        }\n        set(() => initialState);\n      },\n    })),\n    {\n      name: 'real-time-store',\n      enabled: process.env.NODE_ENV === 'development',\n    }\n  )\n);\n\n// Selectors\nexport const useRealTimeConnection = () => useRealTimeStore((state) => ({\n  isConnected: state.isConnected,\n  connectionId: state.connectionId,\n  reconnectAttempts: state.reconnectAttempts,\n}));\n\nexport const useLiveActivities = () => useRealTimeStore((state) => state.liveActivities);\nexport const useLiveMetrics = () => useRealTimeStore((state) => state.liveMetrics);\nexport const useLiveNotifications = () => useRealTimeStore((state) => state.liveNotifications);\n\n// Custom hooks for easy real-time integration\nexport const useRealTimeChannel = (channel: string, subscriberId: string) => {\n  const subscribe = useRealTimeStore((state) => state.subscribe);\n  const unsubscribe = useRealTimeStore((state) => state.unsubscribe);\n\n  React.useEffect(() => {\n    subscribe(channel, subscriberId);\n\n    return () => {\n      unsubscribe(channel, subscriberId);\n    };\n  }, [channel, subscriberId, subscribe, unsubscribe]);\n};\n\nexport const useRealTimeEvent = (\n  event: string,\n  handler: (data: any) => void,\n  deps: React.DependencyList = []\n) => {\n  const addEventListener = useRealTimeStore((state) => state.addEventListener);\n  const removeEventListener = useRealTimeStore((state) => state.removeEventListener);\n\n  React.useEffect(() => {\n    const handlerId = addEventListener(event, handler);\n\n    return () => {\n      removeEventListener(event, handlerId);\n    };\n  }, [event, ...deps]);\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/stores/userManagementStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1959,1962],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1959,1962],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":272,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":272,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6870,6873],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6870,6873],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { devtools, persist } from 'zustand/middleware';\nimport { immer } from 'zustand/middleware/immer';\nimport type {\n  User,\n  QueryParams,\n  PaginatedResponse\n} from '@/types';\nimport { UserStatus } from '@/types';\n\nexport interface UserManagementState {\n  // Users data\n  users: User[];\n  selectedUsers: string[];\n  currentUser: User | null;\n\n  // Pagination and filtering\n  pagination: {\n    current: number;\n    pageSize: number;\n    total: number;\n    totalPages: number;\n  };\n\n  // Query state\n  query: QueryParams & {\n    status?: UserStatus;\n    roleId?: string;\n    dateRange?: [string, string];\n  };\n\n  // UI state\n  loading: boolean;\n  actionLoading: Record<string, boolean>; // Track loading state for specific actions\n  error: string | null;\n\n  // Bulk operations\n  bulkOperationProgress: {\n    total: number;\n    completed: number;\n    failed: number;\n    isRunning: boolean;\n  };\n\n  // User form state\n  userFormVisible: boolean;\n  userFormMode: 'create' | 'edit' | 'view';\n  userFormData: Partial<User> | null;\n\n  // Role assignment\n  roleAssignmentVisible: boolean;\n  roleAssignmentUser: User | null;\n\n  // User details\n  userDetailsVisible: boolean;\n  selectedUserDetails: User | null;\n\n  // Actions\n  setUsers: (response: PaginatedResponse<User>) => void;\n  addUser: (user: User) => void;\n  updateUser: (id: string, user: Partial<User>) => void;\n  removeUser: (id: string) => void;\n  removeUsers: (ids: string[]) => void;\n\n  setSelectedUsers: (userIds: string[]) => void;\n  toggleUserSelection: (userId: string) => void;\n  selectAllUsers: () => void;\n  clearSelection: () => void;\n\n  setCurrentUser: (user: User | null) => void;\n\n  // Pagination\n  setPagination: (pagination: Partial<UserManagementState['pagination']>) => void;\n  changePage: (page: number, pageSize?: number) => void;\n\n  // Query\n  setQuery: (query: Partial<UserManagementState['query']>) => void;\n  updateFilter: (key: string, value: any) => void;\n  clearFilters: () => void;\n\n  // Loading states\n  setLoading: (loading: boolean) => void;\n  setActionLoading: (action: string, loading: boolean) => void;\n  setError: (error: string | null) => void;\n\n  // Bulk operations\n  startBulkOperation: (total: number) => void;\n  updateBulkProgress: (completed: number, failed: number) => void;\n  completeBulkOperation: () => void;\n\n  // User form\n  openUserForm: (mode: 'create' | 'edit' | 'view', user?: User) => void;\n  closeUserForm: () => void;\n  setUserFormData: (data: Partial<User>) => void;\n\n  // Role assignment\n  openRoleAssignment: (user: User) => void;\n  closeRoleAssignment: () => void;\n\n  // User details\n  openUserDetails: (user: User) => void;\n  closeUserDetails: () => void;\n\n  // Computed actions\n  getFilteredUsers: () => User[];\n  getUserById: (id: string) => User | undefined;\n  getUsersByRole: (roleId: string) => User[];\n  getUsersByStatus: (status: UserStatus) => User[];\n\n  reset: () => void;\n}\n\nconst initialState = {\n  users: [],\n  selectedUsers: [],\n  currentUser: null,\n\n  pagination: {\n    current: 1,\n    pageSize: 20,\n    total: 0,\n    totalPages: 0,\n  },\n\n  query: {\n    page: 1,\n    pageSize: 20,\n    sortBy: 'createdAt',\n    sortOrder: 'desc' as const,\n    search: '',\n  },\n\n  loading: false,\n  actionLoading: {},\n  error: null,\n\n  bulkOperationProgress: {\n    total: 0,\n    completed: 0,\n    failed: 0,\n    isRunning: false,\n  },\n\n  userFormVisible: false,\n  userFormMode: 'create' as const,\n  userFormData: null,\n\n  roleAssignmentVisible: false,\n  roleAssignmentUser: null,\n\n  userDetailsVisible: false,\n  selectedUserDetails: null,\n};\n\nexport const useUserManagementStore = create<UserManagementState>()(\n  devtools(\n    persist(\n      immer((set, get) => ({\n        ...initialState,\n\n        setUsers: (response) => {\n          set((state) => {\n            state.users = response.data;\n            state.pagination = response.pagination;\n            state.error = null;\n          });\n        },\n\n        addUser: (user) => {\n          set((state) => {\n            state.users.unshift(user);\n            state.pagination.total += 1;\n          });\n        },\n\n        updateUser: (id, userData) => {\n          set((state) => {\n            const index = state.users.findIndex(u => u.id === id);\n            if (index !== -1) {\n              state.users[index] = { ...state.users[index], ...userData };\n            }\n\n            // Update current user if it's being edited\n            if (state.currentUser?.id === id) {\n              state.currentUser = { ...state.currentUser, ...userData };\n            }\n          });\n        },\n\n        removeUser: (id) => {\n          set((state) => {\n            state.users = state.users.filter(u => u.id !== id);\n            state.selectedUsers = state.selectedUsers.filter(uid => uid !== id);\n            state.pagination.total -= 1;\n\n            if (state.currentUser?.id === id) {\n              state.currentUser = null;\n            }\n          });\n        },\n\n        removeUsers: (ids) => {\n          set((state) => {\n            state.users = state.users.filter(u => !ids.includes(u.id));\n            state.selectedUsers = state.selectedUsers.filter(uid => !ids.includes(uid));\n            state.pagination.total -= ids.length;\n          });\n        },\n\n        setSelectedUsers: (userIds) => {\n          set((state) => {\n            state.selectedUsers = userIds;\n          });\n        },\n\n        toggleUserSelection: (userId) => {\n          set((state) => {\n            const index = state.selectedUsers.indexOf(userId);\n            if (index > -1) {\n              state.selectedUsers.splice(index, 1);\n            } else {\n              state.selectedUsers.push(userId);\n            }\n          });\n        },\n\n        selectAllUsers: () => {\n          set((state) => {\n            state.selectedUsers = state.users.map(u => u.id);\n          });\n        },\n\n        clearSelection: () => {\n          set((state) => {\n            state.selectedUsers = [];\n          });\n        },\n\n        setCurrentUser: (user) => {\n          set((state) => {\n            state.currentUser = user;\n          });\n        },\n\n        setPagination: (pagination) => {\n          set((state) => {\n            state.pagination = { ...state.pagination, ...pagination };\n          });\n        },\n\n        changePage: (page, pageSize) => {\n          set((state) => {\n            state.pagination.current = page;\n            if (pageSize) {\n              state.pagination.pageSize = pageSize;\n            }\n            state.query.page = page;\n            if (pageSize) {\n              state.query.pageSize = pageSize;\n            }\n          });\n        },\n\n        setQuery: (query) => {\n          set((state) => {\n            state.query = { ...state.query, ...query };\n          });\n        },\n\n        updateFilter: (key, value) => {\n          set((state) => {\n            (state.query as any)[key] = value;\n            // Reset to first page when filtering\n            state.query.page = 1;\n            state.pagination.current = 1;\n          });\n        },\n\n        clearFilters: () => {\n          set((state) => {\n            state.query = {\n              page: 1,\n              pageSize: state.query.pageSize || 10,\n              sortBy: 'createdAt',\n              sortOrder: 'desc',\n              search: '',\n            };\n            state.pagination.current = 1;\n          });\n        },\n\n        setLoading: (loading) => {\n          set((state) => {\n            state.loading = loading;\n          });\n        },\n\n        setActionLoading: (action, loading) => {\n          set((state) => {\n            if (loading) {\n              state.actionLoading[action] = true;\n            } else {\n              delete state.actionLoading[action];\n            }\n          });\n        },\n\n        setError: (error) => {\n          set((state) => {\n            state.error = error;\n          });\n        },\n\n        startBulkOperation: (total) => {\n          set((state) => {\n            state.bulkOperationProgress = {\n              total,\n              completed: 0,\n              failed: 0,\n              isRunning: true,\n            };\n          });\n        },\n\n        updateBulkProgress: (completed, failed) => {\n          set((state) => {\n            state.bulkOperationProgress.completed = completed;\n            state.bulkOperationProgress.failed = failed;\n          });\n        },\n\n        completeBulkOperation: () => {\n          set((state) => {\n            state.bulkOperationProgress.isRunning = false;\n          });\n        },\n\n        openUserForm: (mode, user) => {\n          set((state) => {\n            state.userFormVisible = true;\n            state.userFormMode = mode;\n            state.userFormData = user || null;\n          });\n        },\n\n        closeUserForm: () => {\n          set((state) => {\n            state.userFormVisible = false;\n            state.userFormData = null;\n          });\n        },\n\n        setUserFormData: (data) => {\n          set((state) => {\n            state.userFormData = { ...state.userFormData, ...data };\n          });\n        },\n\n        openRoleAssignment: (user) => {\n          set((state) => {\n            state.roleAssignmentVisible = true;\n            state.roleAssignmentUser = user;\n          });\n        },\n\n        closeRoleAssignment: () => {\n          set((state) => {\n            state.roleAssignmentVisible = false;\n            state.roleAssignmentUser = null;\n          });\n        },\n\n        openUserDetails: (user) => {\n          set((state) => {\n            state.userDetailsVisible = true;\n            state.selectedUserDetails = user;\n          });\n        },\n\n        closeUserDetails: () => {\n          set((state) => {\n            state.userDetailsVisible = false;\n            state.selectedUserDetails = null;\n          });\n        },\n\n        getFilteredUsers: () => {\n          const state = get();\n          let filtered = [...state.users];\n\n          // Apply filters\n          if (state.query.search) {\n            const searchLower = state.query.search.toLowerCase();\n            filtered = filtered.filter(user =>\n              user.username.toLowerCase().includes(searchLower) ||\n              user.email.toLowerCase().includes(searchLower) ||\n              user.displayName?.toLowerCase().includes(searchLower)\n            );\n          }\n\n          if (state.query.status) {\n            filtered = filtered.filter(user => user.status === state.query.status);\n          }\n\n          if (state.query.roleId) {\n            filtered = filtered.filter(user =>\n              user.roles.some(role => role.id === state.query.roleId)\n            );\n          }\n\n          return filtered;\n        },\n\n        getUserById: (id) => {\n          const state = get();\n          return state.users.find(user => user.id === id);\n        },\n\n        getUsersByRole: (roleId) => {\n          const state = get();\n          return state.users.filter(user =>\n            user.roles.some(role => role.id === roleId)\n          );\n        },\n\n        getUsersByStatus: (status) => {\n          const state = get();\n          return state.users.filter(user => user.status === status);\n        },\n\n        reset: () => {\n          set(() => initialState);\n        },\n      })),\n      {\n        name: 'user-management-store',\n        partialize: (state) => ({\n          pagination: state.pagination,\n          query: state.query,\n        }),\n      }\n    ),\n    {\n      name: 'user-management-store',\n      enabled: process.env.NODE_ENV === 'development',\n    }\n  )\n);\n\n// Selectors\nexport const useUsers = () => useUserManagementStore((state) => state.users);\nexport const useSelectedUsers = () => useUserManagementStore((state) => state.selectedUsers);\nexport const useCurrentUser = () => useUserManagementStore((state) => state.currentUser);\nexport const usePagination = () => useUserManagementStore((state) => state.pagination);\nexport const useQuery = () => useUserManagementStore((state) => state.query);\nexport const useUserManagementLoading = () => useUserManagementStore((state) => state.loading);\nexport const useUserManagementError = () => useUserManagementStore((state) => state.error);\nexport const useBulkOperationProgress = () => useUserManagementStore((state) => state.bulkOperationProgress);\nexport const useUserForm = () => useUserManagementStore((state) => ({\n  visible: state.userFormVisible,\n  mode: state.userFormMode,\n  data: state.userFormData,\n}));\nexport const useRoleAssignment = () => useUserManagementStore((state) => ({\n  visible: state.roleAssignmentVisible,\n  user: state.roleAssignmentUser,\n}));\nexport const useUserDetails = () => useUserManagementStore((state) => ({\n  visible: state.userDetailsVisible,\n  user: state.selectedUserDetails,\n}));\n\n// Computed selectors\nexport const useSelectedUsersCount = () => {\n  return useUserManagementStore((state) => state.selectedUsers.length);\n};\n\nexport const useHasSelectedUsers = () => {\n  return useUserManagementStore((state) => state.selectedUsers.length > 0);\n};\n\nexport const useUserStats = () => {\n  return useUserManagementStore((state) => {\n    const users = state.users;\n    const total = users.length;\n    const active = users.filter(u => u.status === UserStatus.Active).length;\n    const inactive = users.filter(u => u.status === UserStatus.Inactive).length;\n    const banned = users.filter(u => u.status === UserStatus.Banned).length;\n    const pending = users.filter(u => u.status === UserStatus.Pending).length;\n\n    return {\n      total,\n      active,\n      inactive,\n      banned,\n      pending,\n      activePercentage: total ? Math.round((active / total) * 100) : 0,\n    };\n  });\n};","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/test/setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/test/utils.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[643,646],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[643,646],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'permissions' is assigned a value but never used.","line":38,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'userRole' is assigned a value but never used.","line":39,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":61,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1739,1742],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1739,1742],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2026,2029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2026,2029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2587,2590],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2587,2590],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2926,2929],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2926,2929],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":133,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":133,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3458,3461],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3458,3461],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":162,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3960,3963],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3960,3963],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":175,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4432,4435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4432,4435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":212,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5570,5573],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5570,5573],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":218,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5719,5722],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5719,5722],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"This rule can't verify that `export *` only exports components.","line":312,"column":1,"nodeType":"ExportAllDeclaration","messageId":"exportAll","endLine":312,"endColumn":40}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { ReactElement } from 'react';\nimport { render, RenderOptions } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { MemoryRouter } from 'react-router-dom';\nimport { ConfigProvider } from 'antd';\nimport enUS from 'antd/locale/en_US';\nimport { PermissionProvider } from '../contexts/PermissionContext';\n\n// Custom render function that includes all providers\ninterface CustomRenderOptions extends Omit<RenderOptions, 'wrapper'> {\n  initialEntries?: string[];\n  permissions?: string[];\n  userRole?: string;\n  locale?: any;\n  queryClient?: QueryClient;\n}\n\nconst createTestQueryClient = () => {\n  return new QueryClient({\n    defaultOptions: {\n      queries: {\n        retry: false,\n        gcTime: 0,\n        staleTime: 0,\n      },\n      mutations: {\n        retry: false,\n      },\n    },\n  });\n};\n\nexport const renderWithProviders = (\n  ui: ReactElement,\n  {\n    initialEntries = ['/'],\n    permissions = ['read:all', 'write:all'],\n    userRole = 'admin',\n    locale = enUS,\n    queryClient = createTestQueryClient(),\n    ...renderOptions\n  }: CustomRenderOptions = {}\n) => {\n  const AllProviders: React.FC<{ children: React.ReactNode }> = ({ children }) => (\n    <QueryClientProvider client={queryClient}>\n      <MemoryRouter initialEntries={initialEntries}>\n        <ConfigProvider locale={locale}>\n          <PermissionProvider>\n            {children}\n          </PermissionProvider>\n        </ConfigProvider>\n      </MemoryRouter>\n    </QueryClientProvider>\n  );\n\n  return render(ui, { wrapper: AllProviders, ...renderOptions });\n};\n\n// Mock data generators\nexport const generateMockUser = (overrides: Partial<any> = {}) => ({\n  id: '1',\n  username: 'test@example.com',\n  displayName: 'Test User',\n  role: 'user',\n  status: 'active',\n  createdAt: '2024-01-01T00:00:00Z',\n  lastLogin: '2024-01-15T10:30:00Z',\n  avatar: null,\n  ...overrides,\n});\n\nexport const generateMockPost = (overrides: Partial<any> = {}) => ({\n  id: '1',\n  title: 'Test Post',\n  content: 'This is a test post content',\n  excerpt: 'Test excerpt',\n  status: 'published',\n  categoryId: '1',\n  category: { id: '1', name: 'Technology' },\n  tags: [{ id: '1', name: 'test' }, { id: '2', name: 'post' }],\n  authorId: '1',\n  author: generateMockUser({ role: 'author' }),\n  createdAt: '2024-01-01T00:00:00Z',\n  updatedAt: '2024-01-01T00:00:00Z',\n  publishedAt: '2024-01-01T00:00:00Z',\n  viewCount: 100,\n  commentCount: 5,\n  ...overrides,\n});\n\nexport const generateMockComment = (overrides: Partial<any> = {}) => ({\n  id: '1',\n  content: 'This is a test comment',\n  status: 'approved',\n  postId: '1',\n  authorId: '1',\n  author: generateMockUser(),\n  parentId: null,\n  createdAt: '2024-01-01T00:00:00Z',\n  updatedAt: '2024-01-01T00:00:00Z',\n  replies: [],\n  ...overrides,\n});\n\nexport const generateMockDashboardStats = (overrides: Partial<any> = {}) => ({\n  userStats: {\n    total: 1000,\n    active: 750,\n    newToday: 25,\n    newThisWeek: 150,\n    newThisMonth: 300,\n  },\n  contentStats: {\n    publishedPosts: 500,\n    drafts: 50,\n    postsToday: 5,\n    postsThisWeek: 25,\n    postsThisMonth: 100,\n    totalViews: 50000,\n    viewsToday: 1000,\n  },\n  systemStats: {\n    viewsTotal: 100000,\n    viewsToday: 2000,\n    performanceScore: 92.5,\n    uptime: '99.9%',\n    responseTime: 150,\n  },\n  ...overrides,\n});\n\nexport const generateMockSystemMetrics = (overrides: Partial<any> = {}) => ({\n  cpu: {\n    usage: 65,\n    cores: 8,\n  },\n  memory: {\n    usage: 78,\n    used: 6442450944,\n    total: 8589934592,\n  },\n  disk: {\n    usage: 45,\n    used: 4831838208,\n    total: 10737418240,\n  },\n  network: {\n    bytesIn: 1048576000,\n    bytesOut: 524288000,\n  },\n  application: {\n    uptime: 864000000,\n    requestCount: 15432,\n    errorCount: 23,\n    responseTime: 125,\n    activeConnections: 150,\n  },\n  ...overrides,\n});\n\nexport const generateMockHealthCheck = (overrides: Partial<any> = {}) => ({\n  status: 'healthy' as const,\n  timestamp: '2024-01-15T10:30:00Z',\n  checks: {\n    database: { status: 'pass' as const, responseTime: 10 },\n    cache: { status: 'pass' as const, responseTime: 5 },\n    storage: { status: 'warn' as const, responseTime: 100 },\n    api: { status: 'pass' as const, responseTime: 50 },\n    search: { status: 'pass' as const, responseTime: 25 },\n  },\n  ...overrides,\n});\n\nexport const generateMockActivity = (overrides: Partial<any> = {}) => ({\n  id: '1',\n  type: 'user_login' as const,\n  description: 'User logged in',\n  user: generateMockUser(),\n  metadata: {},\n  createdAt: '2024-01-15T08:30:00Z',\n  ...overrides,\n});\n\n// Test utilities for common interactions\nexport const waitForLoadingToFinish = async () => {\n  // Wait for loading spinners to disappear\n  await new Promise(resolve => setTimeout(resolve, 100));\n};\n\nexport const expectElementToBeAccessible = (element: HTMLElement) => {\n  // Check for basic accessibility attributes\n  if (element.tagName === 'BUTTON') {\n    expect(element).toHaveAttribute('type');\n  }\n  \n  if (element.getAttribute('role') === 'button') {\n    expect(element).toHaveAttribute('tabindex');\n  }\n  \n  // Check for form elements\n  if (['INPUT', 'TEXTAREA', 'SELECT'].includes(element.tagName)) {\n    const label = document.querySelector(`label[for=\"${element.id}\"]`);\n    const ariaLabel = element.getAttribute('aria-label');\n    const ariaLabelledBy = element.getAttribute('aria-labelledby');\n    \n    expect(label || ariaLabel || ariaLabelledBy).toBeTruthy();\n  }\n};\n\n// Mock API responses\nexport const mockApiResponse = (data: any, delay = 0) => {\n  return new Promise(resolve => {\n    setTimeout(() => resolve({ data }), delay);\n  });\n};\n\nexport const mockApiError = (error: any, delay = 0) => {\n  return new Promise((_, reject) => {\n    setTimeout(() => reject(error), delay);\n  });\n};\n\n// Helper for testing permission-based rendering\nexport const renderWithPermissions = (\n  ui: ReactElement,\n  permissions: string[],\n  userRole: string = 'user'\n) => {\n  return renderWithProviders(ui, { permissions, userRole });\n};\n\n// Helper for testing with different user roles\nexport const renderAsAdmin = (ui: ReactElement) => {\n  return renderWithPermissions(ui, ['read:all', 'write:all', 'admin:all'], 'admin');\n};\n\nexport const renderAsModerator = (ui: ReactElement) => {\n  return renderWithPermissions(ui, ['read:all', 'write:content', 'moderate:all'], 'moderator');\n};\n\nexport const renderAsUser = (ui: ReactElement) => {\n  return renderWithPermissions(ui, ['read:public'], 'user');\n};\n\n// Custom matchers for testing\nexport const expectToBeVisible = (element: HTMLElement | null) => {\n  expect(element).toBeInTheDocument();\n  expect(element).toBeVisible();\n};\n\nexport const expectToHaveCorrectRole = (element: HTMLElement, expectedRole: string) => {\n  expect(element).toHaveAttribute('role', expectedRole);\n};\n\nexport const expectToBeAccessible = (element: HTMLElement) => {\n  expectElementToBeAccessible(element);\n};\n\n// Data table testing utilities\nexport const expectTableToHaveRows = (table: HTMLElement, expectedRowCount: number) => {\n  const rows = table.querySelectorAll('tbody tr');\n  expect(rows).toHaveLength(expectedRowCount);\n};\n\nexport const expectTableToHaveColumns = (table: HTMLElement, expectedColumns: string[]) => {\n  const headers = table.querySelectorAll('thead th');\n  expectedColumns.forEach((columnName, index) => {\n    expect(headers[index]).toHaveTextContent(columnName);\n  });\n};\n\nexport const expectTableToBeLoading = (table: HTMLElement) => {\n  const loadingSpinner = table.querySelector('.ant-spin');\n  expect(loadingSpinner).toBeInTheDocument();\n};\n\n// Chart testing utilities\nexport const expectChartToBeRendered = (chartContainer: HTMLElement) => {\n  const canvas = chartContainer.querySelector('canvas');\n  const svg = chartContainer.querySelector('svg');\n  expect(canvas || svg).toBeInTheDocument();\n};\n\nexport const expectChartToHaveData = (chartContainer: HTMLElement) => {\n  expectChartToBeRendered(chartContainer);\n  // Additional checks for chart data can be added here\n};\n\n// Form testing utilities\nexport const fillFormField = async (\n  fieldName: string,\n  value: string,\n  container?: HTMLElement\n) => {\n  const field = container \n    ? container.querySelector(`[data-testid=\"${fieldName}\"]`)\n    : document.querySelector(`[data-testid=\"${fieldName}\"]`);\n  \n  expect(field).toBeInTheDocument();\n  \n  if (field?.tagName === 'INPUT') {\n    await userEvent.clear(field as HTMLInputElement);\n    await userEvent.type(field as HTMLInputElement, value);\n  } else if (field?.tagName === 'TEXTAREA') {\n    await userEvent.clear(field as HTMLTextAreaElement);\n    await userEvent.type(field as HTMLTextAreaElement, value);\n  }\n};\n\n// Re-export testing library utilities\nexport * from '@testing-library/react';\nexport { default as userEvent } from '@testing-library/user-event';","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/types/analytics.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":306,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6029,6032],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6029,6032],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":330,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":330,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6589,6592],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6589,6592],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":340,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":340,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6795,6798],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6795,6798],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":341,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":341,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6826,6829],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6826,6829],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Analytics specific types\n\n// Time ranges for analytics\nexport type TimeRange = 'today' | 'yesterday' | 'week' | 'month' | 'quarter' | 'year' | 'custom';\n\nexport interface TimeRangeOption {\n  label: string;\n  value: TimeRange;\n  days?: number;\n}\n\n// Analytics Overview\nexport interface AnalyticsOverview {\n  period: {\n    start: string;\n    end: string;\n  };\n  metrics: {\n    totalVisits: number;\n    uniqueVisitors: number;\n    pageViews: number;\n    avgSessionDuration: number;\n    bounceRate: number;\n    conversionRate: number;\n  };\n  trends: {\n    visitsChange: number;\n    visitorsChange: number;\n    pageViewsChange: number;\n    durationChange: number;\n  };\n  topMetrics: {\n    peakHour: string;\n    peakDay: string;\n    topDevice: string;\n    topBrowser: string;\n    topCountry: string;\n  };\n}\n\n// Traffic Analytics\nexport interface TrafficData {\n  date: string;\n  visits: number;\n  uniqueVisitors: number;\n  pageViews: number;\n  bounceRate: number;\n  avgDuration: number;\n}\n\nexport interface TrafficSource {\n  source: string;\n  visits: number;\n  percentage: number;\n  trend: number;\n  icon?: string;\n  color?: string;\n}\n\nexport interface DeviceAnalytics {\n  device: string;\n  sessions: number;\n  percentage: number;\n  bounceRate: number;\n  avgDuration: number;\n}\n\nexport interface GeographicData {\n  country: string;\n  region?: string;\n  city?: string;\n  visits: number;\n  percentage: number;\n  avgDuration: number;\n  bounceRate: number;\n  coordinates?: [number, number];\n}\n\n// User Analytics\nexport interface UserBehavior {\n  metric: string;\n  value: number;\n  change: number;\n  details?: {\n    new: number;\n    returning: number;\n    engaged: number;\n  };\n}\n\nexport interface UserFlow {\n  page: string;\n  entries: number;\n  exits: number;\n  dropoffs: number;\n  conversions: number;\n  avgTime: number;\n}\n\nexport interface UserSegment {\n  name: string;\n  count: number;\n  percentage: number;\n  characteristics: {\n    avgAge?: number;\n    topInterests?: string[];\n    avgSessionsPerUser?: number;\n    avgValuePerUser?: number;\n  };\n  trend: number;\n}\n\nexport interface UserActivity {\n  hour: number;\n  monday: number;\n  tuesday: number;\n  wednesday: number;\n  thursday: number;\n  friday: number;\n  saturday: number;\n  sunday: number;\n}\n\n// Content Analytics\nexport interface ContentMetrics {\n  contentId: string;\n  title: string;\n  type: 'post' | 'page' | 'media';\n  author: string;\n  publishDate: string;\n  views: number;\n  uniqueViews: number;\n  avgTimeOnPage: number;\n  bounceRate: number;\n  shares: number;\n  comments: number;\n  likes: number;\n  conversionRate: number;\n  engagementScore: number;\n  trend: number;\n}\n\nexport interface ContentPerformance {\n  period: string;\n  topContent: ContentMetrics[];\n  risingContent: ContentMetrics[];\n  decliningContent: ContentMetrics[];\n  categories: CategoryPerformance[];\n  tags: TagPerformance[];\n}\n\nexport interface CategoryPerformance {\n  category: string;\n  posts: number;\n  totalViews: number;\n  avgViews: number;\n  engagementRate: number;\n  trend: number;\n}\n\nexport interface TagPerformance {\n  tag: string;\n  posts: number;\n  views: number;\n  engagement: number;\n  trend: number;\n}\n\nexport interface AuthorPerformance {\n  authorId: string;\n  authorName: string;\n  avatar?: string;\n  posts: number;\n  totalViews: number;\n  avgViews: number;\n  totalEngagement: number;\n  avgEngagement: number;\n  topPost: string;\n  followers?: number;\n  trend: number;\n}\n\n// Engagement Analytics\nexport interface EngagementMetrics {\n  totalInteractions: number;\n  likes: number;\n  comments: number;\n  shares: number;\n  saves: number;\n  engagementRate: number;\n  viralityScore: number;\n}\n\nexport interface SocialMetrics {\n  platform: 'facebook' | 'twitter' | 'linkedin' | 'instagram' | 'pinterest' | 'reddit';\n  shares: number;\n  clicks: number;\n  conversions: number;\n  engagement: number;\n}\n\n// Conversion Analytics\nexport interface ConversionFunnel {\n  stage: string;\n  users: number;\n  dropoff: number;\n  conversionRate: number;\n  avgTimeToNext: number;\n}\n\nexport interface GoalMetrics {\n  goalId: string;\n  goalName: string;\n  type: 'pageview' | 'event' | 'duration' | 'custom';\n  completions: number;\n  conversionRate: number;\n  value: number;\n  trend: number;\n}\n\n// Real-time Analytics\nexport interface RealTimeData {\n  activeUsers: number;\n  activeSessions: number;\n  pageViewsPerMinute: number;\n  topPages: Array<{\n    path: string;\n    users: number;\n    percentage: number;\n  }>;\n  topReferrers: Array<{\n    source: string;\n    users: number;\n  }>;\n  topLocations: Array<{\n    location: string;\n    users: number;\n  }>;\n  recentEvents: Array<{\n    timestamp: string;\n    event: string;\n    user?: string;\n    details?: string;\n  }>;\n}\n\n// SEO Analytics\nexport interface SEOMetrics {\n  organicTraffic: number;\n  keywords: Array<{\n    keyword: string;\n    impressions: number;\n    clicks: number;\n    ctr: number;\n    position: number;\n    trend: number;\n  }>;\n  backlinks: number;\n  domainAuthority: number;\n  pageSpeed: {\n    mobile: number;\n    desktop: number;\n  };\n  crawlErrors: number;\n}\n\n// Performance Analytics\nexport interface PerformanceMetrics {\n  loadTime: number;\n  firstContentfulPaint: number;\n  largestContentfulPaint: number;\n  totalBlockingTime: number;\n  cumulativeLayoutShift: number;\n  firstInputDelay: number;\n  timeToInteractive: number;\n  serverResponseTime: number;\n  coreWebVitals: {\n    lcp: 'good' | 'needs-improvement' | 'poor';\n    fid: 'good' | 'needs-improvement' | 'poor';\n    cls: 'good' | 'needs-improvement' | 'poor';\n  };\n}\n\n// Revenue Analytics\nexport interface RevenueMetrics {\n  totalRevenue: number;\n  transactions: number;\n  avgOrderValue: number;\n  conversionRate: number;\n  revenuePerUser: number;\n  refundRate: number;\n  growth: number;\n  forecast: number;\n}\n\n// Custom Reports\nexport interface CustomReport {\n  id: string;\n  name: string;\n  description?: string;\n  metrics: string[];\n  dimensions: string[];\n  filters?: Array<{\n    field: string;\n    operator: 'equals' | 'contains' | 'greater' | 'less' | 'between';\n    value: any;\n  }>;\n  timeRange: TimeRange;\n  visualization: 'table' | 'line' | 'bar' | 'pie' | 'map' | 'heatmap';\n  schedule?: 'daily' | 'weekly' | 'monthly';\n  recipients?: string[];\n  createdBy: string;\n  createdAt: string;\n  lastRun?: string;\n}\n\n// Analytics Filters\nexport interface AnalyticsFilter {\n  timeRange: TimeRange;\n  startDate?: string;\n  endDate?: string;\n  segment?: string;\n  device?: string;\n  source?: string;\n  country?: string;\n  contentType?: string;\n  author?: string;\n  category?: string;\n  tags?: string[];\n  customDimensions?: Record<string, any>;\n}\n\n// Dashboard Widget\nexport interface DashboardWidget {\n  id: string;\n  type: 'metric' | 'chart' | 'table' | 'map' | 'custom';\n  title: string;\n  metric?: string;\n  visualization?: string;\n  data?: any;\n  config?: Record<string, any>;\n  position: {\n    x: number;\n    y: number;\n    w: number;\n    h: number;\n  };\n  refreshInterval?: number;\n}\n\n// Export formats\nexport type ExportFormat = 'csv' | 'excel' | 'pdf' | 'json';\n\nexport interface ExportOptions {\n  format: ExportFormat;\n  dateRange: {\n    start: string;\n    end: string;\n  };\n  metrics?: string[];\n  dimensions?: string[];\n  filters?: AnalyticsFilter;\n  includeCharts?: boolean;\n  includeRawData?: boolean;\n  compression?: boolean;\n}\n\n// Analytics Alerts\nexport interface AnalyticsAlert {\n  id: string;\n  name: string;\n  metric: string;\n  condition: 'above' | 'below' | 'equals' | 'change';\n  threshold: number;\n  frequency: 'realtime' | 'hourly' | 'daily' | 'weekly';\n  recipients: string[];\n  isActive: boolean;\n  lastTriggered?: string;\n  createdAt: string;\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/types/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[44,47],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[44,47],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[161,164],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[161,164],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[458,461],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[458,461],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":174,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3078,3081],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3078,3081],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":198,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":198,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3572,3575],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3572,3575],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":199,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3606,3609],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3606,3609],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":244,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4336,4339],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4336,4339],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":252,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":252,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4508,4511],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4508,4511],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":255,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":255,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4594,4597],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4594,4597],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":269,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":269,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4975,4978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4975,4978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5074,5077],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5074,5077],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":315,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":315,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5832,5835],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5832,5835],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":338,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":338,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6321,6324],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6321,6324],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":339,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":339,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6345,6348],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6345,6348],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":346,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":346,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6480,6483],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6480,6483],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":347,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":347,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6522,6525],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6522,6525],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":358,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":358,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6755,6758],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6755,6758],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":363,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6867,6870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6867,6870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// 基础类型定义\nexport interface BaseResponse<T = any> {\n  success: boolean;\n  data: T;\n  message?: string;\n  code?: number;\n}\n\nexport interface PaginatedResponse<T = any> extends BaseResponse<T[]> {\n  pagination: {\n    current: number;\n    pageSize: number;\n    total: number;\n    totalPages: number;\n  };\n}\n\nexport interface QueryParams {\n  page?: number;\n  pageSize?: number;\n  sortBy?: string;\n  sortOrder?: 'asc' | 'desc';\n  search?: string;\n  [key: string]: any;\n}\n\n// 用户相关类型\nexport interface User {\n  id: string;\n  username: string;\n  email: string;\n  displayName?: string;\n  avatar?: string;\n  roles: Role[];\n  status: UserStatus;\n  createdAt: string;\n  updatedAt: string;\n  lastLoginAt?: string;\n}\n\nexport interface Role {\n  id: string;\n  name: string;\n  description?: string;\n  permissions: Permission[];\n  level: number;\n  isBuiltIn: boolean;\n}\n\nexport interface Permission {\n  id: string;\n  name: string;\n  code: string;\n  description?: string;\n  category: string;\n  isActive: boolean;\n}\n\nexport enum UserStatus {\n  Active = 'active',\n  Inactive = 'inactive',\n  Banned = 'banned',\n  Pending = 'pending'\n}\n\n// 内容相关类型\nexport interface Post {\n  id: string;\n  title: string;\n  slug: string;\n  content: string;\n  excerpt?: string;\n  featuredImage?: string;\n  status: PostStatus;\n  publishedAt?: string;\n  authorId: string;\n  author: User;\n  categoryId?: string;\n  category?: Category;\n  tags: Tag[];\n  createdAt: string;\n  updatedAt: string;\n  viewCount: number;\n  commentCount: number;\n  likeCount: number;\n}\n\nexport interface Category {\n  id: string;\n  name: string;\n  slug: string;\n  description?: string;\n  parentId?: string;\n  parent?: Category;\n  children?: Category[];\n  postCount: number;\n  sortOrder: number;\n  isActive: boolean;\n  createdAt: string;\n}\n\nexport interface Tag {\n  id: string;\n  name: string;\n  slug: string;\n  description?: string;\n  color?: string;\n  postCount: number;\n  isActive: boolean;\n  createdAt: string;\n}\n\nexport enum PostStatus {\n  Draft = 'draft',\n  Published = 'published',\n  Scheduled = 'scheduled',\n  Archived = 'archived'\n}\n\n// 系统相关类型\nexport interface SystemConfig {\n  id: string;\n  key: string;\n  value: string;\n  type: ConfigType;\n  category: string;\n  description?: string;\n  isEditable: boolean;\n  isPublic: boolean;\n  updatedAt: string;\n  updatedBy: string;\n}\n\nexport enum ConfigType {\n  String = 'string',\n  Number = 'number',\n  Boolean = 'boolean',\n  JSON = 'json'\n}\n\n// 统计相关类型\nexport interface DashboardStats {\n  userStats: {\n    total: number;\n    active: number;\n    newToday: number;\n    trend: number;\n  };\n  contentStats: {\n    totalPosts: number;\n    publishedPosts: number;\n    drafts: number;\n    postsToday: number;\n    trend: number;\n  };\n  systemStats: {\n    viewsToday: number;\n    viewsTotal: number;\n    commentsToday: number;\n    commentsTotal: number;\n    performanceScore: number;\n  };\n  recentActivities: Activity[];\n}\n\nexport interface Activity {\n  id: string;\n  type: ActivityType;\n  description: string;\n  userId: string;\n  user: User;\n  entityType?: string;\n  entityId?: string;\n  metadata?: Record<string, any>;\n  createdAt: string;\n}\n\nexport enum ActivityType {\n  UserLogin = 'user_login',\n  UserRegister = 'user_register',\n  PostCreate = 'post_create',\n  PostUpdate = 'post_update',\n  PostDelete = 'post_delete',\n  CommentCreate = 'comment_create',\n  SystemUpdate = 'system_update'\n}\n\n// 审计日志类型\nexport interface AuditLog {\n  id: string;\n  action: string;\n  entityType: string;\n  entityId: string;\n  userId: string;\n  user: User;\n  ipAddress: string;\n  userAgent: string;\n  changes?: Record<string, any>;\n  metadata?: Record<string, any>;\n  createdAt: string;\n}\n\n// 监控相关类型\nexport interface SystemMetrics {\n  cpu: {\n    usage: number;\n    cores: number;\n  };\n  memory: {\n    used: number;\n    total: number;\n    usage: number;\n  };\n  disk: {\n    used: number;\n    total: number;\n    usage: number;\n  };\n  network: {\n    bytesIn: number;\n    bytesOut: number;\n  };\n  application: {\n    uptime: number;\n    requestCount: number;\n    errorCount: number;\n    responseTime: number;\n  };\n}\n\nexport interface HealthCheck {\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  checks: {\n    [key: string]: {\n      status: 'pass' | 'fail' | 'warn';\n      output?: string;\n      duration?: number;\n    };\n  };\n  timestamp: string;\n}\n\n// 表格相关类型\nexport interface TableColumn<T = any> {\n  key: string;\n  title: string;\n  dataIndex?: string;\n  width?: number;\n  fixed?: 'left' | 'right';\n  sortable?: boolean;\n  filterable?: boolean;\n  render?: (value: any, record: T, index: number) => React.ReactNode;\n}\n\nexport interface TableProps<T = any> {\n  columns: TableColumn<T>[];\n  dataSource: T[];\n  loading?: boolean;\n  pagination?: {\n    current: number;\n    pageSize: number;\n    total: number;\n    onChange: (page: number, pageSize: number) => void;\n  };\n  rowSelection?: {\n    selectedRowKeys: string[];\n    onChange: (selectedRowKeys: string[], selectedRows: T[]) => void;\n  };\n  onRow?: (record: T) => Record<string, any>;\n}\n\n// 路由相关类型\nexport interface RouteConfig {\n  path: string;\n  component: React.ComponentType<any>;\n  exact?: boolean;\n  meta?: {\n    title?: string;\n    requiresAuth?: boolean;\n    permissions?: string[];\n    icon?: React.ReactNode;\n    hideInMenu?: boolean;\n  };\n  children?: RouteConfig[];\n}\n\n// 全局状态类型\nexport interface GlobalState {\n  user: User | null;\n  permissions: string[];\n  collapsed: boolean;\n  theme: 'light' | 'dark';\n  loading: boolean;\n  notifications: Notification[];\n}\n\nexport interface Notification {\n  id: string;\n  type: 'success' | 'error' | 'warning' | 'info';\n  title: string;\n  description?: string;\n  duration?: number;\n  action?: {\n    text: string;\n    onClick: () => void;\n  };\n  createdAt: string;\n}\n\n// API相关类型\nexport interface ApiError {\n  message: string;\n  code?: string;\n  status?: number;\n  details?: Record<string, any>;\n}\n\nexport interface LoginRequest {\n  username: string;\n  password: string;\n  rememberMe?: boolean;\n}\n\nexport interface LoginResponse {\n  token: string;\n  refreshToken: string;\n  user: User;\n  expiresIn: number;\n}\n\n// 表单相关类型\nexport interface FormField {\n  name: string;\n  label: string;\n  type: 'text' | 'email' | 'password' | 'number' | 'select' | 'checkbox' | 'radio' | 'textarea' | 'date' | 'file';\n  required?: boolean;\n  placeholder?: string;\n  options?: { label: string; value: any }[];\n  validation?: any;\n  disabled?: boolean;\n  tooltip?: string;\n}\n\nexport interface FormProps {\n  fields: FormField[];\n  initialValues?: Record<string, any>;\n  onSubmit: (values: Record<string, any>) => void;\n  loading?: boolean;\n  submitText?: string;\n  cancelText?: string;\n  onCancel?: () => void;\n}\n\n// 图表相关类型\nexport interface ChartConfig {\n  type: 'line' | 'bar' | 'pie' | 'scatter' | 'heatmap';\n  title?: string;\n  data: any[];\n  xAxis?: string;\n  yAxis?: string;\n  series?: string[];\n  colors?: string[];\n  options?: Record<string, any>;\n}\n\n// 导出系统配置相关类型\nexport * from './systemConfig';\nexport * from './analytics';","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/types/systemConfig.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":98,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2423,2426],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2423,2426],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2626,2629],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2626,2629],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2658,2661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2658,2661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":112,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2777,2780],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2777,2780],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2869,2872],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2869,2872],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":152,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3581,3584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3581,3584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":166,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":166,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3915,3918],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3915,3918],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":167,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3958,3961],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3958,3961],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":167,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3967,3970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3967,3970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":168,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4003,4006],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4003,4006],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":195,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4551,4554],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4551,4554],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":196,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4576,4579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4576,4579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":202,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4741,4744],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4741,4744],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5475,5478],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5475,5478],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5485,5488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5485,5488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":303,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":303,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7124,7127],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7124,7127],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":359,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":359,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8474,8477],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8474,8477],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// System Configuration Types\n\nexport interface SystemConfiguration {\n  id: string;\n  version: string;\n  environment: 'development' | 'staging' | 'production';\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n  modifiedBy: string;\n  description?: string;\n  size?: number;\n\n  // General Settings\n  siteName: string;\n  siteDescription?: string;\n  siteUrl: string;\n  language: string;\n  timezone: string;\n\n  // Feature Switches\n  enableComments: boolean;\n  enableRegistration: boolean;\n  enableSearch: boolean;\n  enableAnalytics: boolean;\n  enableCache: boolean;\n  maintenanceMode: boolean;\n\n  // Content Settings\n  postsPerPage: number;\n  allowedFileTypes: string[];\n  maxFileSize: number;\n  enableAutoSave: boolean;\n  autoSaveInterval: number;\n\n  // Security Settings\n  sessionTimeout: number;\n  enableTwoFactor: boolean;\n  passwordMinLength: number;\n  enableCaptcha: boolean;\n  maxLoginAttempts: number;\n\n  // Third-party Integrations\n  googleAnalyticsId?: string;\n  emailProvider: 'smtp' | 'sendgrid' | 'mailgun';\n  smtpHost?: string;\n  smtpPort?: number;\n  smtpUsername?: string;\n  smtpPassword?: string;\n  sendgridApiKey?: string;\n  mailgunApiKey?: string;\n  cdnEnabled: boolean;\n  cdnUrl?: string;\n\n  // Database Configuration\n  databaseProvider?: 'sqlite' | 'postgresql' | 'mysql' | 'sqlserver' | 'oracle';\n  connectionString?: string;\n  connectionPoolSize?: number;\n  commandTimeout?: number;\n\n  // Caching Configuration\n  redisConnectionString?: string;\n  cacheDefaultExpiration?: number;\n  enableDistributedCache?: boolean;\n\n  // Logging Configuration\n  logLevel: 'trace' | 'debug' | 'info' | 'warn' | 'error' | 'fatal';\n  enableFileLogging: boolean;\n  enableDatabaseLogging: boolean;\n  logRetentionDays: number;\n\n  // Performance Settings\n  enableCompression: boolean;\n  enableMinification: boolean;\n  enableBundling: boolean;\n  maxRequestSize: number;\n  requestTimeout: number;\n\n  // API Configuration\n  apiRateLimit: number;\n  enableApiDocumentation: boolean;\n  apiVersioning: boolean;\n  corsOrigins: string[];\n\n  // Backup Configuration\n  enableAutomaticBackup: boolean;\n  backupSchedule?: string;\n  backupRetentionDays: number;\n  backupStorageProvider?: 'local' | 's3' | 'azure' | 'gcp';\n\n  // Monitoring Configuration\n  enableHealthChecks: boolean;\n  healthCheckInterval: number;\n  enableMetrics: boolean;\n  metricsEndpoint?: string;\n\n  // Custom Configuration\n  customSettings?: Record<string, any>;\n}\n\nexport interface ConfigurationField {\n  key: string;\n  label: string;\n  type: 'input' | 'textarea' | 'number' | 'switch' | 'select' | 'tags' | 'password';\n  required?: boolean;\n  defaultValue?: any;\n  options?: Array<{ value: any; label: string }>;\n  validation?: {\n    min?: number;\n    max?: number;\n    pattern?: RegExp;\n    custom?: (value: any) => boolean | string;\n  };\n  tooltip?: string;\n  dependsOn?: string;\n  dependsOnValue?: any;\n  warning?: boolean;\n  span?: number;\n  group?: string;\n}\n\nexport interface ConfigurationSection {\n  key: string;\n  title: string;\n  description: string;\n  icon: string;\n  fields: ConfigurationField[];\n  order?: number;\n  collapsed?: boolean;\n}\n\nexport interface ConfigurationTemplate {\n  id: string;\n  name: string;\n  description: string;\n  category: string;\n  config: Partial<SystemConfiguration>;\n  tags?: string[];\n  isDefault?: boolean;\n  isPublic?: boolean;\n  createdBy?: string;\n  createdAt: string;\n  updatedAt: string;\n  usageCount?: number;\n}\n\nexport interface ConfigurationValidationError {\n  field: string;\n  message: string;\n  severity: 'error' | 'warning' | 'info';\n  code?: string;\n  value?: any;\n}\n\nexport interface ConfigurationValidationResult {\n  isValid: boolean;\n  errors: ConfigurationValidationError[];\n  warnings: ConfigurationValidationError[];\n  suggestions?: ConfigurationValidationError[];\n}\n\nexport interface ConfigurationDiff {\n  fromVersion: string;\n  toVersion: string;\n  changes: {\n    added: Record<string, any>;\n    modified: Record<string, { from: any; to: any }>;\n    removed: Record<string, any>;\n  };\n  summary: {\n    addedCount: number;\n    modifiedCount: number;\n    removedCount: number;\n    totalChanges: number;\n  };\n}\n\nexport interface ConfigurationBackup {\n  id: string;\n  configId: string;\n  version: string;\n  description: string;\n  createdAt: string;\n  createdBy: string;\n  size: number;\n  checksum: string;\n  tags?: string[];\n}\n\nexport interface ConfigurationConflict {\n  id: string;\n  configId: string;\n  field: string;\n  conflictType: 'concurrent_modification' | 'validation_failure' | 'dependency_conflict';\n  currentValue: any;\n  conflictingValue: any;\n  timestamp: string;\n  userId: string;\n  isResolved: boolean;\n  resolution?: {\n    action: 'keep_current' | 'use_conflicting' | 'merge' | 'custom';\n    value?: any;\n    resolvedBy: string;\n    resolvedAt: string;\n    reason?: string;\n  };\n}\n\nexport interface ConfigurationApproval {\n  id: string;\n  configId: string;\n  requestedBy: string;\n  requestedAt: string;\n  changes: Partial<SystemConfiguration>;\n  reason: string;\n  status: 'pending' | 'approved' | 'rejected' | 'expired';\n  approvedBy?: string;\n  approvedAt?: string;\n  rejectionReason?: string;\n  expiresAt: string;\n  priority: 'low' | 'medium' | 'high' | 'critical';\n}\n\nexport interface ConfigurationAudit {\n  id: string;\n  action: 'CREATE' | 'UPDATE' | 'DELETE' | 'ROLLBACK' | 'BACKUP' | 'RESTORE' | 'APPLY_TEMPLATE';\n  configId: string;\n  userId: string;\n  userName: string;\n  timestamp: string;\n  changes: Record<string, { from?: any; to?: any }>;\n  metadata?: {\n    ip: string;\n    userAgent: string;\n    sessionId: string;\n    reason?: string;\n    approvalId?: string;\n    templateId?: string;\n  };\n  ip: string;\n  userAgent: string;\n}\n\nexport interface ConfigurationImpactAnalysis {\n  configId: string;\n  affectedServices: string[];\n  performanceImpact: number; // 0-100 percentage\n  riskLevel: 'low' | 'medium' | 'high' | 'critical';\n  requiresRestart: boolean;\n  estimatedDowntime?: number; // minutes\n  warnings: string[];\n  recommendations: string[];\n  dependencies: Array<{\n    service: string;\n    impact: 'none' | 'minor' | 'major' | 'breaking';\n    description: string;\n  }>;\n}\n\nexport interface ConfigurationDeployment {\n  id: string;\n  configId: string;\n  environment: string;\n  status: 'pending' | 'deploying' | 'deployed' | 'failed' | 'rolled_back';\n  deployedBy: string;\n  deployedAt?: string;\n  rollbackReason?: string;\n  deploymentLog: Array<{\n    timestamp: string;\n    level: 'info' | 'warn' | 'error';\n    message: string;\n    service?: string;\n  }>;\n}\n\nexport interface ConfigurationMetrics {\n  configId: string;\n  timestamp: string;\n  metrics: {\n    responseTime: number;\n    errorRate: number;\n    throughput: number;\n    memoryUsage: number;\n    cpuUsage: number;\n    diskUsage: number;\n    activeConnections: number;\n    cacheHitRate?: number;\n  };\n}\n\nexport interface ConfigurationSchema {\n  version: string;\n  sections: ConfigurationSection[];\n  validationRules: Array<{\n    field: string;\n    rule: string;\n    message: string;\n    severity: 'error' | 'warning';\n  }>;\n  dependencies: Array<{\n    field: string;\n    dependsOn: string;\n    condition: any;\n  }>;\n  migrations?: Array<{\n    fromVersion: string;\n    toVersion: string;\n    script: string;\n  }>;\n}\n\n// API Response Types\nexport interface SystemConfigResponse {\n  config: SystemConfiguration;\n  schema: ConfigurationSchema;\n  validationResult: ConfigurationValidationResult;\n  lastModified: string;\n}\n\nexport interface ConfigurationListResponse {\n  configs: SystemConfiguration[];\n  total: number;\n  page: number;\n  pageSize: number;\n}\n\nexport interface ConfigurationHistoryResponse {\n  history: SystemConfiguration[];\n  backups: ConfigurationBackup[];\n  total: number;\n}\n\nexport interface ConfigurationTemplateResponse {\n  templates: ConfigurationTemplate[];\n  categories: string[];\n  total: number;\n}\n\n// Hook State Types\nexport interface SystemConfigState {\n  configs: SystemConfiguration[];\n  currentConfig: SystemConfiguration | null;\n  configHistory: SystemConfiguration[];\n  templates: ConfigurationTemplate[];\n  validationErrors: ConfigurationValidationError[];\n  conflicts: ConfigurationConflict[];\n  approvals: ConfigurationApproval[];\n  isLoading: boolean;\n  isSaving: boolean;\n  isValidating: boolean;\n  lastError: string | null;\n}\n\n// Event Types\nexport interface ConfigurationEvent {\n  type: 'CONFIG_CHANGED' | 'VALIDATION_FAILED' | 'CONFLICT_DETECTED' | 'APPROVAL_REQUIRED';\n  configId: string;\n  timestamp: string;\n  data: any;\n}\n\nexport interface ConfigurationChangeEvent extends ConfigurationEvent {\n  type: 'CONFIG_CHANGED';\n  data: {\n    changes: Partial<SystemConfiguration>;\n    version: string;\n    userId: string;\n  };\n}\n\nexport interface ValidationFailedEvent extends ConfigurationEvent {\n  type: 'VALIDATION_FAILED';\n  data: {\n    errors: ConfigurationValidationError[];\n    config: Partial<SystemConfiguration>;\n  };\n}\n\nexport interface ConflictDetectedEvent extends ConfigurationEvent {\n  type: 'CONFLICT_DETECTED';\n  data: {\n    conflict: ConfigurationConflict;\n  };\n}\n\nexport interface ApprovalRequiredEvent extends ConfigurationEvent {\n  type: 'APPROVAL_REQUIRED';\n  data: {\n    approval: ConfigurationApproval;\n    changes: Partial<SystemConfiguration>;\n  };\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/utils/chartUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/utils/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/utils/message.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/utils/performanceMonitor.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/utils/permissions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/src/vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/admin/vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/e2e/blog.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/archive/ArchiveCalendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/archive/CategoryArchive.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/archive/TagCloud.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/archive/TimelineArchive.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/auth/LoginForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/auth/RegisterForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/blog/MarkdownEditor.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/blog/MarkdownEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/blog/PostList.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/blog/PostList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/blog/PostReader.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/blog/PostReader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/charts/BarChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/charts/LineChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/charts/PieChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/charts/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/common/DocumentHead.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/common/PreferencesPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/common/ProtectedRoute.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":266,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":266,"endColumn":32},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":293,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":293,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ProtectedRoute Component - Route protection with role-based access control\n * Handles authentication and authorization for protected pages\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth, useAuthLoading } from '../../hooks/useAuth';\nimport { ProtectedRouteProps, UserRole } from '../../types/auth';\nimport { cn } from '../../utils/cn';\n\n// Loading spinner component\nconst LoadingSpinner: React.FC<{ size?: 'sm' | 'md' | 'lg' }> = ({ size = 'md' }) => {\n  const sizeClasses = {\n    sm: 'w-6 h-6',\n    md: 'w-8 h-8',\n    lg: 'w-12 h-12',\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-[200px]\">\n      <div className=\"flex flex-col items-center space-y-4\">\n        <svg\n          className={cn('animate-spin text-blue-600', sizeClasses[size])}\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n        >\n          <circle\n            className=\"opacity-25\"\n            cx=\"12\"\n            cy=\"12\"\n            r=\"10\"\n            stroke=\"currentColor\"\n            strokeWidth=\"4\"\n          />\n          <path\n            className=\"opacity-75\"\n            fill=\"currentColor\"\n            d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n          />\n        </svg>\n        <p className=\"text-sm text-gray-600\">Loading...</p>\n      </div>\n    </div>\n  );\n};\n\n// Unauthorized access component\nconst UnauthorizedAccess: React.FC<{\n  message?: string;\n  showLoginButton?: boolean;\n  onLogin?: () => void;\n}> = ({\n  message = \"You don't have permission to access this page.\",\n  showLoginButton = true,\n  onLogin,\n}) => {\n  return (\n    <div className=\"flex items-center justify-center min-h-[400px] bg-gray-50\">\n      <div className=\"max-w-md mx-auto text-center px-4\">\n        <div className=\"mx-auto flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-6\">\n          <svg\n            className=\"w-8 h-8 text-red-600\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z\"\n            />\n          </svg>\n        </div>\n\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">\n          Access Denied\n        </h1>\n\n        <p className=\"text-gray-600 mb-6\">\n          {message}\n        </p>\n\n        {showLoginButton && (\n          <div className=\"space-y-3\">\n            {onLogin ? (\n              <button\n                onClick={onLogin}\n                className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors\"\n              >\n                Sign In\n              </button>\n            ) : (\n              <a\n                href=\"/login\"\n                className=\"inline-block w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors text-center\"\n              >\n                Sign In\n              </a>\n            )}\n\n            <a\n              href=\"/\"\n              className=\"inline-block w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors text-center\"\n            >\n              Go Home\n            </a>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Email verification required component\nconst EmailVerificationRequired: React.FC<{\n  onResendVerification?: () => void;\n  isResending?: boolean;\n}> = ({ onResendVerification, isResending = false }) => {\n  const [resendCooldown, setResendCooldown] = useState(0);\n\n  useEffect(() => {\n    if (resendCooldown > 0) {\n      const timer = setInterval(() => {\n        setResendCooldown(prev => prev - 1);\n      }, 1000);\n\n      return () => clearInterval(timer);\n    }\n  }, [resendCooldown]);\n\n  const handleResend = () => {\n    if (onResendVerification && resendCooldown === 0) {\n      onResendVerification();\n      setResendCooldown(60); // 60 second cooldown\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-[400px] bg-yellow-50\">\n      <div className=\"max-w-md mx-auto text-center px-4\">\n        <div className=\"mx-auto flex items-center justify-center w-16 h-16 bg-yellow-100 rounded-full mb-6\">\n          <svg\n            className=\"w-8 h-8 text-yellow-600\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n            aria-hidden=\"true\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"\n            />\n          </svg>\n        </div>\n\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">\n          Email Verification Required\n        </h1>\n\n        <p className=\"text-gray-600 mb-6\">\n          Please verify your email address to access this page. Check your inbox for a verification email.\n        </p>\n\n        {onResendVerification && (\n          <div className=\"space-y-3\">\n            <button\n              onClick={handleResend}\n              disabled={isResending || resendCooldown > 0}\n              className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              {isResending\n                ? 'Sending...'\n                : resendCooldown > 0\n                ? `Resend in ${resendCooldown}s`\n                : 'Resend Verification Email'\n              }\n            </button>\n\n            <a\n              href=\"/\"\n              className=\"inline-block w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors text-center\"\n            >\n              Go Home\n            </a>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Main ProtectedRoute component\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({\n  children,\n  roles,\n  requireEmailVerification = false,\n  fallback,\n  redirectTo = '/login',\n}) => {\n  const location = useLocation();\n  const { isAuthenticated, user, resendVerificationEmail } = useAuth();\n  const { isLoading } = useAuthLoading();\n\n  const [isResendingVerification, setIsResendingVerification] = useState(false);\n\n  // Handle email verification resend\n  const handleResendVerification = async () => {\n    setIsResendingVerification(true);\n    try {\n      await resendVerificationEmail();\n    } catch (error) {\n      console.error('Failed to resend verification email:', error);\n    } finally {\n      setIsResendingVerification(false);\n    }\n  };\n\n  // Show loading spinner while auth is being determined\n  if (isLoading) {\n    return fallback || <LoadingSpinner />;\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated || !user) {\n    const returnUrl = `${location.pathname}${location.search}`;\n    const loginUrl = `${redirectTo}?returnUrl=${encodeURIComponent(returnUrl)}`;\n    return <Navigate to={loginUrl} replace />;\n  }\n\n  // Check email verification requirement\n  if (requireEmailVerification && !user.isEmailVerified) {\n    return (\n      <EmailVerificationRequired\n        onResendVerification={handleResendVerification}\n        isResending={isResendingVerification}\n      />\n    );\n  }\n\n  // Check role-based access\n  if (roles && roles.length > 0) {\n    const hasRequiredRole = roles.includes(user.role);\n\n    if (!hasRequiredRole) {\n      const roleNames = roles.map(role => UserRole[role]).join(', ');\n      return (\n        <UnauthorizedAccess\n          message={`This page requires one of the following roles: ${roleNames}.`}\n          showLoginButton={false}\n        />\n      );\n    }\n  }\n\n  // User is authenticated and authorized\n  return <>{children}</>;\n};\n\n// Higher-order component version\nexport const withProtectedRoute = <P extends object>(\n  Component: React.ComponentType<P>,\n  routeProps: Omit<ProtectedRouteProps, 'children'>\n) => {\n  const WrappedComponent = (props: P) => (\n    <ProtectedRoute {...routeProps}>\n      <Component {...props} />\n    </ProtectedRoute>\n  );\n  WrappedComponent.displayName = `withProtectedRoute(${Component.displayName || Component.name})`;\n  return WrappedComponent;\n};\n\n// Role-specific route components for convenience\nexport const AdminRoute: React.FC<Pick<ProtectedRouteProps, 'children' | 'fallback' | 'redirectTo'>> = (props) => (\n  <ProtectedRoute roles={[UserRole.Admin]} {...props} />\n);\n\nexport const AuthorRoute: React.FC<Pick<ProtectedRouteProps, 'children' | 'fallback' | 'redirectTo'>> = (props) => (\n  <ProtectedRoute roles={[UserRole.Author, UserRole.Admin]} {...props} />\n);\n\nexport const VerifiedUserRoute: React.FC<Pick<ProtectedRouteProps, 'children' | 'fallback' | 'redirectTo'>> = (props) => (\n  <ProtectedRoute requireEmailVerification {...props} />\n);\n\n// Hook for programmatic route protection checks\nexport const useRouteProtection = () => {\n  const { isAuthenticated, user } = useAuth();\n  const { isLoading } = useAuthLoading();\n\n  const checkAccess = (\n    roles?: UserRole[],\n    requireEmailVerification = false\n  ): {\n    hasAccess: boolean;\n    reason?: 'not_authenticated' | 'insufficient_role' | 'email_not_verified' | 'loading';\n  } => {\n    if (isLoading) {\n      return { hasAccess: false, reason: 'loading' };\n    }\n\n    if (!isAuthenticated || !user) {\n      return { hasAccess: false, reason: 'not_authenticated' };\n    }\n\n    if (requireEmailVerification && !user.isEmailVerified) {\n      return { hasAccess: false, reason: 'email_not_verified' };\n    }\n\n    if (roles && roles.length > 0 && !roles.includes(user.role)) {\n      return { hasAccess: false, reason: 'insufficient_role' };\n    }\n\n    return { hasAccess: true };\n  };\n\n  const redirectToLogin = (returnUrl?: string) => {\n    const url = returnUrl ? `/login?returnUrl=${encodeURIComponent(returnUrl)}` : '/login';\n    window.location.href = url;\n  };\n\n  return {\n    checkAccess,\n    redirectToLogin,\n    isAuthenticated,\n    user,\n    isLoading,\n  };\n};\n\nexport default ProtectedRoute;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/common/RichTextRenderer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":115,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3809,3812],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3809,3812],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3884,3887],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3884,3887],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":124,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4196,4199],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4196,4199],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":125,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4249,4252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4249,4252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":126,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4326,4329],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4326,4329],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":184,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6126,6129],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6126,6129],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8768,8771],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8768,8771],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 富文本渲染器组件\n * 支持Markdown渲染、代码高亮、安全过滤等\n * 完整实现marked v16 API\n */\n\nimport React from 'react';\nimport { marked, Tokens, RendererObject, MarkedExtension } from 'marked';\nimport { markedHighlight } from 'marked-highlight';\nimport DOMPurify from 'dompurify';\nimport hljs from 'highlight.js';\nimport 'highlight.js/styles/github.css';\n\ninterface RichTextRendererProps {\n  content: string;\n  className?: string;\n  enableSyntaxHighlight?: boolean;\n  enableMath?: boolean;\n  allowedTags?: string[];\n  maxLength?: number;\n  enableTables?: boolean;\n  enableTaskLists?: boolean;\n  enableLinkify?: boolean;\n  sanitizeOptions?: DOMPurify.Config;\n}\n\n/**\n * 富文本渲染器组件\n */\nexport default function RichTextRenderer({\n  content,\n  className = '',\n  enableSyntaxHighlight = true,\n  enableMath: _enableMath = false,\n  allowedTags = [\n    'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n    'p', 'br', 'strong', 'em', 'u', 's', 'del',\n    'a', 'img', 'video', 'audio',\n    'ul', 'ol', 'li',\n    'blockquote', 'code', 'pre',\n    'table', 'thead', 'tbody', 'tr', 'th', 'td',\n    'div', 'span',\n    'hr', 'input'\n  ],\n  maxLength,\n  enableTables = true,\n  enableTaskLists = true,\n  enableLinkify: _enableLinkify = true,\n  sanitizeOptions\n}: RichTextRendererProps) {\n\n  // 创建自定义渲染器\n  const createCustomRenderer = React.useCallback((): Partial<RendererObject> => {\n    return {\n      // 自定义链接渲染（安全性）\n      link(token: Tokens.Link): string {\n        const { href, title, tokens } = token;\n        const text = this.parser?.parseInline(tokens) || '';\n        const isExternal = href && (href.startsWith('http://') || href.startsWith('https://'));\n        const target = isExternal ? ' target=\"_blank\"' : '';\n        const rel = isExternal ? ' rel=\"noopener noreferrer\"' : '';\n        const titleAttr = title ? ` title=\"${title}\"` : '';\n        return `<a href=\"${href}\"${target}${rel}${titleAttr}>${text}</a>`;\n      },\n\n      // 自定义图片渲染（延迟加载）\n      image(token: Tokens.Image): string {\n        const { href, title, text } = token;\n        const titleAttr = title ? ` title=\"${title}\"` : '';\n        const altAttr = text ? ` alt=\"${text}\"` : '';\n        return `<img src=\"${href}\" loading=\"lazy\"${titleAttr}${altAttr} class=\"max-w-full h-auto rounded-lg shadow-sm\" />`;\n      },\n\n      // 自定义代码块渲染\n      code(token: Tokens.Code): string {\n        const { text: code, lang: language } = token;\n        if (!enableSyntaxHighlight || !language) {\n          return `<pre><code class=\"language-${language || 'text'}\">${code}</code></pre>`;\n        }\n\n        try {\n          if (hljs.getLanguage(language)) {\n            const highlighted = hljs.highlight(code, { language }).value;\n            return `<div class=\"code-block relative\">\n              <div class=\"code-header bg-gray-100 px-4 py-2 text-sm text-gray-600 border-b\">\n                <span class=\"code-language font-mono\">${language}</span>\n              </div>\n              <pre class=\"hljs p-4 overflow-x-auto\"><code class=\"language-${language}\">${highlighted}</code></pre>\n            </div>`;\n          }\n        } catch (error) {\n          console.warn('Syntax highlighting failed:', error);\n        }\n\n        const autoDetected = hljs.highlightAuto(code);\n        return `<div class=\"code-block relative\">\n          <div class=\"code-header bg-gray-100 px-4 py-2 text-sm text-gray-600 border-b\">\n            <span class=\"code-language font-mono\">auto</span>\n          </div>\n          <pre class=\"hljs p-4 overflow-x-auto\"><code>${autoDetected.value}</code></pre>\n        </div>`;\n      },\n\n      // 自定义表格渲染\n      table(token: Tokens.Table): string {\n        if (!enableTables) {\n          return '';\n        }\n\n        let header = '';\n        let body = '';\n\n        // 处理表头\n        if (token.header && token.header.length > 0) {\n          const headerRow = token.header.map((cell: any) => {\n            const text = this.parser?.parseInline(cell.tokens as any) || '';\n            return `<th class=\"px-4 py-2 bg-gray-50 font-semibold text-left\">${text}</th>`;\n          }).join('');\n          header = `<thead><tr>${headerRow}</tr></thead>`;\n        }\n\n        // 处理表体\n        if (token.rows && token.rows.length > 0) {\n          const bodyRows = token.rows.map((row: any[]) => {\n            const cells = row.map((cell: any) => {\n              const text = this.parser?.parseInline(cell.tokens as any) || '';\n              return `<td class=\"px-4 py-2 border-b\">${text}</td>`;\n            }).join('');\n            return `<tr>${cells}</tr>`;\n          }).join('');\n          body = `<tbody>${bodyRows}</tbody>`;\n        }\n\n        return `<div class=\"table-responsive overflow-x-auto\">\n          <table class=\"table-auto w-full border-collapse border border-gray-200\">\n            ${header}\n            ${body}\n          </table>\n        </div>`;\n      },\n\n      // 自定义列表项渲染（支持任务列表）\n      listitem(token: Tokens.ListItem): string {\n        let text = this.parser?.parseInline(token.tokens) || '';\n\n        // 检查是否是任务列表项\n        if (enableTaskLists && token.task !== undefined) {\n          const checked = token.checked ? 'checked' : '';\n          text = `<input type=\"checkbox\" ${checked} disabled class=\"task-list-item-checkbox mr-2\" /> ${text}`;\n          return `<li class=\"task-list-item list-none\">${text}</li>`;\n        }\n\n        return `<li>${text}</li>`;\n      }\n    };\n  }, [enableSyntaxHighlight, enableTables, enableTaskLists]);\n\n  // 创建任务列表扩展\n  const createTaskListExtension = React.useCallback((): MarkedExtension => {\n    if (!enableTaskLists) {\n      return {};\n    }\n\n    return {\n      extensions: [\n        {\n          name: 'taskList',\n          level: 'inline',\n          start(src: string): number | undefined {\n            const match = src.match(/^\\[([x ])\\]\\s/);\n            return match ? match.index : undefined;\n          },\n          tokenizer(src: string) {\n            const rule = /^\\[([x ])\\]\\s/;\n            const match = rule.exec(src);\n            if (match) {\n              return {\n                type: 'taskList',\n                raw: match[0],\n                checked: match[1] === 'x'\n              };\n            }\n          },\n          renderer(token: any): string {\n            return `<input type=\"checkbox\" ${token.checked ? 'checked' : ''} disabled class=\"task-list-item-checkbox mr-2\" /> `;\n          }\n        }\n      ]\n    };\n  }, [enableTaskLists]);\n\n  // 处理内容\n  const processedContent = React.useMemo(() => {\n    if (!content || content.trim() === '') {\n      return '';\n    }\n\n    let processed = content;\n\n    // 应用长度限制\n    if (maxLength && processed.length > maxLength) {\n      processed = processed.substring(0, maxLength);\n      // 尝试在单词边界截断\n      const lastSpace = processed.lastIndexOf(' ');\n      if (lastSpace > maxLength * 0.8) {\n        processed = processed.substring(0, lastSpace);\n      }\n      processed += '...';\n    }\n\n    try {\n      // 创建marked实例的配置\n      const extensions: MarkedExtension[] = [];\n\n      // 添加语法高亮扩展\n      if (enableSyntaxHighlight) {\n        extensions.push(markedHighlight({\n          langPrefix: 'hljs language-',\n          highlight(code: string, lang: string): string {\n            try {\n              if (lang && hljs.getLanguage(lang)) {\n                return hljs.highlight(code, { language: lang }).value;\n              }\n              return hljs.highlightAuto(code).value;\n            } catch (error) {\n              return code;\n            }\n          }\n        }));\n      }\n\n      // 添加任务列表扩展\n      const taskListExt = createTaskListExtension();\n      if (taskListExt.extensions) {\n        extensions.push(taskListExt);\n      }\n\n      // 配置marked选项\n      marked.use({\n        pedantic: false,\n        gfm: true,\n        breaks: true,\n        renderer: createCustomRenderer()\n      });\n\n      // 应用扩展\n      if (extensions.length > 0) {\n        marked.use(...extensions);\n      }\n\n      // 使用marked解析Markdown\n      const htmlContent = marked.parse(processed, {\n        async: false,\n        gfm: true,\n        breaks: true\n      }) as string;\n\n      // 配置DOMPurify选项\n      const purifyConfig: DOMPurify.Config = {\n        ALLOWED_TAGS: allowedTags,\n        ALLOWED_ATTR: [\n          'href', 'title', 'alt', 'src', 'class', 'id',\n          'target', 'rel', 'loading', 'width', 'height',\n          'colspan', 'rowspan', 'type', 'checked', 'disabled'\n        ],\n        ALLOWED_URI_REGEXP: /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))/i,\n        ADD_ATTR: ['target', 'rel'],\n        FORBID_CONTENTS: ['script', 'style'],\n        FORBID_TAGS: ['script', 'style', 'iframe', 'object', 'embed', 'form', 'textarea', 'select', 'button'],\n        KEEP_CONTENT: true,\n        ...sanitizeOptions\n      };\n\n      // 使用DOMPurify清理HTML\n      const cleanHtml = DOMPurify.sanitize(htmlContent, purifyConfig as any);\n\n      return cleanHtml;\n    } catch (error) {\n      console.error('Markdown parsing error:', error);\n      // 回退到简单的HTML转义\n      return processed\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#x27;')\n        .replace(/\\n/g, '<br />');\n    }\n  }, [content, maxLength, allowedTags, enableSyntaxHighlight, sanitizeOptions, createCustomRenderer, createTaskListExtension]);\n\n  return (\n    <div\n      className={`rich-text-renderer prose prose-lg max-w-none ${className}`}\n      dangerouslySetInnerHTML={{ __html: processedContent }}\n      style={{\n        '--code-bg': '#f8f9fa',\n        '--code-border': '#e9ecef',\n        '--highlight-bg': '#fff3cd',\n        '--link-color': '#007bff',\n        '--quote-border': '#dee2e6',\n        '--table-border': '#dee2e6'\n      } as React.CSSProperties}\n    />\n  );\n}","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/common/SEOProvider.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":74,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":74,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * SEO Provider Component\n * Provides a context for managing SEO metadata across the application\n */\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useSEO } from '@/hooks/useSEO';\n\ninterface SEOContextType {\n  updateSEO: (config: SEOConfig) => void;\n  resetSEO: () => void;\n}\n\ninterface SEOConfig {\n  title?: string;\n  description?: string;\n  keywords?: string;\n  author?: string;\n  image?: string;\n  url?: string;\n  type?: 'website' | 'article' | 'profile';\n  publishedTime?: string;\n  modifiedTime?: string;\n  section?: string;\n  tags?: string[];\n  locale?: string;\n  siteName?: string;\n  twitterCard?: 'summary' | 'summary_large_image' | 'app' | 'player';\n  twitterSite?: string;\n  twitterCreator?: string;\n  canonical?: string;\n  robots?: string;\n  structuredData?: Record<string, unknown>;\n}\n\nconst SEOContext = createContext<SEOContextType | undefined>(undefined);\n\ninterface SEOProviderProps {\n  children: React.ReactNode;\n  defaultConfig?: SEOConfig;\n}\n\nexport function SEOProvider({ children, defaultConfig }: SEOProviderProps) {\n  const [seoConfig, setSEOConfig] = useState<SEOConfig>(defaultConfig || {\n    siteName: 'Maple Blog',\n    locale: 'zh_CN',\n    type: 'website',\n    twitterCard: 'summary_large_image',\n  });\n\n  // Use the SEO hook with current config\n  useSEO(seoConfig);\n\n  const updateSEO = (config: SEOConfig) => {\n    setSEOConfig(prev => ({ ...prev, ...config }));\n  };\n\n  const resetSEO = () => {\n    setSEOConfig(defaultConfig || {\n      siteName: 'Maple Blog',\n      locale: 'zh_CN',\n      type: 'website',\n      twitterCard: 'summary_large_image',\n    });\n  };\n\n  return (\n    <SEOContext.Provider value={{ updateSEO, resetSEO }}>\n      {children}\n    </SEOContext.Provider>\n  );\n}\n\nexport function usePageSEO() {\n  const context = useContext(SEOContext);\n  if (!context) {\n    throw new Error('usePageSEO must be used within SEOProvider');\n  }\n  return context;\n}\n\n// Enhanced DocumentHead component for backward compatibility\ninterface DocumentHeadProps {\n  title?: string;\n  description?: string;\n  keywords?: string;\n  children?: React.ReactNode;\n}\n\nexport function DocumentHead({ title, description, keywords }: DocumentHeadProps) {\n  const context = useContext(SEOContext);\n\n  // Always call useSEO hook - it will handle the logic internally\n  useSEO({ title, description, keywords });\n\n  useEffect(() => {\n    if (context) {\n      context.updateSEO({ title, description, keywords });\n    }\n\n    return () => {\n      if (context) {\n        context.resetSEO();\n      }\n    };\n  }, [title, description, keywords, context]);\n\n  return null;\n}\n\n// Export for compatibility with existing code\nexport const Helmet = DocumentHead;\nexport const HelmetProvider = SEOProvider;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/common/SearchBox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/common/SearchSuggestions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/common/ThemeToggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":156,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":156,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * ThemeToggle component - Theme switching with system preference detection\n * Features: Light/dark/auto modes, smooth transitions, accessibility support\n */\n\nimport React, { useEffect } from 'react';\nimport { Sun, Moon, Monitor } from 'lucide-react';\nimport { Button } from '../ui/Button';\nimport { useHomeStore, useCurrentTheme } from '../../stores/homeStore';\nimport { cn } from '../../utils/cn';\n\ninterface ThemeToggleProps {\n  className?: string;\n  size?: 'sm' | 'md' | 'lg';\n  showLabel?: boolean;\n  variant?: 'button' | 'dropdown';\n}\n\nexport const ThemeToggle: React.FC<ThemeToggleProps> = ({\n  className,\n  size = 'md',\n  showLabel = false,\n  variant = 'button',\n}) => {\n  const currentTheme = useCurrentTheme();\n  const { toggleTheme, setTheme } = useHomeStore();\n\n  // Apply theme to document\n  useEffect(() => {\n    const root = document.documentElement;\n    const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n\n    let appliedTheme: string;\n    if (currentTheme === 'auto') {\n      appliedTheme = systemTheme;\n    } else {\n      appliedTheme = currentTheme;\n    }\n\n    // Remove existing theme classes\n    root.classList.remove('light', 'dark');\n    // Add new theme class\n    root.classList.add(appliedTheme);\n\n    // Update meta theme-color for mobile browsers\n    const metaThemeColor = document.querySelector('meta[name=\"theme-color\"]');\n    if (metaThemeColor) {\n      metaThemeColor.setAttribute('content', appliedTheme === 'dark' ? '#111827' : '#ffffff');\n    }\n  }, [currentTheme]);\n\n  // Listen for system theme changes when in auto mode\n  useEffect(() => {\n    if (currentTheme !== 'auto') return;\n\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    const handleChange = () => {\n      const root = document.documentElement;\n      const systemTheme = mediaQuery.matches ? 'dark' : 'light';\n      root.classList.remove('light', 'dark');\n      root.classList.add(systemTheme);\n    };\n\n    mediaQuery.addEventListener('change', handleChange);\n    return () => mediaQuery.removeEventListener('change', handleChange);\n  }, [currentTheme]);\n\n  const getThemeIcon = (theme: string) => {\n    switch (theme) {\n      case 'light':\n        return <Sun size={size === 'sm' ? 16 : size === 'lg' ? 24 : 20} />;\n      case 'dark':\n        return <Moon size={size === 'sm' ? 16 : size === 'lg' ? 24 : 20} />;\n      case 'auto':\n        return <Monitor size={size === 'sm' ? 16 : size === 'lg' ? 24 : 20} />;\n      default:\n        return <Sun size={size === 'sm' ? 16 : size === 'lg' ? 24 : 20} />;\n    }\n  };\n\n  const getThemeLabel = (theme: string) => {\n    switch (theme) {\n      case 'light':\n        return '浅色模式';\n      case 'dark':\n        return '深色模式';\n      case 'auto':\n        return '跟随系统';\n      default:\n        return '浅色模式';\n    }\n  };\n\n  const handleThemeChange = (theme: 'light' | 'dark' | 'auto') => {\n    setTheme(theme);\n  };\n\n  if (variant === 'dropdown') {\n    const themes: Array<'light' | 'dark' | 'auto'> = ['light', 'dark', 'auto'];\n\n    return (\n      <div className={cn('space-y-1', className)}>\n        <label className=\"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide\">\n          主题设置\n        </label>\n        {themes.map((theme) => (\n          <button\n            key={theme}\n            onClick={() => handleThemeChange(theme)}\n            className={cn(\n              'flex items-center space-x-3 w-full px-3 py-2 rounded-lg text-sm transition-colors',\n              currentTheme === theme\n                ? 'bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-300'\n                : 'text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800'\n            )}\n          >\n            {getThemeIcon(theme)}\n            <span>{getThemeLabel(theme)}</span>\n            {currentTheme === theme && (\n              <div className=\"ml-auto w-2 h-2 bg-orange-500 rounded-full\"></div>\n            )}\n          </button>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size={size}\n      onClick={toggleTheme}\n      className={cn(\n        'transition-all duration-200 hover:scale-105',\n        showLabel ? 'space-x-2' : 'p-2',\n        className\n      )}\n      aria-label={`当前主题: ${getThemeLabel(currentTheme)}，点击切换主题`}\n      title={`当前: ${getThemeLabel(currentTheme)}`}\n    >\n      <span className=\"transition-transform duration-200\">\n        {getThemeIcon(currentTheme)}\n      </span>\n      {showLabel && (\n        <span className=\"text-sm font-medium\">\n          {getThemeLabel(currentTheme)}\n        </span>\n      )}\n    </Button>\n  );\n};\n\n/**\n * Theme preference detection hook\n */\nexport const useThemeDetection = () => {\n  const currentTheme = useCurrentTheme();\n\n  const getEffectiveTheme = (): 'light' | 'dark' => {\n    if (currentTheme === 'auto') {\n      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    }\n    return currentTheme as 'light' | 'dark';\n  };\n\n  const isDark = getEffectiveTheme() === 'dark';\n  const isLight = getEffectiveTheme() === 'light';\n  const isAuto = currentTheme === 'auto';\n\n  return {\n    currentTheme,\n    effectiveTheme: getEffectiveTheme(),\n    isDark,\n    isLight,\n    isAuto,\n  };\n};\n\n/**\n * Usage:\n * <ThemeToggle /> - Simple icon button\n * <ThemeToggle showLabel /> - Button with label\n * <ThemeToggle variant=\"dropdown\" /> - Dropdown menu with all options\n * <ThemeToggle size=\"lg\" /> - Larger button\n *\n * Features:\n * - Light, dark, and auto (system) theme modes\n * - Smooth transitions between themes\n * - System preference detection and auto-switching\n * - Accessible with proper ARIA labels\n * - Multiple display variants (button/dropdown)\n * - Persistent theme preference storage via Zustand\n * - Meta theme-color updates for mobile browsers\n * - Automatic DOM class management\n */","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/common/UserAvatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/ActiveAuthors.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/CategoryGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/FeaturedPosts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/HeroSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/PersonalizedFeed.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/PopularPosts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/ResponsiveLayout.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":460,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":460,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 响应式布局组件\n * 实现移动优先的响应式布局系统，支持断点管理和触摸友好的移动交互\n */\n\nimport React, { ReactNode, useState, useCallback, useEffect } from 'react';\nimport { useResponsive } from '../../hooks/useResponsive';\nimport { useTouchGestures } from '../../hooks/useTouchGestures';\nimport { cn } from '../../utils/cn';\n\n// 布局配置接口\nexport interface LayoutConfig {\n  // 主要区域\n  header: {\n    height: number;\n    sticky: boolean;\n    collapsed?: boolean;\n  };\n  sidebar: {\n    width: number;\n    collapsible: boolean;\n    collapsed?: boolean;\n    position: 'left' | 'right';\n  };\n  content: {\n    maxWidth?: number;\n    padding: number;\n    centered?: boolean;\n  };\n  footer: {\n    height: number;\n    sticky?: boolean;\n  };\n}\n\n// 响应式断点配置\nexport interface ResponsiveLayoutConfig {\n  xs: LayoutConfig;\n  sm: LayoutConfig;\n  md: LayoutConfig;\n  lg: LayoutConfig;\n  xl: LayoutConfig;\n  '2xl': LayoutConfig;\n}\n\n// 组件属性\nexport interface ResponsiveLayoutProps {\n  children?: ReactNode;\n  header?: ReactNode;\n  sidebar?: ReactNode;\n  footer?: ReactNode;\n  config?: Partial<ResponsiveLayoutConfig>;\n  className?: string;\n  enableTouchGestures?: boolean;\n  onSidebarToggle?: (collapsed: boolean) => void;\n  onLayoutChange?: (breakpoint: string) => void;\n}\n\n// 默认配置\nconst defaultLayoutConfig: ResponsiveLayoutConfig = {\n  xs: {\n    header: { height: 56, sticky: true, collapsed: false },\n    sidebar: { width: 0, collapsible: false, collapsed: true, position: 'left' },\n    content: { padding: 16, centered: true },\n    footer: { height: 60, sticky: false }\n  },\n  sm: {\n    header: { height: 60, sticky: true, collapsed: false },\n    sidebar: { width: 0, collapsible: false, collapsed: true, position: 'left' },\n    content: { padding: 20, centered: true },\n    footer: { height: 64, sticky: false }\n  },\n  md: {\n    header: { height: 64, sticky: true, collapsed: false },\n    sidebar: { width: 240, collapsible: true, collapsed: false, position: 'left' },\n    content: { padding: 24, centered: true, maxWidth: 1200 },\n    footer: { height: 80, sticky: false }\n  },\n  lg: {\n    header: { height: 68, sticky: true, collapsed: false },\n    sidebar: { width: 280, collapsible: true, collapsed: false, position: 'left' },\n    content: { padding: 32, centered: true, maxWidth: 1400 },\n    footer: { height: 100, sticky: false }\n  },\n  xl: {\n    header: { height: 72, sticky: true, collapsed: false },\n    sidebar: { width: 320, collapsible: true, collapsed: false, position: 'left' },\n    content: { padding: 40, centered: true, maxWidth: 1600 },\n    footer: { height: 120, sticky: false }\n  },\n  '2xl': {\n    header: { height: 80, sticky: true, collapsed: false },\n    sidebar: { width: 360, collapsible: true, collapsed: false, position: 'left' },\n    content: { padding: 48, centered: true, maxWidth: 1800 },\n    footer: { height: 140, sticky: false }\n  }\n};\n\n// 侧边栏移动手势组件\nconst SidebarGestureArea: React.FC<{\n  onSwipeOpen: () => void;\n  onSwipeClose: () => void;\n  className?: string;\n  children?: ReactNode;\n}> = ({ onSwipeOpen, onSwipeClose, className, children }) => {\n  const { touchHandlers } = useTouchGestures(\n    {\n      swipeThreshold: 50\n    },\n    {\n      onSwipeLeft: onSwipeClose,\n      onSwipeRight: onSwipeOpen\n    },\n    {} // DOM callbacks - 空对象因为我们使用React接口\n  );\n\n  return (\n    <div {...touchHandlers} className={className}>\n      {children}\n    </div>\n  );\n};\n\n// 移动端侧边栏遮罩\nconst SidebarOverlay: React.FC<{\n  visible: boolean;\n  onClose: () => void;\n}> = ({ visible, onClose }) => {\n  if (!visible) return null;\n\n  return (\n    <div\n      className={cn(\n        'fixed inset-0 bg-black/50 z-40 transition-opacity',\n        'backdrop-blur-sm md:hidden'\n      )}\n      onClick={onClose}\n      aria-label=\"关闭侧边栏\"\n    />\n  );\n};\n\n/**\n * 响应式布局主组件\n */\nexport const ResponsiveLayout: React.FC<ResponsiveLayoutProps> = ({\n  children,\n  header,\n  sidebar,\n  footer,\n  config = {},\n  className,\n  enableTouchGestures = true,\n  onSidebarToggle,\n  onLayoutChange\n}) => {\n  const {\n    breakpoint,\n    isMobile,\n    isTablet,\n    isDesktop: _isDesktop,\n    isTouchDevice: _isTouchDevice,\n    viewportWidth,\n    viewportHeight: _viewportHeight\n  } = useResponsive();\n\n  // 获取当前断点配置\n  const currentConfig: LayoutConfig = {\n    ...defaultLayoutConfig[breakpoint],\n    ...config[breakpoint]\n  };\n\n  // 侧边栏状态管理\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(\n    currentConfig.sidebar.collapsed ?? false\n  );\n  const [sidebarAnimating, setSidebarAnimating] = useState(false);\n\n  // 布局变化回调\n  useEffect(() => {\n    onLayoutChange?.(breakpoint);\n  }, [breakpoint, onLayoutChange]);\n\n  // 响应断点变化自动调整侧边栏\n  useEffect(() => {\n    const newCollapsed = currentConfig.sidebar.collapsed ?? false;\n    setSidebarCollapsed(newCollapsed);\n  }, [currentConfig.sidebar.collapsed]);\n\n  // 侧边栏切换\n  const toggleSidebar = useCallback(() => {\n    setSidebarAnimating(true);\n    const newCollapsed = !sidebarCollapsed;\n    setSidebarCollapsed(newCollapsed);\n    onSidebarToggle?.(newCollapsed);\n\n    // 动画完成后重置状态\n    setTimeout(() => {\n      setSidebarAnimating(false);\n    }, 300);\n  }, [sidebarCollapsed, onSidebarToggle]);\n\n  // 手势控制侧边栏\n  const handleSwipeOpen = useCallback(() => {\n    if (isMobile && sidebarCollapsed) {\n      toggleSidebar();\n    }\n  }, [isMobile, sidebarCollapsed, toggleSidebar]);\n\n  const handleSwipeClose = useCallback(() => {\n    if (isMobile && !sidebarCollapsed) {\n      toggleSidebar();\n    }\n  }, [isMobile, sidebarCollapsed, toggleSidebar]);\n\n  // 计算布局样式\n  const layoutStyles = {\n    '--header-height': `${currentConfig.header.height}px`,\n    '--sidebar-width': `${currentConfig.sidebar.width}px`,\n    '--content-padding': `${currentConfig.content.padding}px`,\n    '--footer-height': `${currentConfig.footer.height}px`,\n    '--content-max-width': currentConfig.content.maxWidth\n      ? `${currentConfig.content.maxWidth}px`\n      : 'none'\n  } as React.CSSProperties;\n\n  // 渲染内容区域\n  const renderContent = () => {\n    const contentClasses = cn(\n      'flex-1 transition-all duration-300 ease-in-out',\n      'min-h-0', // 防止flex子项溢出\n\n      // 基础样式\n      currentConfig.content.centered ? 'mx-auto' : '',\n\n      // 响应式间距\n      isMobile ? 'px-4' : isTablet ? 'px-6' : 'px-8',\n\n      // 侧边栏适配\n      !isMobile && sidebar && !sidebarCollapsed\n        ? currentConfig.sidebar.position === 'left'\n          ? 'ml-0'\n          : 'mr-0'\n        : '',\n\n      // 最大宽度\n      currentConfig.content.maxWidth ? `max-w-[${currentConfig.content.maxWidth}px]` : ''\n    );\n\n    const contentStyle = {\n      paddingTop: `${currentConfig.content.padding}px`,\n      paddingBottom: `${currentConfig.content.padding}px`,\n      marginLeft: !isMobile && sidebar && !sidebarCollapsed && currentConfig.sidebar.position === 'left'\n        ? `${currentConfig.sidebar.width}px`\n        : '0',\n      marginRight: !isMobile && sidebar && !sidebarCollapsed && currentConfig.sidebar.position === 'right'\n        ? `${currentConfig.sidebar.width}px`\n        : '0'\n    };\n\n    return (\n      <main className={contentClasses} style={contentStyle}>\n        {enableTouchGestures && isMobile ? (\n          <SidebarGestureArea\n            onSwipeOpen={handleSwipeOpen}\n            onSwipeClose={handleSwipeClose}\n            className=\"min-h-full\"\n          >\n            {children}\n          </SidebarGestureArea>\n        ) : (\n          children\n        )}\n      </main>\n    );\n  };\n\n  // 渲染侧边栏\n  const renderSidebar = () => {\n    if (!sidebar || currentConfig.sidebar.width === 0) return null;\n\n    const sidebarClasses = cn(\n      'fixed top-0 z-50 transition-all duration-300 ease-in-out',\n      'bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700',\n      'overflow-y-auto overflow-x-hidden',\n\n      // 位置\n      currentConfig.sidebar.position === 'left' ? 'left-0' : 'right-0',\n      currentConfig.sidebar.position === 'left'\n        ? 'border-r'\n        : 'border-l',\n\n      // 响应式显示\n      isMobile\n        ? [\n            'h-full shadow-xl',\n            sidebarCollapsed\n              ? currentConfig.sidebar.position === 'left' ? '-translate-x-full' : 'translate-x-full'\n              : 'translate-x-0'\n          ]\n        : [\n            'h-screen',\n            sidebarCollapsed ? 'w-0' : `w-[${currentConfig.sidebar.width}px]`\n          ],\n\n      // 动画状态\n      sidebarAnimating ? 'transition-transform' : ''\n    );\n\n    const sidebarStyle = {\n      width: isMobile\n        ? `${Math.min(currentConfig.sidebar.width, viewportWidth * 0.85)}px`\n        : sidebarCollapsed\n          ? '0px'\n          : `${currentConfig.sidebar.width}px`,\n      top: currentConfig.header.sticky ? `${currentConfig.header.height}px` : '0',\n      height: currentConfig.header.sticky\n        ? `calc(100vh - ${currentConfig.header.height}px)`\n        : '100vh'\n    };\n\n    return (\n      <>\n        <aside\n          className={sidebarClasses}\n          style={sidebarStyle}\n          aria-expanded={!sidebarCollapsed}\n        >\n          <div className={cn(\n            'p-4',\n            sidebarCollapsed && !isMobile ? 'hidden' : 'block'\n          )}>\n            {sidebar}\n          </div>\n        </aside>\n\n        {/* 移动端遮罩 */}\n        {isMobile && (\n          <SidebarOverlay\n            visible={!sidebarCollapsed}\n            onClose={toggleSidebar}\n          />\n        )}\n      </>\n    );\n  };\n\n  // 渲染头部\n  const renderHeader = () => {\n    if (!header) return null;\n\n    const headerClasses = cn(\n      'w-full z-40 transition-all duration-300',\n      'bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm',\n      'border-b border-gray-200 dark:border-gray-700',\n\n      // 粘性定位\n      currentConfig.header.sticky ? 'sticky top-0' : 'relative'\n    );\n\n    const headerStyle = {\n      height: `${currentConfig.header.height}px`,\n      minHeight: `${currentConfig.header.height}px`\n    };\n\n    return (\n      <header className={headerClasses} style={headerStyle}>\n        <div className=\"flex items-center h-full px-4 lg:px-6\">\n          {/* 侧边栏切换按钮 */}\n          {sidebar && currentConfig.sidebar.collapsible && (\n            <button\n              onClick={toggleSidebar}\n              className={cn(\n                'inline-flex items-center justify-center',\n                'w-10 h-10 rounded-md',\n                'text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white',\n                'hover:bg-gray-100 dark:hover:bg-gray-800',\n                'transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500',\n                isMobile ? 'mr-2' : 'mr-4'\n              )}\n              aria-label={sidebarCollapsed ? '展开侧边栏' : '收起侧边栏'}\n            >\n              <svg\n                className=\"w-6 h-6\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d={sidebarCollapsed\n                    ? 'M4 6h16M4 12h16M4 18h16'\n                    : 'M6 18L18 6M6 6l12 12'\n                  }\n                />\n              </svg>\n            </button>\n          )}\n\n          <div className=\"flex-1\">\n            {header}\n          </div>\n        </div>\n      </header>\n    );\n  };\n\n  // 渲染页脚\n  const renderFooter = () => {\n    if (!footer) return null;\n\n    const footerClasses = cn(\n      'w-full z-30 transition-all duration-300',\n      'bg-white dark:bg-gray-900',\n      'border-t border-gray-200 dark:border-gray-700',\n\n      // 粘性定位\n      currentConfig.footer.sticky ? 'sticky bottom-0' : 'relative'\n    );\n\n    const footerStyle = {\n      height: `${currentConfig.footer.height}px`,\n      minHeight: `${currentConfig.footer.height}px`\n    };\n\n    return (\n      <footer className={footerClasses} style={footerStyle}>\n        <div className=\"flex items-center h-full px-4 lg:px-6\">\n          {footer}\n        </div>\n      </footer>\n    );\n  };\n\n  return (\n    <div\n      className={cn(\n        'min-h-screen flex flex-col',\n        'bg-gray-50 dark:bg-gray-950',\n        'transition-colors duration-200',\n        className\n      )}\n      style={layoutStyles}\n    >\n      {renderHeader()}\n\n      <div className=\"flex flex-1 relative\">\n        {renderSidebar()}\n        {renderContent()}\n      </div>\n\n      {renderFooter()}\n    </div>\n  );\n};\n\n// 布局上下文 Hook\nexport const useLayout = () => {\n  const responsive = useResponsive();\n\n  return {\n    ...responsive,\n\n    // 获取当前布局配置\n    getCurrentConfig: (config: Partial<ResponsiveLayoutConfig> = {}) => {\n      return {\n        ...defaultLayoutConfig[responsive.breakpoint],\n        ...config[responsive.breakpoint]\n      };\n    },\n\n    // 检查是否需要折叠侧边栏\n    shouldCollapseSidebar: () => {\n      return responsive.isMobile || responsive.isTablet;\n    },\n\n    // 获取内容区域最大宽度\n    getContentMaxWidth: () => {\n      const config = defaultLayoutConfig[responsive.breakpoint];\n      return config.content.maxWidth || 'none';\n    },\n\n    // 获取适合当前设备的组件尺寸\n    getComponentSize: () => {\n      if (responsive.isMobile) return 'sm';\n      if (responsive.isTablet) return 'md';\n      if (responsive.isLargeScreen) return 'xl';\n      return 'lg';\n    }\n  };\n};\n\nexport default ResponsiveLayout;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/SEOOptimization.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/StatsWidget.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/TagCloud.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/__tests__/HeroSection.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/__tests__/PopularPosts.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/home/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/layout/Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/layout/GlobalFooter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/layout/GlobalHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/layout/GlobalSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/layout/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/layout/Navigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/layout/Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/layout/__tests__/Header.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'within' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":46,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'blogLink' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":566,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":566,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'scrollHandler' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":649,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":649,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Header组件测试\n * 测试网站头部导航的渲染、交互和响应式行为\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor, within } from '@testing-library/react';\nimport { vi, describe, it, expect, beforeEach, afterEach } from 'vitest';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { BrowserRouter } from 'react-router-dom';\nimport Header from '../Header';\n\n// Mock hooks\nvi.mock('../../../hooks/useResponsive', () => ({\n  useResponsive: vi.fn(() => ({\n    isMobile: false,\n    isTablet: false,\n    isDesktop: true,\n    viewportWidth: 1200,\n    breakpoint: 'lg',\n    isTouchDevice: false\n  }))\n}));\n\nvi.mock('../../../hooks/useAuth', () => ({\n  useAuth: vi.fn(() => ({\n    user: null,\n    isAuthenticated: false,\n    login: vi.fn(),\n    logout: vi.fn(),\n    loading: false\n  }))\n}));\n\n// Mock stores\nvi.mock('../../../stores/homeStore', () => ({\n  useHomeStore: vi.fn(() => ({\n    theme: 'light',\n    setTheme: vi.fn(),\n    searchQuery: '',\n    setSearchQuery: vi.fn(),\n    showSearch: false,\n    setShowSearch: vi.fn()\n  }))\n}));\n\n// Mock components\nvi.mock('../Navigation', () => ({\n  default: ({ mobile = false }) => (\n    <div data-testid={mobile ? 'mobile-navigation' : 'desktop-navigation'}>\n      <a href=\"/blog\">博客</a>\n      <a href=\"/categories\">分类</a>\n      <a href=\"/archive\">归档</a>\n      <a href=\"/about\">关于</a>\n    </div>\n  )\n}));\n\nvi.mock('../../home/SearchBox', () => ({\n  default: ({ onSearch, placeholder, className }) => (\n    <div data-testid=\"search-box\" className={className}>\n      <input\n        type=\"text\"\n        placeholder={placeholder || '搜索文章...'}\n        onChange={(e) => onSearch?.(e.target.value)}\n        aria-label=\"搜索\"\n      />\n    </div>\n  )\n}));\n\nvi.mock('../../home/ThemeToggle', () => ({\n  default: ({ size = 'md', className }) => (\n    <button\n      data-testid=\"theme-toggle\"\n      className={className}\n      aria-label=\"切换主题\"\n    >\n      {size === 'sm' ? '🌙' : '🌞'}\n    </button>\n  )\n}));\n\n// 测试工具\nconst createTestQueryClient = () => new QueryClient({\n  defaultOptions: {\n    queries: { retry: false },\n    mutations: { retry: false },\n  },\n});\n\nconst renderWithProviders = (ui: React.ReactElement) => {\n  const queryClient = createTestQueryClient();\n  return render(\n    <QueryClientProvider client={queryClient}>\n      <BrowserRouter>\n        {ui}\n      </BrowserRouter>\n    </QueryClientProvider>\n  );\n};\n\n// Mock用户数据\nconst mockUser = {\n  id: '1',\n  username: 'testuser',\n  email: 'test@example.com',\n  name: '测试用户',\n  avatar: '/avatars/test.jpg',\n  role: 'user' as const\n};\n\nconst mockAdminUser = {\n  ...mockUser,\n  id: '2',\n  username: 'admin',\n  name: '管理员',\n  role: 'admin' as const\n};\n\ndescribe('Header', () => {\n  let mockUseResponsive: any;\n  let mockUseAuth: any;\n  let mockUseHomeStore: any;\n\n  beforeEach(() => {\n    mockUseResponsive = vi.fn(() => ({\n      isMobile: false,\n      isTablet: false,\n      isDesktop: true,\n      viewportWidth: 1200,\n      breakpoint: 'lg',\n      isTouchDevice: false\n    }));\n\n    mockUseAuth = vi.fn(() => ({\n      user: null,\n      isAuthenticated: false,\n      login: vi.fn(),\n      logout: vi.fn(),\n      loading: false\n    }));\n\n    mockUseHomeStore = vi.fn(() => ({\n      theme: 'light',\n      setTheme: vi.fn(),\n      searchQuery: '',\n      setSearchQuery: vi.fn(),\n      showSearch: false,\n      setShowSearch: vi.fn()\n    }));\n\n    vi.doMock('../../../hooks/useResponsive', () => ({\n      useResponsive: mockUseResponsive\n    }));\n\n    vi.doMock('../../../hooks/useAuth', () => ({\n      useAuth: mockUseAuth\n    }));\n\n    vi.doMock('../../../stores/homeStore', () => ({\n      useHomeStore: mockUseHomeStore\n    }));\n  });\n\n  afterEach(() => {\n    vi.clearAllMocks();\n  });\n\n  describe('基础渲染', () => {\n    it('应该渲染网站Logo', () => {\n      renderWithProviders(<Header />);\n\n      const logo = screen.getByRole('link', { name: /Maple Blog/i });\n      expect(logo).toBeInTheDocument();\n      expect(logo).toHaveAttribute('href', '/');\n    });\n\n    it('应该渲染桌面端导航菜单', () => {\n      renderWithProviders(<Header />);\n\n      expect(screen.getByTestId('desktop-navigation')).toBeInTheDocument();\n      expect(screen.getByRole('link', { name: /博客/i })).toBeInTheDocument();\n      expect(screen.getByRole('link', { name: /分类/i })).toBeInTheDocument();\n      expect(screen.getByRole('link', { name: /归档/i })).toBeInTheDocument();\n      expect(screen.getByRole('link', { name: /关于/i })).toBeInTheDocument();\n    });\n\n    it('应该渲染搜索框', () => {\n      renderWithProviders(<Header />);\n\n      expect(screen.getByTestId('search-box')).toBeInTheDocument();\n      expect(screen.getByLabelText('搜索')).toBeInTheDocument();\n    });\n\n    it('应该渲染主题切换按钮', () => {\n      renderWithProviders(<Header />);\n\n      expect(screen.getByTestId('theme-toggle')).toBeInTheDocument();\n      expect(screen.getByLabelText('切换主题')).toBeInTheDocument();\n    });\n\n    it('应该在未登录时显示登录按钮', () => {\n      renderWithProviders(<Header />);\n\n      expect(screen.getByRole('link', { name: /登录/i })).toBeInTheDocument();\n      expect(screen.getByRole('link', { name: /注册/i })).toBeInTheDocument();\n    });\n  });\n\n  describe('用户认证状态', () => {\n    it('应该在登录后显示用户菜单', () => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isAuthenticated: true,\n        login: vi.fn(),\n        logout: vi.fn(),\n        loading: false\n      });\n\n      renderWithProviders(<Header />);\n\n      expect(screen.getByRole('button', { name: /用户菜单/i })).toBeInTheDocument();\n      expect(screen.queryByRole('link', { name: /登录/i })).not.toBeInTheDocument();\n    });\n\n    it('应该显示用户头像和名称', () => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isAuthenticated: true,\n        login: vi.fn(),\n        logout: vi.fn(),\n        loading: false\n      });\n\n      renderWithProviders(<Header />);\n\n      expect(screen.getByAltText('测试用户')).toBeInTheDocument();\n      expect(screen.getByText('测试用户')).toBeInTheDocument();\n    });\n\n    it('应该支持用户菜单展开和收起', async () => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isAuthenticated: true,\n        login: vi.fn(),\n        logout: vi.fn(),\n        loading: false\n      });\n\n      renderWithProviders(<Header />);\n\n      const userMenuButton = screen.getByRole('button', { name: /用户菜单/i });\n\n      // 点击展开菜单\n      fireEvent.click(userMenuButton);\n\n      await waitFor(() => {\n        expect(screen.getByRole('menu')).toBeInTheDocument();\n        expect(screen.getByRole('menuitem', { name: /个人资料/i })).toBeInTheDocument();\n        expect(screen.getByRole('menuitem', { name: /设置/i })).toBeInTheDocument();\n        expect(screen.getByRole('menuitem', { name: /退出登录/i })).toBeInTheDocument();\n      });\n\n      // 点击收起菜单\n      fireEvent.click(userMenuButton);\n\n      await waitFor(() => {\n        expect(screen.queryByRole('menu')).not.toBeInTheDocument();\n      });\n    });\n\n    it('应该为管理员用户显示管理菜单', () => {\n      mockUseAuth.mockReturnValue({\n        user: mockAdminUser,\n        isAuthenticated: true,\n        login: vi.fn(),\n        logout: vi.fn(),\n        loading: false\n      });\n\n      renderWithProviders(<Header />);\n\n      const userMenuButton = screen.getByRole('button', { name: /用户菜单/i });\n      fireEvent.click(userMenuButton);\n\n      expect(screen.getByRole('menuitem', { name: /管理后台/i })).toBeInTheDocument();\n    });\n\n    it('应该支持退出登录', async () => {\n      const mockLogout = vi.fn();\n\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isAuthenticated: true,\n        login: vi.fn(),\n        logout: mockLogout,\n        loading: false\n      });\n\n      renderWithProviders(<Header />);\n\n      const userMenuButton = screen.getByRole('button', { name: /用户菜单/i });\n      fireEvent.click(userMenuButton);\n\n      const logoutButton = screen.getByRole('menuitem', { name: /退出登录/i });\n      fireEvent.click(logoutButton);\n\n      expect(mockLogout).toHaveBeenCalled();\n    });\n  });\n\n  describe('搜索功能', () => {\n    it('应该支持搜索输入', () => {\n      const mockSetSearchQuery = vi.fn();\n\n      mockUseHomeStore.mockReturnValue({\n        theme: 'light',\n        setTheme: vi.fn(),\n        searchQuery: '',\n        setSearchQuery: mockSetSearchQuery,\n        showSearch: false,\n        setShowSearch: vi.fn()\n      });\n\n      renderWithProviders(<Header />);\n\n      const searchInput = screen.getByLabelText('搜索');\n      fireEvent.change(searchInput, { target: { value: 'React' } });\n\n      // 验证搜索回调被调用\n      expect(mockSetSearchQuery).toHaveBeenCalledWith('React');\n    });\n\n    it('应该支持移动端搜索切换', () => {\n      const mockSetShowSearch = vi.fn();\n\n      mockUseResponsive.mockReturnValue({\n        isMobile: true,\n        isTablet: false,\n        isDesktop: false,\n        viewportWidth: 375,\n        breakpoint: 'sm',\n        isTouchDevice: true\n      });\n\n      mockUseHomeStore.mockReturnValue({\n        theme: 'light',\n        setTheme: vi.fn(),\n        searchQuery: '',\n        setSearchQuery: vi.fn(),\n        showSearch: false,\n        setShowSearch: mockSetShowSearch\n      });\n\n      renderWithProviders(<Header />);\n\n      const searchToggle = screen.getByRole('button', { name: /搜索/i });\n      fireEvent.click(searchToggle);\n\n      expect(mockSetShowSearch).toHaveBeenCalledWith(true);\n    });\n\n    it('应该在移动端显示全屏搜索覆盖层', () => {\n      mockUseResponsive.mockReturnValue({\n        isMobile: true,\n        isTablet: false,\n        isDesktop: false,\n        viewportWidth: 375,\n        breakpoint: 'sm',\n        isTouchDevice: true\n      });\n\n      mockUseHomeStore.mockReturnValue({\n        theme: 'light',\n        setTheme: vi.fn(),\n        searchQuery: '',\n        setSearchQuery: vi.fn(),\n        showSearch: true,\n        setShowSearch: vi.fn()\n      });\n\n      renderWithProviders(<Header />);\n\n      expect(screen.getByTestId('search-overlay')).toBeInTheDocument();\n    });\n  });\n\n  describe('主题切换', () => {\n    it('应该支持主题切换', () => {\n      const mockSetTheme = vi.fn();\n\n      mockUseHomeStore.mockReturnValue({\n        theme: 'light',\n        setTheme: mockSetTheme,\n        searchQuery: '',\n        setSearchQuery: vi.fn(),\n        showSearch: false,\n        setShowSearch: vi.fn()\n      });\n\n      renderWithProviders(<Header />);\n\n      const themeToggle = screen.getByTestId('theme-toggle');\n      fireEvent.click(themeToggle);\n\n      expect(mockSetTheme).toHaveBeenCalledWith('dark');\n    });\n\n    it('应该显示当前主题状态', () => {\n      mockUseHomeStore.mockReturnValue({\n        theme: 'dark',\n        setTheme: vi.fn(),\n        searchQuery: '',\n        setSearchQuery: vi.fn(),\n        showSearch: false,\n        setShowSearch: vi.fn()\n      });\n\n      renderWithProviders(<Header />);\n\n      const themeToggle = screen.getByTestId('theme-toggle');\n      expect(themeToggle).toHaveTextContent('🌙'); // 暗色主题图标\n    });\n  });\n\n  describe('响应式行为', () => {\n    it('应该在移动端显示汉堡菜单', () => {\n      mockUseResponsive.mockReturnValue({\n        isMobile: true,\n        isTablet: false,\n        isDesktop: false,\n        viewportWidth: 375,\n        breakpoint: 'sm',\n        isTouchDevice: true\n      });\n\n      renderWithProviders(<Header />);\n\n      expect(screen.getByRole('button', { name: /打开菜单/i })).toBeInTheDocument();\n      expect(screen.queryByTestId('desktop-navigation')).not.toBeInTheDocument();\n    });\n\n    it('应该支持移动端菜单展开和收起', async () => {\n      mockUseResponsive.mockReturnValue({\n        isMobile: true,\n        isTablet: false,\n        isDesktop: false,\n        viewportWidth: 375,\n        breakpoint: 'sm',\n        isTouchDevice: true\n      });\n\n      renderWithProviders(<Header />);\n\n      const menuButton = screen.getByRole('button', { name: /打开菜单/i });\n\n      // 展开菜单\n      fireEvent.click(menuButton);\n\n      await waitFor(() => {\n        expect(screen.getByTestId('mobile-navigation')).toBeInTheDocument();\n        expect(screen.getByRole('button', { name: /关闭菜单/i })).toBeInTheDocument();\n      });\n\n      // 收起菜单\n      const closeButton = screen.getByRole('button', { name: /关闭菜单/i });\n      fireEvent.click(closeButton);\n\n      await waitFor(() => {\n        expect(screen.queryByTestId('mobile-navigation')).not.toBeInTheDocument();\n        expect(screen.getByRole('button', { name: /打开菜单/i })).toBeInTheDocument();\n      });\n    });\n\n    it('应该在平板端调整布局', () => {\n      mockUseResponsive.mockReturnValue({\n        isMobile: false,\n        isTablet: true,\n        isDesktop: false,\n        viewportWidth: 768,\n        breakpoint: 'md',\n        isTouchDevice: true\n      });\n\n      renderWithProviders(<Header />);\n\n      const header = screen.getByRole('banner');\n      expect(header).toHaveClass('px-6'); // 平板端间距\n    });\n\n    it('应该在小屏幕上隐藏部分导航项', () => {\n      mockUseResponsive.mockReturnValue({\n        isMobile: false,\n        isTablet: true,\n        isDesktop: false,\n        viewportWidth: 768,\n        breakpoint: 'md',\n        isTouchDevice: true\n      });\n\n      renderWithProviders(<Header />);\n\n      // 平板端可能隐藏某些次要导航项\n      expect(screen.queryByRole('link', { name: /关于/i })).not.toBeInTheDocument();\n    });\n  });\n\n  describe('滚动行为', () => {\n    it('应该在滚动时改变头部样式', async () => {\n      renderWithProviders(<Header />);\n\n      const header = screen.getByRole('banner');\n\n      // 模拟滚动\n      Object.defineProperty(window, 'scrollY', { value: 100 });\n      fireEvent.scroll(window);\n\n      await waitFor(() => {\n        expect(header).toHaveClass('shadow-md'); // 滚动时的阴影\n      });\n    });\n\n    it('应该支持头部自动隐藏（向下滚动时）', async () => {\n      renderWithProviders(<Header autoHide />);\n\n      const header = screen.getByRole('banner');\n\n      // 模拟向下滚动\n      let scrollY = 0;\n      Object.defineProperty(window, 'scrollY', {\n        get: () => scrollY,\n        configurable: true\n      });\n\n      // 快速向下滚动\n      scrollY = 200;\n      fireEvent.scroll(window);\n\n      await waitFor(() => {\n        expect(header).toHaveClass('-translate-y-full'); // 头部隐藏\n      });\n\n      // 向上滚动\n      scrollY = 150;\n      fireEvent.scroll(window);\n\n      await waitFor(() => {\n        expect(header).not.toHaveClass('-translate-y-full'); // 头部显示\n      });\n    });\n  });\n\n  describe('可访问性', () => {\n    it('应该有正确的语义结构', () => {\n      renderWithProviders(<Header />);\n\n      expect(screen.getByRole('banner')).toBeInTheDocument();\n      expect(screen.getByRole('navigation')).toBeInTheDocument();\n    });\n\n    it('应该支持键盘导航', () => {\n      renderWithProviders(<Header />);\n\n      const logo = screen.getByRole('link', { name: /Maple Blog/i });\n      const blogLink = screen.getByRole('link', { name: /博客/i });\n\n      // Tab键导航\n      logo.focus();\n      expect(logo).toHaveFocus();\n\n      fireEvent.keyDown(logo, { key: 'Tab' });\n      // 验证焦点移动到下一个可聚焦元素\n    });\n\n    it('应该为汉堡菜单提供正确的ARIA标签', () => {\n      mockUseResponsive.mockReturnValue({\n        isMobile: true,\n        isTablet: false,\n        isDesktop: false,\n        viewportWidth: 375,\n        breakpoint: 'sm',\n        isTouchDevice: true\n      });\n\n      renderWithProviders(<Header />);\n\n      const menuButton = screen.getByRole('button', { name: /打开菜单/i });\n      expect(menuButton).toHaveAttribute('aria-expanded', 'false');\n\n      fireEvent.click(menuButton);\n\n      expect(menuButton).toHaveAttribute('aria-expanded', 'true');\n    });\n\n    it('应该为用户菜单提供正确的ARIA标签', () => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isAuthenticated: true,\n        login: vi.fn(),\n        logout: vi.fn(),\n        loading: false\n      });\n\n      renderWithProviders(<Header />);\n\n      const userMenuButton = screen.getByRole('button', { name: /用户菜单/i });\n      expect(userMenuButton).toHaveAttribute('aria-haspopup', 'menu');\n    });\n\n    it('应该支持ESC键关闭菜单', async () => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isAuthenticated: true,\n        login: vi.fn(),\n        logout: vi.fn(),\n        loading: false\n      });\n\n      renderWithProviders(<Header />);\n\n      const userMenuButton = screen.getByRole('button', { name: /用户菜单/i });\n      fireEvent.click(userMenuButton);\n\n      expect(screen.getByRole('menu')).toBeInTheDocument();\n\n      // 按ESC键\n      fireEvent.keyDown(document, { key: 'Escape' });\n\n      await waitFor(() => {\n        expect(screen.queryByRole('menu')).not.toBeInTheDocument();\n      });\n    });\n\n    it('应该为图标按钮提供描述性标签', () => {\n      renderWithProviders(<Header />);\n\n      expect(screen.getByLabelText('切换主题')).toBeInTheDocument();\n\n      // 如果有搜索图标\n      if (screen.queryByLabelText('搜索')) {\n        expect(screen.getByLabelText('搜索')).toBeInTheDocument();\n      }\n    });\n  });\n\n  describe('性能优化', () => {\n    it('应该防止频繁的滚动事件触发', async () => {\n      const scrollHandler = vi.fn();\n\n      renderWithProviders(<Header />);\n\n      // 模拟快速滚动事件\n      for (let i = 0; i < 10; i++) {\n        fireEvent.scroll(window);\n      }\n\n      // 由于防抖，处理函数应该被调用次数较少\n      await waitFor(() => {\n        // 验证防抖逻辑\n      });\n    });\n\n    it('应该延迟加载用户头像', () => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isAuthenticated: true,\n        login: vi.fn(),\n        logout: vi.fn(),\n        loading: false\n      });\n\n      renderWithProviders(<Header />);\n\n      const avatar = screen.getByAltText('测试用户');\n      expect(avatar).toHaveAttribute('loading', 'lazy');\n    });\n  });\n\n  describe('错误处理', () => {\n    it('应该处理认证加载状态', () => {\n      mockUseAuth.mockReturnValue({\n        user: null,\n        isAuthenticated: false,\n        login: vi.fn(),\n        logout: vi.fn(),\n        loading: true\n      });\n\n      renderWithProviders(<Header />);\n\n      // 加载状态时应显示骨架屏或加载指示器\n      expect(screen.getByTestId('user-menu-skeleton')).toBeInTheDocument();\n    });\n\n    it('应该处理用户头像加载失败', async () => {\n      mockUseAuth.mockReturnValue({\n        user: mockUser,\n        isAuthenticated: true,\n        login: vi.fn(),\n        logout: vi.fn(),\n        loading: false\n      });\n\n      renderWithProviders(<Header />);\n\n      const avatar = screen.getByAltText('测试用户') as HTMLImageElement;\n\n      // 模拟图片加载失败\n      fireEvent.error(avatar);\n\n      await waitFor(() => {\n        expect(avatar.src).toContain('default-avatar'); // 默认头像\n      });\n    });\n\n    it('应该处理网络错误时的优雅降级', () => {\n      // Mock网络错误情况下的组件行为\n      renderWithProviders(<Header />);\n\n      // 组件应该仍然可以正常渲染和交互\n      expect(screen.getByRole('banner')).toBeInTheDocument();\n    });\n  });\n});","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/search/AdvancedSearch.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setFilters' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":50,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2050,2053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2050,2053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * AdvancedSearch Component\n * 高级搜索组件 - 提供多维度筛选和高级搜索选项\n */\n\nimport React, { useState, useEffect } from 'react';\nimport {\n  ChevronDown,\n  ChevronUp,\n  Calendar,\n  User,\n  Folder,\n  Hash,\n  Filter,\n  X,\n  Search,\n  RefreshCw,\n} from 'lucide-react';\nimport { useSearchStore } from '@/stores/searchStore';\nimport { searchApi } from '@/services/search/searchApi';\nimport { SearchFilters, SortOption } from '@/types/search';\nimport SearchFiltersComponent from './SearchFilters';\n\ninterface AdvancedSearchProps {\n  className?: string;\n  onSearch?: () => void;\n  showToggle?: boolean;\n  defaultExpanded?: boolean;\n}\n\ninterface FilterOptions {\n  categories: Array<{ name: string; count: number }>;\n  tags: Array<{ name: string; count: number }>;\n  authors: Array<{ name: string; count: number }>;\n  years: Array<{ year: number; count: number }>;\n}\n\nexport default function AdvancedSearch({\n  className = '',\n  onSearch,\n  showToggle = true,\n  defaultExpanded = false,\n}: AdvancedSearchProps) {\n  const {\n    query,\n    filters,\n    sortBy,\n    sortDirection,\n    showAdvanced,\n    setFilters,\n    updateFilter,\n    clearFilters,\n    setSortBy,\n    toggleAdvanced,\n    search,\n  } = useSearchStore();\n\n  const [expanded, setExpanded] = useState(defaultExpanded || showAdvanced);\n  const [loading, setLoading] = useState(false);\n  const [filterOptions, setFilterOptions] = useState<FilterOptions>({\n    categories: [],\n    tags: [],\n    authors: [],\n    years: [],\n  });\n\n  // 同步展开状态\n  useEffect(() => {\n    setExpanded(showAdvanced);\n  }, [showAdvanced]);\n\n  // 加载筛选器选项\n  useEffect(() => {\n    const loadFilterOptions = async () => {\n      try {\n        setLoading(true);\n        const data = await searchApi.getFilterData();\n        setFilterOptions(data);\n      } catch (error) {\n        console.error('Failed to load filter options:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (expanded) {\n      loadFilterOptions();\n    }\n  }, [expanded]);\n\n  // 处理筛选器变化\n  const handleFilterChange = (key: keyof SearchFilters, value: any) => {\n    updateFilter(key, value);\n  };\n\n  // 处理排序变化\n  const handleSortChange = (newSortBy: SortOption, newDirection?: 'asc' | 'desc') => {\n    setSortBy(newSortBy, newDirection || sortDirection);\n  };\n\n  // 应用筛选器\n  const handleApplyFilters = async () => {\n    await search();\n    onSearch?.();\n  };\n\n  // 重置筛选器\n  const handleResetFilters = () => {\n    clearFilters();\n  };\n\n  // 切换展开状态\n  const toggleExpanded = () => {\n    if (showToggle) {\n      toggleAdvanced();\n    } else {\n      setExpanded(!expanded);\n    }\n  };\n\n  // 获取活跃筛选器数量\n  const getActiveFiltersCount = (): number => {\n    let count = 0;\n    if (filters.categories?.length) count++;\n    if (filters.tags?.length) count++;\n    if (filters.authors?.length) count++;\n    if (filters.dateFrom || filters.dateTo) count++;\n    if (filters.contentType?.length) count++;\n    if (filters.status?.length) count++;\n    return count;\n  };\n\n  const activeFiltersCount = getActiveFiltersCount();\n\n  // 排序选项\n  const sortOptions: Array<{ value: SortOption; label: string; desc?: string }> = [\n    { value: 'relevance', label: '相关性', desc: '按搜索相关性排序' },\n    { value: 'publishedAt', label: '发布时间', desc: '按发布时间排序' },\n    { value: 'updatedAt', label: '更新时间', desc: '按更新时间排序' },\n    { value: 'title', label: '标题', desc: '按标题字母顺序排序' },\n    { value: 'viewCount', label: '浏览量', desc: '按浏览量排序' },\n    { value: 'likeCount', label: '点赞数', desc: '按点赞数排序' },\n    { value: 'commentCount', label: '评论数', desc: '按评论数排序' },\n  ];\n\n  return (\n    <div className={`bg-white border border-gray-200 rounded-lg ${className}`}>\n      {/* 标题栏 */}\n      <div\n        className=\"flex items-center justify-between p-4 cursor-pointer\"\n        onClick={toggleExpanded}\n      >\n        <div className=\"flex items-center space-x-2\">\n          <Filter className=\"h-5 w-5 text-gray-500\" />\n          <span className=\"font-medium text-gray-900\">高级搜索</span>\n          {activeFiltersCount > 0 && (\n            <span className=\"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full\">\n              {activeFiltersCount} 个筛选器\n            </span>\n          )}\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          {activeFiltersCount > 0 && (\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                handleResetFilters();\n              }}\n              className=\"text-gray-400 hover:text-gray-600 p-1 rounded\"\n              title=\"清除所有筛选器\"\n            >\n              <X className=\"h-4 w-4\" />\n            </button>\n          )}\n          {showToggle && (\n            <div className=\"text-gray-400\">\n              {expanded ? (\n                <ChevronUp className=\"h-5 w-5\" />\n              ) : (\n                <ChevronDown className=\"h-5 w-5\" />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* 高级搜索内容 */}\n      {expanded && (\n        <div className=\"border-t border-gray-200 p-4 space-y-6\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <RefreshCw className=\"h-5 w-5 animate-spin text-gray-400 mr-2\" />\n              <span className=\"text-sm text-gray-500\">加载筛选选项...</span>\n            </div>\n          ) : (\n            <>\n              {/* 搜索筛选器组件 */}\n              <SearchFiltersComponent\n                filters={filters}\n                filterOptions={filterOptions}\n                onChange={handleFilterChange}\n              />\n\n              {/* 排序选项 */}\n              <div className=\"space-y-3\">\n                <h4 className=\"text-sm font-medium text-gray-900 flex items-center\">\n                  <Search className=\"h-4 w-4 mr-2 text-gray-500\" />\n                  排序方式\n                </h4>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                  {sortOptions.map((option) => (\n                    <label\n                      key={option.value}\n                      className={`\n                        relative flex items-center p-3 border rounded-lg cursor-pointer\n                        hover:bg-gray-50 transition-colors\n                        ${sortBy === option.value\n                          ? 'border-blue-500 bg-blue-50 text-blue-900'\n                          : 'border-gray-200 text-gray-900'\n                        }\n                      `}\n                    >\n                      <input\n                        type=\"radio\"\n                        name=\"sortBy\"\n                        value={option.value}\n                        checked={sortBy === option.value}\n                        onChange={() => handleSortChange(option.value)}\n                        className=\"sr-only\"\n                      />\n                      <div className=\"flex-1\">\n                        <div className=\"font-medium\">{option.label}</div>\n                        {option.desc && (\n                          <div className=\"text-xs text-gray-500 mt-1\">{option.desc}</div>\n                        )}\n                      </div>\n\n                      {/* 排序方向 */}\n                      {sortBy === option.value && (\n                        <div className=\"ml-2 flex space-x-1\">\n                          <button\n                            type=\"button\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleSortChange(option.value, 'desc');\n                            }}\n                            className={`\n                              px-2 py-1 text-xs rounded\n                              ${sortDirection === 'desc'\n                                ? 'bg-blue-600 text-white'\n                                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n                              }\n                            `}\n                          >\n                            降序\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleSortChange(option.value, 'asc');\n                            }}\n                            className={`\n                              px-2 py-1 text-xs rounded\n                              ${sortDirection === 'asc'\n                                ? 'bg-blue-600 text-white'\n                                : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n                              }\n                            `}\n                          >\n                            升序\n                          </button>\n                        </div>\n                      )}\n                    </label>\n                  ))}\n                </div>\n              </div>\n\n              {/* 操作按钮 */}\n              <div className=\"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-100\">\n                <button\n                  onClick={handleApplyFilters}\n                  disabled={!query.trim()}\n                  className={`\n                    flex-1 px-4 py-2 rounded-lg font-medium transition-colors\n                    flex items-center justify-center space-x-2\n                    ${query.trim()\n                      ? 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2'\n                      : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                    }\n                  `}\n                >\n                  <Search className=\"h-4 w-4\" />\n                  <span>应用筛选器搜索</span>\n                </button>\n\n                <button\n                  onClick={handleResetFilters}\n                  disabled={activeFiltersCount === 0}\n                  className={`\n                    px-4 py-2 rounded-lg font-medium transition-colors\n                    flex items-center justify-center space-x-2\n                    ${activeFiltersCount > 0\n                      ? 'bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2'\n                      : 'bg-gray-50 text-gray-400 cursor-not-allowed'\n                    }\n                  `}\n                >\n                  <X className=\"h-4 w-4\" />\n                  <span>重置筛选器</span>\n                </button>\n              </div>\n\n              {/* 筛选器摘要 */}\n              {activeFiltersCount > 0 && (\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                  <div className=\"text-sm font-medium text-blue-900 mb-2\">\n                    已应用的筛选器：\n                  </div>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {filters.categories?.map((category) => (\n                      <span\n                        key={`category-${category}`}\n                        className=\"inline-flex items-center bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded-full\"\n                      >\n                        <Folder className=\"h-3 w-3 mr-1\" />\n                        {category}\n                        <button\n                          onClick={() => {\n                            const newCategories = filters.categories?.filter(c => c !== category);\n                            handleFilterChange('categories', newCategories);\n                          }}\n                          className=\"ml-1 text-purple-600 hover:text-purple-800\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </button>\n                      </span>\n                    ))}\n\n                    {filters.tags?.map((tag) => (\n                      <span\n                        key={`tag-${tag}`}\n                        className=\"inline-flex items-center bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-0.5 rounded-full\"\n                      >\n                        <Hash className=\"h-3 w-3 mr-1\" />\n                        {tag}\n                        <button\n                          onClick={() => {\n                            const newTags = filters.tags?.filter(t => t !== tag);\n                            handleFilterChange('tags', newTags);\n                          }}\n                          className=\"ml-1 text-orange-600 hover:text-orange-800\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </button>\n                      </span>\n                    ))}\n\n                    {filters.authors?.map((author) => (\n                      <span\n                        key={`author-${author}`}\n                        className=\"inline-flex items-center bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full\"\n                      >\n                        <User className=\"h-3 w-3 mr-1\" />\n                        {author}\n                        <button\n                          onClick={() => {\n                            const newAuthors = filters.authors?.filter(a => a !== author);\n                            handleFilterChange('authors', newAuthors);\n                          }}\n                          className=\"ml-1 text-green-600 hover:text-green-800\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </button>\n                      </span>\n                    ))}\n\n                    {(filters.dateFrom || filters.dateTo) && (\n                      <span className=\"inline-flex items-center bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                        <Calendar className=\"h-3 w-3 mr-1\" />\n                        {filters.dateFrom && filters.dateTo\n                          ? `${filters.dateFrom} - ${filters.dateTo}`\n                          : filters.dateFrom\n                          ? `从 ${filters.dateFrom}`\n                          : `到 ${filters.dateTo}`\n                        }\n                        <button\n                          onClick={() => {\n                            handleFilterChange('dateFrom', undefined);\n                            handleFilterChange('dateTo', undefined);\n                          }}\n                          className=\"ml-1 text-blue-600 hover:text-blue-800\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </button>\n                      </span>\n                    )}\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/search/SearchBox.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mediaRecorderRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":59,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":25},{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty method 'preventDefault'.","line":220,"column":46,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":220,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * SearchBox Component\n * 智能搜索框组件 - 支持实时搜索建议、历史记录、快捷键\n */\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { Search, X, Clock, TrendingUp, Mic, MicOff, Loader } from 'lucide-react';\nimport { useSearchStore } from '@/stores/searchStore';\nimport { searchApi } from '@/services/search/searchApi';\nimport { useDebounce } from '@/hooks/useDebounce';\nimport { DEFAULT_SEARCH_CONFIG } from '@/types/search';\nimport SearchSuggestions from './SearchSuggestions';\n\ninterface SearchBoxProps {\n  placeholder?: string;\n  className?: string;\n  showFilters?: boolean;\n  onSearch?: (query: string) => void;\n  onFocus?: () => void;\n  onBlur?: () => void;\n  disabled?: boolean;\n  variant?: 'default' | 'compact' | 'hero';\n}\n\nexport default function SearchBox({\n  placeholder = '搜索文章、分类、标签...',\n  className = '',\n  showFilters = false,\n  onSearch,\n  onFocus,\n  onBlur,\n  disabled = false,\n  variant = 'default',\n}: SearchBoxProps) {\n  // 状态管理\n  const {\n    query,\n    autoComplete,\n    history,\n    loading,\n    showHistory,\n    setQuery,\n    loadAutoComplete,\n    clearAutoComplete,\n    toggleHistory,\n    search,\n  } = useSearchStore();\n\n  // 本地状态\n  const [localQuery, setLocalQuery] = useState(query);\n  const [isFocused, setIsFocused] = useState(false);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [speechSupported, setSpeechSupported] = useState(false);\n\n  // refs\n  const inputRef = useRef<HTMLInputElement>(null);\n  const suggestionsRef = useRef<HTMLDivElement>(null);\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n\n  // 防抖处理搜索建议\n  const debouncedQuery = useDebounce(localQuery, DEFAULT_SEARCH_CONFIG.debounceMs);\n\n  // 样式变体\n  const variants = {\n    default: 'w-full max-w-2xl',\n    compact: 'w-full max-w-md',\n    hero: 'w-full max-w-4xl',\n  };\n\n  // 检查语音搜索支持\n  useEffect(() => {\n    setSpeechSupported('webkitSpeechRecognition' in window || 'SpeechRecognition' in window);\n  }, []);\n\n  // 加载自动完成建议\n  useEffect(() => {\n    if (\n      debouncedQuery &&\n      debouncedQuery.length >= DEFAULT_SEARCH_CONFIG.minQueryLength &&\n      isFocused\n    ) {\n      loadAutoComplete(debouncedQuery);\n    } else {\n      clearAutoComplete();\n    }\n  }, [debouncedQuery, isFocused, loadAutoComplete, clearAutoComplete]);\n\n  // 键盘快捷键\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Ctrl/Cmd + K 聚焦搜索框\n      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\n        e.preventDefault();\n        inputRef.current?.focus();\n      }\n\n      // Escape 键清除搜索或失焦\n      if (e.key === 'Escape') {\n        if (isFocused) {\n          inputRef.current?.blur();\n          setShowSuggestions(false);\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isFocused]);\n\n  // 点击外部关闭建议\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        suggestionsRef.current &&\n        !suggestionsRef.current.contains(event.target as Node) &&\n        inputRef.current &&\n        !inputRef.current.contains(event.target as Node)\n      ) {\n        setShowSuggestions(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // 处理输入变化\n  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setLocalQuery(value);\n    setQuery(value);\n\n    if (value.trim() || showHistory) {\n      setShowSuggestions(true);\n    }\n  }, [setQuery, showHistory]);\n\n  // 处理搜索提交\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n\n      if (!localQuery.trim()) {\n        return;\n      }\n\n      setShowSuggestions(false);\n      await search({ query: localQuery.trim() });\n      onSearch?.(localQuery.trim());\n\n      // 记录搜索分析\n      searchApi.recordSearchAnalytics(localQuery.trim(), 0);\n    },\n    [localQuery, search, onSearch]\n  );\n\n  // 处理建议选择\n  const handleSuggestionSelect = useCallback(\n    async (suggestion: string) => {\n      setLocalQuery(suggestion);\n      setQuery(suggestion);\n      setShowSuggestions(false);\n\n      await search({ query: suggestion });\n      onSearch?.(suggestion);\n\n      inputRef.current?.blur();\n    },\n    [setQuery, search, onSearch]\n  );\n\n  // 处理输入框聚焦\n  const handleFocus = useCallback(() => {\n    setIsFocused(true);\n    if (localQuery.trim() || history.length > 0) {\n      setShowSuggestions(true);\n    }\n    onFocus?.();\n  }, [localQuery, history.length, onFocus]);\n\n  // 处理输入框失焦\n  const handleBlur = useCallback(() => {\n    // 延迟失焦，允许点击建议\n    setTimeout(() => {\n      setIsFocused(false);\n      onBlur?.();\n    }, 200);\n  }, [onBlur]);\n\n  // 清除搜索\n  const handleClear = useCallback(() => {\n    setLocalQuery('');\n    setQuery('');\n    clearAutoComplete();\n    setShowSuggestions(false);\n    inputRef.current?.focus();\n  }, [setQuery, clearAutoComplete]);\n\n  // 语音搜索\n  const handleVoiceSearch = useCallback(async () => {\n    if (!speechSupported) return;\n\n    try {\n      setIsRecording(true);\n\n      // 这里应该实现语音识别\n      // 简化版本，实际项目中需要集成 Web Speech API\n      const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;\n      const recognition = new SpeechRecognition();\n\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.lang = 'zh-CN';\n\n      recognition.onresult = (event: SpeechRecognitionEvent) => {\n        const transcript = event.results[0][0].transcript;\n        setLocalQuery(transcript);\n        setQuery(transcript);\n        handleSubmit({ preventDefault: () => {} } as React.FormEvent);\n      };\n\n      recognition.onerror = (event: SpeechRecognitionErrorEvent) => {\n        console.error('Speech recognition error:', event.error);\n        setIsRecording(false);\n      };\n\n      recognition.onend = () => {\n        setIsRecording(false);\n      };\n\n      recognition.start();\n    } catch (error) {\n      console.error('Voice search error:', error);\n      setIsRecording(false);\n    }\n  }, [speechSupported, setQuery, handleSubmit]);\n\n  // 渲染搜索建议\n  const shouldShowSuggestions = showSuggestions && isFocused && (\n    autoComplete.length > 0 ||\n    history.length > 0 ||\n    localQuery.length >= DEFAULT_SEARCH_CONFIG.minQueryLength\n  );\n\n  return (\n    <div className={`relative ${variants[variant]} ${className}`}>\n      <form onSubmit={handleSubmit} className=\"relative\">\n        <div className=\"relative\">\n          {/* 搜索图标 */}\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <Search className=\"h-5 w-5 text-gray-400\" />\n          </div>\n\n          {/* 搜索输入框 */}\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={localQuery}\n            onChange={handleInputChange}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            disabled={disabled}\n            placeholder={placeholder}\n            className={`\n              block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg\n              text-sm placeholder-gray-500 bg-white\n              focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\n              disabled:bg-gray-50 disabled:text-gray-500\n              ${variant === 'hero' ? 'text-lg py-4' : ''}\n              transition-all duration-200\n            `}\n            autoComplete=\"off\"\n            aria-label=\"搜索\"\n            role=\"searchbox\"\n            aria-expanded={shouldShowSuggestions}\n            aria-haspopup=\"listbox\"\n          />\n\n          {/* 右侧操作按钮 */}\n          <div className=\"absolute inset-y-0 right-0 flex items-center pr-2 space-x-1\">\n            {/* 清除按钮 */}\n            {localQuery && (\n              <button\n                type=\"button\"\n                onClick={handleClear}\n                className=\"p-1 text-gray-400 hover:text-gray-600 rounded\"\n                aria-label=\"清除搜索\"\n              >\n                <X className=\"h-4 w-4\" />\n              </button>\n            )}\n\n            {/* 语音搜索按钮 */}\n            {speechSupported && (\n              <button\n                type=\"button\"\n                onClick={handleVoiceSearch}\n                disabled={isRecording}\n                className={`\n                  p-1 rounded transition-colors\n                  ${isRecording\n                    ? 'text-red-500 hover:text-red-600'\n                    : 'text-gray-400 hover:text-gray-600'\n                  }\n                `}\n                aria-label={isRecording ? '录音中...' : '语音搜索'}\n              >\n                {isRecording ? (\n                  <MicOff className=\"h-4 w-4 animate-pulse\" />\n                ) : (\n                  <Mic className=\"h-4 w-4\" />\n                )}\n              </button>\n            )}\n\n            {/* 加载指示器 */}\n            {loading && (\n              <div className=\"p-1\">\n                <Loader className=\"h-4 w-4 animate-spin text-blue-500\" />\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* 快捷键提示 */}\n        {!isFocused && !disabled && (\n          <div className=\"absolute inset-y-0 right-0 flex items-center pr-3\">\n            <kbd className=\"hidden sm:inline-flex items-center px-2 py-1 border border-gray-200 rounded text-xs text-gray-500 bg-gray-50\">\n              <span className=\"mr-1\">⌘</span>K\n            </kbd>\n          </div>\n        )}\n      </form>\n\n      {/* 搜索建议 */}\n      {shouldShowSuggestions && (\n        <div ref={suggestionsRef}>\n          <SearchSuggestions\n            query={localQuery}\n            suggestions={autoComplete}\n            history={history}\n            loading={loading}\n            onSelect={handleSuggestionSelect}\n            onClose={() => setShowSuggestions(false)}\n          />\n        </div>\n      )}\n\n      {/* 搜索过滤器快捷按钮 */}\n      {showFilters && (\n        <div className=\"mt-2 flex items-center space-x-2\">\n          <button\n            type=\"button\"\n            onClick={toggleHistory}\n            className=\"text-xs text-gray-500 hover:text-gray-700 flex items-center space-x-1\"\n          >\n            <Clock className=\"h-3 w-3\" />\n            <span>历史记录</span>\n          </button>\n          <button\n            type=\"button\"\n            className=\"text-xs text-gray-500 hover:text-gray-700 flex items-center space-x-1\"\n          >\n            <TrendingUp className=\"h-3 w-3\" />\n            <span>热门搜索</span>\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// 为 TypeScript 添加 SpeechRecognition 类型声明\n","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/search/SearchFilters.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":8},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[668,671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[668,671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * SearchFilters Component\n * 搜索筛选器组件 - 提供各种筛选选项\n */\n\nimport React, { useState, useMemo } from 'react';\nimport {\n  Calendar,\n  User,\n  Folder,\n  Hash,\n  FileText,\n  CheckCircle,\n  Clock,\n  Search,\n  ChevronDown,\n  ChevronUp,\n} from 'lucide-react';\nimport type { SearchFilters, ContentType, PostStatus } from '@/types/search';\n\ninterface SearchFiltersProps {\n  filters: SearchFilters;\n  filterOptions: {\n    categories: Array<{ name: string; count: number }>;\n    tags: Array<{ name: string; count: number }>;\n    authors: Array<{ name: string; count: number }>;\n    years: Array<{ year: number; count: number }>;\n  };\n  onChange: (key: keyof SearchFilters, value: any) => void;\n  className?: string;\n}\n\ninterface FilterSectionProps {\n  title: string;\n  icon: React.ComponentType<{ className?: string }>;\n  children: React.ReactNode;\n  defaultExpanded?: boolean;\n  count?: number;\n}\n\nfunction FilterSection({\n  title,\n  icon: Icon,\n  children,\n  defaultExpanded = false,\n  count,\n}: FilterSectionProps) {\n  const [expanded, setExpanded] = useState(defaultExpanded);\n\n  return (\n    <div className=\"border border-gray-200 rounded-lg\">\n      <button\n        onClick={() => setExpanded(!expanded)}\n        className=\"w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 transition-colors\"\n      >\n        <div className=\"flex items-center space-x-2\">\n          <Icon className=\"h-4 w-4 text-gray-500\" />\n          <span className=\"font-medium text-gray-900\">{title}</span>\n          {count !== undefined && count > 0 && (\n            <span className=\"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full\">\n              {count}\n            </span>\n          )}\n        </div>\n        {expanded ? (\n          <ChevronUp className=\"h-4 w-4 text-gray-400\" />\n        ) : (\n          <ChevronDown className=\"h-4 w-4 text-gray-400\" />\n        )}\n      </button>\n      {expanded && (\n        <div className=\"border-t border-gray-200 p-3 space-y-2\">\n          {children}\n        </div>\n      )}\n    </div>\n  );\n}\n\ninterface MultiSelectProps {\n  options: Array<{ name: string; count: number; value?: string }>;\n  values: string[];\n  onChange: (values: string[]) => void;\n  placeholder?: string;\n  searchable?: boolean;\n  maxHeight?: string;\n}\n\nfunction MultiSelect({\n  options,\n  values,\n  onChange,\n  placeholder = '选择选项...',\n  searchable = true,\n  maxHeight = 'max-h-48',\n}: MultiSelectProps) {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showOptions, setShowOptions] = useState(false);\n\n  const filteredOptions = useMemo(() => {\n    if (!searchTerm) return options;\n    return options.filter(option =>\n      option.name.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n  }, [options, searchTerm]);\n\n  const handleToggle = (value: string) => {\n    const newValues = values.includes(value)\n      ? values.filter(v => v !== value)\n      : [...values, value];\n    onChange(newValues);\n  };\n\n  const selectedLabels = values\n    .map(value => options.find(opt => (opt.value || opt.name) === value)?.name)\n    .filter(Boolean);\n\n  return (\n    <div className=\"relative\">\n      <button\n        type=\"button\"\n        onClick={() => setShowOptions(!showOptions)}\n        className=\"w-full text-left px-3 py-2 border border-gray-300 rounded-md bg-white text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500\"\n      >\n        {selectedLabels.length > 0 ? (\n          <div className=\"flex flex-wrap gap-1\">\n            {selectedLabels.slice(0, 3).map((label) => (\n              <span\n                key={label}\n                className=\"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full\"\n              >\n                {label}\n              </span>\n            ))}\n            {selectedLabels.length > 3 && (\n              <span className=\"inline-block bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full\">\n                +{selectedLabels.length - 3} 更多\n              </span>\n            )}\n          </div>\n        ) : (\n          <span className=\"text-gray-500\">{placeholder}</span>\n        )}\n      </button>\n\n      {showOptions && (\n        <div className=\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg\">\n          {searchable && (\n            <div className=\"p-2 border-b border-gray-200\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-2 top-2 h-4 w-4 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"搜索...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-8 pr-3 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                />\n              </div>\n            </div>\n          )}\n\n          <div className={`overflow-y-auto ${maxHeight}`}>\n            {filteredOptions.length > 0 ? (\n              filteredOptions.map((option) => {\n                const value = option.value || option.name;\n                const isSelected = values.includes(value);\n                return (\n                  <label\n                    key={value}\n                    className=\"flex items-center px-3 py-2 hover:bg-gray-50 cursor-pointer\"\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={isSelected}\n                      onChange={() => handleToggle(value)}\n                      className=\"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                    />\n                    <span className=\"ml-3 text-sm text-gray-900 flex-1\">\n                      {option.name}\n                    </span>\n                    <span className=\"text-xs text-gray-500 ml-2\">\n                      {option.count}\n                    </span>\n                  </label>\n                );\n              })\n            ) : (\n              <div className=\"px-3 py-2 text-sm text-gray-500\">\n                没有找到匹配的选项\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default function SearchFilters({\n  filters,\n  filterOptions,\n  onChange,\n  className = '',\n}: SearchFiltersProps) {\n  // 内容类型选项\n  const contentTypeOptions: Array<{ value: ContentType; label: string }> = [\n    { value: 'post', label: '文章' },\n    { value: 'page', label: '页面' },\n    { value: 'draft', label: '草稿' },\n  ];\n\n  // 状态选项\n  const statusOptions: Array<{ value: PostStatus; label: string }> = [\n    { value: 'published', label: '已发布' },\n    { value: 'draft', label: '草稿' },\n    { value: 'archived', label: '已归档' },\n  ];\n\n  // 处理日期范围变化\n  const handleDateChange = (field: 'dateFrom' | 'dateTo', value: string) => {\n    onChange(field, value || undefined);\n  };\n\n  // 处理多选变化\n  const handleMultiSelectChange = (field: keyof SearchFilters, values: string[]) => {\n    onChange(field, values.length > 0 ? values : undefined);\n  };\n\n  return (\n    <div className={`space-y-4 ${className}`}>\n      {/* 分类筛选 */}\n      <FilterSection\n        title=\"分类\"\n        icon={Folder}\n        count={filters.categories?.length}\n        defaultExpanded={!!filters.categories?.length}\n      >\n        <MultiSelect\n          options={filterOptions.categories.map(cat => ({\n            name: cat.name,\n            count: cat.count,\n          }))}\n          values={filters.categories || []}\n          onChange={(values) => handleMultiSelectChange('categories', values)}\n          placeholder=\"选择分类...\"\n        />\n      </FilterSection>\n\n      {/* 标签筛选 */}\n      <FilterSection\n        title=\"标签\"\n        icon={Hash}\n        count={filters.tags?.length}\n        defaultExpanded={!!filters.tags?.length}\n      >\n        <MultiSelect\n          options={filterOptions.tags.map(tag => ({\n            name: tag.name,\n            count: tag.count,\n          }))}\n          values={filters.tags || []}\n          onChange={(values) => handleMultiSelectChange('tags', values)}\n          placeholder=\"选择标签...\"\n        />\n      </FilterSection>\n\n      {/* 作者筛选 */}\n      <FilterSection\n        title=\"作者\"\n        icon={User}\n        count={filters.authors?.length}\n        defaultExpanded={!!filters.authors?.length}\n      >\n        <MultiSelect\n          options={filterOptions.authors.map(author => ({\n            name: author.name,\n            count: author.count,\n          }))}\n          values={filters.authors || []}\n          onChange={(values) => handleMultiSelectChange('authors', values)}\n          placeholder=\"选择作者...\"\n        />\n      </FilterSection>\n\n      {/* 时间范围筛选 */}\n      <FilterSection\n        title=\"时间范围\"\n        icon={Calendar}\n        count={filters.dateFrom || filters.dateTo ? 1 : 0}\n        defaultExpanded={!!(filters.dateFrom || filters.dateTo)}\n      >\n        <div className=\"space-y-3\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              开始日期\n            </label>\n            <input\n              type=\"date\"\n              value={filters.dateFrom || ''}\n              onChange={(e) => handleDateChange('dateFrom', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              结束日期\n            </label>\n            <input\n              type=\"date\"\n              value={filters.dateTo || ''}\n              onChange={(e) => handleDateChange('dateTo', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500\"\n            />\n          </div>\n\n          {/* 快捷时间选项 */}\n          <div className=\"grid grid-cols-2 gap-2 pt-2 border-t border-gray-200\">\n            <button\n              type=\"button\"\n              onClick={() => {\n                const today = new Date();\n                const lastWeek = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);\n                handleDateChange('dateFrom', lastWeek.toISOString().split('T')[0]);\n                handleDateChange('dateTo', today.toISOString().split('T')[0]);\n              }}\n              className=\"px-3 py-2 text-xs bg-gray-100 hover:bg-gray-200 rounded-md transition-colors\"\n            >\n              最近一周\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                const today = new Date();\n                const lastMonth = new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000);\n                handleDateChange('dateFrom', lastMonth.toISOString().split('T')[0]);\n                handleDateChange('dateTo', today.toISOString().split('T')[0]);\n              }}\n              className=\"px-3 py-2 text-xs bg-gray-100 hover:bg-gray-200 rounded-md transition-colors\"\n            >\n              最近一月\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                const today = new Date();\n                const lastYear = new Date(today.getTime() - 365 * 24 * 60 * 60 * 1000);\n                handleDateChange('dateFrom', lastYear.toISOString().split('T')[0]);\n                handleDateChange('dateTo', today.toISOString().split('T')[0]);\n              }}\n              className=\"px-3 py-2 text-xs bg-gray-100 hover:bg-gray-200 rounded-md transition-colors\"\n            >\n              最近一年\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                handleDateChange('dateFrom', '');\n                handleDateChange('dateTo', '');\n              }}\n              className=\"px-3 py-2 text-xs bg-red-100 hover:bg-red-200 text-red-700 rounded-md transition-colors\"\n            >\n              清除\n            </button>\n          </div>\n        </div>\n      </FilterSection>\n\n      {/* 内容类型筛选 */}\n      <FilterSection\n        title=\"内容类型\"\n        icon={FileText}\n        count={filters.contentType?.length}\n        defaultExpanded={!!filters.contentType?.length}\n      >\n        <div className=\"space-y-2\">\n          {contentTypeOptions.map((option) => (\n            <label key={option.value} className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                checked={filters.contentType?.includes(option.value) || false}\n                onChange={(e) => {\n                  const currentTypes = filters.contentType || [];\n                  const newTypes = e.target.checked\n                    ? [...currentTypes, option.value]\n                    : currentTypes.filter(type => type !== option.value);\n                  handleMultiSelectChange('contentType', newTypes);\n                }}\n                className=\"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n              />\n              <span className=\"ml-3 text-sm text-gray-900\">{option.label}</span>\n            </label>\n          ))}\n        </div>\n      </FilterSection>\n\n      {/* 发布状态筛选 */}\n      <FilterSection\n        title=\"发布状态\"\n        icon={CheckCircle}\n        count={filters.status?.length}\n        defaultExpanded={!!filters.status?.length}\n      >\n        <div className=\"space-y-2\">\n          {statusOptions.map((option) => (\n            <label key={option.value} className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                checked={filters.status?.includes(option.value) || false}\n                onChange={(e) => {\n                  const currentStatuses = filters.status || [];\n                  const newStatuses = e.target.checked\n                    ? [...currentStatuses, option.value]\n                    : currentStatuses.filter(status => status !== option.value);\n                  handleMultiSelectChange('status', newStatuses);\n                }}\n                className=\"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n              />\n              <span className=\"ml-3 text-sm text-gray-900\">{option.label}</span>\n            </label>\n          ))}\n        </div>\n      </FilterSection>\n    </div>\n  );\n}","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/search/SearchResultCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/search/SearchResults.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/search/SearchSuggestions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/Button.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[347,350],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[347,350],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { cn } from '../../utils/cn';\n\nexport interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'default' | 'destructive' | 'outline' | 'secondary' | 'ghost' | 'link' | 'primary';\n  size?: 'default' | 'sm' | 'md' | 'lg' | 'icon';\n  fullWidth?: boolean;\n  loading?: boolean;\n  as?: any;\n  to?: string;\n}\n\nexport const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant = 'default', size = 'default', fullWidth = false, loading = false, as: Component = 'button', ...props }, ref) => {\n    return (\n      <Component\n        className={cn(\n          'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n          {\n            'bg-primary text-primary-foreground hover:bg-primary/90': variant === 'default' || variant === 'primary',\n            'bg-destructive text-destructive-foreground hover:bg-destructive/90': variant === 'destructive',\n            'border border-input bg-background hover:bg-accent hover:text-accent-foreground': variant === 'outline',\n            'bg-secondary text-secondary-foreground hover:bg-secondary/80': variant === 'secondary',\n            'hover:bg-accent hover:text-accent-foreground': variant === 'ghost',\n            'text-primary underline-offset-4 hover:underline': variant === 'link',\n            'h-10 px-4 py-2': size === 'default',\n            'h-9 rounded-md px-3': size === 'sm',\n            'h-10 rounded-md px-4': size === 'md',\n            'h-11 rounded-md px-8': size === 'lg',\n            'h-10 w-10': size === 'icon',\n            'w-full': fullWidth,\n          },\n          className\n        )}\n        ref={ref}\n        disabled={loading || props.disabled}\n        {...props}\n      />\n    );\n  }\n);\nButton.displayName = 'Button';","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/Input.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isFocused' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":111,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":111,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Input Component - Reusable input field with validation and accessibility\n * Supports different types, states, and form integration\n */\n\nimport React, { forwardRef, useState } from 'react';\nimport { cn } from '../../utils/cn';\n\n// Input variant types\nexport type InputVariant = 'default' | 'error' | 'success';\n\n// Input size types\nexport type InputSize = 'sm' | 'md' | 'lg';\n\n// Input props interface\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\n  variant?: InputVariant;\n  inputSize?: InputSize;\n  label?: string;\n  helperText?: string;\n  errorMessage?: string;\n  leftIcon?: React.ReactNode;\n  rightIcon?: React.ReactNode;\n  leftAddon?: React.ReactNode;\n  rightAddon?: React.ReactNode;\n  fullWidth?: boolean;\n  showPasswordToggle?: boolean;\n}\n\n// Input variant styles\nconst inputVariants = {\n  default: 'border-gray-300 focus:border-blue-500 focus:ring-blue-500',\n  error: 'border-red-300 focus:border-red-500 focus:ring-red-500 bg-red-50',\n  success: 'border-green-300 focus:border-green-500 focus:ring-green-500 bg-green-50',\n};\n\n// Input size styles\nconst inputSizes = {\n  sm: 'px-3 py-2 text-sm',\n  md: 'px-4 py-2.5 text-sm',\n  lg: 'px-4 py-3 text-base',\n};\n\n// Label size styles\nconst labelSizes = {\n  sm: 'text-sm',\n  md: 'text-sm',\n  lg: 'text-base',\n};\n\n// Base input styles\nconst baseInputStyles = `\n  block w-full rounded-md border\n  shadow-sm transition-all duration-200\n  focus:ring-2 focus:ring-offset-0 focus:outline-none\n  disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed\n  placeholder:text-gray-400\n`;\n\n// Eye icon for password toggle\nconst EyeIcon: React.FC<{ isVisible: boolean }> = ({ isVisible }) => (\n  <svg\n    className=\"w-5 h-5\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    viewBox=\"0 0 24 24\"\n    aria-hidden=\"true\"\n  >\n    {isVisible ? (\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n        d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L6.111 6.111M14.12 14.12l3.767 3.768M14.12 14.12L6.111 6.111m7.12 8.009a3 3 0 01-4.243-4.243\"\n      />\n    ) : (\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n        d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n      />\n    )}\n  </svg>\n);\n\n// Input component with forwardRef\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\n  (\n    {\n      variant = 'default',\n      inputSize = 'md',\n      label,\n      helperText,\n      errorMessage,\n      leftIcon,\n      rightIcon,\n      leftAddon,\n      rightAddon,\n      fullWidth = true,\n      showPasswordToggle = false,\n      className,\n      type = 'text',\n      id,\n      disabled = false,\n      ...props\n    },\n    ref\n  ) => {\n    const [showPassword, setShowPassword] = useState(false);\n    const [isFocused, setIsFocused] = useState(false);\n\n    // Generate unique ID if not provided\n    const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;\n\n    // Determine actual input type\n    const actualType = showPasswordToggle && type === 'password'\n      ? (showPassword ? 'text' : 'password')\n      : type;\n\n    // Determine variant based on error\n    const actualVariant = errorMessage ? 'error' : variant;\n\n    // Build input classes\n    const inputClasses = cn(\n      baseInputStyles,\n      inputVariants[actualVariant],\n      inputSizes[inputSize],\n      leftIcon || leftAddon ? 'pl-10' : '',\n      rightIcon || rightAddon || showPasswordToggle ? 'pr-10' : '',\n      !fullWidth && 'w-auto',\n      className\n    );\n\n    // Handle password toggle\n    const togglePassword = () => {\n      setShowPassword(!showPassword);\n    };\n\n    return (\n      <div className={cn('relative', fullWidth ? 'w-full' : 'inline-block')}>\n        {/* Label */}\n        {label && (\n          <label\n            htmlFor={inputId}\n            className={cn(\n              'block font-medium text-gray-700 mb-2',\n              labelSizes[inputSize],\n              disabled && 'text-gray-500'\n            )}\n          >\n            {label}\n            {props.required && (\n              <span className=\"text-red-500 ml-1\" aria-label=\"required\">\n                *\n              </span>\n            )}\n          </label>\n        )}\n\n        {/* Input container */}\n        <div className=\"relative\">\n          {/* Left addon */}\n          {leftAddon && (\n            <div className=\"absolute inset-y-0 left-0 flex items-center\">\n              <span className=\"px-3 py-2 bg-gray-50 border-r border-gray-300 text-gray-500 text-sm\">\n                {leftAddon}\n              </span>\n            </div>\n          )}\n\n          {/* Left icon */}\n          {leftIcon && !leftAddon && (\n            <div className=\"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none\">\n              <span className=\"text-gray-400\" aria-hidden=\"true\">\n                {leftIcon}\n              </span>\n            </div>\n          )}\n\n          {/* Input field */}\n          <input\n            ref={ref}\n            type={actualType}\n            id={inputId}\n            disabled={disabled}\n            className={inputClasses}\n            onFocus={(e) => {\n              setIsFocused(true);\n              props.onFocus?.(e);\n            }}\n            onBlur={(e) => {\n              setIsFocused(false);\n              props.onBlur?.(e);\n            }}\n            aria-invalid={!!errorMessage}\n            aria-describedby={\n              errorMessage\n                ? `${inputId}-error`\n                : helperText\n                ? `${inputId}-helper`\n                : undefined\n            }\n            {...props}\n          />\n\n          {/* Right addon */}\n          {rightAddon && (\n            <div className=\"absolute inset-y-0 right-0 flex items-center\">\n              <span className=\"px-3 py-2 bg-gray-50 border-l border-gray-300 text-gray-500 text-sm\">\n                {rightAddon}\n              </span>\n            </div>\n          )}\n\n          {/* Right icon or password toggle */}\n          {(rightIcon || showPasswordToggle) && !rightAddon && (\n            <div className=\"absolute inset-y-0 right-0 flex items-center pr-3\">\n              {showPasswordToggle ? (\n                <button\n                  type=\"button\"\n                  onClick={togglePassword}\n                  className=\"text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition-colors\"\n                  aria-label={showPassword ? 'Hide password' : 'Show password'}\n                  tabIndex={-1}\n                >\n                  <EyeIcon isVisible={!showPassword} />\n                </button>\n              ) : rightIcon ? (\n                <span className=\"text-gray-400 pointer-events-none\" aria-hidden=\"true\">\n                  {rightIcon}\n                </span>\n              ) : null}\n            </div>\n          )}\n        </div>\n\n        {/* Helper text or error message */}\n        {(helperText || errorMessage) && (\n          <div className=\"mt-2\">\n            {errorMessage ? (\n              <p\n                id={`${inputId}-error`}\n                className=\"text-sm text-red-600\"\n                role=\"alert\"\n                aria-live=\"polite\"\n              >\n                {errorMessage}\n              </p>\n            ) : helperText ? (\n              <p\n                id={`${inputId}-helper`}\n                className=\"text-sm text-gray-500\"\n              >\n                {helperText}\n              </p>\n            ) : null}\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nInput.displayName = 'Input';\n\n// Textarea component with similar styling\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {\n  variant?: InputVariant;\n  inputSize?: InputSize;\n  label?: string;\n  helperText?: string;\n  errorMessage?: string;\n  fullWidth?: boolean;\n  resize?: 'none' | 'vertical' | 'horizontal' | 'both';\n}\n\nexport const Textarea = forwardRef<HTMLTextAreaElement, TextareaProps>(\n  (\n    {\n      variant = 'default',\n      inputSize = 'md',\n      label,\n      helperText,\n      errorMessage,\n      fullWidth = true,\n      resize = 'vertical',\n      className,\n      id,\n      disabled = false,\n      ...props\n    },\n    ref\n  ) => {\n    // Generate unique ID if not provided\n    const textareaId = id || `textarea-${Math.random().toString(36).substr(2, 9)}`;\n\n    // Determine variant based on error\n    const actualVariant = errorMessage ? 'error' : variant;\n\n    // Build textarea classes\n    const textareaClasses = cn(\n      baseInputStyles,\n      inputVariants[actualVariant],\n      inputSizes[inputSize],\n      !fullWidth && 'w-auto',\n      resize === 'none' && 'resize-none',\n      resize === 'vertical' && 'resize-y',\n      resize === 'horizontal' && 'resize-x',\n      resize === 'both' && 'resize',\n      className\n    );\n\n    return (\n      <div className={cn('relative', fullWidth ? 'w-full' : 'inline-block')}>\n        {/* Label */}\n        {label && (\n          <label\n            htmlFor={textareaId}\n            className={cn(\n              'block font-medium text-gray-700 mb-2',\n              labelSizes[inputSize],\n              disabled && 'text-gray-500'\n            )}\n          >\n            {label}\n            {props.required && (\n              <span className=\"text-red-500 ml-1\" aria-label=\"required\">\n                *\n              </span>\n            )}\n          </label>\n        )}\n\n        {/* Textarea field */}\n        <textarea\n          ref={ref}\n          id={textareaId}\n          disabled={disabled}\n          className={textareaClasses}\n          aria-invalid={!!errorMessage}\n          aria-describedby={\n            errorMessage\n              ? `${textareaId}-error`\n              : helperText\n              ? `${textareaId}-helper`\n              : undefined\n          }\n          {...props}\n        />\n\n        {/* Helper text or error message */}\n        {(helperText || errorMessage) && (\n          <div className=\"mt-2\">\n            {errorMessage ? (\n              <p\n                id={`${textareaId}-error`}\n                className=\"text-sm text-red-600\"\n                role=\"alert\"\n                aria-live=\"polite\"\n              >\n                {errorMessage}\n              </p>\n            ) : helperText ? (\n              <p\n                id={`${textareaId}-helper`}\n                className=\"text-sm text-gray-500\"\n              >\n                {helperText}\n              </p>\n            ) : null}\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nTextarea.displayName = 'Textarea';\n\n// Example usage components (for documentation)\nexport const InputExamples: React.FC = () => (\n  <div className=\"space-y-8 p-6 max-w-md\">\n    <div className=\"space-y-4\">\n      <h3 className=\"text-lg font-semibold\">Basic Inputs</h3>\n      <Input label=\"Email\" type=\"email\" placeholder=\"Enter your email\" />\n      <Input\n        label=\"Password\"\n        type=\"password\"\n        placeholder=\"Enter your password\"\n        showPasswordToggle\n      />\n      <Input label=\"Required Field\" required placeholder=\"This field is required\" />\n    </div>\n\n    <div className=\"space-y-4\">\n      <h3 className=\"text-lg font-semibold\">Input States</h3>\n      <Input label=\"Default\" placeholder=\"Default input\" />\n      <Input\n        label=\"With Error\"\n        placeholder=\"Input with error\"\n        errorMessage=\"This field is required\"\n      />\n      <Input\n        label=\"Success\"\n        variant=\"success\"\n        placeholder=\"Success input\"\n        helperText=\"This field is valid\"\n      />\n      <Input label=\"Disabled\" placeholder=\"Disabled input\" disabled />\n    </div>\n\n    <div className=\"space-y-4\">\n      <h3 className=\"text-lg font-semibold\">Input Sizes</h3>\n      <Input inputSize=\"sm\" placeholder=\"Small input\" />\n      <Input inputSize=\"md\" placeholder=\"Medium input\" />\n      <Input inputSize=\"lg\" placeholder=\"Large input\" />\n    </div>\n\n    <div className=\"space-y-4\">\n      <h3 className=\"text-lg font-semibold\">With Icons and Addons</h3>\n      <Input\n        placeholder=\"Search...\"\n        leftIcon={<span>🔍</span>}\n      />\n      <Input\n        placeholder=\"Amount\"\n        leftAddon=\"$\"\n        rightAddon=\".00\"\n        type=\"number\"\n      />\n    </div>\n\n    <div className=\"space-y-4\">\n      <h3 className=\"text-lg font-semibold\">Textarea</h3>\n      <Textarea\n        label=\"Message\"\n        placeholder=\"Enter your message...\"\n        rows={4}\n        helperText=\"Please provide detailed information\"\n      />\n    </div>\n  </div>\n);\n\nexport default Input;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/Modal.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":405,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":405,"endColumn":22},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":471,"column":11,"nodeType":"CallExpression","messageId":"unexpected","endLine":471,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Modal Component - Accessible modal dialog with backdrop and animation\n * Supports different sizes and proper focus management\n */\n\nimport React, { useEffect, useRef, useCallback, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { cn } from '../../utils/cn';\n\n// Modal size types\nexport type ModalSize = 'sm' | 'md' | 'lg' | 'xl' | 'full';\n\n// Modal props interface\nexport interface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title?: string;\n  size?: ModalSize;\n  closeOnBackdropClick?: boolean;\n  closeOnEscape?: boolean;\n  showCloseButton?: boolean;\n  children: React.ReactNode;\n  footer?: React.ReactNode;\n  className?: string;\n  overlayClassName?: string;\n  contentClassName?: string;\n  initialFocus?: React.RefObject<HTMLElement>;\n}\n\n// Modal size styles\nconst modalSizes = {\n  sm: 'max-w-md',\n  md: 'max-w-lg',\n  lg: 'max-w-2xl',\n  xl: 'max-w-4xl',\n  full: 'max-w-full mx-4',\n};\n\n// Close icon component\nconst CloseIcon: React.FC = () => (\n  <svg\n    className=\"w-6 h-6\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    viewBox=\"0 0 24 24\"\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      strokeWidth={2}\n      d=\"M6 18L18 6M6 6l12 12\"\n    />\n  </svg>\n);\n\n// Modal component\nexport const Modal: React.FC<ModalProps> = ({\n  isOpen,\n  onClose,\n  title,\n  size = 'md',\n  closeOnBackdropClick = true,\n  closeOnEscape = true,\n  showCloseButton = true,\n  children,\n  footer,\n  className,\n  overlayClassName,\n  contentClassName,\n  initialFocus,\n}) => {\n  const modalRef = useRef<HTMLDivElement>(null);\n  const closeButtonRef = useRef<HTMLButtonElement>(null);\n  const previousActiveElement = useRef<HTMLElement | null>(null);\n  const [isAnimating, setIsAnimating] = useState(false);\n\n  // Handle escape key press\n  const handleEscapePress = useCallback(\n    (event: KeyboardEvent) => {\n      if (closeOnEscape && event.key === 'Escape') {\n        event.preventDefault();\n        onClose();\n      }\n    },\n    [closeOnEscape, onClose]\n  );\n\n  // Handle backdrop click\n  const handleBackdropClick = useCallback(\n    (event: React.MouseEvent<HTMLDivElement>) => {\n      if (closeOnBackdropClick && event.target === event.currentTarget) {\n        onClose();\n      }\n    },\n    [closeOnBackdropClick, onClose]\n  );\n\n  // Focus management\n  useEffect(() => {\n    if (isOpen) {\n      // Store the previously focused element\n      previousActiveElement.current = document.activeElement as HTMLElement;\n\n      // Set focus to initial focus element or close button\n      const focusElement = initialFocus?.current || closeButtonRef.current;\n      if (focusElement) {\n        focusElement.focus();\n      }\n\n      // Add animation class\n      setIsAnimating(true);\n    } else {\n      // Restore focus to previously focused element\n      if (previousActiveElement.current) {\n        previousActiveElement.current.focus();\n      }\n      setIsAnimating(false);\n    }\n  }, [isOpen, initialFocus]);\n\n  // Add/remove event listeners\n  useEffect(() => {\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscapePress);\n      document.body.style.overflow = 'hidden'; // Prevent body scroll\n\n      return () => {\n        document.removeEventListener('keydown', handleEscapePress);\n        document.body.style.overflow = 'unset';\n      };\n    }\n  }, [isOpen, handleEscapePress]);\n\n  // Focus trap functionality\n  const handleTabKey = useCallback((event: React.KeyboardEvent) => {\n    if (event.key !== 'Tab' || !modalRef.current) return;\n\n    const focusableElements = modalRef.current.querySelectorAll<HTMLElement>(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n    const focusableArray = Array.from(focusableElements);\n    const firstElement = focusableArray[0];\n    const lastElement = focusableArray[focusableArray.length - 1];\n\n    if (event.shiftKey) {\n      // Shift + Tab\n      if (document.activeElement === firstElement) {\n        event.preventDefault();\n        lastElement?.focus();\n      }\n    } else {\n      // Tab\n      if (document.activeElement === lastElement) {\n        event.preventDefault();\n        firstElement?.focus();\n      }\n    }\n  }, []);\n\n  // Don't render if not open\n  if (!isOpen) return null;\n\n  // Modal content\n  const modalContent = (\n    <div\n      className={cn(\n        'fixed inset-0 z-50 overflow-y-auto',\n        'transition-opacity duration-300 ease-out',\n        isAnimating ? 'opacity-100' : 'opacity-0',\n        overlayClassName\n      )}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby={title ? 'modal-title' : undefined}\n    >\n      {/* Backdrop */}\n      <div\n        className=\"fixed inset-0 bg-black bg-opacity-50 transition-opacity\"\n        onClick={handleBackdropClick}\n        aria-hidden=\"true\"\n      />\n\n      {/* Modal container */}\n      <div className=\"flex min-h-full items-center justify-center p-4\">\n        {/* Modal content */}\n        <div\n          ref={modalRef}\n          className={cn(\n            'relative w-full rounded-lg bg-white shadow-xl',\n            'transform transition-all duration-300 ease-out',\n            isAnimating\n              ? 'opacity-100 translate-y-0 scale-100'\n              : 'opacity-0 translate-y-4 scale-95',\n            modalSizes[size],\n            className\n          )}\n          onKeyDown={handleTabKey}\n        >\n          {/* Header */}\n          {(title || showCloseButton) && (\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n              {title && (\n                <h2\n                  id=\"modal-title\"\n                  className=\"text-xl font-semibold text-gray-900\"\n                >\n                  {title}\n                </h2>\n              )}\n              {showCloseButton && (\n                <button\n                  ref={closeButtonRef}\n                  type=\"button\"\n                  onClick={onClose}\n                  className=\"ml-auto inline-flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors\"\n                  aria-label=\"Close modal\"\n                >\n                  <CloseIcon />\n                </button>\n              )}\n            </div>\n          )}\n\n          {/* Body */}\n          <div className={cn('p-6', contentClassName)}>\n            {children}\n          </div>\n\n          {/* Footer */}\n          {footer && (\n            <div className=\"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg\">\n              {footer}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  // Render modal in portal\n  return createPortal(modalContent, document.body);\n};\n\n// Confirmation modal component\nexport interface ConfirmationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title?: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n  variant?: 'default' | 'destructive';\n  loading?: boolean;\n}\n\nexport const ConfirmationModal: React.FC<ConfirmationModalProps> = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title = 'Confirm Action',\n  message,\n  confirmText = 'Confirm',\n  cancelText = 'Cancel',\n  variant = 'default',\n  loading = false,\n}) => {\n  const handleConfirm = () => {\n    onConfirm();\n  };\n\n  const confirmButtonClass = variant === 'destructive'\n    ? 'bg-red-600 hover:bg-red-700 focus:ring-red-500'\n    : 'bg-blue-600 hover:bg-blue-700 focus:ring-blue-500';\n\n  const footer = (\n    <div className=\"flex justify-end space-x-3\">\n      <button\n        type=\"button\"\n        onClick={onClose}\n        disabled={loading}\n        className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        {cancelText}\n      </button>\n      <button\n        type=\"button\"\n        onClick={handleConfirm}\n        disabled={loading}\n        className={cn(\n          'px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center',\n          confirmButtonClass\n        )}\n      >\n        {loading && (\n          <svg\n            className=\"animate-spin -ml-1 mr-2 h-4 w-4\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n          >\n            <circle\n              className=\"opacity-25\"\n              cx=\"12\"\n              cy=\"12\"\n              r=\"10\"\n              stroke=\"currentColor\"\n              strokeWidth=\"4\"\n            />\n            <path\n              className=\"opacity-75\"\n              fill=\"currentColor\"\n              d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n            />\n          </svg>\n        )}\n        {confirmText}\n      </button>\n    </div>\n  );\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title={title}\n      size=\"sm\"\n      footer={footer}\n      closeOnBackdropClick={!loading}\n      closeOnEscape={!loading}\n      showCloseButton={!loading}\n    >\n      <div className=\"text-gray-700\">\n        {message}\n      </div>\n    </Modal>\n  );\n};\n\n// Alert modal component\nexport interface AlertModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title?: string;\n  message: string;\n  type?: 'info' | 'success' | 'warning' | 'error';\n  buttonText?: string;\n}\n\nexport const AlertModal: React.FC<AlertModalProps> = ({\n  isOpen,\n  onClose,\n  title,\n  message,\n  type = 'info',\n  buttonText = 'OK',\n}) => {\n  const iconColors = {\n    info: 'text-blue-500',\n    success: 'text-green-500',\n    warning: 'text-yellow-500',\n    error: 'text-red-500',\n  };\n\n  const icons = {\n    info: '🗠',\n    success: '✓',\n    warning: '⚠️',\n    error: '✕',\n  };\n\n  const footer = (\n    <div className=\"flex justify-end\">\n      <button\n        type=\"button\"\n        onClick={onClose}\n        className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\"\n      >\n        {buttonText}\n      </button>\n    </div>\n  );\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title={title}\n      size=\"sm\"\n      footer={footer}\n    >\n      <div className=\"flex items-start space-x-3\">\n        <div className={cn('text-2xl', iconColors[type])}>\n          {icons[type]}\n        </div>\n        <div className=\"text-gray-700 flex-1\">\n          {message}\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\n// Custom hook for modal state management\nexport const useModal = (initialState: boolean = false) => {\n  const [isOpen, setIsOpen] = useState(initialState);\n\n  const openModal = useCallback(() => setIsOpen(true), []);\n  const closeModal = useCallback(() => setIsOpen(false), []);\n  const toggleModal = useCallback(() => setIsOpen(prev => !prev), []);\n\n  return {\n    isOpen,\n    openModal,\n    closeModal,\n    toggleModal,\n  };\n};\n\n// Example usage components (for documentation)\nexport const ModalExamples: React.FC = () => {\n  const basicModal = useModal();\n  const confirmModal = useModal();\n  const alertModal = useModal();\n\n  return (\n    <div className=\"space-y-4 p-6\">\n      <h3 className=\"text-lg font-semibold\">Modal Examples</h3>\n\n      <div className=\"space-x-4\">\n        <button\n          onClick={basicModal.openModal}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\n        >\n          Open Basic Modal\n        </button>\n\n        <button\n          onClick={confirmModal.openModal}\n          className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700\"\n        >\n          Open Confirmation\n        </button>\n\n        <button\n          onClick={alertModal.openModal}\n          className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700\"\n        >\n          Open Alert\n        </button>\n      </div>\n\n      {/* Basic Modal */}\n      <Modal\n        isOpen={basicModal.isOpen}\n        onClose={basicModal.closeModal}\n        title=\"Basic Modal\"\n        size=\"md\"\n      >\n        <div className=\"space-y-4\">\n          <p>This is a basic modal example with a title and close button.</p>\n          <p>You can add any content here including forms, images, or other components.</p>\n        </div>\n      </Modal>\n\n      {/* Confirmation Modal */}\n      <ConfirmationModal\n        isOpen={confirmModal.isOpen}\n        onClose={confirmModal.closeModal}\n        onConfirm={() => {\n          alert('Confirmed!');\n          confirmModal.closeModal();\n        }}\n        title=\"Delete Item\"\n        message=\"Are you sure you want to delete this item? This action cannot be undone.\"\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        variant=\"destructive\"\n      />\n\n      {/* Alert Modal */}\n      <AlertModal\n        isOpen={alertModal.isOpen}\n        onClose={alertModal.closeModal}\n        title=\"Success\"\n        message=\"Your action was completed successfully!\"\n        type=\"success\"\n      />\n    </div>\n  );\n};\n\nexport default Modal;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/PageLoadingFallback.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[453,456],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[453,456],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { cn } from '../../utils/cn';\n\nexport interface DialogProps {\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  children: React.ReactNode;\n}\n\nexport const Dialog: React.FC<DialogProps> = ({ children, open, onOpenChange }) => {\n  return (\n    <div>\n      {React.Children.map(children, child => {\n        if (React.isValidElement(child)) {\n          return React.cloneElement(child, { open, onOpenChange } as any);\n        }\n        return child;\n      })}\n    </div>\n  );\n};\n\nexport interface DialogTriggerProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {}\n\nexport const DialogTrigger = React.forwardRef<HTMLButtonElement, DialogTriggerProps>(\n  ({ className, ...props }, ref) => (\n    <button ref={ref} className={className} {...props} />\n  )\n);\nDialogTrigger.displayName = 'DialogTrigger';\n\nexport interface DialogContentProps extends React.HTMLAttributes<HTMLDivElement> {\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n}\n\nexport const DialogContent = React.forwardRef<HTMLDivElement, DialogContentProps>(\n  ({ className, children, open, onOpenChange, ...props }, ref) => {\n    if (!open) return null;\n\n    return (\n      <>\n        <div\n          className=\"fixed inset-0 z-50 bg-black/80\"\n          onClick={() => onOpenChange?.(false)}\n        />\n        <div\n          ref={ref}\n          className={cn(\n            'fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 sm:rounded-lg',\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </>\n    );\n  }\n);\nDialogContent.displayName = 'DialogContent';\n\nexport interface DialogHeaderProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nexport const DialogHeader = React.forwardRef<HTMLDivElement, DialogHeaderProps>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('flex flex-col space-y-1.5 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n);\nDialogHeader.displayName = 'DialogHeader';\n\nexport interface DialogTitleProps extends React.HTMLAttributes<HTMLHeadingElement> {}\n\nexport const DialogTitle = React.forwardRef<HTMLParagraphElement, DialogTitleProps>(\n  ({ className, ...props }, ref) => (\n    <h3\n      ref={ref}\n      className={cn('text-lg font-semibold leading-none tracking-tight', className)}\n      {...props}\n    />\n  )\n);\nDialogTitle.displayName = 'DialogTitle';\n\nexport interface DialogDescriptionProps extends React.HTMLAttributes<HTMLParagraphElement> {}\n\nexport const DialogDescription = React.forwardRef<HTMLParagraphElement, DialogDescriptionProps>(\n  ({ className, ...props }, ref) => (\n    <p\n      ref={ref}\n      className={cn('text-sm text-muted-foreground', className)}\n      {...props}\n    />\n  )\n);\nDialogDescription.displayName = 'DialogDescription';\n\nexport interface DialogFooterProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nexport const DialogFooter = React.forwardRef<HTMLDivElement, DialogFooterProps>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn('flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2', className)}\n      {...props}\n    />\n  )\n);\nDialogFooter.displayName = 'DialogFooter';","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/components/ui/tabs.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[946,949],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[946,949],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { cn } from '../../utils/cn';\n\nexport interface TabsProps {\n  defaultValue?: string;\n  value?: string;\n  onValueChange?: (value: string) => void;\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const Tabs: React.FC<TabsProps> = ({\n  defaultValue,\n  value,\n  onValueChange,\n  children,\n  className\n}) => {\n  const [internalValue, setInternalValue] = React.useState(defaultValue || '');\n  const currentValue = value !== undefined ? value : internalValue;\n\n  const handleValueChange = (newValue: string) => {\n    if (value === undefined) {\n      setInternalValue(newValue);\n    }\n    onValueChange?.(newValue);\n  };\n\n  return (\n    <div className={cn('w-full', className)}>\n      {React.Children.map(children, child => {\n        if (React.isValidElement(child)) {\n          return React.cloneElement(child, {\n            value: currentValue,\n            onValueChange: handleValueChange\n          } as any);\n        }\n        return child;\n      })}\n    </div>\n  );\n};\n\nexport interface TabsListProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nexport const TabsList = React.forwardRef<HTMLDivElement, TabsListProps>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        'inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground',\n        className\n      )}\n      {...props}\n    />\n  )\n);\nTabsList.displayName = 'TabsList';\n\nexport interface TabsTriggerProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  value: string;\n}\n\nexport const TabsTrigger = React.forwardRef<HTMLButtonElement, TabsTriggerProps>(\n  ({ className, value, ...props }, ref) => (\n    <button\n      ref={ref}\n      className={cn(\n        'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm',\n        className\n      )}\n      data-value={value}\n      {...props}\n    />\n  )\n);\nTabsTrigger.displayName = 'TabsTrigger';\n\nexport interface TabsContentProps extends React.HTMLAttributes<HTMLDivElement> {\n  value: string;\n}\n\nexport const TabsContent = React.forwardRef<HTMLDivElement, TabsContentProps>(\n  ({ className, value, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        'mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2',\n        className\n      )}\n      data-value={value}\n      {...props}\n    />\n  )\n);\nTabsContent.displayName = 'TabsContent';","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/auth/components/LoginForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/auth/components/RegisterForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'watchedConfirmPassword' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":223,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":223,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * RegisterForm Component - Form for user registration\n * Integrates with useAuth hook and provides comprehensive validation\n */\n\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Link } from 'react-router-dom';\nimport { Button } from '../../../components/ui/Button';\nimport { Input } from '../../../components/ui/Input';\nimport { useAuth } from '../../../hooks/useAuth';\nimport { RegisterFormData } from '../../../types/auth';\nimport { cn } from '../../../utils/cn';\n\n// Password validation regex patterns\nconst passwordPatterns = {\n  minLength: /.{8,}/,\n  hasUppercase: /[A-Z]/,\n  hasLowercase: /[a-z]/,\n  hasNumber: /\\d/,\n  hasSpecialChar: /[!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?]/,\n};\n\n// Username validation regex\nconst usernamePattern = /^[a-zA-Z0-9._-]+$/;\n\n// Email validation regex (more comprehensive than HTML5)\nconst emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n\n// Custom password validation function\nconst validatePassword = (password: string): string | true => {\n  if (!passwordPatterns.minLength.test(password)) {\n    return 'Password must be at least 8 characters long';\n  }\n  if (!passwordPatterns.hasUppercase.test(password)) {\n    return 'Password must contain at least one uppercase letter';\n  }\n  if (!passwordPatterns.hasLowercase.test(password)) {\n    return 'Password must contain at least one lowercase letter';\n  }\n  if (!passwordPatterns.hasNumber.test(password)) {\n    return 'Password must contain at least one number';\n  }\n  if (!passwordPatterns.hasSpecialChar.test(password)) {\n    return 'Password must contain at least one special character';\n  }\n  return true;\n};\n\n// Form validation rules\nconst validationRules = {\n  email: {\n    required: 'Email is required',\n    pattern: {\n      value: emailPattern,\n      message: 'Please enter a valid email address',\n    },\n    maxLength: {\n      value: 254,\n      message: 'Email cannot exceed 254 characters',\n    },\n  },\n  userName: {\n    required: 'Username is required',\n    minLength: {\n      value: 3,\n      message: 'Username must be at least 3 characters',\n    },\n    maxLength: {\n      value: 50,\n      message: 'Username cannot exceed 50 characters',\n    },\n    pattern: {\n      value: usernamePattern,\n      message: 'Username can only contain letters, numbers, dots, underscores, and hyphens',\n    },\n  },\n  password: {\n    required: 'Password is required',\n    validate: validatePassword,\n    maxLength: {\n      value: 128,\n      message: 'Password cannot exceed 128 characters',\n    },\n  },\n  confirmPassword: {\n    required: 'Password confirmation is required',\n  },\n  firstName: {\n    required: 'First name is required',\n    minLength: {\n      value: 1,\n      message: 'First name is required',\n    },\n    maxLength: {\n      value: 100,\n      message: 'First name cannot exceed 100 characters',\n    },\n  },\n  lastName: {\n    required: 'Last name is required',\n    minLength: {\n      value: 1,\n      message: 'Last name is required',\n    },\n    maxLength: {\n      value: 100,\n      message: 'Last name cannot exceed 100 characters',\n    },\n  },\n  agreeToTerms: {\n    required: 'You must agree to the terms of service',\n  },\n};\n\n// RegisterForm props\nexport interface RegisterFormProps {\n  onSuccess?: () => void;\n  className?: string;\n  showTitle?: boolean;\n  showLoginLink?: boolean;\n}\n\n// Password strength indicator component\nconst PasswordStrengthIndicator: React.FC<{ password: string }> = ({ password }) => {\n  const checks = [\n    { test: passwordPatterns.minLength, label: 'At least 8 characters' },\n    { test: passwordPatterns.hasUppercase, label: 'One uppercase letter' },\n    { test: passwordPatterns.hasLowercase, label: 'One lowercase letter' },\n    { test: passwordPatterns.hasNumber, label: 'One number' },\n    { test: passwordPatterns.hasSpecialChar, label: 'One special character' },\n  ];\n\n  const passedChecks = checks.filter(check => check.test.test(password)).length;\n  const strength = passedChecks / checks.length;\n\n  const getStrengthColor = () => {\n    if (strength === 0) return 'bg-gray-200';\n    if (strength < 0.4) return 'bg-red-500';\n    if (strength < 0.7) return 'bg-yellow-500';\n    if (strength < 1) return 'bg-blue-500';\n    return 'bg-green-500';\n  };\n\n  const getStrengthText = () => {\n    if (strength === 0) return 'Enter a password';\n    if (strength < 0.4) return 'Weak';\n    if (strength < 0.7) return 'Fair';\n    if (strength < 1) return 'Good';\n    return 'Strong';\n  };\n\n  return (\n    <div className=\"mt-2\">\n      {/* Strength bar */}\n      <div className=\"flex items-center space-x-2\">\n        <div className=\"flex-1 bg-gray-200 rounded-full h-2\">\n          <div\n            className={cn('h-2 rounded-full transition-all duration-300', getStrengthColor())}\n            style={{ width: `${strength * 100}%` }}\n          />\n        </div>\n        <span className=\"text-xs text-gray-600 min-w-0\">{getStrengthText()}</span>\n      </div>\n\n      {/* Requirements checklist */}\n      {password && (\n        <ul className=\"mt-2 text-xs space-y-1\">\n          {checks.map((check, index) => (\n            <li\n              key={index}\n              className={cn(\n                'flex items-center space-x-2',\n                check.test.test(password) ? 'text-green-600' : 'text-gray-500'\n              )}\n            >\n              <span className=\"text-lg\">\n                {check.test.test(password) ? '✓' : '○'}\n              </span>\n              <span>{check.label}</span>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\n// RegisterForm component\nexport const RegisterForm: React.FC<RegisterFormProps> = ({\n  onSuccess,\n  className,\n  showTitle = true,\n  showLoginLink = true,\n}) => {\n  const { register: registerUser, isLoading, error } = useAuth();\n  const [serverError, setServerError] = useState<string | null>(null);\n  const [showPasswordRequirements, setShowPasswordRequirements] = useState(false);\n\n  // React Hook Form setup\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isSubmitting },\n    reset,\n    setError: setFormError,\n    watch,\n  } = useForm<RegisterFormData>({\n    defaultValues: {\n      email: '',\n      userName: '',\n      password: '',\n      confirmPassword: '',\n      firstName: '',\n      lastName: '',\n      agreeToTerms: false,\n    },\n    mode: 'onBlur',\n  });\n\n  // Watch password for real-time validation\n  const watchedPassword = watch('password', '');\n  const watchedConfirmPassword = watch('confirmPassword', '');\n\n  // Handle form submission\n  const onSubmit = async (data: RegisterFormData) => {\n    setServerError(null);\n\n    // Validate password confirmation\n    if (data.password !== data.confirmPassword) {\n      setFormError('confirmPassword', { message: 'Passwords do not match' });\n      return;\n    }\n\n    try {\n      const result = await registerUser({\n        email: data.email.trim().toLowerCase(),\n        userName: data.userName.trim(),\n        password: data.password,\n        confirmPassword: data.confirmPassword,\n        firstName: data.firstName.trim(),\n        lastName: data.lastName.trim(),\n        agreeToTerms: data.agreeToTerms,\n      });\n\n      if (result.success) {\n        reset(); // Clear form on success\n        onSuccess?.();\n      } else {\n        // Handle validation errors\n        if (result.errors && result.errors.length > 0) {\n          // Try to map specific errors to form fields\n          result.errors.forEach(errorMessage => {\n            const lowerError = errorMessage.toLowerCase();\n\n            if (lowerError.includes('email')) {\n              setFormError('email', { message: errorMessage });\n            } else if (lowerError.includes('username')) {\n              setFormError('userName', { message: errorMessage });\n            } else if (lowerError.includes('password')) {\n              setFormError('password', { message: errorMessage });\n            } else if (lowerError.includes('first name')) {\n              setFormError('firstName', { message: errorMessage });\n            } else if (lowerError.includes('last name')) {\n              setFormError('lastName', { message: errorMessage });\n            } else {\n              setServerError(errorMessage);\n            }\n          });\n\n          // If no field-specific errors were set, show the first error as server error\n          if (!Object.keys(errors).length) {\n            setServerError(result.errors[0]);\n          }\n        } else {\n          setServerError(result.errorMessage || 'Registration failed. Please try again.');\n        }\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'An unexpected error occurred';\n      setServerError(errorMessage);\n    }\n  };\n\n  // Loading state\n  const isFormLoading = isLoading || isSubmitting;\n\n  return (\n    <div className={cn('w-full max-w-md mx-auto', className)}>\n      {/* Title */}\n      {showTitle && (\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            Create an account\n          </h2>\n          <p className=\"text-gray-600\">\n            Join us to start your blogging journey\n          </p>\n        </div>\n      )}\n\n      {/* Form */}\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\" noValidate>\n        {/* Server Error Display */}\n        {(serverError || error) && (\n          <div\n            className=\"p-4 bg-red-50 border border-red-200 rounded-md\"\n            role=\"alert\"\n            aria-live=\"polite\"\n          >\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <svg\n                  className=\"w-5 h-5 text-red-400\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  aria-hidden=\"true\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z\"\n                  />\n                </svg>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"text-sm text-red-800\">\n                  {serverError || error}\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Name Fields */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <Input\n            {...register('firstName', validationRules.firstName)}\n            type=\"text\"\n            label=\"First Name\"\n            placeholder=\"John\"\n            errorMessage={errors.firstName?.message}\n            disabled={isFormLoading}\n            autoComplete=\"given-name\"\n            autoFocus\n          />\n          <Input\n            {...register('lastName', validationRules.lastName)}\n            type=\"text\"\n            label=\"Last Name\"\n            placeholder=\"Doe\"\n            errorMessage={errors.lastName?.message}\n            disabled={isFormLoading}\n            autoComplete=\"family-name\"\n          />\n        </div>\n\n        {/* Email Field */}\n        <Input\n          {...register('email', validationRules.email)}\n          type=\"email\"\n          label=\"Email Address\"\n          placeholder=\"john@example.com\"\n          errorMessage={errors.email?.message}\n          disabled={isFormLoading}\n          autoComplete=\"email\"\n        />\n\n        {/* Username Field */}\n        <Input\n          {...register('userName', validationRules.userName)}\n          type=\"text\"\n          label=\"Username\"\n          placeholder=\"johndoe\"\n          errorMessage={errors.userName?.message}\n          disabled={isFormLoading}\n          autoComplete=\"username\"\n          helperText=\"Only letters, numbers, dots, underscores, and hyphens allowed\"\n        />\n\n        {/* Password Field */}\n        <div>\n          <Input\n            {...register('password', validationRules.password)}\n            type=\"password\"\n            label=\"Password\"\n            placeholder=\"Create a strong password\"\n            errorMessage={errors.password?.message}\n            disabled={isFormLoading}\n            showPasswordToggle\n            autoComplete=\"new-password\"\n            onFocus={() => setShowPasswordRequirements(true)}\n          />\n          {showPasswordRequirements && (\n            <PasswordStrengthIndicator password={watchedPassword} />\n          )}\n        </div>\n\n        {/* Confirm Password Field */}\n        <Input\n          {...register('confirmPassword', {\n            ...validationRules.confirmPassword,\n            validate: (value) =>\n              value === watchedPassword || 'Passwords do not match',\n          })}\n          type=\"password\"\n          label=\"Confirm Password\"\n          placeholder=\"Confirm your password\"\n          errorMessage={errors.confirmPassword?.message}\n          disabled={isFormLoading}\n          showPasswordToggle\n          autoComplete=\"new-password\"\n        />\n\n        {/* Terms Agreement */}\n        <div className=\"flex items-start\">\n          <div className=\"flex items-center h-5\">\n            <input\n              {...register('agreeToTerms', validationRules.agreeToTerms)}\n              id=\"agree-terms\"\n              type=\"checkbox\"\n              disabled={isFormLoading}\n              className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 disabled:opacity-50\"\n            />\n          </div>\n          <div className=\"ml-3\">\n            <label htmlFor=\"agree-terms\" className=\"text-sm text-gray-700 select-none\">\n              I agree to the{' '}\n              <Link\n                to=\"/terms\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 hover:text-blue-700 underline focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded\"\n                tabIndex={isFormLoading ? -1 : 0}\n              >\n                Terms of Service\n              </Link>{' '}\n              and{' '}\n              <Link\n                to=\"/privacy\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 hover:text-blue-700 underline focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded\"\n                tabIndex={isFormLoading ? -1 : 0}\n              >\n                Privacy Policy\n              </Link>\n            </label>\n            {errors.agreeToTerms && (\n              <p className=\"mt-1 text-sm text-red-600\" role=\"alert\">\n                {errors.agreeToTerms.message}\n              </p>\n            )}\n          </div>\n        </div>\n\n        {/* Submit Button */}\n        <Button\n          type=\"submit\"\n          variant=\"primary\"\n          size=\"lg\"\n          fullWidth\n          loading={isFormLoading}\n          disabled={isFormLoading}\n        >\n          {isFormLoading ? 'Creating account...' : 'Create account'}\n        </Button>\n\n        {/* Login Link */}\n        {showLoginLink && (\n          <div className=\"text-center mt-6\">\n            <p className=\"text-sm text-gray-600\">\n              Already have an account?{' '}\n              <Link\n                to=\"/login\"\n                className=\"font-medium text-blue-600 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded\"\n                tabIndex={isFormLoading ? -1 : 0}\n              >\n                Sign in here\n              </Link>\n            </p>\n          </div>\n        )}\n      </form>\n\n      {/* Accessibility Enhancement */}\n      <div className=\"sr-only\" aria-live=\"polite\" role=\"status\">\n        {isFormLoading && 'Form is being submitted'}\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterForm;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/CommentSystem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'initialSort' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'replyingTo' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":42,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleMobileEdit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":81,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":81,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleDesktopReply' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":92,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":92,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleDesktopEdit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":97,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":97,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 评论系统主组件\n * 整合所有评论功能，提供响应式设计和移动端优化\n */\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { useCommentStore } from '../../stores/commentStore';\nimport { useAuth } from '../../hooks/useAuth';\nimport { useResponsive } from '../../hooks/useResponsive';\nimport CommentList from './components/CommentList';\nimport CommentForm from './components/CommentForm';\nimport MobileCommentForm from './components/MobileCommentForm';\nimport CommentStats from './components/CommentStats';\nimport NotificationBadge from './components/NotificationBadge';\nimport { CommentSortOrder } from '../../types/comment';\n\ninterface CommentSystemProps {\n  postId: string;\n  initialSort?: CommentSortOrder;\n  showStats?: boolean;\n  showNotifications?: boolean;\n  className?: string;\n  maxDepth?: number;\n  enableRealtime?: boolean;\n  autoRefresh?: boolean;\n  refreshInterval?: number;\n}\n\nconst CommentSystem: React.FC<CommentSystemProps> = ({\n  postId,\n  initialSort = CommentSortOrder.CreatedAtDesc,\n  showStats = true,\n  showNotifications = true,\n  className = '',\n  maxDepth = 3,\n  enableRealtime = true,\n  autoRefresh = false,\n  refreshInterval = 30000\n}) => {\n  const { isAuthenticated } = useAuth();\n  const responsive = useResponsive();\n  const { stats, onlineUserCounts, replyingTo, actions } = useCommentStore();\n\n  // 移动端表单状态\n  const [mobileFormOpen, setMobileFormOpen] = useState(false);\n  const [mobileFormConfig, setMobileFormConfig] = useState({\n    parentId: undefined as string | undefined,\n    initialContent: '',\n    isEditing: false,\n    commentId: undefined as string | undefined\n  });\n\n  // 根据响应式配置调整组件行为\n  const commentConfig = useMemo(() => responsive.getCommentConfig(), [responsive]);\n\n  // 初始化评论系统\n  useEffect(() => {\n    if (enableRealtime) {\n      actions.initializeRealtime(postId);\n    }\n\n    return () => {\n      if (enableRealtime) {\n        actions.cleanupRealtime();\n      }\n    };\n  }, [postId, enableRealtime, actions]);\n\n  // 处理移动端回复\n  const handleMobileReply = (commentId?: string) => {\n    setMobileFormConfig({\n      parentId: commentId,\n      initialContent: '',\n      isEditing: false,\n      commentId: undefined\n    });\n    setMobileFormOpen(true);\n  };\n\n  // 处理移动端编辑\n  const handleMobileEdit = (commentId: string, content: string) => {\n    setMobileFormConfig({\n      parentId: undefined,\n      initialContent: content,\n      isEditing: true,\n      commentId\n    });\n    setMobileFormOpen(true);\n  };\n\n  // 处理桌面端回复\n  const handleDesktopReply = (commentId?: string) => {\n    actions.setReplyingTo(commentId || '');\n  };\n\n  // 处理桌面端编辑\n  const handleDesktopEdit = (commentId: string) => {\n    actions.setEditingComment(commentId);\n  };\n\n  // 处理表单提交成功\n  const handleSubmitSuccess = () => {\n    if (commentConfig.useMobileForm) {\n      setMobileFormOpen(false);\n    }\n  };\n\n  // 获取当前文章统计\n  const currentStats = stats[postId];\n  const onlineCount = onlineUserCounts[postId];\n\n  return (\n    <div className={`comment-system space-y-6 ${className}`}>\n      {/* 顶部工具栏 */}\n      <div className=\"flex items-center justify-between\">\n        {/* 统计信息 (紧凑模式) */}\n        {showStats && currentStats && commentConfig.compact && (\n          <CommentStats\n            stats={currentStats}\n            onlineCount={onlineCount}\n            compact={true}\n            showLatestComment={false}\n          />\n        )}\n\n        {/* 通知徽章 */}\n        {showNotifications && isAuthenticated && (\n          <NotificationBadge\n            position={commentConfig.position}\n            maxItems={commentConfig.maxNotifications}\n            compact={commentConfig.compact}\n          />\n        )}\n      </div>\n\n      {/* 主要内容区域 */}\n      <div className={`grid gap-6 ${\n        responsive.isDesktop && showStats && !commentConfig.compact\n          ? 'lg:grid-cols-3'\n          : 'grid-cols-1'\n      }`}>\n        {/* 评论列表和表单 */}\n        <div className={\n          responsive.isDesktop && showStats && !commentConfig.compact\n            ? 'lg:col-span-2'\n            : 'col-span-1'\n        }>\n          {/* 桌面端评论表单 */}\n          {isAuthenticated && !commentConfig.useMobileForm && (\n            <div className=\"mb-6\">\n              <CommentForm\n                postId={postId}\n                placeholder=\"分享你的想法...\"\n                autoFocus={commentConfig.autoFocus}\n                showPreview={!commentConfig.compactToolbar}\n                compact={commentConfig.compact}\n              />\n            </div>\n          )}\n\n          {/* 移动端评论按钮 */}\n          {isAuthenticated && commentConfig.useMobileForm && (\n            <div className=\"mb-6\">\n              <button\n                onClick={() => handleMobileReply()}\n                className=\"w-full p-4 text-left bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md transition-shadow\"\n              >\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center\">\n                    <svg className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n                    </svg>\n                  </div>\n                  <span className=\"text-gray-500 dark:text-gray-400\">分享你的想法...</span>\n                </div>\n              </button>\n            </div>\n          )}\n\n          {/* 评论列表 */}\n          <CommentList\n            postId={postId}\n            maxDepth={Math.min(maxDepth, commentConfig.maxDepth)}\n            enableVirtualScroll={commentConfig.enableVirtualScroll}\n            pageSize={commentConfig.pageSize}\n            autoRefresh={autoRefresh}\n            refreshInterval={refreshInterval}\n          />\n        </div>\n\n        {/* 侧边栏统计 (桌面端) */}\n        {responsive.isDesktop && showStats && !commentConfig.compact && currentStats && (\n          <div className=\"lg:col-span-1\">\n            <div className=\"sticky top-4\">\n              <CommentStats\n                stats={currentStats}\n                onlineCount={onlineCount}\n                compact={false}\n                showLatestComment={true}\n              />\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* 移动端评论表单模态框 */}\n      {commentConfig.useMobileForm && (\n        <MobileCommentForm\n          postId={postId}\n          parentId={mobileFormConfig.parentId}\n          initialContent={mobileFormConfig.initialContent}\n          isEditing={mobileFormConfig.isEditing}\n          commentId={mobileFormConfig.commentId}\n          isOpen={mobileFormOpen}\n          onClose={() => setMobileFormOpen(false)}\n          onCancel={() => setMobileFormOpen(false)}\n          onSubmitSuccess={handleSubmitSuccess}\n        />\n      )}\n\n      {/* 底部浮动统计 (移动端) */}\n      {responsive.isMobile && showStats && currentStats && (\n        <div className=\"fixed bottom-4 left-4 right-4 z-40\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-3\">\n            <CommentStats\n              stats={currentStats}\n              onlineCount={onlineCount}\n              compact={true}\n              showLatestComment={false}\n              className=\"text-center\"\n            />\n          </div>\n        </div>\n      )}\n\n      {/* 性能监控 (开发模式) */}\n      {process.env.NODE_ENV === 'development' && (\n        <div className=\"fixed bottom-4 right-4 bg-gray-900 text-white p-2 rounded text-xs z-50 opacity-50 hover:opacity-100 transition-opacity\">\n          <div>屏幕: {responsive.breakpoint}</div>\n          <div>设备: {responsive.isMobile ? 'Mobile' : responsive.isTablet ? 'Tablet' : 'Desktop'}</div>\n          <div>触摸: {responsive.isTouchDevice ? 'Yes' : 'No'}</div>\n          {currentStats && <div>评论: {currentStats.totalCount}</div>}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CommentSystem;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/CommentActions.tsx","messages":[{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":38,"column":7,"nodeType":"CallExpression","messageId":"unexpected","endLine":38,"endColumn":20},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":208,"column":13,"nodeType":"CallExpression","messageId":"unexpected","endLine":208,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 评论操作按钮组件\n * 包含点赞、回复、编辑、删除、举报等操作\n */\n\nimport React, { useState } from 'react';\nimport { Comment } from '../../../types/comment';\nimport { useAuth } from '../../../hooks/useAuth';\nimport { UserRole } from '../../../types/auth';\n\ninterface CommentActionsProps {\n  comment: Comment;\n  onReply: () => void;\n  onEdit: () => void;\n  onDelete: () => Promise<void>;\n  onLike: () => Promise<void>;\n  onReport: () => void;\n  compact?: boolean;\n  className?: string;\n}\n\nconst CommentActions: React.FC<CommentActionsProps> = ({\n  comment,\n  onReply,\n  onEdit,\n  onDelete,\n  onLike,\n  onReport,\n  compact = false,\n  className = ''\n}) => {\n  const { user, isAuthenticated } = useAuth();\n  const [actionLoading, setActionLoading] = useState<string | null>(null);\n\n  const handleLike = async () => {\n    if (!isAuthenticated) {\n      // 显示登录提示\n      alert('请先登录');\n      return;\n    }\n\n    setActionLoading('like');\n    try {\n      await onLike();\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const handleDelete = async () => {\n    setActionLoading('delete');\n    try {\n      await onDelete();\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const canEdit = comment.canEdit && user?.id === comment.authorId;\n  const canDelete = comment.canDelete && (user?.id === comment.authorId || user?.role === UserRole.Admin);\n\n  return (\n    <div className={`comment-actions flex items-center space-x-1 ${className}`}>\n      {/* 点赞按钮 */}\n      <button\n        onClick={handleLike}\n        disabled={actionLoading === 'like'}\n        className={`\n          inline-flex items-center space-x-1 px-2 py-1 text-sm rounded transition-colors\n          ${comment.isLiked\n            ? 'text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20'\n            : 'text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20'\n          }\n          ${actionLoading === 'like' ? 'opacity-50 cursor-not-allowed' : ''}\n          ${compact ? 'text-xs px-1.5 py-0.5' : ''}\n        `}\n        title={comment.isLiked ? '取消点赞' : '点赞'}\n      >\n        <svg\n          className={`${compact ? 'w-3 h-3' : 'w-4 h-4'} ${actionLoading === 'like' ? 'animate-pulse' : ''}`}\n          fill={comment.isLiked ? 'currentColor' : 'none'}\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n          />\n        </svg>\n        {!compact && comment.likeCount > 0 && (\n          <span className=\"font-medium\">{comment.likeCount}</span>\n        )}\n      </button>\n\n      {/* 回复按钮 */}\n      {isAuthenticated && (\n        <button\n          onClick={onReply}\n          className={`\n            inline-flex items-center space-x-1 px-2 py-1 text-sm rounded transition-colors\n            text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20\n            ${compact ? 'text-xs px-1.5 py-0.5' : ''}\n          `}\n          title=\"回复\"\n        >\n          <svg className={`${compact ? 'w-3 h-3' : 'w-4 h-4'}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6\"\n            />\n          </svg>\n          {!compact && <span>回复</span>}\n        </button>\n      )}\n\n      {/* 编辑按钮 */}\n      {canEdit && (\n        <button\n          onClick={onEdit}\n          className={`\n            inline-flex items-center space-x-1 px-2 py-1 text-sm rounded transition-colors\n            text-gray-500 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20\n            ${compact ? 'text-xs px-1.5 py-0.5' : ''}\n          `}\n          title=\"编辑\"\n        >\n          <svg className={`${compact ? 'w-3 h-3' : 'w-4 h-4'}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n            />\n          </svg>\n          {!compact && <span>编辑</span>}\n        </button>\n      )}\n\n      {/* 删除按钮 */}\n      {canDelete && (\n        <button\n          onClick={handleDelete}\n          disabled={actionLoading === 'delete'}\n          className={`\n            inline-flex items-center space-x-1 px-2 py-1 text-sm rounded transition-colors\n            text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20\n            ${actionLoading === 'delete' ? 'opacity-50 cursor-not-allowed' : ''}\n            ${compact ? 'text-xs px-1.5 py-0.5' : ''}\n          `}\n          title=\"删除\"\n        >\n          <svg\n            className={`${compact ? 'w-3 h-3' : 'w-4 h-4'} ${actionLoading === 'delete' ? 'animate-pulse' : ''}`}\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n            />\n          </svg>\n          {!compact && <span>删除</span>}\n        </button>\n      )}\n\n      {/* 举报按钮 */}\n      {isAuthenticated && user?.id !== comment.authorId && (\n        <button\n          onClick={onReport}\n          className={`\n            inline-flex items-center space-x-1 px-2 py-1 text-sm rounded transition-colors\n            text-gray-500 dark:text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20\n            ${compact ? 'text-xs px-1.5 py-0.5' : ''}\n          `}\n          title=\"举报\"\n        >\n          <svg className={`${compact ? 'w-3 h-3' : 'w-4 h-4'}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M3 21v-4a4 4 0 014-4h5c.88 0 1.7-.26 2.4-.72L21 9a2 2 0 000-4l-6.6 3.28c-.7.46-1.52.72-2.4.72H7a4 4 0 00-4 4v8\"\n            />\n          </svg>\n          {!compact && <span>举报</span>}\n        </button>\n      )}\n\n      {/* 分享按钮 (如果需要) */}\n      <button\n        onClick={() => {\n          const url = `${window.location.origin}${window.location.pathname}#comment-${comment.id}`;\n          if (navigator.share) {\n            navigator.share({\n              title: '评论分享',\n              text: comment.content.slice(0, 100) + '...',\n              url\n            });\n          } else {\n            navigator.clipboard.writeText(url);\n            alert('链接已复制到剪贴板');\n          }\n        }}\n        className={`\n          inline-flex items-center space-x-1 px-2 py-1 text-sm rounded transition-colors\n          text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20\n          ${compact ? 'text-xs px-1.5 py-0.5' : ''}\n        `}\n        title=\"分享链接\"\n      >\n        <svg className={`${compact ? 'w-3 h-3' : 'w-4 h-4'}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z\"\n          />\n        </svg>\n        {!compact && <span>分享</span>}\n      </button>\n    </div>\n  );\n};\n\nexport default CommentActions;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/CommentEditor.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":170,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":170,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4823,4863],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 评论编辑器组件\n * 支持纯文本和富文本编辑，Markdown预览\n */\n\nimport React, { forwardRef, useImperativeHandle, useRef, useCallback, useMemo } from 'react';\nimport { CommentEditorConfig } from '../../../types/comment';\nimport RichTextRenderer from '../../../components/common/RichTextRenderer';\n\ninterface CommentEditorProps {\n  content: string;\n  onChange: (content: string) => void;\n  placeholder?: string;\n  autoFocus?: boolean;\n  isPreviewMode?: boolean;\n  compact?: boolean;\n  config: CommentEditorConfig;\n  className?: string;\n  disabled?: boolean;\n}\n\nexport interface CommentEditorRef {\n  focus: () => void;\n  blur: () => void;\n  insertText: (text: string) => void;\n  getSelection: () => { start: number; end: number };\n  setSelection: (start: number, end: number) => void;\n}\n\nconst CommentEditor = forwardRef<CommentEditorRef, CommentEditorProps>(({\n  content,\n  onChange,\n  placeholder = '写下你的想法...',\n  autoFocus = false,\n  isPreviewMode = false,\n  compact = false,\n  config,\n  className = '',\n  disabled = false\n}, ref) => {\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  // 暴露方法给父组件\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      textareaRef.current?.focus();\n    },\n    blur: () => {\n      textareaRef.current?.blur();\n    },\n    insertText: (text: string) => {\n      const textarea = textareaRef.current;\n      if (!textarea) return;\n\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n      const newContent = content.slice(0, start) + text + content.slice(end);\n\n      onChange(newContent);\n\n      // 设置光标位置到插入文本之后\n      setTimeout(() => {\n        textarea.setSelectionRange(start + text.length, start + text.length);\n        textarea.focus();\n      }, 0);\n    },\n    getSelection: () => {\n      const textarea = textareaRef.current;\n      return {\n        start: textarea?.selectionStart || 0,\n        end: textarea?.selectionEnd || 0\n      };\n    },\n    setSelection: (start: number, end: number) => {\n      const textarea = textareaRef.current;\n      if (textarea) {\n        textarea.setSelectionRange(start, end);\n        textarea.focus();\n      }\n    }\n  }));\n\n  // 处理内容变化\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const newContent = e.target.value;\n\n    // 长度限制\n    if (newContent.length <= config.maxLength) {\n      onChange(newContent);\n    }\n  }, [onChange, config.maxLength]);\n\n  // 处理键盘事件\n  const handleKeyDown = useCallback((e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    // Ctrl+Enter 或 Cmd+Enter 提交\n    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {\n      const form = textareaRef.current?.closest('form');\n      if (form) {\n        e.preventDefault();\n        const submitButton = form.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n        if (submitButton && !submitButton.disabled) {\n          submitButton.click();\n        }\n      }\n    }\n\n    // Tab 键处理\n    if (e.key === 'Tab' && config.allowMarkdown) {\n      e.preventDefault();\n      const textarea = textareaRef.current!;\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n\n      // 插入制表符或缩进\n      const newContent = content.slice(0, start) + '    ' + content.slice(end);\n      onChange(newContent);\n\n      // 设置光标位置\n      setTimeout(() => {\n        textarea.setSelectionRange(start + 4, start + 4);\n      }, 0);\n    }\n\n    // 智能列表\n    if (e.key === 'Enter' && config.allowMarkdown) {\n      const textarea = textareaRef.current!;\n      const start = textarea.selectionStart;\n      const lines = content.slice(0, start).split('\\n');\n      const currentLine = lines[lines.length - 1];\n\n      // 检查是否是列表项\n      const listMatch = currentLine.match(/^(\\s*)([-*+]|\\d+\\.)\\s/);\n      if (listMatch) {\n        e.preventDefault();\n        const indent = listMatch[1];\n        const marker = listMatch[2];\n\n        let newMarker = marker;\n        if (/\\d+\\./.test(marker)) {\n          // 数字列表，递增\n          const num = parseInt(marker);\n          newMarker = `${num + 1}.`;\n        }\n\n        const newContent = content.slice(0, start) + `\\n${indent}${newMarker} ` + content.slice(start);\n        onChange(newContent);\n\n        // 设置光标位置\n        setTimeout(() => {\n          const newPos = start + indent.length + newMarker.length + 2;\n          textarea.setSelectionRange(newPos, newPos);\n        }, 0);\n      }\n    }\n  }, [content, onChange, config.allowMarkdown]);\n\n  // 处理粘贴事件\n  const handlePaste = useCallback((e: React.ClipboardEvent<HTMLTextAreaElement>) => {\n    if (!config.allowImageUpload) return;\n\n    const items = e.clipboardData.items;\n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      if (item.type.startsWith('image/')) {\n        e.preventDefault();\n\n        const file = item.getAsFile();\n        if (file) {\n          // 这里应该触发图片上传流程\n          console.log('Pasted image file:', file);\n          // 可以通过props传入uploadImage函数处理\n        }\n        break;\n      }\n    }\n  }, [config.allowImageUpload]);\n\n  // 自动调整高度\n  const handleTextareaRef = useCallback((element: HTMLTextAreaElement | null) => {\n    if (element) {\n      textareaRef.current = element;\n\n      const adjustHeight = () => {\n        element.style.height = 'auto';\n        const maxHeight = compact ? 200 : 400;\n        element.style.height = Math.min(element.scrollHeight, maxHeight) + 'px';\n      };\n\n      adjustHeight();\n      element.addEventListener('input', adjustHeight);\n\n      return () => {\n        element.removeEventListener('input', adjustHeight);\n      };\n    }\n  }, [compact]);\n\n  // 预览内容\n  const previewContent = useMemo(() => {\n    if (!isPreviewMode || !content.trim()) {\n      return null;\n    }\n\n    return <RichTextRenderer content={content} />;\n  }, [content, isPreviewMode]);\n\n  // 计算样式\n  const textareaClasses = `\n    w-full resize-none border-0 focus:ring-0 focus:outline-none\n    bg-transparent text-gray-900 dark:text-gray-100\n    ${compact ? 'text-sm' : 'text-base'}\n    ${compact ? 'min-h-[80px]' : 'min-h-[120px]'}\n    placeholder-gray-400 dark:placeholder-gray-500\n    ${className}\n  `;\n\n  if (isPreviewMode) {\n    return (\n      <div className={`p-4 ${compact ? 'min-h-[80px]' : 'min-h-[120px]'}`}>\n        {content.trim() ? (\n          <div className=\"prose prose-sm max-w-none text-gray-700 dark:text-gray-300 prose-blue dark:prose-invert\">\n            {previewContent}\n          </div>\n        ) : (\n          <div className=\"text-gray-400 dark:text-gray-500 italic\">\n            {placeholder}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative\">\n      <textarea\n        ref={handleTextareaRef}\n        value={content}\n        onChange={handleChange}\n        onKeyDown={handleKeyDown}\n        onPaste={handlePaste}\n        placeholder={placeholder}\n        disabled={disabled}\n        autoFocus={autoFocus}\n        className={textareaClasses}\n        style={{\n          minHeight: compact ? '80px' : '120px',\n          maxHeight: compact ? '200px' : '400px'\n        }}\n        spellCheck=\"false\"\n        autoComplete=\"off\"\n        autoCorrect=\"off\"\n        autoCapitalize=\"off\"\n      />\n\n      {/* 长度警告 */}\n      {content.length > config.maxLength * 0.9 && (\n        <div className=\"absolute bottom-2 right-2 text-xs text-orange-500 dark:text-orange-400 bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-sm\">\n          还可输入 {config.maxLength - content.length} 字符\n        </div>\n      )}\n\n      {/* 超出长度提示 */}\n      {content.length > config.maxLength && (\n        <div className=\"absolute bottom-2 right-2 text-xs text-red-500 dark:text-red-400 bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-sm\">\n          超出 {content.length - config.maxLength} 字符\n        </div>\n      )}\n    </div>\n  );\n});\n\nCommentEditor.displayName = 'CommentEditor';\n\nexport default CommentEditor;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/CommentForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[816,819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[816,819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1912,1915],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1912,1915],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":128,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3537,3540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3537,3540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 评论表单组件\n * 支持创建新评论、回复评论、编辑评论\n * 包含富文本编辑、@提及、图片上传、实时预览等功能\n */\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useCommentStore } from '../../../stores/commentStore';\nimport { useCommentSocket } from '../../../services/commentSocket';\nimport { CommentFormData } from '../../../types/comment';\nimport { useAuth } from '../../../hooks/useAuth';\nimport CommentEditor from './CommentEditor';\nimport MentionSuggestions from './MentionSuggestions';\nimport ImageUploadModal from './ImageUploadModal';\nimport EmojiPicker from './EmojiPicker';\n\ninterface CommentFormProps {\n  postId: string;\n  parentId?: string;\n  initialContent?: string;\n  placeholder?: string;\n  autoFocus?: boolean;\n  isEditing?: boolean;\n  commentId?: string;\n  onCancel?: () => void;\n  onSubmitSuccess?: (comment: any) => void;\n  className?: string;\n  compact?: boolean;\n  showPreview?: boolean;\n}\n\nconst CommentForm: React.FC<CommentFormProps> = ({\n  postId,\n  parentId,\n  initialContent = '',\n  placeholder,\n  autoFocus = false,\n  isEditing = false,\n  commentId,\n  onCancel,\n  onSubmitSuccess,\n  className = '',\n  compact = false,\n  showPreview = true\n}) => {\n  const { user } = useAuth();\n  const { actions, loadingStates, config } = useCommentStore();\n  const commentSocket = useCommentSocket();\n\n  // 表单状态\n  const [formData, setFormData] = useState<CommentFormData>({\n    content: initialContent,\n    mentionedUsers: [],\n    parentId\n  });\n\n  // UI状态\n  const [isPreviewMode, setIsPreviewMode] = useState(false);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [showImageUpload, setShowImageUpload] = useState(false);\n  const [showMentions, setShowMentions] = useState(false);\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionPosition, setMentionPosition] = useState(0);\n\n  // Refs\n  const formRef = useRef<HTMLFormElement>(null);\n  const editorRef = useRef<any>(null);\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // 草稿键\n  const draftKey = parentId ? `${postId}_${parentId}` : postId;\n\n  // 加载草稿\n  useEffect(() => {\n    if (!isEditing && !initialContent) {\n      const draft = actions.loadDraft(draftKey);\n      if (draft) {\n        setFormData(draft);\n      }\n    }\n  }, [draftKey, isEditing, initialContent, actions]);\n\n  // 自动保存草稿\n  useEffect(() => {\n    if (!isEditing && formData.content.trim()) {\n      const timeout = setTimeout(() => {\n        actions.saveDraft(draftKey, formData);\n      }, 1000);\n\n      return () => clearTimeout(timeout);\n    }\n  }, [formData, draftKey, isEditing, actions]);\n\n  // 处理输入变化\n  const handleContentChange = useCallback((content: string) => {\n    setFormData(prev => ({ ...prev, content }));\n\n    // 检测 @提及\n    const atIndex = content.lastIndexOf('@');\n    if (atIndex !== -1) {\n      const afterAt = content.slice(atIndex + 1);\n      if (afterAt.length > 0 && !afterAt.includes(' ')) {\n        setMentionQuery(afterAt);\n        setMentionPosition(atIndex);\n        setShowMentions(true);\n      } else {\n        setShowMentions(false);\n      }\n    } else {\n      setShowMentions(false);\n    }\n\n    // 发送输入状态\n    if (commentSocket.isConnected) {\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n\n      commentSocket.startTyping(postId, parentId);\n\n      typingTimeoutRef.current = setTimeout(() => {\n        commentSocket.stopTyping(postId, parentId);\n      }, 2000);\n    }\n  }, [postId, parentId, commentSocket]);\n\n  // 处理提及选择\n  const handleMentionSelect = useCallback((user: any) => {\n    const { content } = formData;\n    const beforeMention = content.slice(0, mentionPosition);\n    const afterMention = content.slice(mentionPosition + mentionQuery.length + 1);\n    const newContent = `${beforeMention}@${user.username} ${afterMention}`;\n\n    setFormData(prev => ({\n      ...prev,\n      content: newContent,\n      mentionedUsers: [...prev.mentionedUsers.filter(id => id !== user.id), user.id]\n    }));\n\n    setShowMentions(false);\n    editorRef.current?.focus();\n  }, [formData, mentionPosition, mentionQuery]);\n\n  // 处理表情选择\n  const handleEmojiSelect = useCallback((emoji: string) => {\n    const currentContent = formData.content;\n    const newContent = currentContent + emoji;\n\n    setFormData(prev => ({ ...prev, content: newContent }));\n    setShowEmojiPicker(false);\n    editorRef.current?.focus();\n  }, [formData.content]);\n\n  // 处理图片上传\n  const handleImageInsert = useCallback((imageUrl: string, alt?: string) => {\n    const markdownImage = `![${alt || ''}](${imageUrl})`;\n    const newContent = formData.content + '\\n' + markdownImage;\n\n    setFormData(prev => ({ ...prev, content: newContent }));\n    setShowImageUpload(false);\n    editorRef.current?.focus();\n  }, [formData.content]);\n\n  // 表单提交\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.content.trim() || !user) {\n      return;\n    }\n\n    try {\n      let result;\n\n      if (isEditing && commentId) {\n        await actions.updateComment(commentId, {\n          content: formData.content,\n          mentionedUsers: formData.mentionedUsers\n        });\n        result = { success: true };\n      } else {\n        result = await actions.createComment(formData, postId);\n      }\n\n      if (result) {\n        // 清除表单\n        setFormData({\n          content: '',\n          mentionedUsers: [],\n          parentId\n        });\n\n        // 清除草稿\n        actions.clearDraft(draftKey);\n\n        // 停止输入状态\n        if (commentSocket.isConnected) {\n          commentSocket.stopTyping(postId, parentId);\n        }\n\n        // 回调\n        if (onSubmitSuccess) {\n          onSubmitSuccess(result);\n        }\n\n        if (onCancel) {\n          onCancel();\n        }\n      }\n    } catch (error) {\n      console.error('Submit comment failed:', error);\n    }\n  };\n\n  // 取消操作\n  const handleCancel = () => {\n    if (!isEditing) {\n      // 保存为草稿\n      if (formData.content.trim()) {\n        actions.saveDraft(draftKey, formData);\n      }\n    }\n\n    // 停止输入状态\n    if (commentSocket.isConnected) {\n      commentSocket.stopTyping(postId, parentId);\n    }\n\n    if (onCancel) {\n      onCancel();\n    }\n  };\n\n  // 清空表单\n  const handleClear = () => {\n    setFormData({\n      content: '',\n      mentionedUsers: [],\n      parentId\n    });\n    actions.clearDraft(draftKey);\n  };\n\n  const isLoading = loadingStates[isEditing ? `updating_${commentId}` : 'creating'] || false;\n  const canSubmit = formData.content.trim().length > 0 && user && !isLoading;\n\n  const finalPlaceholder = placeholder ||\n    (parentId ? '写下你的回复...' : '分享你的想法...') +\n    (config.allowMarkdown ? ' (支持 Markdown)' : '');\n\n  return (\n    <form\n      ref={formRef}\n      onSubmit={handleSubmit}\n      className={`comment-form ${className} ${compact ? 'compact' : ''}`}\n      id={!parentId ? 'comment-form' : undefined}\n    >\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm\">\n        {/* 工具栏 */}\n        <div className=\"flex items-center justify-between px-4 py-2 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center space-x-2\">\n            {/* 格式化按钮 */}\n            {config.allowMarkdown && (\n              <div className=\"flex items-center space-x-1\">\n                <button\n                  type=\"button\"\n                  onClick={() => editorRef.current?.insertText('**粗体**')}\n                  className=\"p-1.5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700\"\n                  title=\"粗体\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 4v16M10 4v16M14 8h4M14 16h4\" />\n                  </svg>\n                </button>\n\n                <button\n                  type=\"button\"\n                  onClick={() => editorRef.current?.insertText('*斜体*')}\n                  className=\"p-1.5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700\"\n                  title=\"斜体\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 4l4 16M6 8l12 0M4 16l12 0\" />\n                  </svg>\n                </button>\n\n                <button\n                  type=\"button\"\n                  onClick={() => editorRef.current?.insertText('[链接文本](链接地址)')}\n                  className=\"p-1.5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700\"\n                  title=\"插入链接\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n                  </svg>\n                </button>\n\n                <button\n                  type=\"button\"\n                  onClick={() => editorRef.current?.insertText('```\\n代码\\n```')}\n                  className=\"p-1.5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700\"\n                  title=\"插入代码\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4\" />\n                  </svg>\n                </button>\n\n                <div className=\"w-px h-4 bg-gray-300 dark:bg-gray-600\"></div>\n              </div>\n            )}\n\n            {/* 表情按钮 */}\n            {config.allowEmoji && (\n              <div className=\"relative\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowEmojiPicker(!showEmojiPicker)}\n                  className=\"p-1.5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700\"\n                  title=\"插入表情\"\n                >\n                  😀\n                </button>\n                {showEmojiPicker && (\n                  <EmojiPicker\n                    onEmojiSelect={handleEmojiSelect}\n                    onClose={() => setShowEmojiPicker(false)}\n                  />\n                )}\n              </div>\n            )}\n\n            {/* 图片上传按钮 */}\n            {config.allowImageUpload && (\n              <button\n                type=\"button\"\n                onClick={() => setShowImageUpload(true)}\n                className=\"p-1.5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded hover:bg-gray-100 dark:hover:bg-gray-700\"\n                title=\"插入图片\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n              </button>\n            )}\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            {/* 预览切换 */}\n            {showPreview && config.allowMarkdown && (\n              <button\n                type=\"button\"\n                onClick={() => setIsPreviewMode(!isPreviewMode)}\n                className={`px-2 py-1 text-sm rounded transition-colors ${\n                  isPreviewMode\n                    ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300'\n                    : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200'\n                }`}\n              >\n                {isPreviewMode ? '编辑' : '预览'}\n              </button>\n            )}\n\n            {/* 字数统计 */}\n            <span className={`text-xs ${\n              formData.content.length > config.maxLength * 0.8\n                ? 'text-orange-500'\n                : formData.content.length > config.maxLength\n                ? 'text-red-500'\n                : 'text-gray-400 dark:text-gray-500'\n            }`}>\n              {formData.content.length}/{config.maxLength}\n            </span>\n          </div>\n        </div>\n\n        {/* 编辑器 */}\n        <div className=\"relative\">\n          <CommentEditor\n            ref={editorRef}\n            content={formData.content}\n            onChange={handleContentChange}\n            placeholder={finalPlaceholder}\n            autoFocus={autoFocus}\n            isPreviewMode={isPreviewMode}\n            compact={compact}\n            config={config}\n          />\n\n          {/* @提及建议 */}\n          {showMentions && (\n            <MentionSuggestions\n              query={mentionQuery}\n              onSelect={handleMentionSelect}\n              onClose={() => setShowMentions(false)}\n            />\n          )}\n        </div>\n\n        {/* 操作按钮 */}\n        <div className=\"flex items-center justify-between px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750 rounded-b-lg\">\n          <div className=\"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400\">\n            {config.allowMarkdown && (\n              <span>支持 Markdown</span>\n            )}\n            {config.allowMention && (\n              <span>支持 @提及</span>\n            )}\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            {/* 清空按钮 */}\n            {formData.content.trim() && (\n              <button\n                type=\"button\"\n                onClick={handleClear}\n                className=\"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200\"\n              >\n                清空\n              </button>\n            )}\n\n            {/* 取消按钮 */}\n            {onCancel && (\n              <button\n                type=\"button\"\n                onClick={handleCancel}\n                className=\"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n              >\n                取消\n              </button>\n            )}\n\n            {/* 提交按钮 */}\n            <button\n              type=\"submit\"\n              disabled={!canSubmit}\n              className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center space-x-2\"\n            >\n              {isLoading && (\n                <svg className=\"w-4 h-4 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n              )}\n              <span>\n                {isLoading\n                  ? (isEditing ? '更新中...' : '发布中...')\n                  : (isEditing ? '更新评论' : (parentId ? '发布回复' : '发布评论'))\n                }\n              </span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* 图片上传模态框 */}\n      {showImageUpload && (\n        <ImageUploadModal\n          onImageInsert={handleImageInsert}\n          onClose={() => setShowImageUpload(false)}\n        />\n      )}\n    </form>\n  );\n};\n\nexport default CommentForm;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/CommentItem.tsx","messages":[{"ruleId":"no-alert","severity":1,"message":"Unexpected confirm.","line":82,"column":9,"nodeType":"CallExpression","messageId":"unexpected","endLine":82,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 单个评论项组件\n * 支持嵌套显示、互动操作、编辑等功能\n */\n\nimport React, { useState, useMemo } from 'react';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\nimport { Comment, CommentStatus } from '../../../types/comment';\nimport UserAvatar from '../../../components/common/UserAvatar';\nimport CommentActions from './CommentActions';\nimport CommentForm from './CommentForm';\nimport RichTextRenderer from '../../../components/common/RichTextRenderer';\nimport StatusBadge from './StatusBadge';\n\ninterface CommentItemProps {\n  comment: Comment;\n  depth: number;\n  maxDepth: number;\n  hasReplies: boolean;\n  isExpanded: boolean;\n  onToggleReplies: (commentId: string) => void;\n  onReply: (commentId: string) => void;\n  onEdit: (commentId: string) => void;\n  onDelete: (commentId: string) => Promise<void>;\n  onLike: (commentId: string) => Promise<void>;\n  onUnlike: (commentId: string) => Promise<void>;\n  onReport: (commentId: string, reason: string, description?: string) => Promise<void>;\n  isReplying: boolean;\n  isEditing: boolean;\n  postId: string;\n  className?: string;\n}\n\nconst CommentItem: React.FC<CommentItemProps> = ({\n  comment,\n  depth,\n  maxDepth,\n  hasReplies,\n  isExpanded,\n  onToggleReplies,\n  onReply,\n  onEdit,\n  onDelete,\n  onLike,\n  onUnlike,\n  onReport,\n  isReplying,\n  isEditing,\n  postId,\n  className = ''\n}) => {\n  const [showActions, setShowActions] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [showFullContent, setShowFullContent] = useState(false);\n  const [reportDialogOpen, setReportDialogOpen] = useState(false);\n\n  // 计算缩进样式\n  const indentStyle = useMemo(() => {\n    const baseIndent = depth * 24; // 每级缩进24px\n    return {\n      marginLeft: `${Math.min(baseIndent, maxDepth * 24)}px`\n    };\n  }, [depth, maxDepth]);\n\n  // 格式化时间\n  const relativeTime = useMemo(() => {\n    return formatDistanceToNow(new Date(comment.createdAt), {\n      addSuffix: true,\n      locale: zhCN\n    });\n  }, [comment.createdAt]);\n\n  // 截断长内容\n  const shouldTruncate = comment.content.length > 300;\n  const displayContent = shouldTruncate && !showFullContent\n    ? comment.content.slice(0, 300) + '...'\n    : comment.content;\n\n  // 删除处理\n  const handleDelete = async () => {\n    if (window.confirm('确定要删除这条评论吗？')) {\n      setIsDeleting(true);\n      try {\n        await onDelete(comment.id);\n      } catch (error) {\n        console.error('Delete failed:', error);\n      } finally {\n        setIsDeleting(false);\n      }\n    }\n  };\n\n  // 点赞处理\n  const handleLikeToggle = async () => {\n    try {\n      if (comment.isLiked) {\n        await onUnlike(comment.id);\n      } else {\n        await onLike(comment.id);\n      }\n    } catch (error) {\n      console.error('Like toggle failed:', error);\n    }\n  };\n\n  // 取消回复\n  const handleCancelReply = () => {\n    onReply('');\n  };\n\n  // 取消编辑\n  const handleCancelEdit = () => {\n    onEdit('');\n  };\n\n  // 处理回复\n  const handleToggleReplies = () => {\n    onToggleReplies(comment.id);\n  };\n\n  // 判断是否显示连接线\n  const showConnector = depth > 0;\n  const isLastReply = false; // 这个需要从父组件传入\n\n  // 内容审核状态样式\n  const getStatusStyle = (status: CommentStatus) => {\n    switch (status) {\n      case CommentStatus.Pending:\n        return 'bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800';\n      case CommentStatus.Rejected:\n        return 'bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800';\n      case CommentStatus.Hidden:\n        return 'bg-gray-50 border-gray-200 dark:bg-gray-800/50 dark:border-gray-700';\n      case CommentStatus.Spam:\n        return 'bg-red-100 border-red-300 dark:bg-red-900/30 dark:border-red-700';\n      default:\n        return 'bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700';\n    }\n  };\n\n  return (\n    <article\n      className={`comment-item relative ${className}`}\n      style={indentStyle}\n      onMouseEnter={() => setShowActions(true)}\n      onMouseLeave={() => setShowActions(false)}\n    >\n      {/* 连接线 */}\n      {showConnector && (\n        <div className=\"absolute left-0 top-0 bottom-0 w-px bg-gray-200 dark:bg-gray-700\">\n          <div className=\"absolute top-6 left-0 w-4 h-px bg-gray-200 dark:bg-gray-700\"></div>\n          {!isLastReply && (\n            <div className=\"absolute top-6 left-0 bottom-0 w-px bg-gray-200 dark:bg-gray-700\"></div>\n          )}\n        </div>\n      )}\n\n      <div className={`\n        comment-content rounded-lg border p-4 transition-all duration-200\n        ${getStatusStyle(comment.status)}\n        ${showActions ? 'shadow-md' : 'shadow-sm'}\n        ${isDeleting ? 'opacity-50 pointer-events-none' : ''}\n      `}>\n        {/* 评论头部 */}\n        <div className=\"comment-header flex items-start justify-between mb-3\">\n          <div className=\"flex items-center space-x-3\">\n            <UserAvatar\n              user={comment.author}\n              size=\"sm\"\n              showStatus={true}\n            />\n\n            <div className=\"comment-meta\">\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"font-medium text-gray-900 dark:text-gray-100\">\n                  {comment.author?.displayName || comment.author?.username}\n                </span>\n\n                {comment.author?.role && comment.author.role !== 'User' && (\n                  <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium\n                                   bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\">\n                    {comment.author.role}\n                  </span>\n                )}\n\n                {comment.author?.isVip && (\n                  <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium\n                                   bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200\">\n                    VIP\n                  </span>\n                )}\n              </div>\n\n              <div className=\"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                <time dateTime={comment.createdAt} title={new Date(comment.createdAt).toLocaleString()}>\n                  {relativeTime}\n                </time>\n\n                {comment.updatedAt !== comment.createdAt && (\n                  <>\n                    <span>·</span>\n                    <span className=\"text-xs\">已编辑</span>\n                  </>\n                )}\n\n                {comment.status !== CommentStatus.Approved && (\n                  <>\n                    <span>·</span>\n                    <StatusBadge status={comment.status} />\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* 快速操作 */}\n          <div className={`comment-quick-actions transition-opacity duration-200 ${\n            showActions ? 'opacity-100' : 'opacity-0'\n          }`}>\n            <CommentActions\n              comment={comment}\n              onReply={() => onReply(comment.id)}\n              onEdit={() => onEdit(comment.id)}\n              onDelete={handleDelete}\n              onLike={handleLikeToggle}\n              onReport={() => setReportDialogOpen(true)}\n              compact={true}\n            />\n          </div>\n        </div>\n\n        {/* 评论内容 */}\n        <div className=\"comment-body mb-3\">\n          {isEditing ? (\n            <CommentForm\n              postId={postId}\n              parentId={comment.parentId}\n              initialContent={comment.content}\n              isEditing={true}\n              commentId={comment.id}\n              onCancel={handleCancelEdit}\n              className=\"mt-3\"\n            />\n          ) : (\n            <>\n              <div className=\"prose prose-sm max-w-none text-gray-700 dark:text-gray-300\n                              prose-blue dark:prose-invert\">\n                <RichTextRenderer content={comment.renderedContent || displayContent} />\n              </div>\n\n              {shouldTruncate && (\n                <button\n                  onClick={() => setShowFullContent(!showFullContent)}\n                  className=\"text-blue-600 dark:text-blue-400 text-sm hover:underline mt-2\"\n                >\n                  {showFullContent ? '收起' : '展开'}\n                </button>\n              )}\n            </>\n          )}\n        </div>\n\n        {/* 评论操作栏 */}\n        <div className=\"comment-actions flex items-center justify-between\">\n          <div className=\"flex items-center space-x-4\">\n            <CommentActions\n              comment={comment}\n              onReply={() => onReply(comment.id)}\n              onEdit={() => onEdit(comment.id)}\n              onDelete={handleDelete}\n              onLike={handleLikeToggle}\n              onReport={() => setReportDialogOpen(true)}\n              compact={false}\n            />\n\n            {/* 回复数和展开控制 */}\n            {hasReplies && (\n              <button\n                onClick={handleToggleReplies}\n                className=\"flex items-center space-x-1 text-sm text-gray-500 dark:text-gray-400\n                           hover:text-blue-600 dark:hover:text-blue-400 transition-colors\"\n              >\n                <svg\n                  className={`w-4 h-4 transition-transform duration-200 ${\n                    isExpanded ? 'rotate-180' : ''\n                  }`}\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M19 9l-7 7-7-7\"\n                  />\n                </svg>\n                <span>\n                  {isExpanded ? '收起' : '展开'} {comment.replyCount} 条回复\n                </span>\n              </button>\n            )}\n\n            {/* 深度限制提示 */}\n            {depth >= maxDepth && hasReplies && !isExpanded && (\n              <span className=\"text-xs text-gray-400 dark:text-gray-500\">\n                回复层级已达上限\n              </span>\n            )}\n          </div>\n\n          {/* 点赞数 */}\n          {comment.likeCount > 0 && (\n            <div className=\"flex items-center space-x-1 text-sm text-gray-500 dark:text-gray-400\">\n              <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path d=\"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z\" />\n              </svg>\n              <span>{comment.likeCount}</span>\n            </div>\n          )}\n        </div>\n\n        {/* 回复表单 */}\n        {isReplying && (\n          <CommentForm\n            postId={postId}\n            parentId={comment.id}\n            onCancel={handleCancelReply}\n            placeholder={`回复 @${comment.author?.displayName || comment.author?.username}`}\n            className=\"mt-4\"\n            autoFocus={true}\n          />\n        )}\n      </div>\n\n      {/* 举报对话框 */}\n      {reportDialogOpen && (\n        <ReportDialog\n          comment={comment}\n          onReport={async (reason, description) => {\n            await onReport(comment.id, reason, description);\n            setReportDialogOpen(false);\n          }}\n          onCancel={() => setReportDialogOpen(false)}\n        />\n      )}\n    </article>\n  );\n};\n\n// 简单的举报对话框组件\nconst ReportDialog: React.FC<{\n  comment: Comment;\n  onReport: (reason: string, description?: string) => Promise<void>;\n  onCancel: () => void;\n}> = ({ _comment, onReport, onCancel }) => {\n  const [reason, setReason] = useState('');\n  const [description, setDescription] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!reason.trim()) return;\n\n    setSubmitting(true);\n    try {\n      await onReport(reason, description.trim() || undefined);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const reasons = [\n    { value: 'Spam', label: '垃圾信息' },\n    { value: 'Harassment', label: '骚扰辱骂' },\n    { value: 'Inappropriate', label: '不当内容' },\n    { value: 'OffTopic', label: '偏离主题' },\n    { value: 'Other', label: '其他' }\n  ];\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md\">\n        <div className=\"p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4\">\n            举报评论\n          </h3>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                举报原因\n              </label>\n              <select\n                value={reason}\n                onChange={(e) => setReason(e.target.value)}\n                className=\"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md\n                           bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\n                required\n              >\n                <option value=\"\">请选择举报原因</option>\n                {reasons.map(r => (\n                  <option key={r.value} value={r.value}>{r.label}</option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                详细说明（可选）\n              </label>\n              <textarea\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                rows={3}\n                className=\"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md\n                           bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\n                placeholder=\"请详细说明举报原因...\"\n              />\n            </div>\n\n            <div className=\"flex justify-end space-x-3\">\n              <button\n                type=\"button\"\n                onClick={onCancel}\n                disabled={submitting}\n                className=\"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100\n                           dark:hover:bg-gray-700 rounded-md transition-colors\"\n              >\n                取消\n              </button>\n              <button\n                type=\"submit\"\n                disabled={!reason.trim() || submitting}\n                className=\"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400\n                           text-white rounded-md transition-colors disabled:cursor-not-allowed\"\n              >\n                {submitting ? '提交中...' : '提交举报'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CommentItem;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/CommentList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCommentSocket' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[842,845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[842,845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":120,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3439,3442],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3439,3442],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 评论列表组件\n * 支持嵌套回复、虚拟滚动、排序、筛选等功能\n */\n\nimport React, { useEffect, useMemo, useState, useCallback, useRef } from 'react';\nimport { useCommentStore, useComments } from '../../../stores/commentStore';\nimport { useCommentSocket } from '../../../services/commentSocket';\nimport { CommentSortOrder, CommentStatus } from '../../../types/comment';\nimport CommentItem from './CommentItem';\nimport CommentSkeleton from './CommentSkeleton';\nimport EmptyComments from './EmptyComments';\nimport SortControls from './SortControls';\nimport TypingIndicator from './TypingIndicator';\n\ninterface CommentListProps {\n  postId: string;\n  className?: string;\n  maxDepth?: number;\n  showSortControls?: boolean;\n  enableVirtualScroll?: boolean;\n  pageSize?: number;\n  autoRefresh?: boolean;\n  refreshInterval?: number;\n}\n\ninterface FlattenedComment {\n  comment: any;\n  depth: number;\n  hasReplies: boolean;\n  isLastReply: boolean;\n}\n\n\nconst CommentList: React.FC<CommentListProps> = ({\n  postId,\n  className = '',\n  maxDepth = 3,\n  showSortControls = true,\n  enableVirtualScroll = false,\n  pageSize = 20,\n  autoRefresh = false,\n  refreshInterval = 30000\n}) => {\n  const { comments, loading, pagination, stats, actions } = useComments(postId);\n  const { config, typingUsers, onlineUserCounts, replyingTo, editingComment } = useCommentStore();\n  const [expandedReplies, setExpandedReplies] = useState<Set<string>>(new Set());\n  const [sortOrder, setSortOrder] = useState(config.sortOrder);\n  const [statusFilter, setStatusFilter] = useState<CommentStatus[]>([CommentStatus.Approved]);\n  const autoRefreshRef = useRef<NodeJS.Timeout | null>(null);\n\n  // 初始化评论数据和实时连接\n  useEffect(() => {\n    const initializeComments = async () => {\n      await actions.loadComments(postId, {\n        pageSize,\n        sortOrder,\n        includeStatus: statusFilter\n      });\n\n      // 初始化实时功能\n      actions.initializeRealtime(postId);\n    };\n\n    initializeComments();\n\n    // 自动刷新\n    if (autoRefresh) {\n      autoRefreshRef.current = setInterval(() => {\n        actions.refreshComments(postId);\n      }, refreshInterval);\n    }\n\n    return () => {\n      if (autoRefreshRef.current) {\n        clearInterval(autoRefreshRef.current);\n      }\n      actions.cleanupRealtime();\n    };\n  }, [postId, pageSize, sortOrder, statusFilter, autoRefresh, refreshInterval, actions]);\n\n  // 排序变化处理\n  const handleSortChange = useCallback(async (newSortOrder: CommentSortOrder) => {\n    setSortOrder(newSortOrder);\n    actions.updateConfig({ sortOrder: newSortOrder });\n    await actions.loadComments(postId, {\n      sortOrder: newSortOrder,\n      includeStatus: statusFilter,\n      pageSize\n    });\n  }, [postId, pageSize, statusFilter, actions]);\n\n  // 状态筛选变化处理\n  const handleStatusFilterChange = useCallback(async (newStatusFilter: CommentStatus[]) => {\n    setStatusFilter(newStatusFilter);\n    await actions.loadComments(postId, {\n      sortOrder,\n      includeStatus: newStatusFilter,\n      pageSize\n    });\n  }, [postId, pageSize, sortOrder, actions]);\n\n  // 展开/收起回复\n  const toggleReplies = useCallback((commentId: string) => {\n    setExpandedReplies(prev => {\n      const next = new Set(prev);\n      if (next.has(commentId)) {\n        next.delete(commentId);\n      } else {\n        next.add(commentId);\n      }\n      return next;\n    });\n  }, []);\n\n  // 扁平化评论树，用于虚拟滚动\n  const flattenedComments = useMemo(() => {\n    const result: FlattenedComment[] = [];\n\n    const flatten = (comments: any[], depth = 0, parentExpanded = true) => {\n      comments.forEach((comment, index) => {\n        const hasReplies = comment.replies && comment.replies.length > 0;\n        const isLastReply = index === comments.length - 1;\n        const isExpanded = expandedReplies.has(comment.id);\n\n        if (parentExpanded && depth <= maxDepth) {\n          result.push({\n            comment,\n            depth,\n            hasReplies,\n            isLastReply\n          });\n\n          // 递归处理回复\n          if (hasReplies && isExpanded && depth < maxDepth) {\n            flatten(comment.replies, depth + 1, true);\n          }\n        }\n      });\n    };\n\n    flatten(comments);\n    return result;\n  }, [comments, expandedReplies, maxDepth]);\n\n\n  // 获取当前文章的输入用户\n  const currentTypingUsers = useMemo(() => {\n    return typingUsers.filter(user => user.postId === postId);\n  }, [typingUsers, postId]);\n\n  const onlineCount = onlineUserCounts[postId] || 0;\n\n  if (loading && comments.length === 0) {\n    return (\n      <div className={`space-y-4 ${className}`}>\n        {Array.from({ length: 3 }).map((_, index) => (\n          <CommentSkeleton key={index} />\n        ))}\n      </div>\n    );\n  }\n\n  if (!loading && comments.length === 0) {\n    return (\n      <div className={className}>\n        <EmptyComments postId={postId} />\n      </div>\n    );\n  }\n\n  return (\n    <div className={`comment-list ${className}`}>\n      {/* 标题和统计 */}\n      <div className=\"comment-list-header mb-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n            评论 {stats && `(${stats.totalCount})`}\n          </h3>\n\n          {onlineCount > 0 && (\n            <div className=\"flex items-center text-sm text-gray-500 dark:text-gray-400\">\n              <div className=\"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse\"></div>\n              {onlineCount} 人在线\n            </div>\n          )}\n        </div>\n\n        {/* 排序控制 */}\n        {showSortControls && (\n          <SortControls\n            currentSort={sortOrder}\n            onSortChange={handleSortChange}\n            statusFilter={statusFilter}\n            onStatusFilterChange={handleStatusFilterChange}\n          />\n        )}\n      </div>\n\n      {/* 输入指示器 */}\n      {currentTypingUsers.length > 0 && (\n        <TypingIndicator users={currentTypingUsers} className=\"mb-4\" />\n      )}\n\n      {/* 评论列表 */}\n      <div className=\"comment-list-content\">\n        <div className=\"space-y-4\">\n          {flattenedComments.map((item, _index) => (\n            <CommentItem\n              key={item.comment.id}\n              comment={item.comment}\n              depth={item.depth}\n              maxDepth={maxDepth}\n              hasReplies={item.hasReplies}\n              isExpanded={expandedReplies.has(item.comment.id)}\n              onToggleReplies={toggleReplies}\n              onReply={(commentId) => actions.setReplyingTo(commentId)}\n              onEdit={(commentId) => actions.setEditingComment(commentId)}\n              onDelete={actions.deleteComment}\n              onLike={actions.likeComment}\n              onUnlike={actions.unlikeComment}\n              onReport={actions.reportComment}\n              isReplying={replyingTo === item.comment.id}\n              isEditing={editingComment === item.comment.id}\n              postId={postId}\n            />\n          ))}\n        </div>\n\n        {/* 加载更多按钮 */}\n        {pagination?.hasMore && !enableVirtualScroll && (\n          <div className=\"flex justify-center mt-8\">\n            <button\n              onClick={() => actions.loadMoreComments(postId)}\n              disabled={loading}\n              className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400\n                         text-white rounded-lg transition-colors duration-200\n                         disabled:cursor-not-allowed\"\n            >\n              {loading ? '加载中...' : '加载更多评论'}\n            </button>\n          </div>\n        )}\n\n        {/* 加载中指示器 */}\n        {loading && comments.length > 0 && (\n          <div className=\"flex justify-center mt-4\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CommentList;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/CommentSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/CommentStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/EmojiPicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/EmptyComments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/ImageUploadModal.tsx","messages":[{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":61,"column":7,"nodeType":"CallExpression","messageId":"unexpected","endLine":61,"endColumn":23},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":68,"column":7,"nodeType":"CallExpression","messageId":"unexpected","endLine":68,"endColumn":28},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":89,"column":7,"nodeType":"CallExpression","messageId":"unexpected","endLine":89,"endColumn":26},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":141,"column":7,"nodeType":"CallExpression","messageId":"unexpected","endLine":141,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 图片上传模态框组件\n * 支持拖拽上传、粘贴上传、URL导入\n */\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { uploadApi } from '../../../services/uploadApi';\n\ninterface ImageUploadModalProps {\n  onImageInsert: (imageUrl: string, alt?: string) => void;\n  onClose: () => void;\n  className?: string;\n}\n\nconst ImageUploadModal: React.FC<ImageUploadModalProps> = ({\n  onImageInsert,\n  onClose,\n  className = ''\n}) => {\n  const [uploadMethod, setUploadMethod] = useState<'upload' | 'url'>('upload');\n  const [imageUrl, setImageUrl] = useState('');\n  const [altText, setAltText] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const [dragActive, setDragActive] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState('');\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  // 点击外部关闭\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (modalRef.current && !modalRef.current.contains(e.target as Node)) {\n        onClose();\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [onClose]);\n\n  // ESC键关闭\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [onClose]);\n\n  // 文件上传处理\n  const handleFileUpload = useCallback(async (files: FileList) => {\n    const file = files[0];\n    if (!file) return;\n\n    // 验证文件类型\n    if (!file.type.startsWith('image/')) {\n      alert('请选择图片文件');\n      return;\n    }\n\n    // 验证文件大小 (5MB)\n    const maxSize = 5 * 1024 * 1024;\n    if (file.size > maxSize) {\n      alert('图片大小不能超过 5MB');\n      return;\n    }\n\n    setUploading(true);\n\n    try {\n      // 上传图片\n      const uploadResult = await uploadApi.uploadImage(file);\n\n      // 设置预览\n      setPreviewUrl(uploadResult.url);\n      setImageUrl(uploadResult.url);\n\n      // 自动填充alt文本\n      if (!altText && uploadResult.filename) {\n        setAltText(uploadResult.filename.replace(/\\.[^/.]+$/, ''));\n      }\n\n    } catch (error) {\n      console.error('Image upload failed:', error);\n      alert('图片上传失败，请重试');\n    } finally {\n      setUploading(false);\n    }\n  }, [altText]);\n\n  // 拖拽处理\n  const handleDrag = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  }, []);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      handleFileUpload(e.dataTransfer.files);\n    }\n  }, [handleFileUpload]);\n\n  // 文件选择处理\n  const handleFileInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      handleFileUpload(e.target.files);\n    }\n  }, [handleFileUpload]);\n\n  // URL输入处理\n  const handleUrlChange = useCallback((url: string) => {\n    setImageUrl(url);\n\n    // 简单的URL验证和预览\n    if (url && (url.startsWith('http://') || url.startsWith('https://'))) {\n      setPreviewUrl(url);\n    } else {\n      setPreviewUrl('');\n    }\n  }, []);\n\n  // 提交处理\n  const handleSubmit = useCallback((e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!imageUrl.trim()) {\n      alert('请上传图片或输入图片URL');\n      return;\n    }\n\n    onImageInsert(imageUrl, altText.trim());\n  }, [imageUrl, altText, onImageInsert]);\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\">\n      <div\n        ref={modalRef}\n        className={`bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md ${className}`}\n      >\n        <div className=\"p-6\">\n          {/* 标题 */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-gray-100\">\n              插入图片\n            </h3>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          {/* 上传方式切换 */}\n          <div className=\"flex border-b border-gray-200 dark:border-gray-700 mb-6\">\n            <button\n              onClick={() => setUploadMethod('upload')}\n              className={`flex-1 px-3 py-2 text-sm font-medium text-center border-b-2 transition-colors ${\n                uploadMethod === 'upload'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'\n              }`}\n            >\n              本地上传\n            </button>\n            <button\n              onClick={() => setUploadMethod('url')}\n              className={`flex-1 px-3 py-2 text-sm font-medium text-center border-b-2 transition-colors ${\n                uploadMethod === 'url'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'\n              }`}\n            >\n              链接导入\n            </button>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* 本地上传 */}\n            {uploadMethod === 'upload' && (\n              <div>\n                <div\n                  className={`\n                    relative border-2 border-dashed rounded-lg p-6 text-center transition-colors\n                    ${dragActive\n                      ? 'border-blue-400 bg-blue-50 dark:bg-blue-900/20'\n                      : 'border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500'\n                    }\n                  `}\n                  onDragEnter={handleDrag}\n                  onDragLeave={handleDrag}\n                  onDragOver={handleDrag}\n                  onDrop={handleDrop}\n                >\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleFileInputChange}\n                    className=\"hidden\"\n                  />\n\n                  {uploading ? (\n                    <div className=\"flex flex-col items-center\">\n                      <svg className=\"w-8 h-8 animate-spin text-blue-500 mb-2\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                      </svg>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">上传中...</p>\n                    </div>\n                  ) : (\n                    <div className=\"flex flex-col items-center\">\n                      <svg className=\"w-12 h-12 text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                      </svg>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-2\">\n                        拖拽图片到这里或\n                        <button\n                          type=\"button\"\n                          onClick={() => fileInputRef.current?.click()}\n                          className=\"text-blue-600 dark:text-blue-400 underline ml-1\"\n                        >\n                          点击上传\n                        </button>\n                      </p>\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                        支持 JPG、PNG、GIF，最大 5MB\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* URL导入 */}\n            {uploadMethod === 'url' && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  图片URL\n                </label>\n                <input\n                  type=\"url\"\n                  value={imageUrl}\n                  onChange={(e) => handleUrlChange(e.target.value)}\n                  placeholder=\"https://example.com/image.jpg\"\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md\n                             bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\n                             focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  required\n                />\n              </div>\n            )}\n\n            {/* Alt文本 */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                图片描述 (可选)\n              </label>\n              <input\n                type=\"text\"\n                value={altText}\n                onChange={(e) => setAltText(e.target.value)}\n                placeholder=\"描述图片内容\"\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md\n                           bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\n                           focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n            </div>\n\n            {/* 预览 */}\n            {previewUrl && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  预览\n                </label>\n                <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden\">\n                  <img\n                    src={previewUrl}\n                    alt={altText || '预览图片'}\n                    className=\"w-full max-h-48 object-contain bg-gray-50 dark:bg-gray-900\"\n                    onError={() => setPreviewUrl('')}\n                  />\n                </div>\n              </div>\n            )}\n\n            {/* 操作按钮 */}\n            <div className=\"flex justify-end space-x-3 pt-4\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\n              >\n                取消\n              </button>\n              <button\n                type=\"submit\"\n                disabled={!imageUrl.trim() || uploading}\n                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed rounded-lg transition-colors\"\n              >\n                {uploading ? '上传中...' : '插入图片'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ImageUploadModal;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/MentionSuggestions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/MobileCommentForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[716,719],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[716,719],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1628,1631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1628,1631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'textareaRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":61,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3647,3650],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3647,3650],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 移动端评论表单组件\n * 专门为移动设备优化的评论表单\n * 支持滑动操作、触摸友好、虚拟键盘适配\n */\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useCommentStore } from '../../../stores/commentStore';\nimport { CommentFormData } from '../../../types/comment';\nimport { useAuth } from '../../../hooks/useAuth';\nimport CommentEditor from './CommentEditor';\nimport EmojiPicker from './EmojiPicker';\nimport MentionSuggestions from './MentionSuggestions';\n\ninterface MobileCommentFormProps {\n  postId: string;\n  parentId?: string;\n  initialContent?: string;\n  placeholder?: string;\n  isEditing?: boolean;\n  commentId?: string;\n  onCancel?: () => void;\n  onSubmitSuccess?: (comment: any) => void;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst MobileCommentForm: React.FC<MobileCommentFormProps> = ({\n  postId,\n  parentId,\n  initialContent = '',\n  placeholder,\n  isEditing = false,\n  commentId,\n  onCancel,\n  onSubmitSuccess,\n  isOpen,\n  onClose\n}) => {\n  const { user } = useAuth();\n  const { actions, loadingStates, config } = useCommentStore();\n\n  // 表单状态\n  const [formData, setFormData] = useState<CommentFormData>({\n    content: initialContent,\n    mentionedUsers: [],\n    parentId\n  });\n\n  // UI状态\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [showMentions, setShowMentions] = useState(false);\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionPosition, setMentionPosition] = useState(0);\n  const [keyboardHeight, setKeyboardHeight] = useState(0);\n\n  // Refs\n  const modalRef = useRef<HTMLDivElement>(null);\n  const editorRef = useRef<any>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  // 检测虚拟键盘\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const handleResize = () => {\n      if (window.visualViewport) {\n        const keyboardHeight = window.innerHeight - window.visualViewport.height;\n        setKeyboardHeight(Math.max(0, keyboardHeight));\n      }\n    };\n\n    if (window.visualViewport) {\n      window.visualViewport.addEventListener('resize', handleResize);\n      return () => window.visualViewport?.removeEventListener('resize', handleResize);\n    }\n\n    // 降级方案：监听 window resize\n    const handleWindowResize = () => {\n      // 简单的键盘检测：当窗口高度显著减少时认为键盘打开\n      const currentHeight = window.innerHeight;\n      const originalHeight = window.screen.height;\n      const heightDiff = originalHeight - currentHeight;\n\n      if (heightDiff > 200) {\n        setKeyboardHeight(heightDiff);\n      } else {\n        setKeyboardHeight(0);\n      }\n    };\n\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, [isOpen]);\n\n  // 防止背景滚动\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = 'hidden';\n      // iOS Safari 需要额外设置\n      document.documentElement.style.overflow = 'hidden';\n\n      return () => {\n        document.body.style.overflow = '';\n        document.documentElement.style.overflow = '';\n      };\n    }\n  }, [isOpen]);\n\n  // 处理内容变化\n  const handleContentChange = useCallback((content: string) => {\n    setFormData(prev => ({ ...prev, content }));\n\n    // 检测 @提及\n    const atIndex = content.lastIndexOf('@');\n    if (atIndex !== -1) {\n      const afterAt = content.slice(atIndex + 1);\n      if (afterAt.length > 0 && !afterAt.includes(' ')) {\n        setMentionQuery(afterAt);\n        setMentionPosition(atIndex);\n        setShowMentions(true);\n      } else {\n        setShowMentions(false);\n      }\n    } else {\n      setShowMentions(false);\n    }\n  }, []);\n\n  // 处理提及选择\n  const handleMentionSelect = useCallback((user: any) => {\n    const { content } = formData;\n    const beforeMention = content.slice(0, mentionPosition);\n    const afterMention = content.slice(mentionPosition + mentionQuery.length + 1);\n    const newContent = `${beforeMention}@${user.username} ${afterMention}`;\n\n    setFormData(prev => ({\n      ...prev,\n      content: newContent,\n      mentionedUsers: [...prev.mentionedUsers.filter(id => id !== user.id), user.id]\n    }));\n\n    setShowMentions(false);\n    editorRef.current?.focus();\n  }, [formData, mentionPosition, mentionQuery]);\n\n  // 处理表情选择\n  const handleEmojiSelect = useCallback((emoji: string) => {\n    const currentContent = formData.content;\n    const newContent = currentContent + emoji;\n\n    setFormData(prev => ({ ...prev, content: newContent }));\n    setShowEmojiPicker(false);\n    editorRef.current?.focus();\n  }, [formData.content]);\n\n  // 表单提交\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!formData.content.trim() || !user) {\n      return;\n    }\n\n    try {\n      let result;\n\n      if (isEditing && commentId) {\n        await actions.updateComment(commentId, {\n          content: formData.content,\n          mentionedUsers: formData.mentionedUsers\n        });\n        result = { success: true };\n      } else {\n        result = await actions.createComment(formData, postId);\n      }\n\n      if (result) {\n        // 清除表单\n        setFormData({\n          content: '',\n          mentionedUsers: [],\n          parentId\n        });\n\n        // 回调\n        if (onSubmitSuccess) {\n          onSubmitSuccess(result);\n        }\n\n        onClose();\n      }\n    } catch (error) {\n      console.error('Submit comment failed:', error);\n    }\n  };\n\n  // 关闭处理\n  const handleClose = () => {\n    if (onCancel) {\n      onCancel();\n    }\n    onClose();\n  };\n\n  // 滑动关闭手势\n  const [dragStartY, setDragStartY] = useState<number | null>(null);\n  const [dragCurrentY, setDragCurrentY] = useState<number | null>(null);\n\n  const handleTouchStart = (e: React.TouchEvent) => {\n    setDragStartY(e.touches[0].clientY);\n  };\n\n  const handleTouchMove = (e: React.TouchEvent) => {\n    if (dragStartY !== null) {\n      setDragCurrentY(e.touches[0].clientY);\n    }\n  };\n\n  const handleTouchEnd = () => {\n    if (dragStartY !== null && dragCurrentY !== null) {\n      const dragDistance = dragCurrentY - dragStartY;\n      // 向下滑动超过100px时关闭\n      if (dragDistance > 100) {\n        handleClose();\n      }\n    }\n    setDragStartY(null);\n    setDragCurrentY(null);\n  };\n\n  const isLoading = loadingStates[isEditing ? `updating_${commentId}` : 'creating'] || false;\n  const canSubmit = formData.content.trim().length > 0 && user && !isLoading;\n\n  const finalPlaceholder = placeholder ||\n    (parentId ? '写下你的回复...' : '分享你的想法...');\n\n  if (!isOpen) return null;\n\n  const modalStyle = {\n    transform: dragCurrentY !== null && dragStartY !== null\n      ? `translateY(${Math.max(0, dragCurrentY - dragStartY)}px)`\n      : 'translateY(0)',\n    paddingBottom: keyboardHeight > 0 ? `${Math.max(16, keyboardHeight - 100)}px` : '16px'\n  };\n\n  return createPortal(\n    <div className=\"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-end\">\n      <div\n        ref={modalRef}\n        className=\"w-full bg-white dark:bg-gray-800 rounded-t-xl shadow-2xl transform transition-transform duration-300 max-h-[90vh] flex flex-col\"\n        style={modalStyle}\n        onTouchStart={handleTouchStart}\n        onTouchMove={handleTouchMove}\n        onTouchEnd={handleTouchEnd}\n      >\n        {/* 拖动指示器 */}\n        <div className=\"flex justify-center py-2 bg-gray-50 dark:bg-gray-750 rounded-t-xl\">\n          <div className=\"w-8 h-1 bg-gray-300 dark:bg-gray-600 rounded-full\"></div>\n        </div>\n\n        {/* 头部 */}\n        <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n            {isEditing ? '编辑评论' : (parentId ? '回复评论' : '发表评论')}\n          </h3>\n\n          <button\n            onClick={handleClose}\n            className=\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 rounded-lg\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* 表单内容 */}\n        <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 overflow-hidden\">\n          {/* 编辑器区域 */}\n          <div className=\"flex-1 overflow-y-auto\">\n            <div className=\"p-4\">\n              <CommentEditor\n                ref={editorRef}\n                content={formData.content}\n                onChange={handleContentChange}\n                placeholder={finalPlaceholder}\n                autoFocus={true}\n                compact={true}\n                config={config}\n                className=\"min-h-[120px] text-base\" // 移动端更大的文字\n              />\n\n              {/* @提及建议 */}\n              {showMentions && (\n                <MentionSuggestions\n                  query={mentionQuery}\n                  onSelect={handleMentionSelect}\n                  onClose={() => setShowMentions(false)}\n                  className=\"mt-2\"\n                />\n              )}\n\n              {/* 表情选择器 */}\n              {showEmojiPicker && (\n                <div className=\"mt-2\">\n                  <EmojiPicker\n                    onEmojiSelect={handleEmojiSelect}\n                    onClose={() => setShowEmojiPicker(false)}\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* 工具栏 */}\n          <div className=\"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750\">\n            <div className=\"flex items-center justify-between px-4 py-3\">\n              {/* 左侧工具按钮 */}\n              <div className=\"flex items-center space-x-3\">\n                {/* 表情按钮 */}\n                <button\n                  type=\"button\"\n                  onClick={() => setShowEmojiPicker(!showEmojiPicker)}\n                  className=\"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 rounded-lg touch-manipulation\"\n                >\n                  <span className=\"text-xl\">😀</span>\n                </button>\n\n                {/* @提及按钮 */}\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    const newContent = formData.content + '@';\n                    setFormData(prev => ({ ...prev, content: newContent }));\n                    editorRef.current?.focus();\n                  }}\n                  className=\"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 rounded-lg touch-manipulation\"\n                >\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207\" />\n                  </svg>\n                </button>\n\n                {/* 字数统计 */}\n                <span className={`text-xs ${\n                  formData.content.length > config.maxLength * 0.8\n                    ? 'text-orange-500'\n                    : formData.content.length > config.maxLength\n                    ? 'text-red-500'\n                    : 'text-gray-400 dark:text-gray-500'\n                }`}>\n                  {formData.content.length}/{config.maxLength}\n                </span>\n              </div>\n\n              {/* 右侧操作按钮 */}\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg touch-manipulation\"\n                >\n                  取消\n                </button>\n\n                <button\n                  type=\"submit\"\n                  disabled={!canSubmit}\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed rounded-lg transition-colors touch-manipulation flex items-center space-x-2\"\n                >\n                  {isLoading && (\n                    <svg className=\"w-4 h-4 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                  )}\n                  <span>\n                    {isLoading\n                      ? (isEditing ? '更新中...' : '发布中...')\n                      : (isEditing ? '更新' : '发布')\n                    }\n                  </span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>,\n    document.body\n  );\n};\n\nexport default MobileCommentForm;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/NotificationBadge.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'permission' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":30,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 通知徽章组件\n * 显示未读通知数量和通知列表\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { formatDistanceToNow } from 'date-fns';\nimport { zhCN } from 'date-fns/locale';\nimport { useCommentNotifications } from '../../../hooks/useCommentNotifications';\nimport { CommentNotification, CommentNotificationType } from '../../../types/comment';\nimport UserAvatar from '../../../components/common/UserAvatar';\n\ninterface NotificationBadgeProps {\n  className?: string;\n  position?: 'left' | 'right';\n  maxItems?: number;\n  compact?: boolean;\n}\n\nconst NotificationBadge: React.FC<NotificationBadgeProps> = ({\n  className = '',\n  position = 'right',\n  maxItems = 10,\n  compact = false\n}) => {\n  const {\n    notifications,\n    unreadCount,\n    loading,\n    permission,\n    soundEnabled,\n    hasUnread,\n    markAsRead,\n    markAllAsRead,\n    removeNotification,\n    clearAllNotifications,\n    toggleSound,\n    requestNotificationPermission,\n    canShowNotifications\n  } = useCommentNotifications();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // 点击外部关闭\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n        setShowSettings(false);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isOpen]);\n\n  // 处理通知点击\n  const handleNotificationClick = async (notification: CommentNotification) => {\n    // 标记为已读\n    if (!notification.isRead) {\n      await markAsRead(notification.id);\n    }\n\n    // 跳转到对应页面\n    if (notification.url) {\n      window.location.href = notification.url;\n    }\n\n    setIsOpen(false);\n  };\n\n  // 获取通知图标\n  const getNotificationIcon = (type: CommentNotificationType) => {\n    switch (type) {\n      case CommentNotificationType.CommentReply:\n        return '💬';\n      case CommentNotificationType.CommentMention:\n        return '👋';\n      case CommentNotificationType.CommentLiked:\n        return '❤️';\n      case CommentNotificationType.CommentApproved:\n        return '✅';\n      case CommentNotificationType.CommentRejected:\n        return '❌';\n      default:\n        return '🔔';\n    }\n  };\n\n  // 获取通知颜色\n  const getNotificationColor = (type: CommentNotificationType) => {\n    switch (type) {\n      case CommentNotificationType.CommentReply:\n        return 'text-blue-600 dark:text-blue-400';\n      case CommentNotificationType.CommentMention:\n        return 'text-green-600 dark:text-green-400';\n      case CommentNotificationType.CommentLiked:\n        return 'text-red-600 dark:text-red-400';\n      case CommentNotificationType.CommentApproved:\n        return 'text-green-600 dark:text-green-400';\n      case CommentNotificationType.CommentRejected:\n        return 'text-red-600 dark:text-red-400';\n      default:\n        return 'text-gray-600 dark:text-gray-400';\n    }\n  };\n\n  const displayNotifications = notifications.slice(0, maxItems);\n\n  return (\n    <div className={`notification-badge relative ${className}`} ref={dropdownRef}>\n      {/* 通知按钮 */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className={`\n          relative p-2 rounded-lg transition-colors duration-200\n          ${hasUnread\n            ? 'text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20'\n            : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800'\n          }\n          ${compact ? 'p-1.5' : 'p-2'}\n        `}\n        title={`通知 ${unreadCount > 0 ? `(${unreadCount} 未读)` : ''}`}\n      >\n        <svg\n          className={`${compact ? 'w-5 h-5' : 'w-6 h-6'} ${hasUnread ? 'animate-pulse' : ''}`}\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M15 17h5l-5 5v-5zM11 3.055A9.001 9.001 0 1020.945 13H11V3.055z\"\n          />\n        </svg>\n\n        {/* 未读数量徽章 */}\n        {unreadCount > 0 && (\n          <span className=\"absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-500 rounded-full min-w-[1.25rem]\">\n            {unreadCount > 99 ? '99+' : unreadCount}\n          </span>\n        )}\n      </button>\n\n      {/* 通知下拉面板 */}\n      {isOpen && (\n        <div\n          className={`\n            absolute z-50 mt-2 w-96 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg\n            ${position === 'left' ? 'left-0' : 'right-0'}\n          `}\n        >\n          {/* 头部 */}\n          <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700\">\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n              通知\n              {unreadCount > 0 && (\n                <span className=\"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400\">\n                  {unreadCount} 未读\n                </span>\n              )}\n            </h3>\n\n            <div className=\"flex items-center space-x-2\">\n              {/* 设置按钮 */}\n              <button\n                onClick={() => setShowSettings(!showSettings)}\n                className=\"p-1 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 rounded\"\n                title=\"通知设置\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                </svg>\n              </button>\n\n              {/* 全部已读按钮 */}\n              {unreadCount > 0 && (\n                <button\n                  onClick={markAllAsRead}\n                  className=\"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200\"\n                  title=\"全部已读\"\n                >\n                  全部已读\n                </button>\n              )}\n            </div>\n          </div>\n\n          {/* 设置面板 */}\n          {showSettings && (\n            <div className=\"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750\">\n              <div className=\"space-y-3\">\n                {/* 系统通知权限 */}\n                {!canShowNotifications && (\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                      系统通知\n                    </span>\n                    <button\n                      onClick={requestNotificationPermission}\n                      className=\"px-3 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors\"\n                    >\n                      开启\n                    </button>\n                  </div>\n                )}\n\n                {/* 音效开关 */}\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                    提示音效\n                  </span>\n                  <button\n                    onClick={toggleSound}\n                    className={`\n                      relative inline-flex h-5 w-9 items-center rounded-full transition-colors\n                      ${soundEnabled ? 'bg-blue-600' : 'bg-gray-300 dark:bg-gray-600'}\n                    `}\n                  >\n                    <span\n                      className={`\n                        inline-block h-3 w-3 transform rounded-full bg-white transition-transform\n                        ${soundEnabled ? 'translate-x-5' : 'translate-x-1'}\n                      `}\n                    />\n                  </button>\n                </div>\n\n                {/* 清空通知 */}\n                {notifications.length > 0 && (\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                      清空通知\n                    </span>\n                    <button\n                      onClick={clearAllNotifications}\n                      className=\"px-3 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded transition-colors\"\n                    >\n                      清空\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* 通知列表 */}\n          <div className=\"max-h-96 overflow-y-auto\">\n            {loading && (\n              <div className=\"flex items-center justify-center py-8\">\n                <svg className=\"w-6 h-6 animate-spin text-blue-500\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n              </div>\n            )}\n\n            {!loading && displayNotifications.length === 0 && (\n              <div className=\"flex flex-col items-center justify-center py-8 text-gray-500 dark:text-gray-400\">\n                <svg className=\"w-12 h-12 mb-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M15 17h5l-5 5v-5zM11 3.055A9.001 9.001 0 1020.945 13H11V3.055z\" />\n                </svg>\n                <p className=\"text-sm\">暂无通知</p>\n              </div>\n            )}\n\n            {!loading && displayNotifications.map((notification) => (\n              <NotificationItem\n                key={notification.id}\n                notification={notification}\n                onClick={() => handleNotificationClick(notification)}\n                onRemove={() => removeNotification(notification.id)}\n                getIcon={getNotificationIcon}\n                getColor={getNotificationColor}\n              />\n            ))}\n          </div>\n\n          {/* 底部 */}\n          {displayNotifications.length > 0 && (\n            <div className=\"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750\">\n              <button\n                onClick={() => {\n                  // 跳转到完整的通知页面\n                  window.location.href = '/notifications';\n                  setIsOpen(false);\n                }}\n                className=\"w-full text-center text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 transition-colors\"\n              >\n                查看所有通知\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// 通知项组件\ninterface NotificationItemProps {\n  notification: CommentNotification;\n  onClick: () => void;\n  onRemove: () => void;\n  getIcon: (type: CommentNotificationType) => string;\n  getColor: (type: CommentNotificationType) => string;\n}\n\nconst NotificationItem: React.FC<NotificationItemProps> = ({\n  notification,\n  onClick,\n  onRemove,\n  getIcon,\n  getColor\n}) => {\n  const [showActions, setShowActions] = useState(false);\n\n  const timeAgo = formatDistanceToNow(new Date(notification.createdAt), {\n    addSuffix: true,\n    locale: zhCN\n  });\n\n  return (\n    <div\n      className={`\n        relative px-4 py-3 border-b border-gray-100 dark:border-gray-700 cursor-pointer\n        hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors\n        ${!notification.isRead ? 'bg-blue-50 dark:bg-blue-900/10' : ''}\n      `}\n      onClick={onClick}\n      onMouseEnter={() => setShowActions(true)}\n      onMouseLeave={() => setShowActions(false)}\n    >\n      <div className=\"flex items-start space-x-3\">\n        {/* 通知图标 */}\n        <div className={`flex-shrink-0 text-lg ${getColor(notification.type)}`}>\n          {getIcon(notification.type)}\n        </div>\n\n        {/* 通知内容 */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center space-x-2 mb-1\">\n            <p className=\"text-sm font-medium text-gray-900 dark:text-gray-100 truncate\">\n              {notification.title}\n            </p>\n            {!notification.isRead && (\n              <div className=\"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0\"></div>\n            )}\n          </div>\n\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 line-clamp-2\">\n            {notification.content}\n          </p>\n\n          <div className=\"flex items-center space-x-2 mt-1\">\n            {notification.triggeredByUser && (\n              <UserAvatar\n                user={notification.triggeredByUser}\n                size=\"xs\"\n                showStatus={false}\n              />\n            )}\n            <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n              {timeAgo}\n            </span>\n          </div>\n        </div>\n\n        {/* 操作按钮 */}\n        {showActions && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              onRemove();\n            }}\n            className=\"flex-shrink-0 p-1 text-gray-400 hover:text-red-500 transition-colors\"\n            title=\"删除通知\"\n          >\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default NotificationBadge;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/SortControls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/StatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/components/TypingIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/example/CommentSystemExample.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/features/comments/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/hooks/useAuth.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AUTH_QUERY_KEYS' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PasswordResetRequest' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EmailVerificationRequest' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'hasAnyRole' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":46,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getTimeToExpiry' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":49,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Authentication Hook\n * Provides a unified interface for authentication operations\n * Integrates Zustand store with TanStack Query mutations\n */\n\nimport { useCallback, useEffect, useMemo } from 'react';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { useAuthStore, authSelectors } from '../stores/authStore';\nimport { useAuthMutations, createAuthApiWithStore, AUTH_QUERY_KEYS } from '../services/auth/authApi';\nimport type {\n  LoginRequest,\n  RegisterRequest,\n  PasswordResetRequest,\n  PasswordResetConfirmRequest,\n  UpdateUserProfileRequest,\n  ChangeEmailRequest,\n  ChangePasswordRequest,\n  EmailVerificationRequest,\n  AuthResult,\n  OperationResult,\n  UseAuthReturn,\n  User,\n} from '../types/auth';\nimport { UserRole } from '../types/auth';\n\n/**\n * Main authentication hook\n * Provides all authentication functionality in a single hook\n */\nexport const useAuth = (): UseAuthReturn => {\n  const queryClient = useQueryClient();\n\n  // Zustand store selectors\n  const user = useAuthStore(authSelectors.user);\n  const isAuthenticated = useAuthStore(authSelectors.isAuthenticated);\n  const isLoading = useAuthStore(authSelectors.isLoading);\n  const error = useAuthStore(authSelectors.error);\n  const accessToken = useAuthStore(authSelectors.accessToken);\n\n  // Store actions\n  const setError = useAuthStore((state) => state.setError);\n  const clearAuth = useAuthStore((state) => state.clearAuth);\n  const updateUser = useAuthStore((state) => state.updateUser);\n  const hasRole = useAuthStore((state) => state.hasRole);\n  const hasAnyRole = useAuthStore((state) => state.hasAnyRole);\n  const isTokenValid = useAuthStore((state) => state.isTokenValid);\n  const shouldRefreshToken = useAuthStore((state) => state.shouldRefreshToken);\n  const getTimeToExpiry = useAuthStore((state) => state.shouldRefreshToken);\n\n  // TanStack Query mutations\n  const {\n    loginMutation,\n    registerMutation,\n    logoutMutation,\n    passwordResetRequestMutation,\n    passwordResetMutation,\n    changePasswordMutation,\n    verifyEmailMutation,\n    resendVerificationMutation,\n    changeEmailMutation,\n    updateProfileMutation,\n  } = useAuthMutations();\n\n  // Create enhanced API with store integration\n  const authApi = useMemo(() => createAuthApiWithStore(), []);\n\n  // Initialize authentication state on mount\n  useEffect(() => {\n    const store = useAuthStore.getState();\n    store.initialize();\n  }, []);\n\n  // Utility functions\n  const clearError = useCallback(() => {\n    setError(null);\n  }, [setError]);\n\n  // Authentication actions\n  const login = useCallback(\n    async (credentials: LoginRequest): Promise<AuthResult> => {\n      try {\n        clearError();\n        const result = await authApi.login(credentials);\n\n        if (!result.success) {\n          setError(result.errorMessage || 'Login failed');\n        }\n\n        return result;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : 'Login failed';\n        setError(errorMessage);\n        return {\n          success: false,\n          errorMessage,\n          errors: [errorMessage],\n          tokenType: 'Bearer',\n          requiresEmailVerification: false,\n          requiresTwoFactor: false,\n          isLockedOut: false,\n        };\n      }\n    },\n    [authApi, setError, clearError]\n  );\n\n  const register = useCallback(\n    async (userData: RegisterRequest): Promise<AuthResult> => {\n      try {\n        clearError();\n        const result = await authApi.register(userData);\n\n        if (!result.success) {\n          setError(result.errorMessage || 'Registration failed');\n        }\n\n        return result;\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : 'Registration failed';\n        setError(errorMessage);\n        return {\n          success: false,\n          errorMessage,\n          errors: [errorMessage],\n          tokenType: 'Bearer',\n          requiresEmailVerification: false,\n          requiresTwoFactor: false,\n          isLockedOut: false,\n        };\n      }\n    },\n    [authApi, setError, clearError]\n  );\n\n  const logout = useCallback(() => {\n    // Clear all authentication data\n    clearAuth();\n\n    // Clear all cached queries\n    queryClient.clear();\n\n    // Call logout API\n    logoutMutation.mutate(undefined, {\n      onError: (error) => {\n        console.warn('Logout API call failed:', error);\n      },\n    });\n  }, [clearAuth, queryClient, logoutMutation]);\n\n  const refreshToken = useCallback(async (): Promise<boolean> => {\n    try {\n      const result = await authApi.refreshToken();\n      return result;\n    } catch (error) {\n      console.error('Token refresh failed:', error);\n      logout();\n      return false;\n    }\n  }, [authApi, logout]);\n\n  // Profile management\n  const updateProfile = useCallback(\n    async (data: UpdateUserProfileRequest): Promise<OperationResult> => {\n      return new Promise((resolve) => {\n        updateProfileMutation.mutate(data, {\n          onSuccess: (result) => {\n            resolve(result);\n          },\n          onError: (error) => {\n            const errorMessage = error instanceof Error ? error.message : 'Profile update failed';\n            resolve({\n              success: false,\n              message: errorMessage,\n              errors: [errorMessage],\n            });\n          },\n        });\n      });\n    },\n    [updateProfileMutation]\n  );\n\n  const changePassword = useCallback(\n    async (data: ChangePasswordRequest): Promise<OperationResult> => {\n      return new Promise((resolve) => {\n        changePasswordMutation.mutate(data, {\n          onSuccess: (result) => {\n            resolve(result);\n          },\n          onError: (error) => {\n            const errorMessage = error instanceof Error ? error.message : 'Password change failed';\n            resolve({\n              success: false,\n              message: errorMessage,\n              errors: [errorMessage],\n            });\n          },\n        });\n      });\n    },\n    [changePasswordMutation]\n  );\n\n  const changeEmail = useCallback(\n    async (data: ChangeEmailRequest): Promise<OperationResult> => {\n      return new Promise((resolve) => {\n        changeEmailMutation.mutate(data, {\n          onSuccess: (result) => {\n            resolve(result);\n          },\n          onError: (error) => {\n            const errorMessage = error instanceof Error ? error.message : 'Email change failed';\n            resolve({\n              success: false,\n              message: errorMessage,\n              errors: [errorMessage],\n            });\n          },\n        });\n      });\n    },\n    [changeEmailMutation]\n  );\n\n  // Password reset\n  const requestPasswordReset = useCallback(\n    async (email: string): Promise<OperationResult> => {\n      return new Promise((resolve) => {\n        passwordResetRequestMutation.mutate(\n          { email },\n          {\n            onSuccess: (result) => {\n              resolve(result);\n            },\n            onError: (error) => {\n              const errorMessage = error instanceof Error ? error.message : 'Password reset request failed';\n              resolve({\n                success: false,\n                message: errorMessage,\n                errors: [errorMessage],\n              });\n            },\n          }\n        );\n      });\n    },\n    [passwordResetRequestMutation]\n  );\n\n  const confirmPasswordReset = useCallback(\n    async (data: PasswordResetConfirmRequest): Promise<OperationResult> => {\n      return new Promise((resolve) => {\n        passwordResetMutation.mutate(data, {\n          onSuccess: (result) => {\n            resolve(result);\n          },\n          onError: (error) => {\n            const errorMessage = error instanceof Error ? error.message : 'Password reset failed';\n            resolve({\n              success: false,\n              message: errorMessage,\n              errors: [errorMessage],\n            });\n          },\n        });\n      });\n    },\n    [passwordResetMutation]\n  );\n\n  // Email verification\n  const verifyEmail = useCallback(\n    async (token: string): Promise<OperationResult> => {\n      return new Promise((resolve) => {\n        verifyEmailMutation.mutate(\n          { token },\n          {\n            onSuccess: (result) => {\n              if (result.success && user) {\n                updateUser({ isEmailVerified: true });\n              }\n              resolve(result);\n            },\n            onError: (error) => {\n              const errorMessage = error instanceof Error ? error.message : 'Email verification failed';\n              resolve({\n                success: false,\n                message: errorMessage,\n                errors: [errorMessage],\n              });\n            },\n          }\n        );\n      });\n    },\n    [verifyEmailMutation, user, updateUser]\n  );\n\n  const resendVerificationEmail = useCallback(\n    async (): Promise<OperationResult> => {\n      return new Promise((resolve) => {\n        resendVerificationMutation.mutate(undefined, {\n          onSuccess: (result) => {\n            resolve(result);\n          },\n          onError: (error) => {\n            const errorMessage = error instanceof Error ? error.message : 'Failed to resend verification email';\n            resolve({\n              success: false,\n              message: errorMessage,\n              errors: [errorMessage],\n            });\n          },\n        });\n      });\n    },\n    [resendVerificationMutation]\n  );\n\n  const hasRoleWrapper = useCallback(\n    (role: UserRole): boolean => {\n      return hasRole(role);\n    },\n    [hasRole]\n  );\n\n  const isTokenExpired = useCallback((): boolean => {\n    return !isTokenValid();\n  }, [isTokenValid]);\n\n  const getTimeToExpiryWrapper = useCallback((): number => {\n    if (!accessToken) return 0;\n\n    try {\n      const payload = JSON.parse(atob(accessToken.split('.')[1]));\n      const expiryTime = payload.exp * 1000;\n      const currentTime = Date.now();\n      return Math.max(0, expiryTime - currentTime);\n    } catch {\n      return 0;\n    }\n  }, [accessToken]);\n\n  // Setup automatic token refresh\n  useEffect(() => {\n    if (!isAuthenticated || !accessToken) return;\n\n    const checkTokenExpiry = () => {\n      if (shouldRefreshToken()) {\n        refreshToken();\n      }\n    };\n\n    // Check immediately\n    checkTokenExpiry();\n\n    // Set up interval to check every minute\n    const interval = setInterval(checkTokenExpiry, 60 * 1000);\n\n    return () => clearInterval(interval);\n  }, [isAuthenticated, accessToken, shouldRefreshToken, refreshToken]);\n\n  // Combined loading state\n  const combinedIsLoading = useMemo(() => {\n    return (\n      isLoading ||\n      loginMutation.isPending ||\n      registerMutation.isPending ||\n      logoutMutation.isPending ||\n      updateProfileMutation.isPending ||\n      changePasswordMutation.isPending ||\n      changeEmailMutation.isPending ||\n      passwordResetRequestMutation.isPending ||\n      passwordResetMutation.isPending ||\n      verifyEmailMutation.isPending ||\n      resendVerificationMutation.isPending\n    );\n  }, [\n    isLoading,\n    loginMutation.isPending,\n    registerMutation.isPending,\n    logoutMutation.isPending,\n    updateProfileMutation.isPending,\n    changePasswordMutation.isPending,\n    changeEmailMutation.isPending,\n    passwordResetRequestMutation.isPending,\n    passwordResetMutation.isPending,\n    verifyEmailMutation.isPending,\n    resendVerificationMutation.isPending,\n  ]);\n\n  // Initialize function\n  const initialize = useCallback(() => {\n    const store = useAuthStore.getState();\n    store.initialize();\n  }, []);\n\n  return {\n    // State\n    user,\n    isAuthenticated,\n    isLoading: combinedIsLoading,\n    loading: combinedIsLoading, // Alias for backward compatibility\n    error,\n\n    // Authentication actions\n    login,\n    register,\n    logout,\n    refreshToken,\n    clearError,\n    initialize,\n\n    // Profile management\n    updateProfile,\n    changePassword,\n    changeEmail,\n\n    // Password reset\n    requestPasswordReset,\n    confirmPasswordReset,\n\n    // Email verification\n    verifyEmail,\n    resendVerificationEmail,\n\n    // Utility functions\n    hasRole: hasRoleWrapper,\n    isTokenExpired,\n    getTimeToExpiry: getTimeToExpiryWrapper,\n  };\n};\n\n/**\n * Hook for checking user permissions\n */\nexport const usePermissions = () => {\n  const user = useAuthStore(authSelectors.user);\n  const hasRole = useAuthStore((state) => state.hasRole);\n  const hasAnyRole = useAuthStore((state) => state.hasAnyRole);\n\n  const permissions = useMemo(() => {\n    if (!user) return [];\n\n    switch (user.role) {\n      case UserRole.Admin:\n        return [\n          'read:posts',\n          'write:posts',\n          'manage:posts',\n          'manage:users',\n          'manage:system',\n          'moderate:comments',\n        ];\n      case UserRole.Author:\n        return ['read:posts', 'write:posts', 'manage:posts'];\n      case UserRole.User:\n      default:\n        return ['read:posts'];\n    }\n  }, [user]);\n\n  const hasPermission = useCallback(\n    (permission: string): boolean => {\n      return permissions.includes(permission);\n    },\n    [permissions]\n  );\n\n  return {\n    permissions,\n    hasPermission,\n    hasRole,\n    hasAnyRole,\n    isAdmin: user?.role === UserRole.Admin,\n    isAuthor: user?.role === UserRole.Author,\n    isUser: user?.role === UserRole.User,\n    canManagePosts: hasAnyRole([UserRole.Admin, UserRole.Author]),\n    canManageUsers: hasRole(UserRole.Admin),\n    canModerate: hasRole(UserRole.Admin),\n  };\n};\n\n/**\n * Hook for authentication loading states\n */\nexport const useAuthLoading = () => {\n  const loadingStates = useAuthStore(authSelectors.loadingStates);\n  const isLoading = useAuthStore(authSelectors.isLoading);\n\n  return {\n    ...loadingStates,\n    isLoading,\n    isAnyLoading: Object.values(loadingStates).some(Boolean) || isLoading,\n  };\n};\n\n/**\n * Hook for user profile information\n */\nexport const useUserProfile = () => {\n  const user = useAuthStore(authSelectors.user);\n  const displayName = useAuthStore(authSelectors.userDisplayName);\n\n  return {\n    user,\n    displayName,\n    avatar: user?.avatar,\n    fullName: user?.fullName,\n    email: user?.email,\n    userName: user?.userName,\n    isEmailVerified: user?.isEmailVerified ?? false,\n    role: user?.role,\n    createdAt: user?.createdAt,\n    lastLoginAt: user?.lastLoginAt,\n  };\n};\n\nexport default useAuth;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/hooks/useCommentNotifications.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":20,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The ref value 'vibrationTimeoutRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'vibrationTimeoutRef.current' to a variable inside the effect, and use that variable in the cleanup function.","line":277,"column":45,"nodeType":"Identifier","endLine":277,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 评论通知系统 Hook\n * 管理实时通知、未读数量、通知权限等\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { useCommentSocket } from '../services/commentSocket';\nimport { CommentNotification, CommentNotificationType } from '../types/comment';\nimport { useAuth } from './useAuth';\n\ninterface NotificationState {\n  notifications: CommentNotification[];\n  unreadCount: number;\n  loading: boolean;\n  permission: NotificationPermission;\n  soundEnabled: boolean;\n}\n\nexport const useCommentNotifications = () => {\n  const { user, isAuthenticated } = useAuth();\n  const commentSocket = useCommentSocket();\n  const [state, setState] = useState<NotificationState>({\n    notifications: [],\n    unreadCount: 0,\n    loading: false,\n    permission: 'default',\n    soundEnabled: true\n  });\n\n  const soundRef = useRef<HTMLAudioElement | null>(null);\n  const vibrationTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // 初始化通知音效\n  useEffect(() => {\n    soundRef.current = new Audio('/sounds/notification.mp3');\n    soundRef.current.volume = 0.3;\n  }, []);\n\n  // 请求通知权限\n  const requestNotificationPermission = useCallback(async () => {\n    if (!('Notification' in window)) {\n      console.warn('This browser does not support notifications');\n      return false;\n    }\n\n    try {\n      const permission = await Notification.requestPermission();\n      setState(prev => ({ ...prev, permission }));\n      return permission === 'granted';\n    } catch (error) {\n      console.error('Error requesting notification permission:', error);\n      return false;\n    }\n  }, []);\n\n  // 显示系统通知\n  const showSystemNotification = useCallback((notification: CommentNotification) => {\n    if (state.permission !== 'granted') return;\n\n    // 检查页面是否在前台\n    if (document.visibilityState === 'visible') return;\n\n    const title = getNotificationTitle(notification.type);\n    const options: NotificationOptions = {\n      body: notification.content,\n      icon: notification.triggeredByUser?.avatarUrl || '/icons/comment-icon.png',\n      badge: '/icons/badge.png',\n      tag: `comment-${notification.id}`,\n      data: {\n        url: notification.url,\n        notificationId: notification.id\n      },\n      requireInteraction: false,\n      silent: false\n    };\n\n    const systemNotification = new Notification(title, options);\n\n    systemNotification.onclick = () => {\n      window.focus();\n      window.location.href = notification.url;\n      systemNotification.close();\n    };\n\n    // 自动关闭\n    setTimeout(() => {\n      systemNotification.close();\n    }, 5000);\n  }, [state.permission]);\n\n  // 播放通知音效\n  const playNotificationSound = useCallback(() => {\n    if (!state.soundEnabled || !soundRef.current) return;\n\n    try {\n      soundRef.current.currentTime = 0;\n      soundRef.current.play().catch(error => {\n        console.warn('Could not play notification sound:', error);\n      });\n    } catch (error) {\n      console.warn('Notification sound error:', error);\n    }\n  }, [state.soundEnabled]);\n\n  // 触发震动\n  const triggerVibration = useCallback(() => {\n    if ('vibrate' in navigator && navigator.vibrate) {\n      navigator.vibrate([100, 50, 100]);\n    }\n  }, []);\n\n  // 处理新通知\n  const handleNewNotification = useCallback((notification: CommentNotification) => {\n    setState(prev => ({\n      ...prev,\n      notifications: [notification, ...prev.notifications.slice(0, 49)], // 最多保留50条\n      unreadCount: prev.unreadCount + 1\n    }));\n\n    // 显示系统通知\n    showSystemNotification(notification);\n\n    // 音效提示\n    playNotificationSound();\n\n    // 震动提示（移动设备）\n    triggerVibration();\n\n    // 页面标题闪烁提示\n    if (document.visibilityState !== 'visible') {\n      const originalTitle = document.title;\n      let flashCount = 0;\n\n      const flashInterval = setInterval(() => {\n        document.title = flashCount % 2 === 0 ? '🔔 新消息' : originalTitle;\n        flashCount++;\n\n        if (flashCount >= 6) {\n          clearInterval(flashInterval);\n          document.title = originalTitle;\n        }\n      }, 1000);\n\n      // 页面获得焦点时停止闪烁\n      const handleVisibilityChange = () => {\n        if (document.visibilityState === 'visible') {\n          clearInterval(flashInterval);\n          document.title = originalTitle;\n          document.removeEventListener('visibilitychange', handleVisibilityChange);\n        }\n      };\n\n      document.addEventListener('visibilitychange', handleVisibilityChange);\n    }\n  }, [showSystemNotification, playNotificationSound, triggerVibration]);\n\n  // 标记通知为已读\n  const markAsRead = useCallback(async (notificationId: string) => {\n    try {\n      await commentSocket.markNotificationAsRead(notificationId);\n\n      setState(prev => ({\n        ...prev,\n        notifications: prev.notifications.map(n =>\n          n.id === notificationId ? { ...n, isRead: true } : n\n        ),\n        unreadCount: Math.max(0, prev.unreadCount - 1)\n      }));\n    } catch (error) {\n      console.error('Error marking notification as read:', error);\n    }\n  }, [commentSocket]);\n\n  // 标记所有通知为已读\n  const markAllAsRead = useCallback(async () => {\n    const unreadNotifications = state.notifications.filter(n => !n.isRead);\n\n    try {\n      await Promise.all(\n        unreadNotifications.map(n => commentSocket.markNotificationAsRead(n.id))\n      );\n\n      setState(prev => ({\n        ...prev,\n        notifications: prev.notifications.map(n => ({ ...n, isRead: true })),\n        unreadCount: 0\n      }));\n    } catch (error) {\n      console.error('Error marking all notifications as read:', error);\n    }\n  }, [state.notifications, commentSocket]);\n\n  // 删除通知\n  const removeNotification = useCallback((notificationId: string) => {\n    setState(prev => {\n      const notification = prev.notifications.find(n => n.id === notificationId);\n      const wasUnread = notification && !notification.isRead;\n\n      return {\n        ...prev,\n        notifications: prev.notifications.filter(n => n.id !== notificationId),\n        unreadCount: wasUnread ? Math.max(0, prev.unreadCount - 1) : prev.unreadCount\n      };\n    });\n  }, []);\n\n  // 清空所有通知\n  const clearAllNotifications = useCallback(() => {\n    setState(prev => ({\n      ...prev,\n      notifications: [],\n      unreadCount: 0\n    }));\n  }, []);\n\n  // 切换音效\n  const toggleSound = useCallback(() => {\n    setState(prev => ({ ...prev, soundEnabled: !prev.soundEnabled }));\n  }, []);\n\n  // 获取最近通知\n  const loadRecentNotifications = useCallback(async (limit: number = 20) => {\n    if (!isAuthenticated || !commentSocket.isConnected) return;\n\n    setState(prev => ({ ...prev, loading: true }));\n\n    try {\n      await commentSocket.getRecentNotifications(limit);\n      await commentSocket.getUnreadNotificationCount();\n    } catch (error) {\n      console.error('Error loading recent notifications:', error);\n    } finally {\n      setState(prev => ({ ...prev, loading: false }));\n    }\n  }, [isAuthenticated, commentSocket]);\n\n  // 初始化和清理\n  useEffect(() => {\n    if (!isAuthenticated) {\n      setState(prev => ({\n        ...prev,\n        notifications: [],\n        unreadCount: 0\n      }));\n      return;\n    }\n\n    // 获取通知权限状态\n    if ('Notification' in window) {\n      setState(prev => ({ ...prev, permission: Notification.permission }));\n    }\n\n    // 连接WebSocket并绑定事件\n    if (commentSocket.isConnected) {\n      // 绑定通知事件\n      commentSocket.on('NewNotification', handleNewNotification);\n      commentSocket.on('UnreadNotificationCount', (count: number) => {\n        setState(prev => ({ ...prev, unreadCount: count }));\n      });\n      commentSocket.on('RecentNotifications', (notifications: CommentNotification[]) => {\n        setState(prev => ({ ...prev, notifications }));\n      });\n      commentSocket.on('NotificationMarkedAsRead', (notificationId: string) => {\n        setState(prev => ({\n          ...prev,\n          notifications: prev.notifications.map(n =>\n            n.id === notificationId ? { ...n, isRead: true } : n\n          )\n        }));\n      });\n\n      // 加载初始数据\n      loadRecentNotifications();\n    }\n\n    return () => {\n      const timeoutId = vibrationTimeoutRef.current;\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [isAuthenticated, commentSocket, handleNewNotification, loadRecentNotifications]);\n\n  // 页面可见性变化处理\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'visible' && state.unreadCount > 0) {\n        // 页面重新获得焦点时，可以考虑自动标记通知为已读\n        // 这里暂时不自动标记，让用户手动操作\n      }\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return () => document.removeEventListener('visibilitychange', handleVisibilityChange);\n  }, [state.unreadCount]);\n\n  return {\n    // 状态\n    notifications: state.notifications,\n    unreadCount: state.unreadCount,\n    loading: state.loading,\n    permission: state.permission,\n    soundEnabled: state.soundEnabled,\n\n    // 操作方法\n    requestNotificationPermission,\n    markAsRead,\n    markAllAsRead,\n    removeNotification,\n    clearAllNotifications,\n    toggleSound,\n    loadRecentNotifications,\n\n    // 工具方法\n    hasUnread: state.unreadCount > 0,\n    isSupported: 'Notification' in window,\n    canShowNotifications: state.permission === 'granted'\n  };\n};\n\n// 获取通知类型对应的标题\nconst getNotificationTitle = (type: CommentNotificationType): string => {\n  switch (type) {\n    case CommentNotificationType.CommentReply:\n      return '📝 新的回复';\n    case CommentNotificationType.CommentMention:\n      return '👋 有人提到了你';\n    case CommentNotificationType.CommentLiked:\n      return '❤️ 收到点赞';\n    case CommentNotificationType.CommentApproved:\n      return '✅ 评论已通过';\n    case CommentNotificationType.CommentRejected:\n      return '❌ 评论被拒绝';\n    default:\n      return '🔔 新通知';\n  }\n};\n\nexport default useCommentNotifications;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/hooks/useDebounce.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[719,722],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[719,722],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[729,732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[729,732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a spread element in its dependency array. This means we can't statically verify whether you've passed the correct dependencies.","line":54,"column":24,"nodeType":"SpreadElement","endLine":54,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1325,1328],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1325,1328],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1335,1338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1335,1338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * useDebounce Hook\n * 防抖钩子，用于延迟执行值的更新\n */\n\nimport { useState, useEffect } from 'react';\n\n/**\n * 防抖钩子\n * @param value 需要防抖的值\n * @param delay 延迟时间（毫秒）\n * @returns 防抖后的值\n */\nexport function useDebounce<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    // 设置定时器来更新防抖值\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    // 清理定时器\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\n/**\n * 防抖回调钩子\n * @param callback 需要防抖的回调函数\n * @param delay 延迟时间（毫秒）\n * @param deps 依赖项数组\n * @returns 防抖后的回调函数\n */\nexport function useDebounceCallback<T extends (...args: any[]) => any>(\n  callback: T,\n  delay: number,\n  deps: React.DependencyList = []\n): T {\n  const [debouncedCallback, setDebouncedCallback] = useState<T>(callback);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedCallback(() => callback);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [callback, delay, ...deps]);\n\n  return debouncedCallback;\n}\n\n/**\n * 立即防抖钩子 - 第一次调用立即执行，后续调用防抖\n * @param callback 需要防抖的回调函数\n * @param delay 延迟时间（毫秒）\n * @param immediate 是否立即执行第一次调用\n * @returns 防抖后的回调函数\n */\nexport function useDebounceImmediate<T extends (...args: any[]) => any>(\n  callback: T,\n  delay: number,\n  immediate: boolean = true\n): T {\n  const [timeoutId, setTimeoutId] = useState<NodeJS.Timeout | null>(null);\n\n  const debouncedCallback = ((...args: Parameters<T>) => {\n    const callNow = immediate && !timeoutId;\n\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n\n    const newTimeoutId = setTimeout(() => {\n      setTimeoutId(null);\n      if (!immediate) callback(...args);\n    }, delay);\n\n    setTimeoutId(newTimeoutId);\n\n    if (callNow) callback(...args);\n  }) as T;\n\n  // 清理定时器\n  useEffect(() => {\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [timeoutId]);\n\n  return debouncedCallback;\n}","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/hooks/useHomePerformance.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1844,1847],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1844,1847],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2355,2358],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2355,2358],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2879,2882],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2879,2882],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":123,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3434,3437],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3434,3437],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6563,6566],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6563,6566],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 首页性能优化 Hook\n * 提供性能监控、懒加载控制、资源预加载等功能\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport {\n  performanceMonitoring,\n  preloadStrategies,\n  imageOptimization,\n  PERFORMANCE_TARGETS\n} from '../utils/homeOptimization';\n\n// 性能指标类型\nexport interface PerformanceMetrics {\n  lcp?: number;\n  fid?: number;\n  cls?: number;\n  ttfb?: number;\n  loadTime?: number;\n  domContentLoaded?: number;\n}\n\n// 性能状态类型\nexport interface PerformanceState {\n  metrics: PerformanceMetrics;\n  isLoading: boolean;\n  budgetPassed: boolean;\n  errors: string[];\n  optimizationLevel: 'low' | 'medium' | 'high';\n}\n\n// Hook配置选项\nexport interface UseHomePerformanceOptions {\n  enableRealtimeMonitoring?: boolean;\n  enablePerformanceBudget?: boolean;\n  reportToAnalytics?: boolean;\n  optimizationLevel?: 'low' | 'medium' | 'high';\n}\n\n/**\n * 首页性能优化 Hook\n */\nexport const useHomePerformance = (options: UseHomePerformanceOptions = {}) => {\n  const {\n    enableRealtimeMonitoring = true,\n    enablePerformanceBudget = true,\n    reportToAnalytics = true,\n    optimizationLevel = 'high'\n  } = options;\n\n  // 状态管理\n  const [performanceState, setPerformanceState] = useState<PerformanceState>({\n    metrics: {},\n    isLoading: true,\n    budgetPassed: false,\n    errors: [],\n    optimizationLevel\n  });\n\n  // 引用\n  const imageObserverRef = useRef<IntersectionObserver | null>(null);\n  const performanceObserversRef = useRef<PerformanceObserver[]>([]);\n  const metricsRef = useRef<PerformanceMetrics>({});\n\n  // 初始化性能监控\n  const initializePerformanceMonitoring = useCallback(() => {\n    if (!enableRealtimeMonitoring) return;\n\n    const observers: PerformanceObserver[] = [];\n\n    try {\n      // LCP监控\n      const lcpObserver = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        const lastEntry = entries[entries.length - 1] as any;\n        if (lastEntry) {\n          metricsRef.current.lcp = lastEntry.startTime;\n          setPerformanceState(prev => ({\n            ...prev,\n            metrics: { ...prev.metrics, lcp: lastEntry.startTime }\n          }));\n        }\n      });\n      lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });\n      observers.push(lcpObserver);\n\n      // FID监控\n      const fidObserver = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        entries.forEach((entry: any) => {\n          const fidValue = entry.processingStart - entry.startTime;\n          metricsRef.current.fid = fidValue;\n          setPerformanceState(prev => ({\n            ...prev,\n            metrics: { ...prev.metrics, fid: fidValue }\n          }));\n        });\n      });\n      fidObserver.observe({ entryTypes: ['first-input'] });\n      observers.push(fidObserver);\n\n      // CLS监控\n      let clsValue = 0;\n      const clsObserver = new PerformanceObserver((list) => {\n        for (const entry of list.getEntries() as any[]) {\n          if (!entry.hadRecentInput) {\n            clsValue += entry.value;\n          }\n        }\n        metricsRef.current.cls = clsValue;\n        setPerformanceState(prev => ({\n          ...prev,\n          metrics: { ...prev.metrics, cls: clsValue }\n        }));\n      });\n      clsObserver.observe({ entryTypes: ['layout-shift'] });\n      observers.push(clsObserver);\n\n      // Navigation Timing监控\n      const navigationObserver = new PerformanceObserver((list) => {\n        const entries = list.getEntries();\n        entries.forEach((entry: any) => {\n          const ttfb = entry.responseStart - entry.requestStart;\n          const loadTime = entry.loadEventEnd - entry.navigationStart;\n          const domContentLoaded = entry.domContentLoadedEventEnd - entry.navigationStart;\n\n          metricsRef.current = {\n            ...metricsRef.current,\n            ttfb,\n            loadTime,\n            domContentLoaded\n          };\n\n          setPerformanceState(prev => ({\n            ...prev,\n            metrics: {\n              ...prev.metrics,\n              ttfb,\n              loadTime,\n              domContentLoaded\n            }\n          }));\n        });\n      });\n      navigationObserver.observe({ entryTypes: ['navigation'] });\n      observers.push(navigationObserver);\n\n      performanceObserversRef.current = observers;\n\n    } catch (error) {\n      console.warn('Performance monitoring setup failed:', error);\n      setPerformanceState(prev => ({\n        ...prev,\n        errors: [...prev.errors, 'Performance monitoring setup failed']\n      }));\n    }\n  }, [enableRealtimeMonitoring]);\n\n  // 初始化图片懒加载\n  const initializeImageLazyLoading = useCallback(() => {\n    if (imageObserverRef.current) {\n      imageObserverRef.current.disconnect();\n    }\n\n    imageObserverRef.current = imageOptimization.createResponsiveImageLoader();\n\n    // 观察现有的懒加载图片\n    const lazyImages = document.querySelectorAll('img[data-src]');\n    lazyImages.forEach(img => {\n      if (imageObserverRef.current) {\n        imageObserverRef.current.observe(img);\n      }\n    });\n\n    return imageObserverRef.current;\n  }, []);\n\n  // 预加载关键资源\n  const preloadCriticalResources = useCallback(() => {\n    if (optimizationLevel === 'low') return;\n\n    try {\n      preloadStrategies.preloadCriticalCSS();\n      preloadStrategies.preloadFonts();\n      preloadStrategies.preconnectExternalServices();\n\n      // 高优化级别才预取下一页内容\n      if (optimizationLevel === 'high') {\n        setTimeout(() => {\n          preloadStrategies.prefetchNextPageContent();\n        }, 2000);\n      }\n    } catch (error) {\n      console.warn('Resource preloading failed:', error);\n      setPerformanceState(prev => ({\n        ...prev,\n        errors: [...prev.errors, 'Resource preloading failed']\n      }));\n    }\n  }, [optimizationLevel]);\n\n  // 检查性能预算\n  const checkPerformanceBudget = useCallback(() => {\n    if (!enablePerformanceBudget) return false;\n\n    const budgetCheck = performanceMonitoring.checkPerformanceBudget(metricsRef.current);\n\n    setPerformanceState(prev => ({\n      ...prev,\n      budgetPassed: budgetCheck.passed\n    }));\n\n    return budgetCheck.passed;\n  }, [enablePerformanceBudget]);\n\n  // 上报性能数据\n  const reportPerformanceData = useCallback(() => {\n    if (!reportToAnalytics) return;\n\n    const metrics = metricsRef.current;\n    const budgetPassed = checkPerformanceBudget();\n\n    performanceMonitoring.reportPerformanceMetrics({\n      ...metrics,\n      budgetPassed: budgetPassed ? 1 : 0,\n      optimizationLevel: optimizationLevel === 'high' ? 3 : optimizationLevel === 'medium' ? 2 : 1,\n      url: window.location.href,\n      timestamp: Date.now(),\n      userAgent: navigator.userAgent\n    } as any);\n  }, [reportToAnalytics, optimizationLevel, checkPerformanceBudget]);\n\n  // 获取性能评分\n  const getPerformanceScore = useCallback(() => {\n    const metrics = metricsRef.current;\n    let score = 100;\n\n    // LCP评分 (0-40分)\n    if (metrics.lcp) {\n      if (metrics.lcp > 4000) score -= 40;\n      else if (metrics.lcp > PERFORMANCE_TARGETS.LCP) score -= 20;\n    }\n\n    // FID评分 (0-25分)\n    if (metrics.fid) {\n      if (metrics.fid > 300) score -= 25;\n      else if (metrics.fid > PERFORMANCE_TARGETS.FID) score -= 10;\n    }\n\n    // CLS评分 (0-25分)\n    if (metrics.cls) {\n      if (metrics.cls > 0.25) score -= 25;\n      else if (metrics.cls > PERFORMANCE_TARGETS.CLS) score -= 10;\n    }\n\n    // TTFB评分 (0-10分)\n    if (metrics.ttfb) {\n      if (metrics.ttfb > 1800) score -= 10;\n      else if (metrics.ttfb > PERFORMANCE_TARGETS.TTFB) score -= 5;\n    }\n\n    return Math.max(0, score);\n  }, []);\n\n  // 获取优化建议\n  const getOptimizationSuggestions = useCallback(() => {\n    const metrics = metricsRef.current;\n    const suggestions: string[] = [];\n\n    if (metrics.lcp && metrics.lcp > PERFORMANCE_TARGETS.LCP) {\n      suggestions.push('Optimize largest contentful paint by reducing image sizes or implementing better caching');\n    }\n\n    if (metrics.fid && metrics.fid > PERFORMANCE_TARGETS.FID) {\n      suggestions.push('Reduce first input delay by optimizing JavaScript execution and using code splitting');\n    }\n\n    if (metrics.cls && metrics.cls > PERFORMANCE_TARGETS.CLS) {\n      suggestions.push('Fix cumulative layout shift by reserving space for images and avoiding dynamic content insertion');\n    }\n\n    if (metrics.ttfb && metrics.ttfb > PERFORMANCE_TARGETS.TTFB) {\n      suggestions.push('Improve time to first byte by optimizing server response time and using CDN');\n    }\n\n    return suggestions;\n  }, []);\n\n  // 重新观察新的懒加载图片\n  const observeLazyImage = useCallback((img: HTMLImageElement) => {\n    if (imageObserverRef.current) {\n      imageObserverRef.current.observe(img);\n    }\n  }, []);\n\n  // 停止观察图片\n  const unobserveLazyImage = useCallback((img: HTMLImageElement) => {\n    if (imageObserverRef.current) {\n      imageObserverRef.current.unobserve(img);\n    }\n  }, []);\n\n  // 手动触发性能测量\n  const measurePerformance = useCallback(async () => {\n    setPerformanceState(prev => ({ ...prev, isLoading: true }));\n\n    try {\n      const metrics = await performanceMonitoring.measurePerformance();\n      metricsRef.current = { ...metricsRef.current, ...metrics };\n\n      setPerformanceState(prev => ({\n        ...prev,\n        metrics: { ...prev.metrics, ...metrics },\n        isLoading: false\n      }));\n\n      return metrics;\n    } catch (error) {\n      console.error('Performance measurement failed:', error);\n      setPerformanceState(prev => ({\n        ...prev,\n        isLoading: false,\n        errors: [...prev.errors, 'Performance measurement failed']\n      }));\n      throw error;\n    }\n  }, []);\n\n  // 初始化效果\n  useEffect(() => {\n    initializePerformanceMonitoring();\n    initializeImageLazyLoading();\n    preloadCriticalResources();\n\n    // 页面加载完成后进行完整测量\n    const handleLoad = () => {\n      setTimeout(() => {\n        measurePerformance().then(() => {\n          checkPerformanceBudget();\n          reportPerformanceData();\n        });\n      }, 3000);\n    };\n\n    if (document.readyState === 'complete') {\n      handleLoad();\n    } else {\n      window.addEventListener('load', handleLoad);\n    }\n\n    // 页面卸载时清理\n    const handleBeforeUnload = () => {\n      reportPerformanceData();\n    };\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    return () => {\n      window.removeEventListener('load', handleLoad);\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [\n    initializePerformanceMonitoring,\n    initializeImageLazyLoading,\n    preloadCriticalResources,\n    measurePerformance,\n    checkPerformanceBudget,\n    reportPerformanceData\n  ]);\n\n  // 清理效果\n  useEffect(() => {\n    return () => {\n      // 清理性能观察者\n      performanceObserversRef.current.forEach(observer => {\n        try {\n          observer.disconnect();\n        } catch (error) {\n          console.warn('Failed to disconnect performance observer:', error);\n        }\n      });\n\n      // 清理图片观察者\n      if (imageObserverRef.current) {\n        imageObserverRef.current.disconnect();\n      }\n    };\n  }, []);\n\n  // 状态完成标记\n  useEffect(() => {\n    if (performanceState.isLoading && Object.keys(performanceState.metrics).length > 0) {\n      setPerformanceState(prev => ({ ...prev, isLoading: false }));\n    }\n  }, [performanceState.metrics, performanceState.isLoading]);\n\n  return {\n    // 状态\n    metrics: performanceState.metrics,\n    isLoading: performanceState.isLoading,\n    budgetPassed: performanceState.budgetPassed,\n    errors: performanceState.errors,\n    optimizationLevel: performanceState.optimizationLevel,\n\n    // 方法\n    measurePerformance,\n    checkPerformanceBudget,\n    reportPerformanceData,\n    observeLazyImage,\n    unobserveLazyImage,\n    getPerformanceScore,\n    getOptimizationSuggestions,\n\n    // 工具方法\n    preloadCriticalResources,\n    initializeImageLazyLoading,\n  };\n};","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/hooks/usePersonalization.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useQuery' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMutation' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3171,3174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3171,3174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'recentInteractions' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":143,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":143,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'today' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":148,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":148,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":376,"column":19,"nodeType":"MemberExpression","messageId":"unexpected","endLine":376,"endColumn":30,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12459,12526],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * usePersonalization hook - Handle personalized content recommendations\n * Features: User behavior tracking, preference learning, recommendation algorithms\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useAuth } from './useAuth';\nimport { usePersonalizationActions, usePersonalization as usePersonalizationStore } from '../stores/homeStore';\nimport {\n  usePersonalizedRecommendations,\n  useRecordInteraction,\n  HOME_QUERY_KEYS,\n} from '../services/home/homeApi';\nimport type {\n  PostSummary,\n  PersonalizationSettings,\n  UserInteraction,\n  RecommendationFeedback,\n} from '../types/home';\n\ninterface PersonalizationState {\n  isLoading: boolean;\n  error: string | null;\n  recommendations: PostSummary[];\n  hasRecommendations: boolean;\n  canPersonalize: boolean;\n  interactionScore: number;\n  diversity: number;\n  freshness: number;\n}\n\ninterface PersonalizationActions {\n  recordInteraction: (postId: string, type: UserInteraction['interactionType'], duration?: number) => Promise<void>;\n  provideFeedback: (postId: string, feedback: RecommendationFeedback['feedback'], reason?: string) => Promise<void>;\n  refreshRecommendations: () => Promise<void>;\n  updatePreferences: (preferences: Partial<PersonalizationSettings>) => void;\n  resetPersonalization: () => void;\n  addInterest: (type: 'category' | 'tag' | 'author', id: string) => void;\n  removeInterest: (type: 'category' | 'tag' | 'author', id: string) => void;\n  setReadingGoals: (goals: { postsPerWeek?: number; categoriesOfInterest?: number }) => void;\n}\n\ninterface UsePersonalizationReturn {\n  state: PersonalizationState;\n  actions: PersonalizationActions;\n  settings: PersonalizationSettings | undefined;\n  analytics: {\n    totalInteractions: number;\n    readingStreak: number;\n    favoriteCategories: string[];\n    readingTime: number;\n    engagementRate: number;\n  };\n}\n\n/**\n * Custom hook for managing user personalization and recommendations\n */\nexport const usePersonalization = (): UsePersonalizationReturn => {\n  const { user, isAuthenticated } = useAuth();\n  const queryClient = useQueryClient();\n  const personalizationActions = usePersonalizationActions();\n  const personalizationSettings = usePersonalizationStore();\n\n  // Local state\n  const [interactionHistory, setInteractionHistory] = useState<UserInteraction[]>([]);\n  const [feedbackHistory, setFeedbackHistory] = useState<RecommendationFeedback[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  // API hooks\n  const {\n    data: recommendations,\n    isLoading: recommendationsLoading,\n    error: recommendationsError,\n    refetch: refetchRecommendations,\n  } = usePersonalizedRecommendations(user?.id || null, 10);\n\n  const recordInteractionMutation = useRecordInteraction({\n    onSuccess: (_, variables) => {\n      // Update local interaction history\n      setInteractionHistory(prev => [\n        ...prev,\n        {\n          ...variables,\n          timestamp: new Date().toISOString(),\n        },\n      ]);\n\n      // Clear error on successful interaction\n      setError(null);\n    },\n    onError: (error: any) => {\n      setError(error.message || 'Failed to record interaction');\n    },\n  });\n\n  // Load personalization data from localStorage on mount\n  useEffect(() => {\n    if (!isAuthenticated || !user) return;\n\n    const storageKey = `personalization_${user.id}`;\n    const stored = localStorage.getItem(storageKey);\n    if (stored) {\n      try {\n        const data = JSON.parse(stored);\n        setInteractionHistory(data.interactions || []);\n        setFeedbackHistory(data.feedback || []);\n      } catch (error) {\n        console.warn('Failed to load personalization data:', error);\n      }\n    }\n  }, [isAuthenticated, user]);\n\n  // Save personalization data to localStorage\n  const saveToStorage = useCallback(() => {\n    if (!isAuthenticated || !user) return;\n\n    const storageKey = `personalization_${user.id}`;\n    const data = {\n      interactions: interactionHistory.slice(-1000), // Keep last 1000 interactions\n      feedback: feedbackHistory.slice(-100), // Keep last 100 feedback items\n      lastSaved: new Date().toISOString(),\n    };\n\n    try {\n      localStorage.setItem(storageKey, JSON.stringify(data));\n    } catch (error) {\n      console.warn('Failed to save personalization data:', error);\n    }\n  }, [isAuthenticated, user, interactionHistory, feedbackHistory]);\n\n  // Auto-save periodically\n  useEffect(() => {\n    const interval = setInterval(saveToStorage, 30000); // Save every 30 seconds\n    return () => clearInterval(interval);\n  }, [saveToStorage]);\n\n  // Calculate analytics from interaction history\n  const analytics = useMemo(() => {\n    const now = new Date();\n    const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n    const recentInteractions = interactionHistory.filter(\n      interaction => new Date(interaction.timestamp) > weekAgo\n    );\n\n    // Calculate reading streak (consecutive days with interactions)\n    const today = new Date().toDateString();\n    let streak = 0;\n    const currentDate = new Date();\n\n    for (let i = 0; i < 30; i++) {\n      const dateString = currentDate.toDateString();\n      const hasInteraction = interactionHistory.some(\n        interaction => new Date(interaction.timestamp).toDateString() === dateString\n      );\n\n      if (hasInteraction) {\n        streak++;\n      } else if (i > 0) {\n        break; // Break streak if no interaction found\n      }\n\n      currentDate.setDate(currentDate.getDate() - 1);\n    }\n\n    // Calculate favorite categories from interactions\n    const categoryInteractions: Record<string, number> = {};\n    interactionHistory.forEach(_interaction => {\n      // This would need category mapping from post data\n      // For now, we'll use a mock implementation\n    });\n\n    // Calculate total reading time\n    const totalReadingTime = interactionHistory\n      .filter(interaction => interaction.interactionType === 'view' && interaction.duration)\n      .reduce((total, interaction) => total + (interaction.duration || 0), 0);\n\n    // Calculate engagement rate\n    const viewCount = interactionHistory.filter(i => i.interactionType === 'view').length;\n    const engagementCount = interactionHistory.filter(\n      i => ['like', 'comment', 'share', 'bookmark'].includes(i.interactionType)\n    ).length;\n    const engagementRate = viewCount > 0 ? (engagementCount / viewCount) * 100 : 0;\n\n    return {\n      totalInteractions: interactionHistory.length,\n      readingStreak: streak,\n      favoriteCategories: Object.keys(categoryInteractions).slice(0, 5),\n      readingTime: Math.round(totalReadingTime / 60), // Convert to minutes\n      engagementRate: Math.round(engagementRate * 100) / 100,\n    };\n  }, [interactionHistory]);\n\n  // Calculate personalization quality metrics\n  const personalizationQuality = useMemo(() => {\n    const hasEnoughData = interactionHistory.length >= 10;\n    const hasRecentActivity = interactionHistory.some(\n      interaction => new Date(interaction.timestamp) > new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)\n    );\n\n    return {\n      canPersonalize: isAuthenticated && hasEnoughData && hasRecentActivity,\n      interactionScore: Math.min(interactionHistory.length / 50, 1), // 0-1 scale\n      diversity: feedbackHistory.filter(f => f.feedback === 'relevant').length / Math.max(feedbackHistory.length, 1),\n      freshness: hasRecentActivity ? 1 : 0,\n    };\n  }, [isAuthenticated, interactionHistory, feedbackHistory]);\n\n  // Actions\n  const recordInteraction = useCallback(async (\n    postId: string,\n    type: UserInteraction['interactionType'],\n    duration?: number\n  ) => {\n    if (!isAuthenticated) return;\n\n    const interaction: UserInteraction = {\n      postId,\n      interactionType: type,\n      duration,\n      timestamp: new Date().toISOString(),\n    };\n\n    await recordInteractionMutation.mutateAsync(interaction);\n  }, [isAuthenticated, recordInteractionMutation]);\n\n  const provideFeedback = useCallback(async (\n    postId: string,\n    feedback: RecommendationFeedback['feedback'],\n    reason?: string\n  ) => {\n    if (!isAuthenticated) return;\n\n    const feedbackData: RecommendationFeedback = {\n      postId,\n      feedback,\n      reason,\n    };\n\n    // Store feedback locally\n    setFeedbackHistory(prev => [...prev, feedbackData]);\n\n    // In a real app, this would be sent to the API\n    // await provideFeedbackMutation.mutateAsync(feedbackData);\n\n    // Refresh recommendations after feedback\n    setTimeout(() => {\n      refetchRecommendations();\n    }, 1000);\n  }, [isAuthenticated, refetchRecommendations]);\n\n  const refreshRecommendations = useCallback(async () => {\n    await refetchRecommendations();\n  }, [refetchRecommendations]);\n\n  const updatePreferences = useCallback((preferences: Partial<PersonalizationSettings>) => {\n    personalizationActions.updatePersonalization(preferences);\n  }, [personalizationActions]);\n\n  const resetPersonalization = useCallback(() => {\n    setInteractionHistory([]);\n    setFeedbackHistory([]);\n    setError(null);\n    // Note: resetPersonalization method not available in store\n\n    // Clear localStorage\n    if (user) {\n      const storageKey = `personalization_${user.id}`;\n      localStorage.removeItem(storageKey);\n    }\n\n    // Invalidate recommendations\n    queryClient.removeQueries({\n      queryKey: HOME_QUERY_KEYS.recommendations(user?.id || '', 10),\n    });\n  }, [setInteractionHistory, setFeedbackHistory, setError, user, queryClient]);\n\n  const addInterest = useCallback((\n    type: 'category' | 'tag' | 'author',\n    id: string\n  ) => {\n    switch (type) {\n      case 'category':\n        personalizationActions.addPreferredCategory(id);\n        break;\n      case 'tag':\n        personalizationActions.addPreferredTag(id);\n        break;\n      case 'author':\n        personalizationActions.followAuthor(id);\n        break;\n    }\n  }, [personalizationActions]);\n\n  const removeInterest = useCallback((\n    type: 'category' | 'tag' | 'author',\n    id: string\n  ) => {\n    switch (type) {\n      case 'category':\n        personalizationActions.removePreferredCategory(id);\n        break;\n      case 'tag':\n        personalizationActions.removePreferredTag(id);\n        break;\n      case 'author':\n        personalizationActions.unfollowAuthor(id);\n        break;\n    }\n  }, [personalizationActions]);\n\n  const setReadingGoals = useCallback((_goals: {\n    postsPerWeek?: number;\n    categoriesOfInterest?: number;\n  }) => {\n    // Update user preferences with reading goals\n    personalizationActions.updatePersonalization({\n      // This would extend the PersonalizationSettings type to include goals\n      ...personalizationSettings,\n      updatedAt: new Date().toISOString(),\n    } as PersonalizationSettings);\n  }, [personalizationActions, personalizationSettings]);\n\n  const state: PersonalizationState = {\n    isLoading: recommendationsLoading,\n    error: error || recommendationsError?.message || null,\n    recommendations: recommendations || [],\n    hasRecommendations: Boolean(recommendations?.length),\n    ...personalizationQuality,\n  };\n\n  const actions: PersonalizationActions = {\n    recordInteraction,\n    provideFeedback,\n    refreshRecommendations,\n    updatePreferences,\n    resetPersonalization,\n    addInterest,\n    removeInterest,\n    setReadingGoals,\n  };\n\n  return {\n    state,\n    actions,\n    settings: personalizationSettings,\n    analytics,\n  };\n};\n\n/**\n * Hook for automatic interaction tracking\n * Automatically tracks view interactions when posts are visible\n */\nexport const useAutoTrackViews = (posts: PostSummary[]) => {\n  const actions = usePersonalizationActions();\n\n  useEffect(() => {\n    const trackedPosts = new Set<string>();\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            const postId = entry.target.getAttribute('data-post-id');\n            if (postId && !trackedPosts.has(postId)) {\n              trackedPosts.add(postId);\n\n              // Track view with estimated reading time\n              const startTime = Date.now();\n              const unobserve = () => {\n                const duration = Math.round((Date.now() - startTime) / 1000);\n                if (duration > 3) { // Only track if viewed for more than 3 seconds\n                  // Note: recordInteraction not available in actions store\n                  console.log('Would record interaction:', postId, 'view', duration);\n                }\n              };\n\n              // Track when post leaves viewport\n              const exitObserver = new IntersectionObserver(\n                ([exitEntry]) => {\n                  if (!exitEntry.isIntersecting) {\n                    unobserve();\n                    exitObserver.disconnect();\n                  }\n                },\n                { threshold: 0 }\n              );\n              exitObserver.observe(entry.target);\n            }\n          }\n        });\n      },\n      {\n        threshold: 0.5, // Track when 50% of post is visible\n        rootMargin: '0px 0px -50px 0px', // Only trigger when well into viewport\n      }\n    );\n\n    // Observe all post elements\n    posts.forEach((post) => {\n      const element = document.querySelector(`[data-post-id=\"${post.id}\"]`);\n      if (element) {\n        observer.observe(element);\n      }\n    });\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [posts, actions]);\n};\n\nexport default usePersonalization;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/hooks/useResponsive.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":226,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6623,6626],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6623,6626],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":227,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":227,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6715,6718],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6715,6718],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":228,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":228,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6813,6816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6813,6816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6926,6929],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6926,6929],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 响应式设计Hook\n * 检测设备类型、屏幕尺寸、触摸支持等\n */\n\nimport { useState, useEffect, useCallback } from 'react';\n\nexport interface ResponsiveState {\n  // 屏幕尺寸\n  isMobile: boolean;\n  isTablet: boolean;\n  isDesktop: boolean;\n  isLargeScreen: boolean;\n\n  // 设备特性\n  isTouchDevice: boolean;\n  isRetina: boolean;\n  orientation: 'portrait' | 'landscape';\n\n  // 屏幕尺寸数值\n  screenWidth: number;\n  screenHeight: number;\n  viewportWidth: number;\n  viewportHeight: number;\n\n  // 断点\n  breakpoint: 'xs' | 'sm' | 'md' | 'lg' | 'xl' | '2xl';\n}\n\n// 断点定义 (基于 Tailwind CSS)\nconst breakpoints = {\n  xs: 0,    // < 640px\n  sm: 640,  // 640px - 767px\n  md: 768,  // 768px - 1023px\n  lg: 1024, // 1024px - 1279px\n  xl: 1280, // 1280px - 1535px\n  '2xl': 1536 // >= 1536px\n} as const;\n\nexport const useResponsive = () => {\n  const [state, setState] = useState<ResponsiveState>({\n    isMobile: false,\n    isTablet: false,\n    isDesktop: true,\n    isLargeScreen: false,\n    isTouchDevice: false,\n    isRetina: false,\n    orientation: 'landscape',\n    screenWidth: typeof window !== 'undefined' ? window.screen.width : 1920,\n    screenHeight: typeof window !== 'undefined' ? window.screen.height : 1080,\n    viewportWidth: typeof window !== 'undefined' ? window.innerWidth : 1920,\n    viewportHeight: typeof window !== 'undefined' ? window.innerHeight : 1080,\n    breakpoint: 'xl'\n  });\n\n  const updateState = useCallback(() => {\n    if (typeof window === 'undefined') return;\n\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n    const screenWidth = window.screen.width;\n    const screenHeight = window.screen.height;\n\n    // 检测设备类型\n    const isMobile = viewportWidth < breakpoints.md;\n    const isTablet = viewportWidth >= breakpoints.md && viewportWidth < breakpoints.lg;\n    const isDesktop = viewportWidth >= breakpoints.lg;\n    const isLargeScreen = viewportWidth >= breakpoints.xl;\n\n    // 检测触摸设备\n    const isTouchDevice = 'ontouchstart' in window ||\n                         navigator.maxTouchPoints > 0 ||\n                         /Mobi|Android/i.test(navigator.userAgent);\n\n    // 检测高分辨率屏幕\n    const isRetina = window.devicePixelRatio > 1;\n\n    // 检测方向\n    const orientation = viewportWidth > viewportHeight ? 'landscape' : 'portrait';\n\n    // 确定当前断点\n    let breakpoint: ResponsiveState['breakpoint'] = 'xs';\n    if (viewportWidth >= breakpoints['2xl']) breakpoint = '2xl';\n    else if (viewportWidth >= breakpoints.xl) breakpoint = 'xl';\n    else if (viewportWidth >= breakpoints.lg) breakpoint = 'lg';\n    else if (viewportWidth >= breakpoints.md) breakpoint = 'md';\n    else if (viewportWidth >= breakpoints.sm) breakpoint = 'sm';\n\n    setState({\n      isMobile,\n      isTablet,\n      isDesktop,\n      isLargeScreen,\n      isTouchDevice,\n      isRetina,\n      orientation,\n      screenWidth,\n      screenHeight,\n      viewportWidth,\n      viewportHeight,\n      breakpoint\n    });\n  }, []);\n\n  useEffect(() => {\n    // 初始化\n    updateState();\n\n    // 监听窗口大小变化\n    const handleResize = () => {\n      updateState();\n    };\n\n    // 监听设备方向变化\n    const handleOrientationChange = () => {\n      // 延迟更新，确保尺寸已经更新\n      setTimeout(updateState, 100);\n    };\n\n    window.addEventListener('resize', handleResize);\n    window.addEventListener('orientationchange', handleOrientationChange);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      window.removeEventListener('orientationchange', handleOrientationChange);\n    };\n  }, [updateState]);\n\n  return {\n    ...state,\n\n    // 工具方法\n    isBreakpoint: (bp: keyof typeof breakpoints) => {\n      return state.breakpoint === bp;\n    },\n\n    isBreakpointUp: (bp: keyof typeof breakpoints) => {\n      const bpValue = breakpoints[bp];\n      const currentValue = breakpoints[state.breakpoint];\n      return currentValue >= bpValue;\n    },\n\n    isBreakpointDown: (bp: keyof typeof breakpoints) => {\n      const bpValue = breakpoints[bp];\n      const currentValue = breakpoints[state.breakpoint];\n      return currentValue < bpValue;\n    },\n\n    // 获取适合的组件配置\n    getCommentConfig: () => ({\n      // 评论列表配置\n      enableVirtualScroll: state.isDesktop && state.viewportHeight > 800,\n      pageSize: state.isMobile ? 10 : state.isTablet ? 15 : 20,\n      maxDepth: state.isMobile ? 2 : 3,\n      showAvatars: !state.isMobile || state.viewportWidth > 480,\n      showStats: state.isDesktop,\n      compact: state.isMobile,\n\n      // 表单配置\n      useMobileForm: state.isMobile && state.isTouchDevice,\n      autoFocus: !state.isTouchDevice, // 触摸设备避免自动聚焦弹出键盘\n      showToolbar: true,\n      compactToolbar: state.isMobile,\n\n      // 通知配置\n      position: state.isMobile ? 'left' as const : 'right' as const,\n      maxNotifications: state.isMobile ? 5 : 10\n    }),\n\n    // 获取首页布局配置\n    getHomeLayoutConfig: () => ({\n      // 栅格配置\n      gridCols: state.isMobile ? 1 : state.isTablet ? 2 : state.isLargeScreen ? 4 : 3,\n      gap: state.isMobile ? 4 : state.isTablet ? 6 : 8,\n\n      // 侧边栏配置\n      showSidebar: state.isDesktop,\n      sidebarWidth: state.isLargeScreen ? 320 : 280,\n      collapsibleSidebar: state.isTablet,\n\n      // 内容区域\n      contentPadding: state.isMobile ? 16 : state.isTablet ? 24 : 32,\n      maxContentWidth: state.isMobile ? '100%' : state.isTablet ? '768px' : state.isLargeScreen ? '1600px' : '1400px',\n\n      // 组件显示\n      showHeroSection: true,\n      heroHeight: state.isMobile ? 300 : state.isTablet ? 400 : 500,\n      showFeaturedPosts: state.viewportWidth > 640,\n      postsPerRow: state.isMobile ? 1 : state.isTablet ? 2 : state.isLargeScreen ? 4 : 3,\n\n      // 交互优化\n      enableTouchGestures: state.isTouchDevice,\n      enableHoverEffects: !state.isTouchDevice,\n      lazyLoadImages: true,\n      virtualScrolling: state.isDesktop && state.viewportHeight > 800\n    }),\n\n    // 获取组件尺寸配置\n    getComponentSizes: () => ({\n      // 按钮尺寸\n      buttonSize: state.isMobile ? 'sm' : 'md',\n      iconSize: state.isMobile ? 16 : 20,\n\n      // 字体尺寸\n      titleSize: state.isMobile ? 'text-xl' : state.isTablet ? 'text-2xl' : 'text-3xl',\n      bodySize: state.isMobile ? 'text-sm' : 'text-base',\n\n      // 间距\n      spacing: {\n        xs: state.isMobile ? 2 : 4,\n        sm: state.isMobile ? 4 : 6,\n        md: state.isMobile ? 6 : 8,\n        lg: state.isMobile ? 8 : 12,\n        xl: state.isMobile ? 12 : 16\n      },\n\n      // 容器\n      containerPadding: state.isMobile ? 'px-4' : state.isTablet ? 'px-6' : 'px-8',\n      maxWidth: state.isMobile ? 'max-w-full' : state.isTablet ? 'max-w-4xl' : 'max-w-7xl'\n    }),\n\n    // 检查网络连接质量\n    getNetworkOptimizations: () => ({\n      // 基于连接类型的优化\n      enableImageLazyLoad: true,\n      imageQuality: (navigator as any)?.connection?.effectiveType === '4g' ? 80 : 60,\n      enableVideoPreload: (navigator as any)?.connection?.effectiveType === '4g',\n      prefetchContent: !state.isMobile && (navigator as any)?.connection?.effectiveType === '4g',\n\n      // 数据使用优化\n      compressImages: state.isMobile || (navigator as any)?.connection?.saveData,\n      reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)').matches,\n      preloadCriticalResources: state.isDesktop\n    })\n  };\n};\n\nexport default useResponsive;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/hooks/useSEO.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/hooks/useTheme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/hooks/useTouchGestures.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty method 'persist'.","line":75,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":75,"endColumn":24},{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty method 'persist'.","line":123,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":123,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 触摸手势Hook - 完整架构重构版本\n * 解决React事件和DOM事件类型不兼容的根本性架构问题\n * 提供双重接口：React组件接口和DOM元素接口\n */\n\nimport { useCallback, useRef } from 'react';\n\nexport interface TouchGestureConfig {\n  // 滑动配置\n  swipeThreshold?: number; // 滑动最小距离\n  swipeVelocity?: number;  // 滑动最小速度\n\n  // 长按配置\n  longPressDelay?: number; // 长按延迟时间\n  longPressMoveThreshold?: number; // 长按允许的移动距离\n\n  // 双击配置\n  doubleTapDelay?: number; // 双击间隔时间\n  doubleTapDistance?: number; // 双击允许的位置偏移\n}\n\n// React组件接口 - 使用React合成事件\nexport interface ReactTouchGestureCallbacks {\n  onSwipeLeft?: () => void;\n  onSwipeRight?: () => void;\n  onSwipeUp?: () => void;\n  onSwipeDown?: () => void;\n  onLongPress?: (event: React.TouchEvent) => void;\n  onDoubleTap?: (event: React.TouchEvent) => void;\n  onTap?: (event: React.TouchEvent) => void;\n}\n\n// DOM元素接口 - 使用原生DOM事件\nexport interface DOMTouchGestureCallbacks {\n  onSwipeLeft?: () => void;\n  onSwipeRight?: () => void;\n  onSwipeUp?: () => void;\n  onSwipeDown?: () => void;\n  onLongPress?: (event: TouchEvent) => void;\n  onDoubleTap?: (event: TouchEvent) => void;\n  onTap?: (event: TouchEvent) => void;\n}\n\ninterface TouchPoint {\n  x: number;\n  y: number;\n  time: number;\n}\n\n// 事件适配器：将DOM事件转换为React事件格式\nclass EventAdapter {\n  static createSyntheticTouchEvent(nativeEvent: TouchEvent): React.TouchEvent {\n    // 创建模拟的React.TouchEvent对象\n    const syntheticEvent = {\n      touches: nativeEvent.touches,\n      changedTouches: nativeEvent.changedTouches,\n      targetTouches: nativeEvent.targetTouches,\n      altKey: nativeEvent.altKey,\n      ctrlKey: nativeEvent.ctrlKey,\n      shiftKey: nativeEvent.shiftKey,\n      metaKey: nativeEvent.metaKey,\n      preventDefault: nativeEvent.preventDefault.bind(nativeEvent),\n      stopPropagation: nativeEvent.stopPropagation.bind(nativeEvent),\n      target: nativeEvent.target,\n      currentTarget: nativeEvent.currentTarget,\n      type: nativeEvent.type,\n      bubbles: nativeEvent.bubbles,\n      cancelable: nativeEvent.cancelable,\n      timeStamp: nativeEvent.timeStamp,\n      // React特有的属性\n      nativeEvent: nativeEvent,\n      isDefaultPrevented: () => nativeEvent.defaultPrevented,\n      isPropagationStopped: () => false,\n      persist: () => {},\n      getModifierState: (key: string) => {\n        switch (key) {\n          case 'Alt': return nativeEvent.altKey;\n          case 'Control': return nativeEvent.ctrlKey;\n          case 'Shift': return nativeEvent.shiftKey;\n          case 'Meta': return nativeEvent.metaKey;\n          default: return false;\n        }\n      },\n      // 添加缺失的React.SyntheticEvent属性\n      detail: 0,\n      view: window,\n      defaultPrevented: nativeEvent.defaultPrevented,\n      eventPhase: nativeEvent.eventPhase,\n      isTrusted: nativeEvent.isTrusted\n    } as unknown as React.TouchEvent;\n\n    return syntheticEvent;\n  }\n\n  static createSyntheticMouseEvent(nativeEvent: Event): React.MouseEvent {\n    const mouseEvent = nativeEvent as MouseEvent;\n    const syntheticEvent = {\n      button: mouseEvent.button || 0,\n      buttons: mouseEvent.buttons || 0,\n      clientX: mouseEvent.clientX || 0,\n      clientY: mouseEvent.clientY || 0,\n      pageX: mouseEvent.pageX || 0,\n      pageY: mouseEvent.pageY || 0,\n      screenX: mouseEvent.screenX || 0,\n      screenY: mouseEvent.screenY || 0,\n      altKey: mouseEvent.altKey || false,\n      ctrlKey: mouseEvent.ctrlKey || false,\n      shiftKey: mouseEvent.shiftKey || false,\n      metaKey: mouseEvent.metaKey || false,\n      preventDefault: nativeEvent.preventDefault.bind(nativeEvent),\n      stopPropagation: nativeEvent.stopPropagation.bind(nativeEvent),\n      target: nativeEvent.target,\n      currentTarget: nativeEvent.currentTarget,\n      type: nativeEvent.type,\n      bubbles: nativeEvent.bubbles,\n      cancelable: nativeEvent.cancelable,\n      timeStamp: nativeEvent.timeStamp,\n      // React特有的属性\n      nativeEvent: nativeEvent,\n      isDefaultPrevented: () => nativeEvent.defaultPrevented,\n      isPropagationStopped: () => false,\n      persist: () => {},\n      getModifierState: (key: string) => {\n        switch (key) {\n          case 'Alt': return mouseEvent.altKey;\n          case 'Control': return mouseEvent.ctrlKey;\n          case 'Shift': return mouseEvent.shiftKey;\n          case 'Meta': return mouseEvent.metaKey;\n          default: return false;\n        }\n      }\n    } as React.MouseEvent;\n\n    return syntheticEvent;\n  }\n}\n\nexport const useTouchGestures = (\n  config: TouchGestureConfig = {},\n  reactCallbacks: ReactTouchGestureCallbacks = {},\n  domCallbacks: DOMTouchGestureCallbacks = {}\n) => {\n  const {\n    swipeThreshold = 50,\n    swipeVelocity = 0.5,\n    longPressDelay = 500,\n    longPressMoveThreshold = 10,\n    doubleTapDelay = 300,\n    doubleTapDistance = 30\n  } = config;\n\n  // React callbacks\n  const {\n    onSwipeLeft: reactOnSwipeLeft,\n    onSwipeRight: reactOnSwipeRight,\n    onSwipeUp: reactOnSwipeUp,\n    onSwipeDown: reactOnSwipeDown,\n    onLongPress: reactOnLongPress,\n    onDoubleTap: reactOnDoubleTap,\n    onTap: reactOnTap\n  } = reactCallbacks;\n\n  // DOM callbacks\n  const {\n    onSwipeLeft: domOnSwipeLeft,\n    onSwipeRight: domOnSwipeRight,\n    onSwipeUp: domOnSwipeUp,\n    onSwipeDown: domOnSwipeDown,\n    onLongPress: domOnLongPress,\n    onDoubleTap: domOnDoubleTap,\n    onTap: domOnTap\n  } = domCallbacks;\n\n  // 状态引用\n  const touchStartRef = useRef<TouchPoint | null>(null);\n  const touchEndRef = useRef<TouchPoint | null>(null);\n  const longPressTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const lastTapRef = useRef<TouchPoint | null>(null);\n  const preventClickRef = useRef<boolean>(false);\n\n  // 工具函数\n  const calculateDistance = useCallback((point1: TouchPoint, point2: TouchPoint): number => {\n    const dx = point2.x - point1.x;\n    const dy = point2.y - point1.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }, []);\n\n  const calculateVelocity = useCallback((point1: TouchPoint, point2: TouchPoint): number => {\n    const distance = calculateDistance(point1, point2);\n    const time = point2.time - point1.time;\n    return time > 0 ? distance / time : 0;\n  }, [calculateDistance]);\n\n  const clearLongPressTimer = useCallback(() => {\n    if (longPressTimerRef.current) {\n      clearTimeout(longPressTimerRef.current);\n      longPressTimerRef.current = null;\n    }\n  }, []);\n\n  // React事件处理器 - 用于React组件\n  const handleReactTouchStart = useCallback((event: React.TouchEvent) => {\n    const touch = event.touches[0];\n    const touchPoint: TouchPoint = {\n      x: touch.clientX,\n      y: touch.clientY,\n      time: Date.now()\n    };\n\n    touchStartRef.current = touchPoint;\n    touchEndRef.current = null;\n    preventClickRef.current = false;\n\n    // 开始长按计时器\n    if (reactOnLongPress) {\n      clearLongPressTimer();\n      longPressTimerRef.current = setTimeout(() => {\n        if (touchStartRef.current && !preventClickRef.current) {\n          reactOnLongPress(event);\n          preventClickRef.current = true;\n        }\n      }, longPressDelay);\n    }\n  }, [reactOnLongPress, longPressDelay, clearLongPressTimer]);\n\n  const handleReactTouchMove = useCallback((event: React.TouchEvent) => {\n    if (!touchStartRef.current) return;\n\n    const touch = event.touches[0];\n    const currentPoint: TouchPoint = {\n      x: touch.clientX,\n      y: touch.clientY,\n      time: Date.now()\n    };\n\n    // 如果移动距离超过阈值，取消长按\n    const distance = calculateDistance(touchStartRef.current, currentPoint);\n    if (distance > longPressMoveThreshold) {\n      clearLongPressTimer();\n    }\n  }, [calculateDistance, longPressMoveThreshold, clearLongPressTimer]);\n\n  const handleReactTouchEnd = useCallback((event: React.TouchEvent) => {\n    clearLongPressTimer();\n\n    if (!touchStartRef.current) return;\n\n    const touch = event.changedTouches[0];\n    const touchPoint: TouchPoint = {\n      x: touch.clientX,\n      y: touch.clientY,\n      time: Date.now()\n    };\n\n    touchEndRef.current = touchPoint;\n\n    // 检测滑动手势\n    const deltaX = touchPoint.x - touchStartRef.current.x;\n    const deltaY = touchPoint.y - touchStartRef.current.y;\n    const distance = calculateDistance(touchStartRef.current, touchPoint);\n    const velocity = calculateVelocity(touchStartRef.current, touchPoint);\n\n    if (distance >= swipeThreshold && velocity >= swipeVelocity) {\n      if (Math.abs(deltaX) > Math.abs(deltaY)) {\n        // 水平滑动\n        if (deltaX > 0) {\n          reactOnSwipeRight?.();\n        } else {\n          reactOnSwipeLeft?.();\n        }\n      } else {\n        // 垂直滑动\n        if (deltaY > 0) {\n          reactOnSwipeDown?.();\n        } else {\n          reactOnSwipeUp?.();\n        }\n      }\n    } else {\n      // 可能是点击或双击\n      if (lastTapRef.current) {\n        const timeSinceLastTap = touchPoint.time - lastTapRef.current.time;\n        const distanceFromLastTap = calculateDistance(lastTapRef.current, touchPoint);\n\n        // 检测双击\n        if (\n          timeSinceLastTap <= doubleTapDelay &&\n          distanceFromLastTap <= doubleTapDistance &&\n          reactOnDoubleTap\n        ) {\n          reactOnDoubleTap(event);\n          lastTapRef.current = null;\n          preventClickRef.current = true;\n          return;\n        }\n      }\n\n      // 记录这次点击\n      lastTapRef.current = touchPoint;\n\n      // 延迟执行单击\n      if (reactOnTap) {\n        setTimeout(() => {\n          if (lastTapRef.current === touchPoint && !preventClickRef.current) {\n            reactOnTap(event);\n          }\n        }, doubleTapDelay);\n      }\n    }\n\n    touchStartRef.current = null;\n  }, [\n    clearLongPressTimer,\n    calculateDistance,\n    calculateVelocity,\n    swipeThreshold,\n    swipeVelocity,\n    doubleTapDelay,\n    doubleTapDistance,\n    reactOnSwipeLeft,\n    reactOnSwipeRight,\n    reactOnSwipeUp,\n    reactOnSwipeDown,\n    reactOnDoubleTap,\n    reactOnTap\n  ]);\n\n  const handleReactTouchCancel = useCallback(() => {\n    clearLongPressTimer();\n    touchStartRef.current = null;\n    touchEndRef.current = null;\n    preventClickRef.current = false;\n  }, [clearLongPressTimer]);\n\n  const handleReactClick = useCallback((event: React.MouseEvent) => {\n    if (preventClickRef.current) {\n      event.preventDefault();\n      event.stopPropagation();\n      preventClickRef.current = false;\n    }\n  }, []);\n\n  // DOM事件处理器 - 用于直接DOM绑定\n  const handleDOMTouchStart = useCallback((event: TouchEvent) => {\n    const touch = event.touches[0];\n    const touchPoint: TouchPoint = {\n      x: touch.clientX,\n      y: touch.clientY,\n      time: Date.now()\n    };\n\n    touchStartRef.current = touchPoint;\n    touchEndRef.current = null;\n    preventClickRef.current = false;\n\n    // 开始长按计时器\n    if (domOnLongPress) {\n      clearLongPressTimer();\n      longPressTimerRef.current = setTimeout(() => {\n        if (touchStartRef.current && !preventClickRef.current) {\n          domOnLongPress(event);\n          preventClickRef.current = true;\n        }\n      }, longPressDelay);\n    }\n  }, [domOnLongPress, longPressDelay, clearLongPressTimer]);\n\n  const handleDOMTouchMove = useCallback((event: TouchEvent) => {\n    if (!touchStartRef.current) return;\n\n    const touch = event.touches[0];\n    const currentPoint: TouchPoint = {\n      x: touch.clientX,\n      y: touch.clientY,\n      time: Date.now()\n    };\n\n    // 如果移动距离超过阈值，取消长按\n    const distance = calculateDistance(touchStartRef.current, currentPoint);\n    if (distance > longPressMoveThreshold) {\n      clearLongPressTimer();\n    }\n  }, [calculateDistance, longPressMoveThreshold, clearLongPressTimer]);\n\n  const handleDOMTouchEnd = useCallback((event: TouchEvent) => {\n    clearLongPressTimer();\n\n    if (!touchStartRef.current) return;\n\n    const touch = event.changedTouches[0];\n    const touchPoint: TouchPoint = {\n      x: touch.clientX,\n      y: touch.clientY,\n      time: Date.now()\n    };\n\n    touchEndRef.current = touchPoint;\n\n    // 检测滑动手势\n    const deltaX = touchPoint.x - touchStartRef.current.x;\n    const deltaY = touchPoint.y - touchStartRef.current.y;\n    const distance = calculateDistance(touchStartRef.current, touchPoint);\n    const velocity = calculateVelocity(touchStartRef.current, touchPoint);\n\n    if (distance >= swipeThreshold && velocity >= swipeVelocity) {\n      if (Math.abs(deltaX) > Math.abs(deltaY)) {\n        // 水平滑动\n        if (deltaX > 0) {\n          domOnSwipeRight?.();\n        } else {\n          domOnSwipeLeft?.();\n        }\n      } else {\n        // 垂直滑动\n        if (deltaY > 0) {\n          domOnSwipeDown?.();\n        } else {\n          domOnSwipeUp?.();\n        }\n      }\n    } else {\n      // 可能是点击或双击\n      if (lastTapRef.current) {\n        const timeSinceLastTap = touchPoint.time - lastTapRef.current.time;\n        const distanceFromLastTap = calculateDistance(lastTapRef.current, touchPoint);\n\n        // 检测双击\n        if (\n          timeSinceLastTap <= doubleTapDelay &&\n          distanceFromLastTap <= doubleTapDistance &&\n          domOnDoubleTap\n        ) {\n          domOnDoubleTap(event);\n          lastTapRef.current = null;\n          preventClickRef.current = true;\n          return;\n        }\n      }\n\n      // 记录这次点击\n      lastTapRef.current = touchPoint;\n\n      // 延迟执行单击\n      if (domOnTap) {\n        setTimeout(() => {\n          if (lastTapRef.current === touchPoint && !preventClickRef.current) {\n            domOnTap(event);\n          }\n        }, doubleTapDelay);\n      }\n    }\n\n    touchStartRef.current = null;\n  }, [\n    clearLongPressTimer,\n    calculateDistance,\n    calculateVelocity,\n    swipeThreshold,\n    swipeVelocity,\n    doubleTapDelay,\n    doubleTapDistance,\n    domOnSwipeLeft,\n    domOnSwipeRight,\n    domOnSwipeUp,\n    domOnSwipeDown,\n    domOnDoubleTap,\n    domOnTap\n  ]);\n\n  const handleDOMTouchCancel = useCallback(() => {\n    clearLongPressTimer();\n    touchStartRef.current = null;\n    touchEndRef.current = null;\n    preventClickRef.current = false;\n  }, [clearLongPressTimer]);\n\n  const handleDOMClick = useCallback((event: Event) => {\n    if (preventClickRef.current) {\n      event.preventDefault();\n      event.stopPropagation();\n      preventClickRef.current = false;\n    }\n  }, []);\n\n  // React组件事件处理器对象\n  const reactTouchHandlers = {\n    onTouchStart: handleReactTouchStart,\n    onTouchMove: handleReactTouchMove,\n    onTouchEnd: handleReactTouchEnd,\n    onTouchCancel: handleReactTouchCancel,\n    onClick: handleReactClick,\n  };\n\n  // DOM元素绑定函数\n  const bindToElement = useCallback((element: HTMLElement) => {\n    if (!element) return;\n\n    element.addEventListener('touchstart', handleDOMTouchStart, { passive: false });\n    element.addEventListener('touchmove', handleDOMTouchMove, { passive: false });\n    element.addEventListener('touchend', handleDOMTouchEnd, { passive: false });\n    element.addEventListener('touchcancel', handleDOMTouchCancel, { passive: false });\n    element.addEventListener('click', handleDOMClick, { passive: false });\n\n    return () => {\n      element.removeEventListener('touchstart', handleDOMTouchStart);\n      element.removeEventListener('touchmove', handleDOMTouchMove);\n      element.removeEventListener('touchend', handleDOMTouchEnd);\n      element.removeEventListener('touchcancel', handleDOMTouchCancel);\n      element.removeEventListener('click', handleDOMClick);\n    };\n  }, [handleDOMTouchStart, handleDOMTouchMove, handleDOMTouchEnd, handleDOMTouchCancel, handleDOMClick]);\n\n  return {\n    // React组件接口\n    touchHandlers: reactTouchHandlers,\n\n    // DOM元素接口\n    bindToElement,\n\n    // 状态查询\n    isGestureActive: touchStartRef.current !== null,\n    preventClick: preventClickRef.current,\n\n    // 事件适配器 - 供高级用法使用\n    EventAdapter\n  };\n};\n\nexport default useTouchGestures;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/main.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[738,741],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[738,741],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2872,2908],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":113,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":113,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2915,2958],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":191,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":191,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4847,4879],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * React应用程序主入口点\n * 初始化应用程序，配置提供者，并渲染根组件\n */\n\nimport React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { HelmetProvider } from '@/components/common/DocumentHead';\n\nimport App from './App';\nimport './styles/globals.css';\n\n// 导入环境配置和验证\nimport { validateEnvironment, isDevelopment } from './types/env';\n\n// React Query配置\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000, // 5分钟\n      gcTime: 10 * 60 * 1000, // 10分钟 (替代cacheTime)\n      retry: (failureCount, error: any) => {\n        // 不重试4xx错误\n        if (error?.status >= 400 && error?.status < 500) {\n          return false;\n        }\n        // 最多重试3次\n        return failureCount < 3;\n      },\n      refetchOnWindowFocus: false,\n      refetchOnMount: true,\n      refetchOnReconnect: true,\n    },\n    mutations: {\n      retry: 1,\n    },\n  },\n});\n\n// 错误边界组件\nclass ErrorBoundary extends React.Component<\n  { children: React.ReactNode },\n  { hasError: boolean; error?: Error }\n> {\n  constructor(props: { children: React.ReactNode }) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('应用程序错误:', error);\n    console.error('错误信息:', errorInfo);\n\n    // 这里可以集成错误报告服务\n    // 例如: Sentry.captureException(error, { extra: errorInfo });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"error-boundary\">\n          <h1 className=\"text-2xl font-bold text-red-600 mb-4\">\n            应用程序遇到错误\n          </h1>\n          <p className=\"text-gray-700 mb-4\">\n            抱歉，应用程序遇到了意外错误。请刷新页面重试。\n          </p>\n          {isDevelopment() && this.state.error && (\n            <details className=\"mt-4 p-4 bg-gray-100 rounded\">\n              <summary className=\"cursor-pointer font-semibold\">\n                错误详情 (开发模式)\n              </summary>\n              <pre className=\"mt-2 text-sm overflow-auto\">\n                {this.state.error.stack}\n              </pre>\n            </details>\n          )}\n          <button\n            onClick={() => window.location.reload()}\n            className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\n          >\n            刷新页面\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// 应用程序初始化\nasync function initializeApp() {\n  try {\n    // 验证环境变量\n    validateEnvironment();\n\n    // 检查浏览器兼容性\n    if (!window.fetch) {\n      throw new Error('此浏览器不支持现代Web标准，请更新您的浏览器');\n    }\n\n    // 初始化分析追踪（如果启用）\n    if (isDevelopment()) {\n      console.log('🚀 Maple Blog 开发模式启动');\n      console.log('📊 React Query DevTools 已启用');\n    }\n\n    return true;\n  } catch (error) {\n    console.error('应用程序初始化失败:', error);\n    return false;\n  }\n}\n\n// 渲染应用程序\nasync function renderApp() {\n  const container = document.getElementById('root');\n  if (!container) {\n    throw new Error('找不到根容器元素');\n  }\n\n  const root = createRoot(container);\n\n  // 初始化检查\n  const initSuccess = await initializeApp();\n  if (!initSuccess) {\n    root.render(\n      <div className=\"error-boundary\">\n        <h1>应用程序初始化失败</h1>\n        <p>请检查控制台获取更多信息，或刷新页面重试。</p>\n        <button onClick={() => window.location.reload()}>\n          刷新页面\n        </button>\n      </div>\n    );\n    return;\n  }\n\n  // 渲染完整应用\n  root.render(\n    <React.StrictMode>\n      <ErrorBoundary>\n        <HelmetProvider>\n          <QueryClientProvider client={queryClient}>\n            <BrowserRouter>\n              <App />\n              {isDevelopment() && (\n                <ReactQueryDevtools initialIsOpen={false} />\n              )}\n            </BrowserRouter>\n          </QueryClientProvider>\n        </HelmetProvider>\n      </ErrorBoundary>\n    </React.StrictMode>\n  );\n}\n\n// 启动应用\nrenderApp().catch((error) => {\n  console.error('应用程序渲染失败:', error);\n\n  // 显示fallback错误UI\n  const container = document.getElementById('root');\n  if (container) {\n    container.innerHTML = `\n      <div style=\"text-align: center; padding: 2rem; font-family: system-ui, sans-serif;\">\n        <h1 style=\"color: #dc2626; margin-bottom: 1rem;\">应用程序启动失败</h1>\n        <p style=\"color: #6b7280; margin-bottom: 1rem;\">应用程序无法正常启动，请检查控制台获取更多信息。</p>\n        <button\n          onclick=\"window.location.reload()\"\n          style=\"padding: 0.5rem 1rem; background: #3b82f6; color: white; border: none; border-radius: 0.25rem; cursor: pointer;\"\n        >\n          刷新页面\n        </button>\n      </div>\n    `;\n  }\n});\n\n// 开发时热重载支持\nif (isDevelopment() && import.meta.hot) {\n  import.meta.hot.accept('./App', () => {\n    console.log('🔄 热重载: App组件已更新');\n  });\n}","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/HomePage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HomePageData' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":44,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'siteStats' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":53,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * HomePage component - Main landing page with all home components\n * Features: Complete homepage layout with all sections, responsive design, SEO optimization\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { Helmet } from '@/components/common/DocumentHead';\nimport {\n  HeroSection,\n  FeaturedPosts,\n  PopularPosts,\n  PersonalizedFeed,\n  CategoryGrid,\n  TagCloud,\n  StatsWidget,\n  ActiveAuthors,\n  Sidebar,\n} from '../components/home';\nimport { useAuth } from '../hooks/useAuth';\nimport { useHomePageData, useSiteStats } from '../services/home/homeApi';\nimport { useIsMobile, useHomePageActions } from '../stores/homeStore';\nimport { cn } from '../utils/cn';\nimport type { HomePageData } from '../types/home';\n\ninterface HomePageProps {\n  className?: string;\n}\n\ninterface HomePageSectionProps {\n  children: React.ReactNode;\n  className?: string;\n  id?: string;\n}\n\nconst HomePageSection: React.FC<HomePageSectionProps> = ({ children, className, id }) => (\n  <section id={id} className={cn('py-8 sm:py-12', className)}>\n    <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\n      {children}\n    </div>\n  </section>\n);\n\nexport const HomePage: React.FC<HomePageProps> = ({ className }) => {\n  const { isAuthenticated, user } = useAuth();\n  const isMobile = useIsMobile();\n  const { setLastRefresh } = useHomePageActions();\n\n  // Local state\n  const [showPersonalized, setShowPersonalized] = useState(isAuthenticated);\n\n  // API data\n  const { data: homePageData, isLoading, error } = useHomePageData();\n  const { data: siteStats } = useSiteStats();\n\n  // Update last refresh timestamp\n  useEffect(() => {\n    if (homePageData) {\n      setLastRefresh();\n    }\n  }, [homePageData, setLastRefresh]);\n\n  // Update personalized content visibility based on auth status\n  useEffect(() => {\n    setShowPersonalized(isAuthenticated);\n  }, [isAuthenticated]);\n\n  // SEO meta data\n  const seoTitle = 'Maple Blog - 现代AI驱动的技术博客平台';\n  const seoDescription = '探索最新的技术趋势、编程教程和开发经验分享。Maple Blog 提供高质量的技术内容，支持个性化推荐，让您的学习更高效。';\n  const seoKeywords = 'Maple Blog, 技术博客, 编程教程, React, TypeScript, .NET, 个性化推荐, AI博客';\n\n  // Structured data for SEO\n  const structuredData = {\n    '@context': 'https://schema.org',\n    '@type': 'WebSite',\n    'name': 'Maple Blog',\n    'description': seoDescription,\n    'url': 'https://maple-blog.com',\n    'potentialAction': {\n      '@type': 'SearchAction',\n      'target': 'https://maple-blog.com/search?q={search_term_string}',\n      'query-input': 'required name=search_term_string'\n    },\n    'publisher': {\n      '@type': 'Organization',\n      'name': 'Maple Blog',\n      'logo': {\n        '@type': 'ImageObject',\n        'url': 'https://maple-blog.com/logo.png'\n      }\n    }\n  };\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">\n            页面加载出错\n          </h1>\n          <p className=\"text-gray-500 dark:text-gray-400 mb-6\">\n            抱歉，页面无法正常加载，请稍后再试。\n          </p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\"\n          >\n            重新加载\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {/* SEO Head */}\n      <Helmet>\n        <title>{seoTitle}</title>\n        <meta name=\"description\" content={seoDescription} />\n        <meta name=\"keywords\" content={seoKeywords} />\n        <meta name=\"author\" content=\"Maple Blog Team\" />\n        <meta name=\"robots\" content=\"index, follow\" />\n\n        {/* Open Graph */}\n        <meta property=\"og:type\" content=\"website\" />\n        <meta property=\"og:title\" content={seoTitle} />\n        <meta property=\"og:description\" content={seoDescription} />\n        <meta property=\"og:url\" content=\"https://maple-blog.com\" />\n        <meta property=\"og:image\" content=\"https://maple-blog.com/og-image.jpg\" />\n        <meta property=\"og:site_name\" content=\"Maple Blog\" />\n\n        {/* Twitter Card */}\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:title\" content={seoTitle} />\n        <meta name=\"twitter:description\" content={seoDescription} />\n        <meta name=\"twitter:image\" content=\"https://maple-blog.com/twitter-image.jpg\" />\n\n        {/* Canonical URL */}\n        <link rel=\"canonical\" href=\"https://maple-blog.com\" />\n\n        {/* Structured Data */}\n        <script type=\"application/ld+json\">\n          {JSON.stringify(structuredData)}\n        </script>\n      </Helmet>\n\n      <div className={cn('min-h-screen bg-gray-50 dark:bg-gray-900', className)}>\n        <div className={cn(\n          'grid gap-0',\n          isMobile\n            ? 'grid-cols-1'\n            : 'grid-cols-1 lg:grid-cols-4 xl:grid-cols-5'\n        )}>\n          {/* Main Content */}\n          <main className={cn(\n            'space-y-0',\n            !isMobile && 'lg:col-span-3 xl:col-span-4'\n          )}>\n            {/* Hero Section */}\n            <HeroSection\n              height=\"lg\"\n              autoPlay={!isLoading}\n              className=\"bg-white dark:bg-gray-800\"\n            />\n\n            {/* Personalized Feed - Only for authenticated users */}\n            {showPersonalized && (\n              <HomePageSection id=\"personalized\" className=\"bg-white dark:bg-gray-800\">\n                <PersonalizedFeed\n                  maxItems={6}\n                  showAnalytics={!isMobile}\n                  compact={isMobile}\n                />\n              </HomePageSection>\n            )}\n\n            {/* Featured Posts */}\n            <HomePageSection id=\"featured\" className=\"bg-gray-50 dark:bg-gray-900\">\n              <FeaturedPosts\n                layout=\"showcase\"\n                count={6}\n                showControls={!isMobile}\n              />\n            </HomePageSection>\n\n            {/* Popular Posts */}\n            <HomePageSection id=\"popular\" className=\"bg-white dark:bg-gray-800\">\n              <PopularPosts\n                count={isMobile ? 6 : 12}\n                daysBack={7}\n                layout=\"grid\"\n                showControls={!isMobile}\n              />\n            </HomePageSection>\n\n            {/* Categories and Tags Section */}\n            <HomePageSection id=\"navigation\" className=\"bg-gray-50 dark:bg-gray-900\">\n              <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-8 xl:gap-12\">\n                <CategoryGrid\n                  layout=\"grid\"\n                  maxItems={isMobile ? 6 : 12}\n                  compact={isMobile}\n                />\n                <TagCloud\n                  maxTags={isMobile ? 20 : 40}\n                  colorScheme=\"warm\"\n                  showControls={!isMobile}\n                />\n              </div>\n            </HomePageSection>\n\n            {/* Statistics and Authors */}\n            <HomePageSection id=\"community\" className=\"bg-white dark:bg-gray-800\">\n              <div className=\"space-y-8\">\n                <StatsWidget\n                  layout={isMobile ? 'compact' : 'horizontal'}\n                  showGrowth={!isMobile}\n                  showCharts={!isMobile}\n                />\n                <ActiveAuthors\n                  count={isMobile ? 6 : 12}\n                  layout={isMobile ? 'compact' : 'grid'}\n                  showFollowButton={isAuthenticated}\n                />\n              </div>\n            </HomePageSection>\n\n            {/* Call to Action Section */}\n            {!isAuthenticated && (\n              <HomePageSection id=\"cta\" className=\"bg-gradient-to-r from-orange-500 to-red-600 text-white\">\n                <div className=\"text-center py-8\">\n                  <h2 className=\"text-3xl font-bold mb-4\">\n                    加入 Maple Blog 社区\n                  </h2>\n                  <p className=\"text-xl opacity-90 mb-8 max-w-2xl mx-auto\">\n                    发现优质技术内容，享受个性化推荐，与开发者们共同成长\n                  </p>\n                  <div className=\"flex items-center justify-center space-x-4\">\n                    <a\n                      href=\"/register\"\n                      className=\"px-8 py-3 bg-white text-orange-600 font-semibold rounded-lg hover:bg-gray-100 transition-colors\"\n                    >\n                      免费注册\n                    </a>\n                    <a\n                      href=\"/about\"\n                      className=\"px-8 py-3 border-2 border-white text-white font-semibold rounded-lg hover:bg-white hover:text-orange-600 transition-colors\"\n                    >\n                      了解更多\n                    </a>\n                  </div>\n                </div>\n              </HomePageSection>\n            )}\n          </main>\n\n          {/* Sidebar - Hidden on mobile */}\n          {!isMobile && (\n            <aside className=\"lg:col-span-1 border-l border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-800\">\n              <Sidebar sticky />\n            </aside>\n          )}\n        </div>\n\n        {/* Back to Top Button */}\n        <button\n          onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}\n          className=\"fixed bottom-8 right-8 p-3 bg-orange-500 text-white rounded-full shadow-lg hover:bg-orange-600 transition-all duration-200 hover:scale-110 z-40\"\n          aria-label=\"回到顶部\"\n        >\n          <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 10l7-7m0 0l7 7m-7-7v18\" />\n          </svg>\n        </button>\n\n        {/* Loading Overlay */}\n        {isLoading && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-20 flex items-center justify-center z-50\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"animate-spin rounded-full h-6 w-6 border-2 border-orange-500 border-t-transparent\"></div>\n                <span className=\"text-gray-600 dark:text-gray-400\">加载中...</span>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default HomePage;\n\n/**\n * HomePage Features:\n *\n * Layout & Design:\n * - Responsive design with mobile-first approach\n * - Sidebar layout for desktop, stacked for mobile\n * - Consistent spacing and visual hierarchy\n * - Dark theme support throughout\n *\n * Content Sections:\n * - Hero section with featured posts carousel\n * - Personalized recommendations (authenticated users)\n * - Featured posts showcase\n * - Popular posts grid\n * - Category and tag navigation\n * - Community statistics and active authors\n * - Call-to-action for non-authenticated users\n *\n * Performance:\n * - Lazy loading for images and components\n * - Optimized API calls with caching\n * - Smooth animations and transitions\n * - Minimal re-renders with proper memoization\n *\n * SEO Optimization:\n * - Complete meta tags and Open Graph\n * - Structured data for search engines\n * - Semantic HTML with proper heading hierarchy\n * - Canonical URLs and Twitter Cards\n *\n * Accessibility:\n * - WCAG 2.1 AA compliance\n * - Keyboard navigation support\n * - Screen reader optimizations\n * - Color contrast compliance\n * - Focus management and ARIA labels\n *\n * User Experience:\n * - Personalization for authenticated users\n * - Smooth scrolling and animations\n * - Loading states and error handling\n * - Mobile-optimized interactions\n * - Back-to-top functionality\n */","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/UserProfilePage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/admin/AdminDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/admin/AnalyticsDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/admin/ContentManagement.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/admin/SeedDataManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardFooter' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Progress' is defined but never used. Allowed unused vars must match /^_/u.","line":27,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used. Allowed unused vars must match /^_/u.","line":44,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1443,1446],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1443,1446],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":165,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":165,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4028,4074],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/Button';\nimport { Badge } from '@/components/ui/badge';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/components/ui/tabs';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Progress } from '@/components/ui/progress';\nimport { Separator } from '@/components/ui/separator';\nimport {\n  CheckCircle,\n  AlertTriangle,\n  XCircle,\n  Database,\n  RefreshCw,\n  Trash2,\n  Settings,\n  Clock,\n  Users,\n  FileText,\n  Tags,\n  Folder,\n  Shield,\n  Activity,\n  Download,\n  Upload,\n} from 'lucide-react';\n\ninterface SeedStatus {\n  environment: string;\n  checkTime: string;\n  isHealthy: boolean;\n  canConnectToDatabase: boolean;\n  hasTestData: boolean;\n  existingUsers: number;\n  existingPosts: number;\n  existingCategories: number;\n  existingTags: number;\n  existingRoles: number;\n  issues: string[];\n  recommendations: string[];\n}\n\ninterface SeedProvider {\n  environment: string;\n  priority: number;\n  type: string;\n  canProvideFor: boolean;\n}\n\ninterface ValidationResult {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n  context: Record<string, any>;\n}\n\ninterface SeedResult {\n  environment: string;\n  isSuccess: boolean;\n  errorMessage?: string;\n  requiresConfirmation: boolean;\n  duration: string;\n  totalCreated: number;\n  totalSkipped: number;\n  rolesCreated: number;\n  usersCreated: number;\n  categoriesCreated: number;\n  tagsCreated: number;\n  postsCreated: number;\n  validationErrors: string[];\n  validationWarnings: string[];\n}\n\ninterface CleanupResult {\n  isSuccess: boolean;\n  errorMessage?: string;\n  isDryRun: boolean;\n  testUsersFound: number;\n  testPostsFound: number;\n  testUsersRemoved: number;\n  testPostsRemoved: number;\n  duration: string;\n}\n\nconst SeedDataManagement: React.FC = () => {\n  const [status, setStatus] = useState<SeedStatus | null>(null);\n  const [providers, setProviders] = useState<SeedProvider[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [seedResult, setSeedResult] = useState<SeedResult | null>(null);\n  const [cleanupResult, setCleanupResult] = useState<CleanupResult | null>(null);\n  const [showSeedDialog, setShowSeedDialog] = useState(false);\n  const [showCleanupDialog, setShowCleanupDialog] = useState(false);\n  const [environment, setEnvironment] = useState('');\n\n  const fetchStatus = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch('/api/admin/seeddata/status');\n      if (response.ok) {\n        const data = await response.json();\n        setStatus(data);\n      }\n    } catch (error) {\n      console.error('Error fetching seed data status:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchProviders = async () => {\n    try {\n      const response = await fetch('/api/admin/seeddata/providers');\n      if (response.ok) {\n        const data = await response.json();\n        setProviders(data);\n      }\n    } catch (error) {\n      console.error('Error fetching providers:', error);\n    }\n  };\n\n  const fetchEnvironment = async () => {\n    try {\n      const response = await fetch('/api/admin/seeddata/environment');\n      if (response.ok) {\n        const data = await response.json();\n        setEnvironment(data.name);\n      }\n    } catch (error) {\n      console.error('Error fetching environment:', error);\n    }\n  };\n\n  const validateEnvironment = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch('/api/admin/seeddata/validate', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ environment }),\n      });\n\n      if (response.ok) {\n        const validation: ValidationResult = await response.json();\n        console.log('Validation result:', validation);\n        // Handle validation result\n      }\n    } catch (error) {\n      console.error('Error validating environment:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const seedData = async (forceSeeding = false, confirmProduction = false) => {\n    setLoading(true);\n    try {\n      const response = await fetch('/api/admin/seeddata/seed', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          environment,\n          forceSeeding,\n          confirmProduction,\n        }),\n      });\n\n      if (response.ok) {\n        const result: SeedResult = await response.json();\n        setSeedResult(result);\n        fetchStatus(); // Refresh status\n      } else {\n        const error = await response.json();\n        setSeedResult({\n          environment,\n          isSuccess: false,\n          errorMessage: error.error || 'Seeding failed',\n          requiresConfirmation: false,\n          duration: '0',\n          totalCreated: 0,\n          totalSkipped: 0,\n          rolesCreated: 0,\n          usersCreated: 0,\n          categoriesCreated: 0,\n          tagsCreated: 0,\n          postsCreated: 0,\n          validationErrors: [],\n          validationWarnings: [],\n        });\n      }\n    } catch (error) {\n      console.error('Error seeding data:', error);\n    } finally {\n      setLoading(false);\n      setShowSeedDialog(false);\n    }\n  };\n\n  const cleanTestData = async (dryRun = true) => {\n    setLoading(true);\n    try {\n      const response = await fetch('/api/admin/seeddata/clean-test-data', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ dryRun }),\n      });\n\n      if (response.ok) {\n        const result: CleanupResult = await response.json();\n        setCleanupResult(result);\n        fetchStatus(); // Refresh status\n      }\n    } catch (error) {\n      console.error('Error cleaning test data:', error);\n    } finally {\n      setLoading(false);\n      setShowCleanupDialog(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchStatus();\n    fetchProviders();\n    fetchEnvironment();\n  }, []);\n\n  const getStatusIcon = (isHealthy: boolean) => {\n    return isHealthy ? (\n      <CheckCircle className=\"h-5 w-5 text-green-500\" />\n    ) : (\n      <XCircle className=\"h-5 w-5 text-red-500\" />\n    );\n  };\n\n  const getEnvironmentBadge = (env: string) => {\n    const colors = {\n      Development: 'bg-blue-100 text-blue-800',\n      Staging: 'bg-yellow-100 text-yellow-800',\n      Production: 'bg-red-100 text-red-800',\n    };\n    return colors[env as keyof typeof colors] || 'bg-gray-100 text-gray-800';\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Seed Data Management</h1>\n          <p className=\"text-gray-600\">\n            Manage application seed data, initialization, and cleanup\n          </p>\n        </div>\n        <div className=\"flex space-x-2\">\n          <Button onClick={fetchStatus} variant=\"outline\" disabled={loading}>\n            <RefreshCw className={`mr-2 h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            Refresh\n          </Button>\n        </div>\n      </div>\n\n      <Tabs defaultValue=\"status\" className=\"space-y-4\">\n        <TabsList>\n          <TabsTrigger value=\"status\">Status</TabsTrigger>\n          <TabsTrigger value=\"providers\">Providers</TabsTrigger>\n          <TabsTrigger value=\"operations\">Operations</TabsTrigger>\n          <TabsTrigger value=\"history\">History</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"status\">\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Environment</CardTitle>\n                <Settings className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{environment}</div>\n                <Badge className={getEnvironmentBadge(environment)}>\n                  {environment}\n                </Badge>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Database Health</CardTitle>\n                <Database className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center space-x-2\">\n                  {status && getStatusIcon(status.isHealthy)}\n                  <div className=\"text-2xl font-bold\">\n                    {status?.isHealthy ? 'Healthy' : 'Issues'}\n                  </div>\n                </div>\n                {status?.canConnectToDatabase ? (\n                  <p className=\"text-xs text-muted-foreground\">Connected</p>\n                ) : (\n                  <p className=\"text-xs text-red-500\">Cannot connect</p>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">Test Data</CardTitle>\n                <AlertTriangle className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">\n                  {status?.hasTestData ? 'Present' : 'Clean'}\n                </div>\n                <Badge variant={status?.hasTestData ? 'destructive' : 'default'}>\n                  {status?.hasTestData ? 'Needs Cleanup' : 'No Test Data'}\n                </Badge>\n              </CardContent>\n            </Card>\n          </div>\n\n          {status && (\n            <Card>\n              <CardHeader>\n                <CardTitle>Database Statistics</CardTitle>\n                <CardDescription>Current database content overview</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-5\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Users className=\"h-4 w-4 text-blue-500\" />\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Users</p>\n                      <p className=\"text-2xl font-bold\">{status.existingUsers}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <FileText className=\"h-4 w-4 text-green-500\" />\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Posts</p>\n                      <p className=\"text-2xl font-bold\">{status.existingPosts}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Folder className=\"h-4 w-4 text-yellow-500\" />\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Categories</p>\n                      <p className=\"text-2xl font-bold\">{status.existingCategories}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Tags className=\"h-4 w-4 text-purple-500\" />\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Tags</p>\n                      <p className=\"text-2xl font-bold\">{status.existingTags}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Shield className=\"h-4 w-4 text-red-500\" />\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Roles</p>\n                      <p className=\"text-2xl font-bold\">{status.existingRoles}</p>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {status?.issues && status.issues.length > 0 && (\n            <Alert>\n              <AlertTriangle className=\"h-4 w-4\" />\n              <AlertDescription>\n                <div className=\"space-y-1\">\n                  <p className=\"font-semibold\">Issues detected:</p>\n                  <ul className=\"list-disc list-inside space-y-1\">\n                    {status.issues.map((issue, index) => (\n                      <li key={index} className=\"text-sm\">{issue}</li>\n                    ))}\n                  </ul>\n                </div>\n              </AlertDescription>\n            </Alert>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"providers\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Seed Data Providers</CardTitle>\n              <CardDescription>\n                Available providers for different environments\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {providers.map((provider, index) => (\n                  <div key={index} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                    <div>\n                      <div className=\"font-semibold\">{provider.type}</div>\n                      <div className=\"text-sm text-muted-foreground\">\n                        Environment: {provider.environment} | Priority: {provider.priority}\n                      </div>\n                    </div>\n                    <Badge variant={provider.canProvideFor ? 'default' : 'secondary'}>\n                      {provider.canProvideFor ? 'Active' : 'Inactive'}\n                    </Badge>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"operations\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Seed Data</CardTitle>\n                <CardDescription>\n                  Initialize database with environment-appropriate data\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <Button\n                    onClick={validateEnvironment}\n                    variant=\"outline\"\n                    className=\"w-full\"\n                    disabled={loading}\n                  >\n                    <CheckCircle className=\"mr-2 h-4 w-4\" />\n                    Validate Environment\n                  </Button>\n                  <Button\n                    onClick={() => setShowSeedDialog(true)}\n                    className=\"w-full\"\n                    disabled={loading}\n                  >\n                    <Upload className=\"mr-2 h-4 w-4\" />\n                    Seed Data\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Cleanup Operations</CardTitle>\n                <CardDescription>\n                  Remove test data and clean up database\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <Button\n                    onClick={() => cleanTestData(true)}\n                    variant=\"outline\"\n                    className=\"w-full\"\n                    disabled={loading}\n                  >\n                    <Activity className=\"mr-2 h-4 w-4\" />\n                    Preview Cleanup (Dry Run)\n                  </Button>\n                  <Button\n                    onClick={() => setShowCleanupDialog(true)}\n                    variant=\"destructive\"\n                    className=\"w-full\"\n                    disabled={loading}\n                  >\n                    <Trash2 className=\"mr-2 h-4 w-4\" />\n                    Clean Test Data\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Results Display */}\n          {seedResult && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  {seedResult.isSuccess ? (\n                    <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  ) : (\n                    <XCircle className=\"h-5 w-5 text-red-500\" />\n                  )}\n                  <span>Seed Operation Result</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div className=\"grid gap-4 md:grid-cols-3\">\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Duration</p>\n                      <p className=\"text-lg font-semibold\">{seedResult.duration}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Created</p>\n                      <p className=\"text-lg font-semibold text-green-600\">{seedResult.totalCreated}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Skipped</p>\n                      <p className=\"text-lg font-semibold text-yellow-600\">{seedResult.totalSkipped}</p>\n                    </div>\n                  </div>\n\n                  {seedResult.errorMessage && (\n                    <Alert>\n                      <AlertTriangle className=\"h-4 w-4\" />\n                      <AlertDescription>{seedResult.errorMessage}</AlertDescription>\n                    </Alert>\n                  )}\n\n                  {seedResult.validationWarnings.length > 0 && (\n                    <Alert>\n                      <AlertTriangle className=\"h-4 w-4\" />\n                      <AlertDescription>\n                        <div className=\"space-y-1\">\n                          <p className=\"font-semibold\">Warnings:</p>\n                          <ul className=\"list-disc list-inside space-y-1\">\n                            {seedResult.validationWarnings.map((warning, index) => (\n                              <li key={index} className=\"text-sm\">{warning}</li>\n                            ))}\n                          </ul>\n                        </div>\n                      </AlertDescription>\n                    </Alert>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {cleanupResult && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  {cleanupResult.isSuccess ? (\n                    <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                  ) : (\n                    <XCircle className=\"h-5 w-5 text-red-500\" />\n                  )}\n                  <span>Cleanup Operation Result</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div className=\"grid gap-4 md:grid-cols-3\">\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Test Users Found</p>\n                      <p className=\"text-lg font-semibold\">{cleanupResult.testUsersFound}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Test Posts Found</p>\n                      <p className=\"text-lg font-semibold\">{cleanupResult.testPostsFound}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">Duration</p>\n                      <p className=\"text-lg font-semibold\">{cleanupResult.duration}</p>\n                    </div>\n                  </div>\n\n                  {!cleanupResult.isDryRun && (\n                    <div className=\"grid gap-4 md:grid-cols-2\">\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Users Removed</p>\n                        <p className=\"text-lg font-semibold text-red-600\">{cleanupResult.testUsersRemoved}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">Posts Removed</p>\n                        <p className=\"text-lg font-semibold text-red-600\">{cleanupResult.testPostsRemoved}</p>\n                      </div>\n                    </div>\n                  )}\n\n                  {cleanupResult.isDryRun && (\n                    <Alert>\n                      <AlertTriangle className=\"h-4 w-4\" />\n                      <AlertDescription>\n                        This was a dry run. No data was actually removed.\n                      </AlertDescription>\n                    </Alert>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"history\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Operation History</CardTitle>\n              <CardDescription>\n                Recent seed data operations and their results\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <Clock className=\"h-12 w-12 mx-auto mb-4\" />\n                <p>No recent operations to display</p>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      {/* Seed Data Dialog */}\n      <Dialog open={showSeedDialog} onOpenChange={setShowSeedDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Confirm Seed Data Operation</DialogTitle>\n            <DialogDescription>\n              This will initialize the database with {environment} environment data.\n              {environment === 'Production' && (\n                <span className=\"text-red-600 font-semibold\">\n                  {' '}⚠️ This is a production environment!\n                </span>\n              )}\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <Alert>\n              <AlertTriangle className=\"h-4 w-4\" />\n              <AlertDescription>\n                Please confirm that you want to proceed with seeding data in the{' '}\n                <strong>{environment}</strong> environment.\n              </AlertDescription>\n            </Alert>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowSeedDialog(false)}>\n              Cancel\n            </Button>\n            <Button\n              onClick={() => seedData(false, environment === 'Production')}\n              disabled={loading}\n            >\n              {loading && <RefreshCw className=\"mr-2 h-4 w-4 animate-spin\" />}\n              Confirm Seed Data\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Cleanup Dialog */}\n      <Dialog open={showCleanupDialog} onOpenChange={setShowCleanupDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Confirm Test Data Cleanup</DialogTitle>\n            <DialogDescription>\n              This will permanently remove test data from the database.\n              This action cannot be undone.\n            </DialogDescription>\n          </DialogHeader>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowCleanupDialog(false)}>\n              Cancel\n            </Button>\n            <Button\n              variant=\"destructive\"\n              onClick={() => cleanTestData(false)}\n              disabled={loading}\n            >\n              {loading && <RefreshCw className=\"mr-2 h-4 w-4 animate-spin\" />}\n              Clean Test Data\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default SeedDataManagement;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/admin/SystemSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'VALIDATION_RULES' is defined but never used. Allowed unused vars must match /^_/u.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'showUnsavedWarning' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":61,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setShowUnsavedWarning' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":61,"column":30,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":51},{"ruleId":"no-alert","severity":1,"message":"Unexpected confirm.","line":136,"column":9,"nodeType":"CallExpression","messageId":"unexpected","endLine":136,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":200,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5435,5438],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5435,5438],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":481,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":481,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15856,15859],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15856,15859],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":493,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":493,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16172,16205],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":499,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":499,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16361,16364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16361,16364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":778,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":778,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27884,27887],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27884,27887],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1058,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1058,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[39563,39566],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[39563,39566],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1368,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1368,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[52545,52548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[52545,52548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1738,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1738,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[67835,67838],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[67835,67838],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":2114,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":2114,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[83570,83573],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[83570,83573],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * SystemSettings - 系统设置页面\n * 提供全面的系统配置管理界面\n */\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Helmet } from '@/components/common/DocumentHead';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Button } from '@/components/ui/Button';\nimport { Input, Textarea } from '@/components/ui/Input';\nimport { cn } from '@/utils/cn';\nimport {\n  Settings,\n  Save,\n  Upload,\n  Download,\n  RotateCcw,\n  Search,\n  AlertTriangle,\n  CheckCircle,\n  Globe,\n  FileText,\n  Shield,\n  Mail,\n  Zap,\n  Palette,\n  X,\n} from 'lucide-react';\nimport {\n  SystemSettings as ISystemSettings,\n  DEFAULT_SETTINGS,\n  SettingsState,\n  SettingsValidationError,\n  VALIDATION_RULES,\n} from '@/types/settings';\n\n// 设置分类标签页配置\nconst SETTINGS_TABS = [\n  { id: 'general', label: '常规设置', icon: Globe },\n  { id: 'content', label: '内容设置', icon: FileText },\n  { id: 'security', label: '用户与安全', icon: Shield },\n  { id: 'email', label: '邮件设置', icon: Mail },\n  { id: 'performance', label: '性能与缓存', icon: Zap },\n  { id: 'appearance', label: '外观设置', icon: Palette },\n];\n\nexport const SystemSettings: React.FC = () => {\n  // 状态管理\n  const [settingsState, setSettingsState] = useState<SettingsState>({\n    settings: DEFAULT_SETTINGS,\n    loading: true,\n    saving: false,\n    isDirty: false,\n    errors: [],\n    lastSaved: null,\n    autoSaveEnabled: true,\n  });\n\n  const [activeTab, setActiveTab] = useState('general');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showUnsavedWarning, setShowUnsavedWarning] = useState(false);\n\n  // 加载设置\n  const loadSettings = useCallback(async () => {\n    try {\n      setSettingsState(prev => ({ ...prev, loading: true }));\n      \n      // 这里应该调用实际的API\n      // const response = await settingsApi.getSettings();\n      // const settings = response.data;\n      \n      // 模拟API调用延迟\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // 使用默认设置作为模拟数据\n      setSettingsState(prev => ({\n        ...prev,\n        settings: DEFAULT_SETTINGS,\n        loading: false,\n        isDirty: false,\n        lastSaved: new Date(),\n      }));\n    } catch (error) {\n      console.error('Failed to load settings:', error);\n      setSettingsState(prev => ({\n        ...prev,\n        loading: false,\n        errors: [{ field: 'general', message: '设置加载失败' }],\n      }));\n    }\n  }, []);\n\n  // 保存设置\n  const saveSettings = useCallback(async () => {\n    try {\n      setSettingsState(prev => ({ ...prev, saving: true, errors: [] }));\n      \n      // 验证设置\n      const validationErrors = validateSettings(settingsState.settings);\n      if (validationErrors.length > 0) {\n        setSettingsState(prev => ({\n          ...prev,\n          saving: false,\n          errors: validationErrors,\n        }));\n        return;\n      }\n\n      // 这里应该调用实际的API\n      // await settingsApi.updateSettings(settingsState.settings);\n      \n      // 模拟API调用延迟\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      setSettingsState(prev => ({\n        ...prev,\n        saving: false,\n        isDirty: false,\n        lastSaved: new Date(),\n      }));\n\n      // 显示成功消息\n      showSuccessMessage('设置已成功保存');\n    } catch (error) {\n      console.error('Failed to save settings:', error);\n      setSettingsState(prev => ({\n        ...prev,\n        saving: false,\n        errors: [{ field: 'general', message: '设置保存失败' }],\n      }));\n    }\n  }, [settingsState.settings]);\n\n  // 重置设置\n  const resetSettings = useCallback(() => {\n    if (window.confirm('确定要重置所有设置为默认值吗？此操作不可撤销。')) {\n      setSettingsState(prev => ({\n        ...prev,\n        settings: DEFAULT_SETTINGS,\n        isDirty: true,\n        errors: [],\n      }));\n    }\n  }, []);\n\n  // 导出配置\n  const exportSettings = useCallback(() => {\n    const dataStr = JSON.stringify(settingsState.settings, null, 2);\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\n    const url = URL.createObjectURL(dataBlob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `maple-blog-settings-${new Date().toISOString().split('T')[0]}.json`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }, [settingsState.settings]);\n\n  // 导入配置\n  const importSettings = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const importedSettings = JSON.parse(e.target?.result as string);\n        \n        // 基本验证导入的设置结构\n        if (validateImportedSettings(importedSettings)) {\n          setSettingsState(prev => ({\n            ...prev,\n            settings: { ...DEFAULT_SETTINGS, ...importedSettings },\n            isDirty: true,\n            errors: [],\n          }));\n          showSuccessMessage('配置导入成功');\n        } else {\n          throw new Error('Invalid settings format');\n        }\n      } catch (error) {\n        console.error('Failed to import settings:', error);\n        setSettingsState(prev => ({\n          ...prev,\n          errors: [{ field: 'general', message: '配置文件格式无效' }],\n        }));\n      }\n    };\n    reader.readAsText(file);\n    \n    // 重置文件输入\n    event.target.value = '';\n  }, []);\n\n  // 更新设置字段\n  const updateSettings = useCallback(<T extends keyof ISystemSettings>(\n    category: T,\n    field: keyof ISystemSettings[T],\n    value: any\n  ) => {\n    setSettingsState(prev => ({\n      ...prev,\n      settings: {\n        ...prev.settings,\n        [category]: {\n          ...prev.settings[category],\n          [field]: value,\n        },\n      },\n      isDirty: true,\n      errors: prev.errors.filter(error => error.field !== `${category}.${String(field)}`),\n    }));\n  }, []);\n\n  // 自动保存功能\n  useEffect(() => {\n    if (!settingsState.autoSaveEnabled || !settingsState.isDirty) return;\n\n    const autoSaveTimer = setTimeout(() => {\n      saveSettings();\n    }, 5000); // 5秒后自动保存\n\n    return () => clearTimeout(autoSaveTimer);\n  }, [settingsState.isDirty, settingsState.autoSaveEnabled, saveSettings]);\n\n  // 页面离开警告\n  useEffect(() => {\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\n      if (settingsState.isDirty) {\n        e.preventDefault();\n        e.returnValue = '';\n      }\n    };\n\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => window.removeEventListener('beforeunload', handleBeforeUnload);\n  }, [settingsState.isDirty]);\n\n  // 初始化加载\n  useEffect(() => {\n    loadSettings();\n  }, [loadSettings]);\n\n  // 过滤标签页\n  const filteredTabs = SETTINGS_TABS.filter(tab =>\n    searchQuery === '' || \n    tab.label.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  if (settingsState.loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600 dark:text-gray-400\">正在加载设置...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>系统设置 - Maple Blog</title>\n        <meta name=\"description\" content=\"系统配置和参数设置管理。\" />\n        <meta name=\"robots\" content=\"noindex, nofollow\" />\n      </Helmet>\n\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-950\">\n        <div className=\"container-responsive py-8\">\n          <div className=\"max-w-7xl mx-auto\">\n            {/* 页面头部 */}\n            <div className=\"mb-8\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-2 flex items-center\">\n                    <Settings className=\"w-8 h-8 mr-3 text-blue-600 dark:text-blue-400\" />\n                    系统设置\n                  </h1>\n                  <p className=\"text-lg text-gray-600 dark:text-gray-400\">\n                    管理网站的各项配置参数\n                  </p>\n                </div>\n\n                {/* 操作按钮 */}\n                <div className=\"flex items-center space-x-3\">\n                  {/* 搜索框 */}\n                  <div className=\"relative\">\n                    <Input\n                      type=\"text\"\n                      placeholder=\"搜索设置...\"\n                      value={searchQuery}\n                      onChange={(e) => setSearchQuery(e.target.value)}\n                      leftIcon={<Search className=\"w-4 h-4\" />}\n                      className=\"w-64\"\n                    />\n                  </div>\n\n                  {/* 导入配置 */}\n                  <label className=\"cursor-pointer\">\n                    <input\n                      type=\"file\"\n                      accept=\".json\"\n                      onChange={importSettings}\n                      className=\"hidden\"\n                    />\n                    <Button variant=\"outline\" size=\"sm\" as=\"span\">\n                      <Upload className=\"w-4 h-4 mr-2\" />\n                      导入\n                    </Button>\n                  </label>\n\n                  {/* 导出配置 */}\n                  <Button variant=\"outline\" size=\"sm\" onClick={exportSettings}>\n                    <Download className=\"w-4 h-4 mr-2\" />\n                    导出\n                  </Button>\n\n                  {/* 重置设置 */}\n                  <Button variant=\"outline\" size=\"sm\" onClick={resetSettings}>\n                    <RotateCcw className=\"w-4 h-4 mr-2\" />\n                    重置\n                  </Button>\n\n                  {/* 保存按钮 */}\n                  <Button\n                    onClick={saveSettings}\n                    disabled={!settingsState.isDirty || settingsState.saving}\n                    loading={settingsState.saving}\n                    className=\"min-w-[100px]\"\n                  >\n                    <Save className=\"w-4 h-4 mr-2\" />\n                    {settingsState.saving ? '保存中...' : '保存更改'}\n                  </Button>\n                </div>\n              </div>\n\n              {/* 状态指示 */}\n              {settingsState.isDirty && (\n                <div className=\"mt-4 flex items-center text-orange-600 dark:text-orange-400\">\n                  <AlertTriangle className=\"w-4 h-4 mr-2\" />\n                  <span className=\"text-sm\">您有未保存的更改</span>\n                </div>\n              )}\n\n              {settingsState.lastSaved && !settingsState.isDirty && (\n                <div className=\"mt-4 flex items-center text-green-600 dark:text-green-400\">\n                  <CheckCircle className=\"w-4 h-4 mr-2\" />\n                  <span className=\"text-sm\">\n                    最后保存时间: {settingsState.lastSaved.toLocaleString()}\n                  </span>\n                </div>\n              )}\n\n              {/* 错误信息 */}\n              {settingsState.errors.length > 0 && (\n                <div className=\"mt-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\">\n                  <div className=\"flex items-start\">\n                    <AlertTriangle className=\"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0\" />\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-sm font-medium text-red-800 dark:text-red-200 mb-2\">\n                        配置错误\n                      </h3>\n                      <ul className=\"text-sm text-red-700 dark:text-red-300 space-y-1\">\n                        {settingsState.errors.map((error, index) => (\n                          <li key={index}>{error.message}</li>\n                        ))}\n                      </ul>\n                    </div>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => setSettingsState(prev => ({ ...prev, errors: [] }))}\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* 设置标签页 */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-lg\">\n              <Tabs value={activeTab} onValueChange={setActiveTab}>\n                {/* 标签页列表 */}\n                <div className=\"border-b border-gray-200 dark:border-gray-700\">\n                  <TabsList className=\"w-full justify-start p-0 h-auto bg-transparent\">\n                    <div className=\"flex overflow-x-auto\">\n                      {filteredTabs.map((tab) => {\n                        const Icon = tab.icon;\n                        return (\n                          <TabsTrigger\n                            key={tab.id}\n                            value={tab.id}\n                            className=\"flex items-center space-x-2 px-6 py-4 border-b-2 border-transparent data-[state=active]:border-blue-600 data-[state=active]:text-blue-600\"\n                          >\n                            <Icon className=\"w-4 h-4\" />\n                            <span>{tab.label}</span>\n                          </TabsTrigger>\n                        );\n                      })}\n                    </div>\n                  </TabsList>\n                </div>\n\n                {/* 标签页内容 */}\n                <div className=\"p-8\">\n                  {/* 这里将渲染各个设置分类的内容组件 */}\n                  <TabsContent value=\"general\" className=\"mt-0\">\n                    <GeneralSettingsTab\n                      settings={settingsState.settings.general}\n                      onUpdate={(field, value) => updateSettings('general', field, value)}\n                    />\n                  </TabsContent>\n\n                  <TabsContent value=\"content\" className=\"mt-0\">\n                    <ContentSettingsTab\n                      settings={settingsState.settings.content}\n                      onUpdate={(field, value) => updateSettings('content', field, value)}\n                    />\n                  </TabsContent>\n\n                  <TabsContent value=\"security\" className=\"mt-0\">\n                    <SecuritySettingsTab\n                      settings={settingsState.settings.security}\n                      onUpdate={(field, value) => updateSettings('security', field, value)}\n                    />\n                  </TabsContent>\n\n                  <TabsContent value=\"email\" className=\"mt-0\">\n                    <EmailSettingsTab\n                      settings={settingsState.settings.email}\n                      onUpdate={(field, value) => updateSettings('email', field, value)}\n                    />\n                  </TabsContent>\n\n                  <TabsContent value=\"performance\" className=\"mt-0\">\n                    <PerformanceSettingsTab\n                      settings={settingsState.settings.performance}\n                      onUpdate={(field, value) => updateSettings('performance', field, value)}\n                    />\n                  </TabsContent>\n\n                  <TabsContent value=\"appearance\" className=\"mt-0\">\n                    <AppearanceSettingsTab\n                      settings={settingsState.settings.appearance}\n                      onUpdate={(field, value) => updateSettings('appearance', field, value)}\n                    />\n                  </TabsContent>\n                </div>\n              </Tabs>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\n// 辅助函数\nconst validateSettings = (settings: ISystemSettings): SettingsValidationError[] => {\n  const errors: SettingsValidationError[] = [];\n\n  // 这里实现详细的验证逻辑\n  // 根据 VALIDATION_RULES 进行验证\n\n  if (!settings.general.siteTitle) {\n    errors.push({ field: 'general.siteTitle', message: '站点标题不能为空' });\n  }\n\n  if (settings.general.contactEmail && !isValidEmail(settings.general.contactEmail)) {\n    errors.push({ field: 'general.contactEmail', message: '邮箱格式不正确' });\n  }\n\n  // 添加更多验证规则...\n\n  return errors;\n};\n\nconst validateImportedSettings = (settings: any): boolean => {\n  // 验证导入的设置格式是否正确\n  return typeof settings === 'object' && settings !== null;\n};\n\nconst isValidEmail = (email: string): boolean => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n};\n\nconst showSuccessMessage = (message: string) => {\n  // 这里可以集成 toast 通知组件\n  console.log('Success:', message);\n};\n\n// 常规设置标签页组件\nconst GeneralSettingsTab: React.FC<{\n  settings: ISystemSettings['general'];\n  onUpdate: (field: keyof ISystemSettings['general'], value: any) => void;\n}> = ({ settings, onUpdate }) => {\n  const [logoPreview, setLogoPreview] = useState<string>('');\n  const [faviconPreview, setFaviconPreview] = useState<string>('');\n\n  const handleFileUpload = (field: 'logo' | 'favicon', file: File) => {\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const result = e.target?.result as string;\n      onUpdate(field, result);\n      if (field === 'logo') setLogoPreview(result);\n      if (field === 'favicon') setFaviconPreview(result);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleKeywordChange = (keywords: string) => {\n    const keywordArray = keywords.split(',').map(k => k.trim()).filter(k => k);\n    onUpdate('keywords', keywordArray);\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">常规设置</h2>\n        <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\n          配置网站的基本信息和联系方式。\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        {/* 网站信息 */}\n        <div className=\"space-y-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2\">\n            网站信息\n          </h3>\n\n          <Input\n            label=\"网站标题\"\n            value={settings.siteTitle}\n            onChange={(e) => onUpdate('siteTitle', e.target.value)}\n            placeholder=\"输入网站标题\"\n            required\n            helperText=\"显示在浏览器标签页和搜索结果中\"\n          />\n\n          <Textarea\n            label=\"网站描述\"\n            value={settings.siteDescription}\n            onChange={(e) => onUpdate('siteDescription', e.target.value)}\n            placeholder=\"输入网站描述\"\n            rows={3}\n            helperText=\"用于SEO和社交分享的网站描述\"\n          />\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              关键词\n            </label>\n            <Input\n              value={settings.keywords.join(', ')}\n              onChange={(e) => handleKeywordChange(e.target.value)}\n              placeholder=\"输入关键词，用逗号分隔\"\n              helperText=\"用于SEO的网站关键词\"\n            />\n          </div>\n\n          {/* 语言和时区 */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                默认语言\n              </label>\n              <select\n                value={settings.language}\n                onChange={(e) => onUpdate('language', e.target.value)}\n                className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"zh-CN\">中文（简体）</option>\n                <option value=\"zh-TW\">中文（繁體）</option>\n                <option value=\"en\">English</option>\n                <option value=\"ja\">日本語</option>\n                <option value=\"ko\">한국어</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                时区\n              </label>\n              <select\n                value={settings.timezone}\n                onChange={(e) => onUpdate('timezone', e.target.value)}\n                className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"UTC\">UTC</option>\n                <option value=\"Asia/Shanghai\">亚洲/上海</option>\n                <option value=\"Asia/Tokyo\">亚洲/东京</option>\n                <option value=\"America/New_York\">美洲/纽约</option>\n                <option value=\"Europe/London\">欧洲/伦敦</option>\n              </select>\n            </div>\n          </div>\n\n          {/* 日期时间格式 */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                日期格式\n              </label>\n              <select\n                value={settings.dateFormat}\n                onChange={(e) => onUpdate('dateFormat', e.target.value)}\n                className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"YYYY-MM-DD\">2024-01-01</option>\n                <option value=\"MM/DD/YYYY\">01/01/2024</option>\n                <option value=\"DD/MM/YYYY\">01/01/2024</option>\n                <option value=\"YYYY年MM月DD日\">2024年01月01日</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                时间格式\n              </label>\n              <select\n                value={settings.timeFormat}\n                onChange={(e) => onUpdate('timeFormat', e.target.value)}\n                className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"HH:mm\">24小时制</option>\n                <option value=\"hh:mm A\">12小时制</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* 品牌资源和联系信息 */}\n        <div className=\"space-y-6\">\n          {/* 品牌资源 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              品牌资源\n            </h3>\n\n            {/* Logo 上传 */}\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  网站Logo\n                </label>\n                <div className=\"flex items-center space-x-4\">\n                  <div className=\"flex-shrink-0\">\n                    {(logoPreview || settings.logo) ? (\n                      <img\n                        src={logoPreview || settings.logo}\n                        alt=\"Logo预览\"\n                        className=\"w-16 h-16 object-contain border border-gray-200 dark:border-gray-600 rounded\"\n                      />\n                    ) : (\n                      <div className=\"w-16 h-16 bg-gray-100 dark:bg-gray-700 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded flex items-center justify-center\">\n                        <span className=\"text-gray-400 text-xs\">Logo</span>\n                      </div>\n                    )}\n                  </div>\n                  <div>\n                    <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={(e) => {\n                        const file = e.target.files?.[0];\n                        if (file) handleFileUpload('logo', file);\n                      }}\n                      className=\"hidden\"\n                      id=\"logo-upload\"\n                    />\n                    <label\n                      htmlFor=\"logo-upload\"\n                      className=\"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer\"\n                    >\n                      <Upload className=\"w-4 h-4 mr-2\" />\n                      上传Logo\n                    </label>\n                  </div>\n                </div>\n                <p className=\"text-sm text-gray-500 mt-2\">\n                  推荐尺寸: 200x50px，支持PNG、JPG格式\n                </p>\n              </div>\n\n              {/* Favicon 上传 */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  网站图标 (Favicon)\n                </label>\n                <div className=\"flex items-center space-x-4\">\n                  <div className=\"flex-shrink-0\">\n                    {(faviconPreview || settings.favicon) ? (\n                      <img\n                        src={faviconPreview || settings.favicon}\n                        alt=\"Favicon预览\"\n                        className=\"w-8 h-8 object-contain border border-gray-200 dark:border-gray-600 rounded\"\n                      />\n                    ) : (\n                      <div className=\"w-8 h-8 bg-gray-100 dark:bg-gray-700 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded flex items-center justify-center\">\n                        <span className=\"text-gray-400 text-xs\">ICO</span>\n                      </div>\n                    )}\n                  </div>\n                  <div>\n                    <input\n                      type=\"file\"\n                      accept=\"image/x-icon,image/png\"\n                      onChange={(e) => {\n                        const file = e.target.files?.[0];\n                        if (file) handleFileUpload('favicon', file);\n                      }}\n                      className=\"hidden\"\n                      id=\"favicon-upload\"\n                    />\n                    <label\n                      htmlFor=\"favicon-upload\"\n                      className=\"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer\"\n                    >\n                      <Upload className=\"w-4 h-4 mr-2\" />\n                      上传图标\n                    </label>\n                  </div>\n                </div>\n                <p className=\"text-sm text-gray-500 mt-2\">\n                  推荐尺寸: 32x32px，支持ICO、PNG格式\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* 联系信息 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              联系信息\n            </h3>\n\n            <div className=\"space-y-4\">\n              <Input\n                label=\"联系邮箱\"\n                type=\"email\"\n                value={settings.contactEmail}\n                onChange={(e) => onUpdate('contactEmail', e.target.value)}\n                placeholder=\"contact@example.com\"\n                helperText=\"用于接收用户咨询和系统通知\"\n              />\n\n              <Input\n                label=\"联系电话\"\n                value={settings.contactPhone}\n                onChange={(e) => onUpdate('contactPhone', e.target.value)}\n                placeholder=\"+86 138 0000 0000\"\n                helperText=\"可选，用于紧急联系\"\n              />\n\n              <Textarea\n                label=\"联系地址\"\n                value={settings.address}\n                onChange={(e) => onUpdate('address', e.target.value)}\n                placeholder=\"输入完整地址\"\n                rows={3}\n                helperText=\"可选，用于显示在联系页面\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ContentSettingsTab: React.FC<{\n  settings: ISystemSettings['content'];\n  onUpdate: (field: keyof ISystemSettings['content'], value: any) => void;\n}> = ({ settings, onUpdate }) => {\n  const handleImageFormatsChange = (formats: string) => {\n    const formatArray = formats.split(',').map(f => f.trim().toLowerCase()).filter(f => f);\n    onUpdate('allowedImageFormats', formatArray);\n  };\n\n  const toggleFeature = (field: keyof ISystemSettings['content'], currentValue: boolean) => {\n    onUpdate(field, !currentValue);\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">内容设置</h2>\n        <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\n          配置文章发布、评论审核和内容管理相关设置。\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        {/* 文章设置 */}\n        <div className=\"space-y-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2\">\n            文章设置\n          </h3>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                每页文章数\n              </label>\n              <Input\n                type=\"number\"\n                value={settings.postsPerPage.toString()}\n                onChange={(e) => onUpdate('postsPerPage', parseInt(e.target.value) || 10)}\n                min=\"1\"\n                max=\"100\"\n                helperText=\"首页和分类页显示的文章数量\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                默认文章状态\n              </label>\n              <select\n                value={settings.defaultPostStatus}\n                onChange={(e) => onUpdate('defaultPostStatus', e.target.value)}\n                className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"draft\">草稿</option>\n                <option value=\"published\">发布</option>\n              </select>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              编辑器类型\n            </label>\n            <select\n              value={settings.editorType}\n              onChange={(e) => onUpdate('editorType', e.target.value)}\n              className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n            >\n              <option value=\"markdown\">Markdown 编辑器</option>\n              <option value=\"wysiwyg\">富文本编辑器</option>\n              <option value=\"both\">两者都支持</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              自动归档天数\n            </label>\n            <Input\n              type=\"number\"\n              value={settings.autoArchiveDays.toString()}\n              onChange={(e) => onUpdate('autoArchiveDays', parseInt(e.target.value) || 365)}\n              min=\"1\"\n              max=\"3650\"\n              helperText=\"超过指定天数的文章自动归档\"\n            />\n          </div>\n\n          {/* 功能开关 */}\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                  启用分类功能\n                </label>\n                <p className=\"text-sm text-gray-500\">允许为文章设置分类</p>\n              </div>\n              <button\n                type=\"button\"\n                onClick={() => toggleFeature('enableCategories', settings.enableCategories)}\n                className={cn(\n                  'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                  settings.enableCategories ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                )}\n              >\n                <span\n                  className={cn(\n                    'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                    settings.enableCategories ? 'translate-x-6' : 'translate-x-1'\n                  )}\n                />\n              </button>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                  启用标签功能\n                </label>\n                <p className=\"text-sm text-gray-500\">允许为文章添加标签</p>\n              </div>\n              <button\n                type=\"button\"\n                onClick={() => toggleFeature('enableTags', settings.enableTags)}\n                className={cn(\n                  'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                  settings.enableTags ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                )}\n              >\n                <span\n                  className={cn(\n                    'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                    settings.enableTags ? 'translate-x-6' : 'translate-x-1'\n                  )}\n                />\n              </button>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                  启用社交分享\n                </label>\n                <p className=\"text-sm text-gray-500\">在文章页面显示分享按钮</p>\n              </div>\n              <button\n                type=\"button\"\n                onClick={() => toggleFeature('enableSocialSharing', settings.enableSocialSharing)}\n                className={cn(\n                  'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                  settings.enableSocialSharing ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                )}\n              >\n                <span\n                  className={cn(\n                    'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                    settings.enableSocialSharing ? 'translate-x-6' : 'translate-x-1'\n                  )}\n                />\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* 评论和媒体设置 */}\n        <div className=\"space-y-6\">\n          {/* 评论设置 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              评论设置\n            </h3>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                评论审核模式\n              </label>\n              <select\n                value={settings.commentModeration}\n                onChange={(e) => onUpdate('commentModeration', e.target.value)}\n                className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"auto\">自动通过</option>\n                <option value=\"manual\">人工审核</option>\n                <option value=\"disabled\">禁用评论</option>\n              </select>\n              <p className=\"text-sm text-gray-500 mt-1\">\n                {settings.commentModeration === 'auto' && '评论会立即显示在网站上'}\n                {settings.commentModeration === 'manual' && '评论需要管理员审核后才显示'}\n                {settings.commentModeration === 'disabled' && '完全关闭评论功能'}\n              </p>\n            </div>\n          </div>\n\n          {/* 媒体设置 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              媒体设置\n            </h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  允许的图片格式\n                </label>\n                <Input\n                  value={settings.allowedImageFormats.join(', ')}\n                  onChange={(e) => handleImageFormatsChange(e.target.value)}\n                  placeholder=\"jpg, jpeg, png, gif, webp\"\n                  helperText=\"支持的图片文件格式，用逗号分隔\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  最大图片大小 (MB)\n                </label>\n                <Input\n                  type=\"number\"\n                  value={settings.maxImageSize.toString()}\n                  onChange={(e) => onUpdate('maxImageSize', parseInt(e.target.value) || 5)}\n                  min=\"1\"\n                  max=\"100\"\n                  step=\"0.1\"\n                  helperText=\"单个图片文件的最大允许大小\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* SEO设置 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              SEO设置\n            </h3>\n\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                  启用SEO优化\n                </label>\n                <p className=\"text-sm text-gray-500\">自动生成meta标签和结构化数据</p>\n              </div>\n              <button\n                type=\"button\"\n                onClick={() => toggleFeature('enableSEO', settings.enableSEO)}\n                className={cn(\n                  'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                  settings.enableSEO ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                )}\n              >\n                <span\n                  className={cn(\n                    'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                    settings.enableSEO ? 'translate-x-6' : 'translate-x-1'\n                  )}\n                />\n              </button>\n            </div>\n          </div>\n\n          {/* 预览区域 */}\n          <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n            <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-2\">设置预览</h4>\n            <div className=\"text-sm text-gray-600 dark:text-gray-400 space-y-1\">\n              <p>• 每页显示 {settings.postsPerPage} 篇文章</p>\n              <p>• 评论模式: {\n                settings.commentModeration === 'auto' ? '自动通过' :\n                settings.commentModeration === 'manual' ? '人工审核' : '已禁用'\n              }</p>\n              <p>• 支持格式: {settings.allowedImageFormats.join(', ')}</p>\n              <p>• 最大图片: {settings.maxImageSize}MB</p>\n              <p>• SEO优化: {settings.enableSEO ? '已启用' : '已禁用'}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst SecuritySettingsTab: React.FC<{\n  settings: ISystemSettings['security'];\n  onUpdate: (field: keyof ISystemSettings['security'], value: any) => void;\n}> = ({ settings, onUpdate }) => {\n  const toggleFeature = (field: keyof ISystemSettings['security'], currentValue: boolean) => {\n    onUpdate(field, !currentValue);\n  };\n\n  const getPasswordStrengthDescription = () => {\n    const requirements = [];\n    if (settings.passwordMinLength >= 8) requirements.push(`至少${settings.passwordMinLength}位`);\n    if (settings.requireNumbers) requirements.push('包含数字');\n    if (settings.requireUppercase) requirements.push('包含大写字母');\n    if (settings.requireSpecialChars) requirements.push('包含特殊字符');\n    return requirements.length > 0 ? requirements.join('、') : '无要求';\n  };\n\n  const getSecurityLevel = () => {\n    let score = 0;\n    if (settings.passwordMinLength >= 8) score += 1;\n    if (settings.passwordMinLength >= 12) score += 1;\n    if (settings.requireNumbers) score += 1;\n    if (settings.requireUppercase) score += 1;\n    if (settings.requireSpecialChars) score += 1;\n    if (settings.enable2FA) score += 2;\n    if (settings.maxLoginAttempts <= 3) score += 1;\n\n    if (score >= 6) return { level: '高', color: 'text-green-600', bgColor: 'bg-green-100' };\n    if (score >= 4) return { level: '中等', color: 'text-yellow-600', bgColor: 'bg-yellow-100' };\n    return { level: '低', color: 'text-red-600', bgColor: 'bg-red-100' };\n  };\n\n  const securityLevel = getSecurityLevel();\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">用户与安全设置</h2>\n        <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\n          配置用户注册、密码策略和账户安全相关设置。\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        {/* 用户注册设置 */}\n        <div className=\"space-y-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2\">\n            用户注册设置\n          </h3>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              用户注册模式\n            </label>\n            <select\n              value={settings.userRegistration}\n              onChange={(e) => onUpdate('userRegistration', e.target.value)}\n              className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n            >\n              <option value=\"open\">开放注册</option>\n              <option value=\"invite\">邀请注册</option>\n              <option value=\"disabled\">禁止注册</option>\n            </select>\n            <p className=\"text-sm text-gray-500 mt-1\">\n              {settings.userRegistration === 'open' && '任何人都可以注册账户'}\n              {settings.userRegistration === 'invite' && '需要邀请码才能注册'}\n              {settings.userRegistration === 'disabled' && '完全关闭用户注册'}\n            </p>\n          </div>\n\n          {/* 密码策略 */}\n          <div>\n            <h4 className=\"text-md font-medium text-gray-900 dark:text-white mb-4\">密码策略</h4>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  最小密码长度\n                </label>\n                <Input\n                  type=\"number\"\n                  value={settings.passwordMinLength.toString()}\n                  onChange={(e) => onUpdate('passwordMinLength', parseInt(e.target.value) || 8)}\n                  min=\"6\"\n                  max=\"64\"\n                  helperText=\"推荐至少8位以上\"\n                />\n              </div>\n\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                      要求包含数字\n                    </label>\n                    <p className=\"text-sm text-gray-500\">密码必须包含至少一个数字</p>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => toggleFeature('requireNumbers', settings.requireNumbers)}\n                    className={cn(\n                      'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                      settings.requireNumbers ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                    )}\n                  >\n                    <span\n                      className={cn(\n                        'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                        settings.requireNumbers ? 'translate-x-6' : 'translate-x-1'\n                      )}\n                    />\n                  </button>\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                      要求包含大写字母\n                    </label>\n                    <p className=\"text-sm text-gray-500\">密码必须包含至少一个大写字母</p>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => toggleFeature('requireUppercase', settings.requireUppercase)}\n                    className={cn(\n                      'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                      settings.requireUppercase ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                    )}\n                  >\n                    <span\n                      className={cn(\n                        'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                        settings.requireUppercase ? 'translate-x-6' : 'translate-x-1'\n                      )}\n                    />\n                  </button>\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                      要求包含特殊字符\n                    </label>\n                    <p className=\"text-sm text-gray-500\">密码必须包含符号 (!@#$%^&*)</p>\n                  </div>\n                  <button\n                    type=\"button\"\n                    onClick={() => toggleFeature('requireSpecialChars', settings.requireSpecialChars)}\n                    className={cn(\n                      'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                      settings.requireSpecialChars ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                    )}\n                  >\n                    <span\n                      className={cn(\n                        'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                        settings.requireSpecialChars ? 'translate-x-6' : 'translate-x-1'\n                      )}\n                    />\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* 密码强度预览 */}\n            <div className=\"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                <span className=\"font-medium\">当前密码要求:</span> {getPasswordStrengthDescription()}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* 会话和安全设置 */}\n        <div className=\"space-y-6\">\n          {/* 会话管理 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              会话管理\n            </h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  会话超时 (分钟)\n                </label>\n                <Input\n                  type=\"number\"\n                  value={settings.sessionTimeout.toString()}\n                  onChange={(e) => onUpdate('sessionTimeout', parseInt(e.target.value) || 30)}\n                  min=\"5\"\n                  max=\"1440\"\n                  helperText=\"用户无活动后自动登出的时间\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    启用双因子认证\n                  </label>\n                  <p className=\"text-sm text-gray-500\">提供额外的账户安全保护</p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => toggleFeature('enable2FA', settings.enable2FA)}\n                  className={cn(\n                    'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                    settings.enable2FA ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                  )}\n                >\n                  <span\n                    className={cn(\n                      'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                      settings.enable2FA ? 'translate-x-6' : 'translate-x-1'\n                    )}\n                  />\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* 登录安全 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              登录安全\n            </h3>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  最大失败尝试次数\n                </label>\n                <Input\n                  type=\"number\"\n                  value={settings.maxLoginAttempts.toString()}\n                  onChange={(e) => onUpdate('maxLoginAttempts', parseInt(e.target.value) || 5)}\n                  min=\"1\"\n                  max=\"20\"\n                  helperText=\"达到次数后账户将被锁定\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  锁定时长 (分钟)\n                </label>\n                <Input\n                  type=\"number\"\n                  value={settings.lockoutDuration.toString()}\n                  onChange={(e) => onUpdate('lockoutDuration', parseInt(e.target.value) || 15)}\n                  min=\"1\"\n                  max=\"1440\"\n                  helperText=\"账户锁定的持续时间\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* 法律页面链接 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              法律文档\n            </h3>\n\n            <div className=\"space-y-4\">\n              <Input\n                label=\"隐私政策链接\"\n                value={settings.privacyPolicyUrl}\n                onChange={(e) => onUpdate('privacyPolicyUrl', e.target.value)}\n                placeholder=\"https://example.com/privacy\"\n                helperText=\"隐私政策页面的URL\"\n              />\n\n              <Input\n                label=\"服务条款链接\"\n                value={settings.termsOfServiceUrl}\n                onChange={(e) => onUpdate('termsOfServiceUrl', e.target.value)}\n                placeholder=\"https://example.com/terms\"\n                helperText=\"服务条款页面的URL\"\n              />\n            </div>\n          </div>\n\n          {/* 安全级别指示 */}\n          <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h4 className=\"text-sm font-medium text-gray-900 dark:text-white\">安全级别</h4>\n              <span className={cn(\n                'px-2 py-1 rounded text-xs font-medium',\n                securityLevel.color,\n                securityLevel.bgColor,\n                'dark:text-white dark:bg-opacity-20'\n              )}>\n                {securityLevel.level}\n              </span>\n            </div>\n            <div className=\"text-sm text-gray-600 dark:text-gray-400 space-y-1\">\n              <p>• 会话超时: {settings.sessionTimeout} 分钟</p>\n              <p>• 最大登录尝试: {settings.maxLoginAttempts} 次</p>\n              <p>• 锁定时长: {settings.lockoutDuration} 分钟</p>\n              <p>• 双因子认证: {settings.enable2FA ? '已启用' : '已禁用'}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst EmailSettingsTab: React.FC<{\n  settings: ISystemSettings['email'];\n  onUpdate: (field: keyof ISystemSettings['email'], value: any) => void;\n}> = ({ settings, onUpdate }) => {\n  const [testEmailSending, setTestEmailSending] = useState(false);\n  const [testEmailResult, setTestEmailResult] = useState<{ success: boolean; message: string } | null>(null);\n  const [showPassword, setShowPassword] = useState(false);\n\n  const toggleFeature = (field: keyof ISystemSettings['email'], currentValue: boolean) => {\n    onUpdate(field, !currentValue);\n  };\n\n  const sendTestEmail = async () => {\n    setTestEmailSending(true);\n    setTestEmailResult(null);\n\n    try {\n      // 模拟测试邮件发送\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      // 这里应该调用实际的API\n      // const result = await emailApi.sendTestEmail(settings);\n      \n      setTestEmailResult({\n        success: true,\n        message: '测试邮件已成功发送到配置的邮箱地址'\n      });\n    } catch (error) {\n      setTestEmailResult({\n        success: false,\n        message: '邮件发送失败，请检查SMTP配置'\n      });\n    } finally {\n      setTestEmailSending(false);\n    }\n  };\n\n  const isEmailConfigured = () => {\n    return settings.smtpServer && settings.smtpUsername && settings.smtpPassword && settings.senderEmail;\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">邮件设置</h2>\n        <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\n          配置SMTP服务器和邮件通知相关设置。\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        {/* SMTP配置 */}\n        <div className=\"space-y-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2\">\n            SMTP配置\n          </h3>\n\n          <div className=\"space-y-4\">\n            <Input\n              label=\"SMTP服务器\"\n              value={settings.smtpServer}\n              onChange={(e) => onUpdate('smtpServer', e.target.value)}\n              placeholder=\"smtp.example.com\"\n              required\n              helperText=\"邮件服务商的SMTP服务器地址\"\n            />\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <Input\n                label=\"SMTP端口\"\n                type=\"number\"\n                value={settings.smtpPort.toString()}\n                onChange={(e) => onUpdate('smtpPort', parseInt(e.target.value) || 587)}\n                placeholder=\"587\"\n                helperText=\"通常为25、465或587\"\n              />\n\n              <div className=\"flex items-center justify-between pt-6\">\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    使用SSL/TLS\n                  </label>\n                  <p className=\"text-sm text-gray-500\">启用安全连接</p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => toggleFeature('smtpSecure', settings.smtpSecure)}\n                  className={cn(\n                    'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                    settings.smtpSecure ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                  )}\n                >\n                  <span\n                    className={cn(\n                      'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                      settings.smtpSecure ? 'translate-x-6' : 'translate-x-1'\n                    )}\n                  />\n                </button>\n              </div>\n            </div>\n\n            <Input\n              label=\"SMTP用户名\"\n              value={settings.smtpUsername}\n              onChange={(e) => onUpdate('smtpUsername', e.target.value)}\n              placeholder=\"username@example.com\"\n              required\n              helperText=\"通常是您的邮箱地址\"\n            />\n\n            <div className=\"relative\">\n              <Input\n                label=\"SMTP密码\"\n                type={showPassword ? 'text' : 'password'}\n                value={settings.smtpPassword}\n                onChange={(e) => onUpdate('smtpPassword', e.target.value)}\n                placeholder=\"输入邮箱密码或应用专用密码\"\n                required\n                helperText=\"建议使用应用专用密码而不是账户密码\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowPassword(!showPassword)}\n                className=\"absolute right-3 top-9 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n              >\n                {showPassword ? (\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L6.111 6.111M14.12 14.12l3.767 3.768M14.12 14.12L6.111 6.111m7.12 8.009a3 3 0 01-4.243-4.243\" />\n                  </svg>\n                ) : (\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                  </svg>\n                )}\n              </button>\n            </div>\n\n            {/* 测试邮件 */}\n            <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n              <div className=\"flex items-start justify-between\">\n                <div>\n                  <h4 className=\"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1\">\n                    测试SMTP配置\n                  </h4>\n                  <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                    发送测试邮件验证配置是否正确\n                  </p>\n                </div>\n                <Button\n                  size=\"sm\"\n                  onClick={sendTestEmail}\n                  disabled={!isEmailConfigured() || testEmailSending}\n                  loading={testEmailSending}\n                  className=\"min-w-[80px]\"\n                >\n                  {testEmailSending ? '发送中...' : '发送测试'}\n                </Button>\n              </div>\n              \n              {testEmailResult && (\n                <div className={cn(\n                  'mt-3 p-2 rounded text-sm',\n                  testEmailResult.success \n                    ? 'bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200'\n                    : 'bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200'\n                )}>\n                  {testEmailResult.message}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* 邮件发送设置 */}\n        <div className=\"space-y-6\">\n          {/* 发送方信息 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              发送方信息\n            </h3>\n\n            <div className=\"space-y-4\">\n              <Input\n                label=\"发送方名称\"\n                value={settings.senderName}\n                onChange={(e) => onUpdate('senderName', e.target.value)}\n                placeholder=\"Maple Blog\"\n                helperText=\"显示在邮件发送方的名称\"\n              />\n\n              <Input\n                label=\"发送方邮箱\"\n                type=\"email\"\n                value={settings.senderEmail}\n                onChange={(e) => onUpdate('senderEmail', e.target.value)}\n                placeholder=\"noreply@example.com\"\n                required\n                helperText=\"用作邮件发送方地址\"\n              />\n            </div>\n          </div>\n\n          {/* 通知设置 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              通知设置\n            </h3>\n\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    新用户注册通知\n                  </label>\n                  <p className=\"text-sm text-gray-500\">有新用户注册时发送邮件</p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => toggleFeature('notifyNewUser', settings.notifyNewUser)}\n                  className={cn(\n                    'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                    settings.notifyNewUser ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                  )}\n                >\n                  <span\n                    className={cn(\n                      'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                      settings.notifyNewUser ? 'translate-x-6' : 'translate-x-1'\n                    )}\n                  />\n                </button>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    新评论通知\n                  </label>\n                  <p className=\"text-sm text-gray-500\">有新评论时发送邮件</p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => toggleFeature('notifyNewComment', settings.notifyNewComment)}\n                  className={cn(\n                    'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                    settings.notifyNewComment ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                  )}\n                >\n                  <span\n                    className={cn(\n                      'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                      settings.notifyNewComment ? 'translate-x-6' : 'translate-x-1'\n                    )}\n                  />\n                </button>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    新文章发布通知\n                  </label>\n                  <p className=\"text-sm text-gray-500\">有新文章发布时发送邮件</p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => toggleFeature('notifyNewPost', settings.notifyNewPost)}\n                  className={cn(\n                    'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                    settings.notifyNewPost ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                  )}\n                >\n                  <span\n                    className={cn(\n                      'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                      settings.notifyNewPost ? 'translate-x-6' : 'translate-x-1'\n                    )}\n                  />\n                </button>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    邮箱验证\n                  </label>\n                  <p className=\"text-sm text-gray-500\">要求用户验证邮箱地址</p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => toggleFeature('emailVerificationRequired', settings.emailVerificationRequired)}\n                  className={cn(\n                    'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                    settings.emailVerificationRequired ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                  )}\n                >\n                  <span\n                    className={cn(\n                      'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                      settings.emailVerificationRequired ? 'translate-x-6' : 'translate-x-1'\n                    )}\n                  />\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* 常用邮件服务商配置示例 */}\n          <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n            <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-3\">常用邮件服务商配置</h4>\n            <div className=\"text-xs text-gray-600 dark:text-gray-400 space-y-2\">\n              <div>\n                <span className=\"font-medium\">Gmail:</span> smtp.gmail.com:587 (TLS)\n              </div>\n              <div>\n                <span className=\"font-medium\">QQ邮箱:</span> smtp.qq.com:587 (TLS)\n              </div>\n              <div>\n                <span className=\"font-medium\">163邮箱:</span> smtp.163.com:25/465\n              </div>\n              <div>\n                <span className=\"font-medium\">Outlook:</span> smtp-mail.outlook.com:587 (TLS)\n              </div>\n            </div>\n          </div>\n\n          {/* 配置状态 */}\n          <div className={cn(\n            'p-4 rounded-lg border',\n            isEmailConfigured()\n              ? 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800'\n              : 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800'\n          )}>\n            <div className=\"flex items-start\">\n              {isEmailConfigured() ? (\n                <CheckCircle className=\"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 mr-3 flex-shrink-0\" />\n              ) : (\n                <AlertTriangle className=\"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-3 flex-shrink-0\" />\n              )}\n              <div>\n                <h4 className={cn(\n                  'text-sm font-medium mb-1',\n                  isEmailConfigured() \n                    ? 'text-green-800 dark:text-green-200'\n                    : 'text-yellow-800 dark:text-yellow-200'\n                )}>\n                  {isEmailConfigured() ? '邮件配置完成' : '邮件配置不完整'}\n                </h4>\n                <p className={cn(\n                  'text-sm',\n                  isEmailConfigured()\n                    ? 'text-green-700 dark:text-green-300'\n                    : 'text-yellow-700 dark:text-yellow-300'\n                )}>\n                  {isEmailConfigured() \n                    ? '系统可以正常发送邮件通知'\n                    : '请完成SMTP服务器和发送方邮箱的配置'\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst PerformanceSettingsTab: React.FC<{\n  settings: ISystemSettings['performance'];\n  onUpdate: (field: keyof ISystemSettings['performance'], value: any) => void;\n}> = ({ settings, onUpdate }) => {\n  const [clearingCache, setClearingCache] = useState(false);\n  const [cacheCleared, setCacheCleared] = useState(false);\n\n  const toggleFeature = (field: keyof ISystemSettings['performance'], currentValue: boolean) => {\n    onUpdate(field, !currentValue);\n  };\n\n  const clearCache = async () => {\n    setClearingCache(true);\n    setCacheCleared(false);\n\n    try {\n      // 模拟清理缓存\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      // 这里应该调用实际的API\n      // await cacheApi.clearAll();\n      \n      setCacheCleared(true);\n      setTimeout(() => setCacheCleared(false), 3000);\n    } catch (error) {\n      console.error('Failed to clear cache:', error);\n    } finally {\n      setClearingCache(false);\n    }\n  };\n\n  const formatCacheExpiration = (seconds: number) => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    if (hours > 0) return `${hours}小时${minutes > 0 ? `${minutes}分钟` : ''}`;\n    return `${minutes}分钟`;\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">性能与缓存设置</h2>\n        <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\n          配置缓存策略、CDN和性能优化相关设置。\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        {/* 缓存设置 */}\n        <div className=\"space-y-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2\">\n            缓存设置\n          </h3>\n\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                启用缓存\n              </label>\n              <p className=\"text-sm text-gray-500\">提高网站访问速度</p>\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => toggleFeature('enableCache', settings.enableCache)}\n              className={cn(\n                'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                settings.enableCache ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n              )}\n            >\n              <span\n                className={cn(\n                  'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                  settings.enableCache ? 'translate-x-6' : 'translate-x-1'\n                )}\n              />\n            </button>\n          </div>\n\n          {settings.enableCache && (\n            <div className=\"space-y-4 pl-4 border-l-2 border-blue-100 dark:border-blue-900\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  缓存类型\n                </label>\n                <select\n                  value={settings.cacheType}\n                  onChange={(e) => onUpdate('cacheType', e.target.value)}\n                  className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"memory\">内存缓存</option>\n                  <option value=\"redis\">Redis缓存</option>\n                  <option value=\"file\">文件缓存</option>\n                </select>\n                <p className=\"text-sm text-gray-500 mt-1\">\n                  {settings.cacheType === 'memory' && '适合单机部署，重启后缓存丢失'}\n                  {settings.cacheType === 'redis' && '适合分布式部署，性能最佳'}\n                  {settings.cacheType === 'file' && '持久化缓存，适合小型网站'}\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  缓存过期时间\n                </label>\n                <div className=\"flex items-center space-x-3\">\n                  <Input\n                    type=\"number\"\n                    value={settings.cacheExpiration.toString()}\n                    onChange={(e) => onUpdate('cacheExpiration', parseInt(e.target.value) || 3600)}\n                    min=\"60\"\n                    max=\"86400\"\n                    className=\"flex-1\"\n                  />\n                  <span className=\"text-sm text-gray-500\">秒</span>\n                </div>\n                <p className=\"text-sm text-gray-500 mt-1\">\n                  当前设置: {formatCacheExpiration(settings.cacheExpiration)}\n                </p>\n              </div>\n\n              {/* 缓存管理 */}\n              <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n                <div className=\"flex items-start justify-between\">\n                  <div>\n                    <h4 className=\"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1\">\n                      缓存管理\n                    </h4>\n                    <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                      清理所有缓存数据，释放内存空间\n                    </p>\n                  </div>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={clearCache}\n                    disabled={clearingCache}\n                    loading={clearingCache}\n                    className=\"min-w-[80px]\"\n                  >\n                    {clearingCache ? '清理中...' : '清理缓存'}\n                  </Button>\n                </div>\n                \n                {cacheCleared && (\n                  <div className=\"mt-3 p-2 rounded text-sm bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200\">\n                    缓存已成功清理\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* 维护模式 */}\n          <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                  维护模式\n                </label>\n                <p className=\"text-sm text-gray-500\">暂停网站访问，显示维护页面</p>\n              </div>\n              <button\n                type=\"button\"\n                onClick={() => toggleFeature('maintenanceMode', settings.maintenanceMode)}\n                className={cn(\n                  'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2',\n                  settings.maintenanceMode ? 'bg-red-600' : 'bg-gray-200 dark:bg-gray-600'\n                )}\n              >\n                <span\n                  className={cn(\n                    'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                    settings.maintenanceMode ? 'translate-x-6' : 'translate-x-1'\n                  )}\n                />\n              </button>\n            </div>\n\n            {settings.maintenanceMode && (\n              <div className=\"pl-4 border-l-2 border-red-100 dark:border-red-900\">\n                <Textarea\n                  label=\"维护信息\"\n                  value={settings.maintenanceMessage}\n                  onChange={(e) => onUpdate('maintenanceMessage', e.target.value)}\n                  placeholder=\"网站正在维护中，请稍后再试...\"\n                  rows={3}\n                  helperText=\"将显示给访问者的维护信息\"\n                />\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* 优化和备份设置 */}\n        <div className=\"space-y-6\">\n          {/* 性能优化 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              性能优化\n            </h3>\n\n            <div className=\"space-y-4\">\n              <Input\n                label=\"CDN地址\"\n                value={settings.cdnUrl}\n                onChange={(e) => onUpdate('cdnUrl', e.target.value)}\n                placeholder=\"https://cdn.example.com\"\n                helperText=\"用于加速静态资源访问的CDN地址\"\n              />\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    启用图片优化\n                  </label>\n                  <p className=\"text-sm text-gray-500\">自动压缩和优化上传的图片</p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => toggleFeature('enableImageOptimization', settings.enableImageOptimization)}\n                  className={cn(\n                    'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                    settings.enableImageOptimization ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                  )}\n                >\n                  <span\n                    className={cn(\n                      'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                      settings.enableImageOptimization ? 'translate-x-6' : 'translate-x-1'\n                    )}\n                  />\n                </button>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    启用Gzip压缩\n                  </label>\n                  <p className=\"text-sm text-gray-500\">压缩响应内容，减少传输大小</p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => toggleFeature('enableGzipCompression', settings.enableGzipCompression)}\n                  className={cn(\n                    'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                    settings.enableGzipCompression ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n                  )}\n                >\n                  <span\n                    className={cn(\n                      'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                      settings.enableGzipCompression ? 'translate-x-6' : 'translate-x-1'\n                    )}\n                  />\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* 备份设置 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              备份设置\n            </h3>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                自动备份频率\n              </label>\n              <select\n                value={settings.backupSchedule}\n                onChange={(e) => onUpdate('backupSchedule', e.target.value)}\n                className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"disabled\">禁用备份</option>\n                <option value=\"daily\">每天备份</option>\n                <option value=\"weekly\">每周备份</option>\n                <option value=\"monthly\">每月备份</option>\n              </select>\n              <p className=\"text-sm text-gray-500 mt-1\">\n                {settings.backupSchedule === 'disabled' && '不会自动创建备份'}\n                {settings.backupSchedule === 'daily' && '每天凌晨自动备份数据库和文件'}\n                {settings.backupSchedule === 'weekly' && '每周日凌晨自动备份'}\n                {settings.backupSchedule === 'monthly' && '每月1号凌晨自动备份'}\n              </p>\n            </div>\n          </div>\n\n          {/* 性能监控 */}\n          <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n            <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-3\">性能状态</h4>\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-gray-500\">缓存状态:</span>\n                <span className={cn(\n                  'ml-2 font-medium',\n                  settings.enableCache ? 'text-green-600' : 'text-red-600'\n                )}>\n                  {settings.enableCache ? '已启用' : '已禁用'}\n                </span>\n              </div>\n              <div>\n                <span className=\"text-gray-500\">缓存类型:</span>\n                <span className=\"ml-2 font-medium text-gray-900 dark:text-white\">\n                  {settings.cacheType === 'memory' && '内存缓存'}\n                  {settings.cacheType === 'redis' && 'Redis缓存'}\n                  {settings.cacheType === 'file' && '文件缓存'}\n                </span>\n              </div>\n              <div>\n                <span className=\"text-gray-500\">图片优化:</span>\n                <span className={cn(\n                  'ml-2 font-medium',\n                  settings.enableImageOptimization ? 'text-green-600' : 'text-gray-600'\n                )}>\n                  {settings.enableImageOptimization ? '已启用' : '已禁用'}\n                </span>\n              </div>\n              <div>\n                <span className=\"text-gray-500\">Gzip压缩:</span>\n                <span className={cn(\n                  'ml-2 font-medium',\n                  settings.enableGzipCompression ? 'text-green-600' : 'text-gray-600'\n                )}>\n                  {settings.enableGzipCompression ? '已启用' : '已禁用'}\n                </span>\n              </div>\n              <div>\n                <span className=\"text-gray-500\">备份频率:</span>\n                <span className=\"ml-2 font-medium text-gray-900 dark:text-white\">\n                  {settings.backupSchedule === 'disabled' && '已禁用'}\n                  {settings.backupSchedule === 'daily' && '每天'}\n                  {settings.backupSchedule === 'weekly' && '每周'}\n                  {settings.backupSchedule === 'monthly' && '每月'}\n                </span>\n              </div>\n              <div>\n                <span className=\"text-gray-500\">维护模式:</span>\n                <span className={cn(\n                  'ml-2 font-medium',\n                  settings.maintenanceMode ? 'text-red-600' : 'text-green-600'\n                )}>\n                  {settings.maintenanceMode ? '已启用' : '正常运行'}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* 性能建议 */}\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n            <h4 className=\"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2\">性能优化建议</h4>\n            <ul className=\"text-sm text-blue-700 dark:text-blue-300 space-y-1\">\n              {!settings.enableCache && (\n                <li>• 启用缓存可以显著提高网站响应速度</li>\n              )}\n              {settings.enableCache && settings.cacheType === 'file' && (\n                <li>• 考虑使用Redis缓存以获得更好的性能</li>\n              )}\n              {!settings.enableImageOptimization && (\n                <li>• 启用图片优化可以减少页面加载时间</li>\n              )}\n              {!settings.enableGzipCompression && (\n                <li>• 启用Gzip压缩可以减少带宽使用</li>\n              )}\n              {!settings.cdnUrl && (\n                <li>• 配置CDN可以加速全球用户访问</li>\n              )}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst AppearanceSettingsTab: React.FC<{\n  settings: ISystemSettings['appearance'];\n  onUpdate: (field: keyof ISystemSettings['appearance'], value: any) => void;\n}> = ({ settings, onUpdate }) => {\n  const [previewMode, setPreviewMode] = useState(false);\n\n  const colorPresets = [\n    { name: '经典蓝', primary: '#3b82f6', accent: '#10b981' },\n    { name: '优雅紫', primary: '#8b5cf6', accent: '#f59e0b' },\n    { name: '现代绿', primary: '#059669', accent: '#3b82f6' },\n    { name: '暖橙色', primary: '#ea580c', accent: '#dc2626' },\n    { name: '深邃黑', primary: '#1f2937', accent: '#6b7280' },\n    { name: '玫瑰红', primary: '#e11d48', accent: '#f97316' },\n  ];\n\n  const fontOptions = [\n    'Inter',\n    'Roboto',\n    'Open Sans',\n    'Lato',\n    'Montserrat',\n    'Source Sans Pro',\n    'Noto Sans',\n    'System UI',\n    '微软雅黑',\n    'PingFang SC',\n    'Helvetica Neue',\n  ];\n\n  const applyColorPreset = (preset: typeof colorPresets[0]) => {\n    onUpdate('primaryColor', preset.primary);\n    onUpdate('accentColor', preset.accent);\n  };\n\n  const getPreviewStyle = () => ({\n    '--primary-color': settings.primaryColor,\n    '--accent-color': settings.accentColor,\n    fontFamily: settings.fontFamily,\n    fontSize: `${settings.fontSize}px`,\n  } as React.CSSProperties);\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-6\">外观设置</h2>\n        <p className=\"text-gray-600 dark:text-gray-400 mb-8\">\n          自定义网站的主题、颜色和布局样式。\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        {/* 主题和颜色 */}\n        <div className=\"space-y-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2\">\n            主题和颜色\n          </h3>\n\n          {/* 主题选择 */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n              主题模式\n            </label>\n            <div className=\"grid grid-cols-3 gap-3\">\n              {[\n                { value: 'light', label: '浅色', icon: '☀️' },\n                { value: 'dark', label: '深色', icon: '🌙' },\n                { value: 'auto', label: '跟随系统', icon: '🔄' }\n              ].map((theme) => (\n                <button\n                  key={theme.value}\n                  type=\"button\"\n                  onClick={() => onUpdate('theme', theme.value)}\n                  className={cn(\n                    'flex flex-col items-center justify-center p-4 border-2 rounded-lg transition-all',\n                    settings.theme === theme.value\n                      ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                      : 'border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500'\n                  )}\n                >\n                  <span className=\"text-2xl mb-2\">{theme.icon}</span>\n                  <span className=\"text-sm font-medium\">{theme.label}</span>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* 颜色设置 */}\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  主色调\n                </label>\n                <div className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"color\"\n                    value={settings.primaryColor}\n                    onChange={(e) => onUpdate('primaryColor', e.target.value)}\n                    className=\"w-12 h-10 border border-gray-300 dark:border-gray-600 rounded-md cursor-pointer\"\n                  />\n                  <Input\n                    value={settings.primaryColor}\n                    onChange={(e) => onUpdate('primaryColor', e.target.value)}\n                    placeholder=\"#3b82f6\"\n                    className=\"flex-1\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  强调色\n                </label>\n                <div className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"color\"\n                    value={settings.accentColor}\n                    onChange={(e) => onUpdate('accentColor', e.target.value)}\n                    className=\"w-12 h-10 border border-gray-300 dark:border-gray-600 rounded-md cursor-pointer\"\n                  />\n                  <Input\n                    value={settings.accentColor}\n                    onChange={(e) => onUpdate('accentColor', e.target.value)}\n                    placeholder=\"#10b981\"\n                    className=\"flex-1\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* 颜色预设 */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n                颜色预设\n              </label>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                {colorPresets.map((preset, index) => (\n                  <button\n                    key={index}\n                    type=\"button\"\n                    onClick={() => applyColorPreset(preset)}\n                    className=\"flex items-center space-x-2 p-2 border border-gray-200 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\n                  >\n                    <div className=\"flex space-x-1\">\n                      <div\n                        className=\"w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600\"\n                        style={{ backgroundColor: preset.primary }}\n                      />\n                      <div\n                        className=\"w-4 h-4 rounded-full border border-gray-300 dark:border-gray-600\"\n                        style={{ backgroundColor: preset.accent }}\n                      />\n                    </div>\n                    <span className=\"text-xs font-medium\">{preset.name}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* 字体设置 */}\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                字体系列\n              </label>\n              <select\n                value={settings.fontFamily}\n                onChange={(e) => onUpdate('fontFamily', e.target.value)}\n                className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n                style={{ fontFamily: settings.fontFamily }}\n              >\n                {fontOptions.map((font) => (\n                  <option key={font} value={font} style={{ fontFamily: font }}>\n                    {font}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                基础字体大小: {settings.fontSize}px\n              </label>\n              <input\n                type=\"range\"\n                min=\"10\"\n                max=\"24\"\n                step=\"1\"\n                value={settings.fontSize}\n                onChange={(e) => onUpdate('fontSize', parseInt(e.target.value))}\n                className=\"w-full h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer\"\n              />\n              <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                <span>小 (10px)</span>\n                <span>中 (16px)</span>\n                <span>大 (24px)</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 布局和自定义 */}\n        <div className=\"space-y-6\">\n          {/* 布局设置 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              布局设置\n            </h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  头部样式\n                </label>\n                <select\n                  value={settings.headerStyle}\n                  onChange={(e) => onUpdate('headerStyle', e.target.value)}\n                  className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"minimal\">简约式</option>\n                  <option value=\"standard\">标准式</option>\n                  <option value=\"featured\">特色式</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  侧边栏位置\n                </label>\n                <select\n                  value={settings.sidebarPosition}\n                  onChange={(e) => onUpdate('sidebarPosition', e.target.value)}\n                  className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"left\">左侧</option>\n                  <option value=\"right\">右侧</option>\n                  <option value=\"disabled\">禁用</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Logo位置\n                </label>\n                <select\n                  value={settings.logoPosition}\n                  onChange={(e) => onUpdate('logoPosition', e.target.value)}\n                  className=\"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"header\">仅头部</option>\n                  <option value=\"sidebar\">仅侧边栏</option>\n                  <option value=\"both\">头部和侧边栏</option>\n                </select>\n              </div>\n            </div>\n          </div>\n\n          {/* 自定义代码 */}\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4\">\n              自定义代码\n            </h3>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  自定义CSS\n                </label>\n                <Textarea\n                  value={settings.customCSS}\n                  onChange={(e) => onUpdate('customCSS', e.target.value)}\n                  placeholder=\"/* 在这里添加您的自定义CSS */\n.custom-style {\n  color: var(--primary-color);\n}\"\n                  rows={8}\n                  className=\"font-mono text-sm\"\n                  helperText=\"添加自定义CSS样式以个性化外观\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  自定义HTML (头部)\n                </label>\n                <Textarea\n                  value={settings.customHTML}\n                  onChange={(e) => onUpdate('customHTML', e.target.value)}\n                  placeholder=\"<!-- 在这里添加自定义HTML，如统计代码 -->\n<!-- 此内容将插入到<head>标签中 -->\"\n                  rows={6}\n                  className=\"font-mono text-sm\"\n                  helperText=\"添加到网站头部的自定义HTML代码\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* 预览模式切换 */}\n          <div className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg\">\n            <div>\n              <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                预览模式\n              </label>\n              <p className=\"text-sm text-gray-500\">实时预览外观更改效果</p>\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => setPreviewMode(!previewMode)}\n              className={cn(\n                'relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2',\n                previewMode ? 'bg-blue-600' : 'bg-gray-200 dark:bg-gray-600'\n              )}\n            >\n              <span\n                className={cn(\n                  'inline-block h-4 w-4 transform rounded-full bg-white transition-transform',\n                  previewMode ? 'translate-x-6' : 'translate-x-1'\n                )}\n              />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* 样式预览 */}\n      {previewMode && (\n        <div className=\"mt-8 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">样式预览</h3>\n          \n          <div style={getPreviewStyle()} className=\"space-y-4\">\n            {/* 头部预览 */}\n            <div\n              className=\"p-4 rounded-lg border\"\n              style={{\n                backgroundColor: settings.primaryColor + '10',\n                borderColor: settings.primaryColor + '30',\n              }}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div\n                    className=\"w-8 h-8 rounded\"\n                    style={{ backgroundColor: settings.primaryColor }}\n                  />\n                  <h4 className=\"font-semibold\" style={{ color: settings.primaryColor }}>\n                    Maple Blog\n                  </h4>\n                </div>\n                <nav className=\"flex space-x-4\">\n                  <a href=\"#\" className=\"hover:underline\">首页</a>\n                  <a href=\"#\" className=\"hover:underline\">文章</a>\n                  <a href=\"#\" className=\"hover:underline\">关于</a>\n                </nav>\n              </div>\n            </div>\n\n            {/* 内容预览 */}\n            <div className=\"space-y-3\">\n              <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                示例文章标题\n              </h2>\n              <p className=\"text-gray-600 dark:text-gray-400\">\n                这是一段示例文本，用于展示当前字体和字号设置的效果。\n                您可以在上面调整各种外观设置，并在此预览区域查看实时效果。\n              </p>\n              <button\n                className=\"px-4 py-2 rounded-md text-white\"\n                style={{ backgroundColor: settings.accentColor }}\n              >\n                强调按钮\n              </button>\n            </div>\n\n            {/* 卡片预览 */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n                <h3 className=\"font-medium text-gray-900 dark:text-white mb-2\">卡片标题</h3>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  卡片内容示例，展示边框、间距和文字效果。\n                </p>\n                <div className=\"mt-3 flex items-center space-x-2\">\n                  <span\n                    className=\"inline-block w-2 h-2 rounded-full\"\n                    style={{ backgroundColor: settings.primaryColor }}\n                  />\n                  <span className=\"text-xs text-gray-500\">标签示例</span>\n                </div>\n              </div>\n              \n              <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n                <h3 className=\"font-medium text-gray-900 dark:text-white mb-2\">另一个卡片</h3>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  更多内容展示当前的主题配置效果。\n                </p>\n                <div className=\"mt-3\">\n                  <span\n                    className=\"text-xs px-2 py-1 rounded\"\n                    style={{\n                      backgroundColor: settings.accentColor + '20',\n                      color: settings.accentColor,\n                    }}\n                  >\n                    彩色标签\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SystemSettings;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/admin/UserManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used. Allowed unused vars must match /^_/u.","line":27,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Upload' is defined but never used. Allowed unused vars must match /^_/u.","line":41,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EyeOff' is defined but never used. Allowed unused vars must match /^_/u.","line":52,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":52,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":56,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":56,"endColumn":8},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":401,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":401,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12356,12424],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-alert","severity":1,"message":"Unexpected confirm.","line":409,"column":13,"nodeType":"CallExpression","messageId":"unexpected","endLine":409,"endColumn":85},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":421,"column":9,"nodeType":"CallExpression","messageId":"unexpected","endLine":421,"endColumn":60},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":441,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":441,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13600,13686],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-alert","severity":1,"message":"Unexpected confirm.","line":446,"column":13,"nodeType":"CallExpression","messageId":"unexpected","endLine":446,"endColumn":100},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":992,"column":50,"nodeType":"CallExpression","messageId":"unexpected","endLine":992,"endColumn":95},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":1247,"column":15,"nodeType":"CallExpression","messageId":"unexpected","endLine":1247,"endColumn":77},{"ruleId":"no-alert","severity":1,"message":"Unexpected alert.","line":1458,"column":17,"nodeType":"CallExpression","messageId":"unexpected","endLine":1458,"endColumn":77}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useMemo } from 'react';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport { Button } from '@/components/ui/Button';\nimport { Input } from '@/components/ui/Input';\nimport { Badge } from '@/components/ui/badge';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/components/ui/tabs';\nimport { Separator } from '@/components/ui/separator';\nimport UserAvatar from '@/components/common/UserAvatar';\nimport {\n  Users,\n  Search,\n  Filter,\n  MoreHorizontal,\n  Edit,\n  Trash2,\n  UserCheck,\n  UserX,\n  Key,\n  Plus,\n  Download,\n  Upload,\n  Grid3x3,\n  List,\n  Calendar,\n  Mail,\n  Shield,\n  Activity,\n  CheckSquare,\n  Square,\n  RotateCcw,\n  Eye,\n  EyeOff,\n  Settings,\n  AlertTriangle,\n  CheckCircle,\n  Clock,\n  Ban,\n} from 'lucide-react';\n\n// Extended User interface for admin management\ninterface AdminUser {\n  id: string;\n  username: string;\n  email: string;\n  displayName: string;\n  firstName: string;\n  lastName: string;\n  avatar?: string;\n  status: 'Active' | 'Inactive' | 'Suspended' | 'Banned';\n  roles: string[];\n  primaryRole: 'Admin' | 'Author' | 'User';\n  lastLogin?: string;\n  registrationDate: string;\n  postCount: number;\n  commentCount: number;\n  emailVerified: boolean;\n  twoFactorEnabled: boolean;\n  isOnline: boolean;\n  lastActivity: string;\n  profileCompletion: number;\n  accountAge: string;\n  loginCount: number;\n  failedLoginAttempts: number;\n  lockoutEnd?: string;\n  ipAddress?: string;\n  location?: string;\n  createdBy?: string;\n  notes?: string;\n}\n\n// Filter interface\ninterface UserFilters {\n  search: string;\n  role: string;\n  status: string;\n  emailVerified: boolean | null;\n  twoFactorEnabled: boolean | null;\n  isOnline: boolean | null;\n  registrationDateFrom: string;\n  registrationDateTo: string;\n  lastLoginFrom: string;\n  lastLoginTo: string;\n}\n\n// Sort configuration\ninterface SortConfig {\n  key: keyof AdminUser | null;\n  direction: 'asc' | 'desc';\n}\n\n// Pagination configuration\ninterface PaginationConfig {\n  page: number;\n  itemsPerPage: number;\n  totalItems: number;\n  totalPages: number;\n}\n\n// Bulk operation types\ntype BulkOperation = 'delete' | 'activate' | 'deactivate' | 'suspend' | 'unsuspend' | 'verify-email' | 'reset-password';\n\n// Mock data for demonstration\nconst generateMockUsers = (): AdminUser[] => {\n  const statuses: AdminUser['status'][] = ['Active', 'Inactive', 'Suspended', 'Banned'];\n  const roles: AdminUser['primaryRole'][] = ['Admin', 'Author', 'User'];\n  const locations = ['New York, US', 'London, UK', 'Tokyo, JP', 'Berlin, DE', 'Sydney, AU', 'Toronto, CA'];\n  \n  return Array.from({ length: 127 }, (_, index) => {\n    const firstName = `User${index + 1}`;\n    const lastName = `Last${index + 1}`;\n    const username = `user${index + 1}`;\n    const status = statuses[Math.floor(Math.random() * statuses.length)];\n    const role = roles[Math.floor(Math.random() * roles.length)];\n    const registrationDate = new Date(2020 + Math.floor(Math.random() * 4), Math.floor(Math.random() * 12), Math.floor(Math.random() * 28));\n    const lastLogin = Math.random() > 0.3 ? new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000) : undefined;\n    const isOnline = Math.random() > 0.7;\n    \n    return {\n      id: `user-${index + 1}`,\n      username,\n      email: `${username}@example.com`,\n      displayName: `${firstName} ${lastName}`,\n      firstName,\n      lastName,\n      avatar: Math.random() > 0.5 ? `https://i.pravatar.cc/100?img=${index + 1}` : undefined,\n      status,\n      roles: role === 'Admin' ? ['Admin', 'Author', 'User'] : role === 'Author' ? ['Author', 'User'] : ['User'],\n      primaryRole: role,\n      lastLogin: lastLogin?.toISOString(),\n      registrationDate: registrationDate.toISOString(),\n      postCount: Math.floor(Math.random() * 50),\n      commentCount: Math.floor(Math.random() * 200),\n      emailVerified: Math.random() > 0.2,\n      twoFactorEnabled: Math.random() > 0.7,\n      isOnline,\n      lastActivity: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString(),\n      profileCompletion: Math.floor(Math.random() * 40) + 60,\n      accountAge: `${Math.floor((Date.now() - registrationDate.getTime()) / (1000 * 60 * 60 * 24))} days`,\n      loginCount: Math.floor(Math.random() * 1000) + 50,\n      failedLoginAttempts: Math.floor(Math.random() * 5),\n      lockoutEnd: status === 'Suspended' && Math.random() > 0.5 ? new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString() : undefined,\n      ipAddress: `${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`,\n      location: locations[Math.floor(Math.random() * locations.length)],\n      createdBy: index < 10 ? 'System' : 'admin',\n      notes: Math.random() > 0.8 ? 'Test user account created for demonstration' : undefined,\n    };\n  });\n};\n\nconst UserManagement: React.FC = () => {\n  // State management\n  const [users, setUsers] = useState<AdminUser[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [viewMode, setViewMode] = useState<'table' | 'card'>('table');\n  const [selectedUsers, setSelectedUsers] = useState<Set<string>>(new Set());\n  const [showFilters, setShowFilters] = useState(false);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [showBulkActionModal, setShowBulkActionModal] = useState(false);\n  const [editingUser, setEditingUser] = useState<AdminUser | null>(null);\n  const [bulkOperation, setBulkOperation] = useState<BulkOperation>('delete');\n\n  // Filters state\n  const [filters, setFilters] = useState<UserFilters>({\n    search: '',\n    role: '',\n    status: '',\n    emailVerified: null,\n    twoFactorEnabled: null,\n    isOnline: null,\n    registrationDateFrom: '',\n    registrationDateTo: '',\n    lastLoginFrom: '',\n    lastLoginTo: '',\n  });\n\n  // Sort and pagination state\n  const [sortConfig, setSortConfig] = useState<SortConfig>({ key: 'registrationDate', direction: 'desc' });\n  const [pagination, setPagination] = useState<PaginationConfig>({\n    page: 1,\n    itemsPerPage: 20,\n    totalItems: 0,\n    totalPages: 0,\n  });\n\n  // Load users on component mount\n  useEffect(() => {\n    const loadUsers = async () => {\n      setLoading(true);\n      try {\n        // Simulate API delay\n        await new Promise(resolve => setTimeout(resolve, 1000));\n        const mockUsers = generateMockUsers();\n        setUsers(mockUsers);\n        setPagination(prev => ({\n          ...prev,\n          totalItems: mockUsers.length,\n          totalPages: Math.ceil(mockUsers.length / prev.itemsPerPage),\n        }));\n      } catch (error) {\n        console.error('Error loading users:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadUsers();\n  }, []);\n\n  // Filter and sort users\n  const filteredAndSortedUsers = useMemo(() => {\n    let result = [...users];\n\n    // Apply filters\n    if (filters.search) {\n      const searchLower = filters.search.toLowerCase();\n      result = result.filter(user => \n        user.username.toLowerCase().includes(searchLower) ||\n        user.email.toLowerCase().includes(searchLower) ||\n        user.displayName.toLowerCase().includes(searchLower)\n      );\n    }\n\n    if (filters.role) {\n      result = result.filter(user => user.primaryRole === filters.role);\n    }\n\n    if (filters.status) {\n      result = result.filter(user => user.status === filters.status);\n    }\n\n    if (filters.emailVerified !== null) {\n      result = result.filter(user => user.emailVerified === filters.emailVerified);\n    }\n\n    if (filters.twoFactorEnabled !== null) {\n      result = result.filter(user => user.twoFactorEnabled === filters.twoFactorEnabled);\n    }\n\n    if (filters.isOnline !== null) {\n      result = result.filter(user => user.isOnline === filters.isOnline);\n    }\n\n    if (filters.registrationDateFrom) {\n      const fromDate = new Date(filters.registrationDateFrom);\n      result = result.filter(user => new Date(user.registrationDate) >= fromDate);\n    }\n\n    if (filters.registrationDateTo) {\n      const toDate = new Date(filters.registrationDateTo);\n      result = result.filter(user => new Date(user.registrationDate) <= toDate);\n    }\n\n    // Apply sorting\n    if (sortConfig.key) {\n      result.sort((a, b) => {\n        const aValue = a[sortConfig.key!];\n        const bValue = b[sortConfig.key!];\n\n        if (aValue === null || aValue === undefined) return 1;\n        if (bValue === null || bValue === undefined) return -1;\n\n        if (typeof aValue === 'string' && typeof bValue === 'string') {\n          const comparison = aValue.localeCompare(bValue);\n          return sortConfig.direction === 'asc' ? comparison : -comparison;\n        }\n\n        if (typeof aValue === 'number' && typeof bValue === 'number') {\n          const comparison = aValue - bValue;\n          return sortConfig.direction === 'asc' ? comparison : -comparison;\n        }\n\n        // Date comparison\n        if (typeof aValue === 'string' && typeof bValue === 'string' && \n            (sortConfig.key === 'registrationDate' || sortConfig.key === 'lastLogin' || sortConfig.key === 'lastActivity')) {\n          const aDate = new Date(aValue).getTime();\n          const bDate = new Date(bValue).getTime();\n          const comparison = aDate - bDate;\n          return sortConfig.direction === 'asc' ? comparison : -comparison;\n        }\n\n        return 0;\n      });\n    }\n\n    return result;\n  }, [users, filters, sortConfig]);\n\n  // Paginated users\n  const paginatedUsers = useMemo(() => {\n    const startIndex = (pagination.page - 1) * pagination.itemsPerPage;\n    const endIndex = startIndex + pagination.itemsPerPage;\n    return filteredAndSortedUsers.slice(startIndex, endIndex);\n  }, [filteredAndSortedUsers, pagination.page, pagination.itemsPerPage]);\n\n  // Update pagination when filters change\n  useEffect(() => {\n    setPagination(prev => ({\n      ...prev,\n      page: 1,\n      totalItems: filteredAndSortedUsers.length,\n      totalPages: Math.ceil(filteredAndSortedUsers.length / prev.itemsPerPage),\n    }));\n  }, [filteredAndSortedUsers.length, pagination.itemsPerPage]);\n\n  // Utility functions\n  const getStatusColor = (status: AdminUser['status']) => {\n    switch (status) {\n      case 'Active':\n        return 'bg-green-100 text-green-800';\n      case 'Inactive':\n        return 'bg-gray-100 text-gray-800';\n      case 'Suspended':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'Banned':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getRoleColor = (role: AdminUser['primaryRole']) => {\n    switch (role) {\n      case 'Admin':\n        return 'bg-purple-100 text-purple-800';\n      case 'Author':\n        return 'bg-blue-100 text-blue-800';\n      case 'User':\n        return 'bg-gray-100 text-gray-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  const formatDateTime = (dateString: string) => {\n    return new Date(dateString).toLocaleString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  // Action handlers\n  const handleSort = (key: keyof AdminUser) => {\n    setSortConfig(prev => ({\n      key,\n      direction: prev.key === key && prev.direction === 'asc' ? 'desc' : 'asc',\n    }));\n  };\n\n  const handleSelectUser = (userId: string) => {\n    setSelectedUsers(prev => {\n      const newSelected = new Set(prev);\n      if (newSelected.has(userId)) {\n        newSelected.delete(userId);\n      } else {\n        newSelected.add(userId);\n      }\n      return newSelected;\n    });\n  };\n\n  const handleSelectAll = () => {\n    if (selectedUsers.size === paginatedUsers.length) {\n      setSelectedUsers(new Set());\n    } else {\n      setSelectedUsers(new Set(paginatedUsers.map(user => user.id)));\n    }\n  };\n\n  const handleUserAction = async (action: string, user: AdminUser) => {\n    console.log(`Performing action ${action} on user ${user.username}`);\n    // Here you would make API calls to perform the action\n    \n    switch (action) {\n      case 'edit':\n        setEditingUser(user);\n        break;\n      case 'delete':\n        if (window.confirm(`Are you sure you want to delete user ${user.username}?`)) {\n          setUsers(prev => prev.filter(u => u.id !== user.id));\n        }\n        break;\n      case 'toggleStatus': {\n        const newStatus = user.status === 'Active' ? 'Inactive' : 'Active';\n        setUsers(prev => prev.map(u =>\n          u.id === user.id ? { ...u, status: newStatus } : u\n        ));\n        break;\n      }\n      case 'resetPassword':\n        alert(`Password reset email sent to ${user.email}`);\n        break;\n      case 'suspend':\n        setUsers(prev => prev.map(u => \n          u.id === user.id ? { ...u, status: 'Suspended' as AdminUser['status'] } : u\n        ));\n        break;\n      case 'unsuspend':\n        setUsers(prev => prev.map(u => \n          u.id === user.id ? { ...u, status: 'Active' as AdminUser['status'] } : u\n        ));\n        break;\n      default:\n        break;\n    }\n  };\n\n  const handleBulkAction = async () => {\n    if (selectedUsers.size === 0) return;\n    \n    console.log(`Performing bulk action ${bulkOperation} on ${selectedUsers.size} users`);\n    \n    // Here you would make API calls to perform bulk actions\n    switch (bulkOperation) {\n      case 'delete':\n        if (window.confirm(`Are you sure you want to delete ${selectedUsers.size} selected users?`)) {\n          setUsers(prev => prev.filter(user => !selectedUsers.has(user.id)));\n          setSelectedUsers(new Set());\n        }\n        break;\n      case 'activate':\n        setUsers(prev => prev.map(user => \n          selectedUsers.has(user.id) ? { ...user, status: 'Active' as AdminUser['status'] } : user\n        ));\n        setSelectedUsers(new Set());\n        break;\n      case 'deactivate':\n        setUsers(prev => prev.map(user => \n          selectedUsers.has(user.id) ? { ...user, status: 'Inactive' as AdminUser['status'] } : user\n        ));\n        setSelectedUsers(new Set());\n        break;\n      case 'suspend':\n        setUsers(prev => prev.map(user => \n          selectedUsers.has(user.id) ? { ...user, status: 'Suspended' as AdminUser['status'] } : user\n        ));\n        setSelectedUsers(new Set());\n        break;\n      default:\n        break;\n    }\n    \n    setShowBulkActionModal(false);\n  };\n\n  const handleExport = () => {\n    const csvContent = [\n      ['Username', 'Email', 'Display Name', 'Role', 'Status', 'Registration Date', 'Last Login', 'Post Count', 'Comment Count'].join(','),\n      ...filteredAndSortedUsers.map(user => [\n        user.username,\n        user.email,\n        user.displayName,\n        user.primaryRole,\n        user.status,\n        formatDate(user.registrationDate),\n        user.lastLogin ? formatDateTime(user.lastLogin) : 'Never',\n        user.postCount.toString(),\n        user.commentCount.toString(),\n      ].join(',')),\n    ].join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `users_${new Date().toISOString().split('T')[0]}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const clearFilters = () => {\n    setFilters({\n      search: '',\n      role: '',\n      status: '',\n      emailVerified: null,\n      twoFactorEnabled: null,\n      isOnline: null,\n      registrationDateFrom: '',\n      registrationDateTo: '',\n      lastLoginFrom: '',\n      lastLoginTo: '',\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[400px]\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading users...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">User Management</h1>\n          <p className=\"text-gray-600\">\n            Manage users, roles, and permissions across the platform\n          </p>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <Button onClick={handleExport} variant=\"outline\" size=\"sm\">\n            <Download className=\"mr-2 h-4 w-4\" />\n            Export\n          </Button>\n          <Button onClick={() => setShowCreateModal(true)} size=\"sm\">\n            <Plus className=\"mr-2 h-4 w-4\" />\n            Add User\n          </Button>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Users</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{users.length}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              {users.filter(u => u.status === 'Active').length} active\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Online Now</CardTitle>\n            <Activity className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {users.filter(u => u.isOnline).length}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {Math.round((users.filter(u => u.isOnline).length / users.length) * 100)}% of total\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">New This Month</CardTitle>\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {users.filter(u => {\n                const regDate = new Date(u.registrationDate);\n                const now = new Date();\n                const thirtyDaysAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\n                return regDate >= thirtyDaysAgo;\n              }).length}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Last 30 days\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Verification Rate</CardTitle>\n            <Mail className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {Math.round((users.filter(u => u.emailVerified).length / users.length) * 100)}%\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              Email verified\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters and Controls */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-lg\">User Filters & Controls</CardTitle>\n            <div className=\"flex items-center space-x-2\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setShowFilters(!showFilters)}\n              >\n                <Filter className=\"mr-2 h-4 w-4\" />\n                Filters\n              </Button>\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setViewMode(viewMode === 'table' ? 'card' : 'table')}\n              >\n                {viewMode === 'table' ? (\n                  <Grid3x3 className=\"mr-2 h-4 w-4\" />\n                ) : (\n                  <List className=\"mr-2 h-4 w-4\" />\n                )}\n                {viewMode === 'table' ? 'Card View' : 'Table View'}\n              </Button>\n              {selectedUsers.size > 0 && (\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setShowBulkActionModal(true)}\n                >\n                  <Settings className=\"mr-2 h-4 w-4\" />\n                  Bulk Actions ({selectedUsers.size})\n                </Button>\n              )}\n            </div>\n          </div>\n        </CardHeader>\n\n        {showFilters && (\n          <CardContent>\n            <div className=\"grid gap-4 md:grid-cols-3 lg:grid-cols-4\">\n              <div>\n                <Input\n                  placeholder=\"Search users...\"\n                  value={filters.search}\n                  onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\n                  leftIcon={<Search className=\"h-4 w-4\" />}\n                />\n              </div>\n\n              <div>\n                <select\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  value={filters.role}\n                  onChange={(e) => setFilters(prev => ({ ...prev, role: e.target.value }))}\n                >\n                  <option value=\"\">All Roles</option>\n                  <option value=\"Admin\">Admin</option>\n                  <option value=\"Author\">Author</option>\n                  <option value=\"User\">User</option>\n                </select>\n              </div>\n\n              <div>\n                <select\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  value={filters.status}\n                  onChange={(e) => setFilters(prev => ({ ...prev, status: e.target.value }))}\n                >\n                  <option value=\"\">All Statuses</option>\n                  <option value=\"Active\">Active</option>\n                  <option value=\"Inactive\">Inactive</option>\n                  <option value=\"Suspended\">Suspended</option>\n                  <option value=\"Banned\">Banned</option>\n                </select>\n              </div>\n\n              <div>\n                <select\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  value={filters.emailVerified === null ? '' : filters.emailVerified.toString()}\n                  onChange={(e) => setFilters(prev => ({ \n                    ...prev, \n                    emailVerified: e.target.value === '' ? null : e.target.value === 'true' \n                  }))}\n                >\n                  <option value=\"\">All Verification</option>\n                  <option value=\"true\">Verified</option>\n                  <option value=\"false\">Unverified</option>\n                </select>\n              </div>\n\n              <div>\n                <Input\n                  type=\"date\"\n                  placeholder=\"From Date\"\n                  value={filters.registrationDateFrom}\n                  onChange={(e) => setFilters(prev => ({ ...prev, registrationDateFrom: e.target.value }))}\n                />\n              </div>\n\n              <div>\n                <Input\n                  type=\"date\"\n                  placeholder=\"To Date\"\n                  value={filters.registrationDateTo}\n                  onChange={(e) => setFilters(prev => ({ ...prev, registrationDateTo: e.target.value }))}\n                />\n              </div>\n\n              <div>\n                <select\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  value={filters.isOnline === null ? '' : filters.isOnline.toString()}\n                  onChange={(e) => setFilters(prev => ({ \n                    ...prev, \n                    isOnline: e.target.value === '' ? null : e.target.value === 'true' \n                  }))}\n                >\n                  <option value=\"\">All Users</option>\n                  <option value=\"true\">Online</option>\n                  <option value=\"false\">Offline</option>\n                </select>\n              </div>\n\n              <div>\n                <Button\n                  variant=\"outline\"\n                  onClick={clearFilters}\n                  className=\"w-full\"\n                >\n                  <RotateCcw className=\"mr-2 h-4 w-4\" />\n                  Clear\n                </Button>\n              </div>\n            </div>\n\n            {(filters.search || filters.role || filters.status || filters.emailVerified !== null) && (\n              <div className=\"mt-4 p-3 bg-blue-50 rounded-lg\">\n                <p className=\"text-sm text-blue-700\">\n                  Showing {filteredAndSortedUsers.length} of {users.length} users\n                  {filters.search && ` matching \"${filters.search}\"`}\n                  {filters.role && ` with role \"${filters.role}\"`}\n                  {filters.status && ` with status \"${filters.status}\"`}\n                </p>\n              </div>\n            )}\n          </CardContent>\n        )}\n      </Card>\n\n      {/* User List */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center justify-between\">\n            <span>Users ({filteredAndSortedUsers.length})</span>\n            {selectedUsers.size > 0 && (\n              <span className=\"text-sm font-normal text-blue-600\">\n                {selectedUsers.size} selected\n              </span>\n            )}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {viewMode === 'table' ? (\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full table-auto\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left py-2 px-2\">\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={handleSelectAll}\n                        className=\"p-0 h-auto\"\n                      >\n                        {selectedUsers.size === paginatedUsers.length && paginatedUsers.length > 0 ? (\n                          <CheckSquare className=\"h-4 w-4\" />\n                        ) : (\n                          <Square className=\"h-4 w-4\" />\n                        )}\n                      </Button>\n                    </th>\n                    <th className=\"text-left py-2 px-4 cursor-pointer hover:bg-gray-50\" onClick={() => handleSort('username')}>\n                      <div className=\"flex items-center\">\n                        User\n                        {sortConfig.key === 'username' && (\n                          <span className=\"ml-1 text-xs\">\n                            {sortConfig.direction === 'asc' ? '↑' : '↓'}\n                          </span>\n                        )}\n                      </div>\n                    </th>\n                    <th className=\"text-left py-2 px-4 cursor-pointer hover:bg-gray-50\" onClick={() => handleSort('primaryRole')}>\n                      <div className=\"flex items-center\">\n                        Role\n                        {sortConfig.key === 'primaryRole' && (\n                          <span className=\"ml-1 text-xs\">\n                            {sortConfig.direction === 'asc' ? '↑' : '↓'}\n                          </span>\n                        )}\n                      </div>\n                    </th>\n                    <th className=\"text-left py-2 px-4 cursor-pointer hover:bg-gray-50\" onClick={() => handleSort('status')}>\n                      <div className=\"flex items-center\">\n                        Status\n                        {sortConfig.key === 'status' && (\n                          <span className=\"ml-1 text-xs\">\n                            {sortConfig.direction === 'asc' ? '↑' : '↓'}\n                          </span>\n                        )}\n                      </div>\n                    </th>\n                    <th className=\"text-left py-2 px-4 cursor-pointer hover:bg-gray-50\" onClick={() => handleSort('registrationDate')}>\n                      <div className=\"flex items-center\">\n                        Joined\n                        {sortConfig.key === 'registrationDate' && (\n                          <span className=\"ml-1 text-xs\">\n                            {sortConfig.direction === 'asc' ? '↑' : '↓'}\n                          </span>\n                        )}\n                      </div>\n                    </th>\n                    <th className=\"text-left py-2 px-4 cursor-pointer hover:bg-gray-50\" onClick={() => handleSort('lastLogin')}>\n                      <div className=\"flex items-center\">\n                        Last Login\n                        {sortConfig.key === 'lastLogin' && (\n                          <span className=\"ml-1 text-xs\">\n                            {sortConfig.direction === 'asc' ? '↑' : '↓'}\n                          </span>\n                        )}\n                      </div>\n                    </th>\n                    <th className=\"text-left py-2 px-4\">Content</th>\n                    <th className=\"text-left py-2 px-4\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {paginatedUsers.map((user) => (\n                    <tr key={user.id} className=\"border-b hover:bg-gray-50\">\n                      <td className=\"py-3 px-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleSelectUser(user.id)}\n                          className=\"p-0 h-auto\"\n                        >\n                          {selectedUsers.has(user.id) ? (\n                            <CheckSquare className=\"h-4 w-4 text-blue-600\" />\n                          ) : (\n                            <Square className=\"h-4 w-4\" />\n                          )}\n                        </Button>\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"relative\">\n                            <UserAvatar\n                              user={{\n                                displayName: user.displayName,\n                                username: user.username,\n                                avatarUrl: user.avatar,\n                                role: user.primaryRole,\n                              }}\n                              size=\"md\"\n                              showStatus={false}\n                              showRole={false}\n                            />\n                            {user.isOnline && (\n                              <div className=\"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 border-2 border-white rounded-full\"></div>\n                            )}\n                          </div>\n                          <div>\n                            <div className=\"font-medium\">{user.displayName}</div>\n                            <div className=\"text-sm text-gray-500\">@{user.username}</div>\n                            <div className=\"text-xs text-gray-400\">{user.email}</div>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <Badge className={getRoleColor(user.primaryRole)}>\n                          {user.primaryRole}\n                        </Badge>\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <div className=\"flex items-center space-x-2\">\n                          <Badge className={getStatusColor(user.status)}>\n                            {user.status}\n                          </Badge>\n                          {user.emailVerified && (\n                            <CheckCircle className=\"h-4 w-4 text-green-500\" title=\"Email Verified\" />\n                          )}\n                          {user.twoFactorEnabled && (\n                            <Shield className=\"h-4 w-4 text-blue-500\" title=\"2FA Enabled\" />\n                          )}\n                        </div>\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <div className=\"text-sm\">\n                          {formatDate(user.registrationDate)}\n                        </div>\n                        <div className=\"text-xs text-gray-500\">\n                          {user.accountAge}\n                        </div>\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <div className=\"text-sm\">\n                          {user.lastLogin ? formatDateTime(user.lastLogin) : 'Never'}\n                        </div>\n                        {user.lastLogin && (\n                          <div className=\"text-xs text-gray-500\">\n                            {user.loginCount} logins\n                          </div>\n                        )}\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <div className=\"text-sm\">\n                          <div>{user.postCount} posts</div>\n                          <div className=\"text-xs text-gray-500\">{user.commentCount} comments</div>\n                        </div>\n                      </td>\n                      <td className=\"py-3 px-4\">\n                        <div className=\"flex items-center space-x-1\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => handleUserAction('edit', user)}\n                            className=\"p-1 h-auto\"\n                            title=\"Edit User\"\n                          >\n                            <Edit className=\"h-4 w-4\" />\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => handleUserAction('toggleStatus', user)}\n                            className=\"p-1 h-auto\"\n                            title={user.status === 'Active' ? 'Deactivate' : 'Activate'}\n                          >\n                            {user.status === 'Active' ? (\n                              <UserX className=\"h-4 w-4\" />\n                            ) : (\n                              <UserCheck className=\"h-4 w-4\" />\n                            )}\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => handleUserAction('resetPassword', user)}\n                            className=\"p-1 h-auto\"\n                            title=\"Reset Password\"\n                          >\n                            <Key className=\"h-4 w-4\" />\n                          </Button>\n                          <div className=\"relative group\">\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              className=\"p-1 h-auto\"\n                            >\n                              <MoreHorizontal className=\"h-4 w-4\" />\n                            </Button>\n                            <div className=\"absolute right-0 top-8 w-48 bg-white border rounded-md shadow-lg hidden group-hover:block z-10\">\n                              <div className=\"py-1\">\n                                <button\n                                  className=\"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50\"\n                                  onClick={() => handleUserAction('suspend', user)}\n                                >\n                                  <Ban className=\"inline-block w-4 h-4 mr-2\" />\n                                  Suspend User\n                                </button>\n                                <button\n                                  className=\"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50\"\n                                  onClick={() => alert(`Viewing details for ${user.username}`)}\n                                >\n                                  <Eye className=\"inline-block w-4 h-4 mr-2\" />\n                                  View Details\n                                </button>\n                                <button\n                                  className=\"block w-full text-left px-3 py-2 text-sm hover:bg-gray-50 text-red-600\"\n                                  onClick={() => handleUserAction('delete', user)}\n                                >\n                                  <Trash2 className=\"inline-block w-4 h-4 mr-2\" />\n                                  Delete User\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n\n              {paginatedUsers.length === 0 && (\n                <div className=\"text-center py-12\">\n                  <Users className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No users found</h3>\n                  <p className=\"text-gray-500\">Try adjusting your filters or search terms</p>\n                </div>\n              )}\n            </div>\n          ) : (\n            // Card View\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n              {paginatedUsers.map((user) => (\n                <Card key={user.id} className=\"relative\">\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"relative\">\n                          <UserAvatar\n                            user={{\n                              displayName: user.displayName,\n                              username: user.username,\n                              avatarUrl: user.avatar,\n                              role: user.primaryRole,\n                            }}\n                            size=\"md\"\n                            showStatus={false}\n                            showRole={false}\n                          />\n                          {user.isOnline && (\n                            <div className=\"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 border-2 border-white rounded-full\"></div>\n                          )}\n                        </div>\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-medium text-sm\">{user.displayName}</h4>\n                          <p className=\"text-xs text-gray-500\">@{user.username}</p>\n                        </div>\n                      </div>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleSelectUser(user.id)}\n                        className=\"p-1 h-auto\"\n                      >\n                        {selectedUsers.has(user.id) ? (\n                          <CheckSquare className=\"h-4 w-4 text-blue-600\" />\n                        ) : (\n                          <Square className=\"h-4 w-4\" />\n                        )}\n                      </Button>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"pt-0 space-y-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <Badge className={getRoleColor(user.primaryRole)} variant=\"secondary\">\n                        {user.primaryRole}\n                      </Badge>\n                      <Badge className={getStatusColor(user.status)} variant=\"secondary\">\n                        {user.status}\n                      </Badge>\n                    </div>\n                    \n                    <div className=\"space-y-2 text-xs text-gray-600\">\n                      <div className=\"flex justify-between\">\n                        <span>Joined:</span>\n                        <span>{formatDate(user.registrationDate)}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Last Login:</span>\n                        <span>{user.lastLogin ? formatDate(user.lastLogin) : 'Never'}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Posts:</span>\n                        <span>{user.postCount}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Comments:</span>\n                        <span>{user.commentCount}</span>\n                      </div>\n                    </div>\n\n                    <div className=\"flex items-center justify-center space-x-1 pt-2\">\n                      {user.emailVerified && (\n                        <CheckCircle className=\"h-4 w-4 text-green-500\" title=\"Email Verified\" />\n                      )}\n                      {user.twoFactorEnabled && (\n                        <Shield className=\"h-4 w-4 text-blue-500\" title=\"2FA Enabled\" />\n                      )}\n                    </div>\n\n                    <div className=\"flex justify-center space-x-1 pt-2\">\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleUserAction('edit', user)}\n                        className=\"p-1 h-auto\"\n                        title=\"Edit User\"\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleUserAction('toggleStatus', user)}\n                        className=\"p-1 h-auto\"\n                        title={user.status === 'Active' ? 'Deactivate' : 'Activate'}\n                      >\n                        {user.status === 'Active' ? (\n                          <UserX className=\"h-4 w-4\" />\n                        ) : (\n                          <UserCheck className=\"h-4 w-4\" />\n                        )}\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleUserAction('resetPassword', user)}\n                        className=\"p-1 h-auto\"\n                        title=\"Reset Password\"\n                      >\n                        <Key className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleUserAction('delete', user)}\n                        className=\"p-1 h-auto text-red-500\"\n                        title=\"Delete User\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n\n              {paginatedUsers.length === 0 && (\n                <div className=\"col-span-full text-center py-12\">\n                  <Users className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No users found</h3>\n                  <p className=\"text-gray-500\">Try adjusting your filters or search terms</p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Pagination */}\n          {pagination.totalPages > 1 && (\n            <div className=\"flex items-center justify-between mt-6 pt-6 border-t\">\n              <div className=\"text-sm text-gray-700\">\n                Showing {(pagination.page - 1) * pagination.itemsPerPage + 1} to{' '}\n                {Math.min(pagination.page * pagination.itemsPerPage, pagination.totalItems)} of{' '}\n                {pagination.totalItems} users\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setPagination(prev => ({ ...prev, page: prev.page - 1 }))}\n                  disabled={pagination.page === 1}\n                >\n                  Previous\n                </Button>\n                <div className=\"flex items-center space-x-1\">\n                  {Array.from({ length: Math.min(5, pagination.totalPages) }, (_, i) => {\n                    const pageNumber = Math.max(1, pagination.page - 2) + i;\n                    if (pageNumber > pagination.totalPages) return null;\n                    \n                    return (\n                      <Button\n                        key={pageNumber}\n                        variant={pagination.page === pageNumber ? 'default' : 'ghost'}\n                        size=\"sm\"\n                        onClick={() => setPagination(prev => ({ ...prev, page: pageNumber }))}\n                        className=\"px-3\"\n                      >\n                        {pageNumber}\n                      </Button>\n                    );\n                  })}\n                </div>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setPagination(prev => ({ ...prev, page: prev.page + 1 }))}\n                  disabled={pagination.page === pagination.totalPages}\n                >\n                  Next\n                </Button>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Create User Modal */}\n      <Dialog open={showCreateModal} onOpenChange={setShowCreateModal}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>Create New User</DialogTitle>\n            <DialogDescription>\n              Add a new user to the system with the specified details.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <Input label=\"First Name\" required />\n              <Input label=\"Last Name\" required />\n            </div>\n            <Input label=\"Username\" required />\n            <Input label=\"Email\" type=\"email\" required />\n            <Input label=\"Password\" type=\"password\" required />\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Role</label>\n              <select className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\">\n                <option value=\"User\">User</option>\n                <option value=\"Author\">Author</option>\n                <option value=\"Admin\">Admin</option>\n              </select>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <input type=\"checkbox\" id=\"emailVerified\" className=\"rounded\" />\n              <label htmlFor=\"emailVerified\" className=\"text-sm\">Email Verified</label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <input type=\"checkbox\" id=\"sendWelcomeEmail\" className=\"rounded\" />\n              <label htmlFor=\"sendWelcomeEmail\" className=\"text-sm\">Send Welcome Email</label>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowCreateModal(false)}>\n              Cancel\n            </Button>\n            <Button onClick={() => {\n              alert('User creation functionality would be implemented here');\n              setShowCreateModal(false);\n            }}>\n              Create User\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Bulk Actions Modal */}\n      <Dialog open={showBulkActionModal} onOpenChange={setShowBulkActionModal}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Bulk Actions</DialogTitle>\n            <DialogDescription>\n              Perform actions on {selectedUsers.size} selected users.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Action</label>\n              <select \n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                value={bulkOperation}\n                onChange={(e) => setBulkOperation(e.target.value as BulkOperation)}\n              >\n                <option value=\"delete\">Delete Users</option>\n                <option value=\"activate\">Activate Users</option>\n                <option value=\"deactivate\">Deactivate Users</option>\n                <option value=\"suspend\">Suspend Users</option>\n                <option value=\"unsuspend\">Unsuspend Users</option>\n                <option value=\"verify-email\">Verify Emails</option>\n                <option value=\"reset-password\">Reset Passwords</option>\n              </select>\n            </div>\n            \n            {bulkOperation === 'delete' && (\n              <Alert>\n                <AlertTriangle className=\"h-4 w-4\" />\n                <AlertDescription>\n                  This action cannot be undone. Selected users will be permanently deleted.\n                </AlertDescription>\n              </Alert>\n            )}\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowBulkActionModal(false)}>\n              Cancel\n            </Button>\n            <Button \n              variant={bulkOperation === 'delete' ? 'destructive' : 'default'}\n              onClick={handleBulkAction}\n            >\n              Confirm Action\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Edit User Modal */}\n      {editingUser && (\n        <Dialog open={!!editingUser} onOpenChange={() => setEditingUser(null)}>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>Edit User: {editingUser.displayName}</DialogTitle>\n              <DialogDescription>\n                Update user information and settings.\n              </DialogDescription>\n            </DialogHeader>\n            \n            <Tabs defaultValue=\"basic\" className=\"space-y-4\">\n              <TabsList>\n                <TabsTrigger value=\"basic\">Basic Info</TabsTrigger>\n                <TabsTrigger value=\"security\">Security</TabsTrigger>\n                <TabsTrigger value=\"activity\">Activity</TabsTrigger>\n              </TabsList>\n              \n              <TabsContent value=\"basic\" className=\"space-y-4\">\n                <div className=\"grid gap-4 md:grid-cols-2\">\n                  <Input label=\"First Name\" defaultValue={editingUser.firstName} />\n                  <Input label=\"Last Name\" defaultValue={editingUser.lastName} />\n                </div>\n                <Input label=\"Username\" defaultValue={editingUser.username} />\n                <Input label=\"Email\" type=\"email\" defaultValue={editingUser.email} />\n                <Input label=\"Display Name\" defaultValue={editingUser.displayName} />\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Primary Role</label>\n                  <select \n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    defaultValue={editingUser.primaryRole}\n                  >\n                    <option value=\"User\">User</option>\n                    <option value=\"Author\">Author</option>\n                    <option value=\"Admin\">Admin</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium mb-2\">Status</label>\n                  <select \n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    defaultValue={editingUser.status}\n                  >\n                    <option value=\"Active\">Active</option>\n                    <option value=\"Inactive\">Inactive</option>\n                    <option value=\"Suspended\">Suspended</option>\n                    <option value=\"Banned\">Banned</option>\n                  </select>\n                </div>\n              </TabsContent>\n              \n              <TabsContent value=\"security\" className=\"space-y-4\">\n                <div className=\"grid gap-4 md:grid-cols-2\">\n                  <div className=\"flex items-center space-x-2\">\n                    <input \n                      type=\"checkbox\" \n                      id=\"emailVerified\" \n                      className=\"rounded\" \n                      defaultChecked={editingUser.emailVerified}\n                    />\n                    <label htmlFor=\"emailVerified\" className=\"text-sm\">Email Verified</label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <input \n                      type=\"checkbox\" \n                      id=\"twoFactorEnabled\" \n                      className=\"rounded\" \n                      defaultChecked={editingUser.twoFactorEnabled}\n                    />\n                    <label htmlFor=\"twoFactorEnabled\" className=\"text-sm\">Two-Factor Authentication</label>\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium\">Failed Login Attempts</label>\n                  <div className=\"text-sm text-gray-600\">{editingUser.failedLoginAttempts}</div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium\">Total Logins</label>\n                  <div className=\"text-sm text-gray-600\">{editingUser.loginCount}</div>\n                </div>\n                {editingUser.lockoutEnd && (\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium\">Lockout Until</label>\n                    <div className=\"text-sm text-gray-600\">{formatDateTime(editingUser.lockoutEnd)}</div>\n                  </div>\n                )}\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium\">Last Known IP</label>\n                  <div className=\"text-sm text-gray-600\">{editingUser.ipAddress}</div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium\">Location</label>\n                  <div className=\"text-sm text-gray-600\">{editingUser.location}</div>\n                </div>\n              </TabsContent>\n              \n              <TabsContent value=\"activity\" className=\"space-y-4\">\n                <div className=\"grid gap-4 md:grid-cols-2\">\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium\">Registration Date</label>\n                    <div className=\"text-sm text-gray-600\">{formatDateTime(editingUser.registrationDate)}</div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium\">Last Login</label>\n                    <div className=\"text-sm text-gray-600\">\n                      {editingUser.lastLogin ? formatDateTime(editingUser.lastLogin) : 'Never'}\n                    </div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium\">Last Activity</label>\n                    <div className=\"text-sm text-gray-600\">{formatDateTime(editingUser.lastActivity)}</div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium\">Account Age</label>\n                    <div className=\"text-sm text-gray-600\">{editingUser.accountAge}</div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium\">Posts Created</label>\n                    <div className=\"text-sm text-gray-600\">{editingUser.postCount}</div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium\">Comments Made</label>\n                    <div className=\"text-sm text-gray-600\">{editingUser.commentCount}</div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium\">Profile Completion</label>\n                    <div className=\"text-sm text-gray-600\">{editingUser.profileCompletion}%</div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm font-medium\">Online Status</label>\n                    <div className=\"text-sm text-gray-600\">\n                      {editingUser.isOnline ? 'Online' : 'Offline'}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium\">Admin Notes</label>\n                  <textarea \n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    rows={3}\n                    defaultValue={editingUser.notes || ''}\n                    placeholder=\"Add notes about this user...\"\n                  />\n                </div>\n              </TabsContent>\n            </Tabs>\n            \n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setEditingUser(null)}>\n                Cancel\n              </Button>\n              <Button onClick={() => {\n                alert('User update functionality would be implemented here');\n                setEditingUser(null);\n              }}>\n                Save Changes\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};\n\nexport default UserManagement;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/archive/ArchivePage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/auth/LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/auth/RegisterPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/auth/ResetPasswordPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/blog/BlogListPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/blog/BlogPostPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/blog/BlogPostPageEnhanced.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Enhanced Blog Post Page with Complete SEO Implementation\n * Demonstrates the full SEO solution for React 19\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useSEO, generateBlogPostStructuredData } from '@/hooks/useSEO';\n\ninterface BlogPost {\n  id: string;\n  title: string;\n  content: string;\n  excerpt: string;\n  author: {\n    name: string;\n    avatar?: string;\n  };\n  publishedAt: string;\n  updatedAt?: string;\n  coverImage?: string;\n  tags: string[];\n  category: string;\n  slug: string;\n  readingTime: number;\n  views?: number;\n}\n\nexport function BlogPostPageEnhanced() {\n  const { slug } = useParams<{ slug: string }>();\n  const [post, setPost] = useState<BlogPost | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  // Fetch post data (simulated)\n  useEffect(() => {\n    const fetchPost = async () => {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 500));\n\n      // Example post data\n      const mockPost: BlogPost = {\n        id: '1',\n        slug: slug || 'example-post',\n        title: '深入理解 React 19 的新特性',\n        excerpt: '探索 React 19 带来的革命性变化，包括新的并发特性、改进的性能和更好的开发体验。',\n        content: `\n          # 深入理解 React 19 的新特性\n\n          React 19 带来了许多令人兴奋的新特性和改进...\n\n          ## 主要更新\n\n          ### 1. 改进的并发渲染\n          React 19 进一步优化了并发渲染机制...\n\n          ### 2. 自动批处理\n          现在所有的状态更新都会自动批处理...\n\n          ### 3. 新的 Hook\n          引入了几个新的实用 Hook...\n\n          ## 性能优化\n          React 19 在性能方面做了大量优化...\n\n          ## 迁移指南\n          从 React 18 升级到 React 19 相对简单...\n        `,\n        author: {\n          name: 'Maple Blog Team',\n          avatar: '/images/authors/team.jpg',\n        },\n        publishedAt: '2025-01-22T12:00:00Z',\n        updatedAt: '2025-01-23T08:00:00Z',\n        coverImage: '/images/blog/react-19.jpg',\n        tags: ['React', 'JavaScript', 'Web Development', 'Frontend'],\n        category: '技术',\n        readingTime: 5,\n        views: 1234,\n      };\n\n      setPost(mockPost);\n      setLoading(false);\n    };\n\n    fetchPost();\n  }, [slug]);\n\n  // Set up SEO when post data is loaded\n  useSEO({\n    title: post?.title,\n    description: post?.excerpt,\n    keywords: post?.tags.join(', '),\n    author: post?.author.name,\n    image: post?.coverImage ? `${window.location.origin}${post.coverImage}` : undefined,\n    url: post ? `${window.location.origin}/blog/${post.slug}` : undefined,\n    type: 'article',\n    publishedTime: post?.publishedAt,\n    modifiedTime: post?.updatedAt,\n    section: post?.category,\n    tags: post?.tags,\n    canonical: post ? `${window.location.origin}/blog/${post.slug}` : undefined,\n    structuredData: post ? generateBlogPostStructuredData({\n      title: post.title,\n      description: post.excerpt,\n      author: post.author.name,\n      publishedAt: post.publishedAt,\n      updatedAt: post.updatedAt,\n      image: post.coverImage ? `${window.location.origin}${post.coverImage}` : undefined,\n      url: `${window.location.origin}/blog/${post.slug}`,\n      tags: post.tags,\n    }) : undefined,\n  });\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (!post) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">文章未找到</h1>\n          <p className=\"mt-2 text-gray-600\">请检查链接是否正确</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <article className=\"max-w-4xl mx-auto px-4 py-8\">\n      {/* Article Header */}\n      <header className=\"mb-8\">\n        {/* Category */}\n        <div className=\"mb-4\">\n          <span className=\"inline-block px-3 py-1 text-sm font-medium text-blue-600 bg-blue-100 rounded-full\">\n            {post.category}\n          </span>\n        </div>\n\n        {/* Title */}\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">{post.title}</h1>\n\n        {/* Excerpt */}\n        <p className=\"text-xl text-gray-600 mb-6\">{post.excerpt}</p>\n\n        {/* Meta Information */}\n        <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\n          <div className=\"flex items-center\">\n            {post.author.avatar && (\n              <img\n                src={post.author.avatar}\n                alt={post.author.name}\n                className=\"w-10 h-10 rounded-full mr-2\"\n              />\n            )}\n            <span className=\"font-medium\">{post.author.name}</span>\n          </div>\n          <span>•</span>\n          <time dateTime={post.publishedAt}>\n            {new Date(post.publishedAt).toLocaleDateString('zh-CN', {\n              year: 'numeric',\n              month: 'long',\n              day: 'numeric',\n            })}\n          </time>\n          <span>•</span>\n          <span>{post.readingTime} 分钟阅读</span>\n          {post.views && (\n            <>\n              <span>•</span>\n              <span>{post.views.toLocaleString()} 次浏览</span>\n            </>\n          )}\n        </div>\n      </header>\n\n      {/* Cover Image */}\n      {post.coverImage && (\n        <figure className=\"mb-8\">\n          <img\n            src={post.coverImage}\n            alt={post.title}\n            className=\"w-full h-auto rounded-lg shadow-lg\"\n          />\n        </figure>\n      )}\n\n      {/* Article Content */}\n      <div\n        className=\"prose prose-lg max-w-none\"\n        dangerouslySetInnerHTML={{ __html: post.content }}\n      />\n\n      {/* Tags */}\n      {post.tags.length > 0 && (\n        <footer className=\"mt-8 pt-8 border-t border-gray-200\">\n          <div className=\"flex items-center flex-wrap gap-2\">\n            <span className=\"text-sm font-medium text-gray-700\">标签：</span>\n            {post.tags.map(tag => (\n              <a\n                key={tag}\n                href={`/tag/${tag.toLowerCase()}`}\n                className=\"inline-block px-3 py-1 text-sm text-gray-600 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors\"\n              >\n                #{tag}\n              </a>\n            ))}\n          </div>\n        </footer>\n      )}\n\n      {/* Social Sharing */}\n      <div className=\"mt-8 flex items-center space-x-4\">\n        <span className=\"text-sm font-medium text-gray-700\">分享：</span>\n        <button\n          onClick={() => {\n            if (navigator.share) {\n              navigator.share({\n                title: post.title,\n                text: post.excerpt,\n                url: window.location.href,\n              });\n            }\n          }}\n          className=\"p-2 text-gray-600 hover:text-blue-600 transition-colors\"\n          aria-label=\"分享文章\"\n        >\n          <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\" />\n          </svg>\n        </button>\n      </div>\n    </article>\n  );\n}","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/pages/errors/NotFoundPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/analyticsService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/api/client.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[360,363],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[360,363],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":202,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6260,6263],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6260,6263],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":206,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6402,6405],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6402,6405],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":206,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":206,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6411,6414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6411,6414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":210,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6569,6572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6569,6572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":210,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6578,6581],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6578,6581],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":214,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6737,6740],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6737,6740],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":214,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6746,6749],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6746,6749],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":218,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6908,6911],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6908,6911],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":223,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":223,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7099,7102],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7099,7102],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":275,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8490,8493],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8490,8493],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse, AxiosError, AxiosDefaults } from 'axios';\nimport type { ApiErrorResponse } from '../../types/home';\nimport { ENV_CONFIG, isDevelopment } from '../../types/env';\n\n// API response data types\ninterface ApiResponseData {\n  message?: string;\n  errors?: Record<string, string[]> | string[];\n  data?: any;\n  success?: boolean;\n}\n\n// Enhanced Axios error with proper typing\ninterface TypedAxiosError extends AxiosError {\n  response?: AxiosResponse<ApiResponseData>;\n}\n\n// API configuration\nconst API_CONFIG: AxiosRequestConfig = {\n  baseURL: ENV_CONFIG.API_URL,\n  timeout: ENV_CONFIG.API_TIMEOUT,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  },\n};\n\n/**\n * Enhanced axios instance with authentication and error handling\n */\nclass ApiClient {\n  private client: AxiosInstance;\n\n  constructor() {\n    this.client = axios.create(API_CONFIG);\n    this.setupInterceptors();\n  }\n\n  private setupInterceptors() {\n    // Request interceptor for authentication\n    this.client.interceptors.request.use(\n      (config) => {\n        // Add auth token if available\n        const token = this.getAuthToken();\n        if (token) {\n          config.headers.Authorization = `Bearer ${token}`;\n        }\n\n        // Add request ID for tracing\n        config.headers['X-Request-ID'] = this.generateRequestId();\n\n        // Add timestamp\n        config.headers['X-Request-Time'] = new Date().toISOString();\n\n        return config;\n      },\n      (error: AxiosError) => {\n        console.error('Request interceptor error:', error);\n        return Promise.reject(error);\n      }\n    );\n\n    // Response interceptor for error handling\n    this.client.interceptors.response.use(\n      (response) => {\n        // Log successful responses in development\n        if (isDevelopment()) {\n          console.debug(`API Success: ${response.config.method?.toUpperCase()} ${response.config.url}`, {\n            status: response.status,\n            data: response.data,\n          });\n        }\n        return response;\n      },\n      (error: TypedAxiosError) => {\n        return this.handleResponseError(error);\n      }\n    );\n  }\n\n  private getAuthToken(): string | null {\n    // Get token from localStorage or your auth store\n    return localStorage.getItem('authToken');\n  }\n\n  private generateRequestId(): string {\n    return `req_${Date.now()}_${Math.random().toString(36).substring(2)}`;\n  }\n\n  private handleResponseError(error: TypedAxiosError): Promise<never> {\n    const { response, request, message } = error;\n\n    // Network error (no response received)\n    if (!response && request) {\n      console.error('Network error:', error);\n      const networkError: ApiErrorResponse = {\n        success: false,\n        message: 'Network error. Please check your connection and try again.',\n        timestamp: new Date().toISOString(),\n      };\n      return Promise.reject(networkError);\n    }\n\n    // Request setup error\n    if (!response && !request) {\n      console.error('Request setup error:', error);\n      const setupError: ApiErrorResponse = {\n        success: false,\n        message: 'Request configuration error. Please try again.',\n        timestamp: new Date().toISOString(),\n      };\n      return Promise.reject(setupError);\n    }\n\n    // HTTP error response received\n    if (response) {\n      console.error(`API Error: ${response.status} ${response.statusText}`, {\n        url: response.config.url,\n        method: response.config.method,\n        data: response.data,\n      });\n\n      // Handle specific status codes\n      switch (response.status) {\n        case 401:\n          this.handleUnauthorized();\n          break;\n        case 403:\n          console.warn('Access forbidden:', response.config.url);\n          break;\n        case 429:\n          console.warn('Rate limit exceeded:', response.config.url);\n          break;\n        case 500:\n          console.error('Server error:', response.config.url);\n          break;\n      }\n\n      // Return structured error response\n      const responseData = response.data as ApiResponseData | undefined;\n\n      // Handle errors field type conversion\n      let errors: Record<string, string[]> | undefined;\n      if (responseData?.errors) {\n        if (Array.isArray(responseData.errors)) {\n          // Convert string array to record format\n          errors = { general: responseData.errors };\n        } else {\n          // Already in record format\n          errors = responseData.errors;\n        }\n      }\n\n      const apiError: ApiErrorResponse = {\n        success: false,\n        message: responseData?.message || this.getStatusMessage(response.status),\n        errors,\n        timestamp: new Date().toISOString(),\n      };\n      return Promise.reject(apiError);\n    }\n\n    // Fallback error\n    const fallbackError: ApiErrorResponse = {\n      success: false,\n      message: message || 'An unexpected error occurred',\n      timestamp: new Date().toISOString(),\n    };\n    return Promise.reject(fallbackError);\n  }\n\n  private handleUnauthorized(): void {\n    // Clear auth token\n    localStorage.removeItem('authToken');\n\n    // Redirect to login if not already there\n    if (typeof window !== 'undefined' && !window.location.pathname.includes('/login')) {\n      window.location.href = '/login?expired=true';\n    }\n  }\n\n  private getStatusMessage(status: number): string {\n    const statusMessages: Record<number, string> = {\n      400: 'Bad request. Please check your input and try again.',\n      401: 'Authentication required. Please log in.',\n      403: 'Access denied. You do not have permission for this action.',\n      404: 'Resource not found.',\n      405: 'Method not allowed.',\n      409: 'Conflict. The resource already exists or is in use.',\n      422: 'Validation failed. Please check your input.',\n      429: 'Too many requests. Please try again later.',\n      500: 'Internal server error. Please try again later.',\n      502: 'Bad gateway. Please try again later.',\n      503: 'Service unavailable. Please try again later.',\n      504: 'Gateway timeout. Please try again later.',\n    };\n\n    return statusMessages[status] || 'An unexpected error occurred.';\n  }\n\n  // HTTP methods with proper typing\n  async get<T = any>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.client.get<T>(url, config);\n  }\n\n  async post<T = any, D = any>(url: string, data?: D, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.client.post<T>(url, data, config);\n  }\n\n  async put<T = any, D = any>(url: string, data?: D, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.client.put<T>(url, data, config);\n  }\n\n  async patch<T = any, D = any>(url: string, data?: D, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.client.patch<T>(url, data, config);\n  }\n\n  async delete<T = any>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.client.delete<T>(url, config);\n  }\n\n  // Upload file with progress tracking\n  async uploadFile<T = any>(\n    url: string,\n    file: File,\n    onProgress?: (progressEvent: { loaded: number; total?: number; progress?: number }) => void,\n    config?: AxiosRequestConfig\n  ): Promise<AxiosResponse<T>> {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    return this.client.post<T>(url, formData, {\n      ...config,\n      headers: {\n        ...config?.headers,\n        'Content-Type': 'multipart/form-data',\n      },\n      onUploadProgress: onProgress,\n    });\n  }\n\n  // Download file\n  async downloadFile(\n    url: string,\n    filename?: string,\n    config?: AxiosRequestConfig\n  ): Promise<void> {\n    const response = await this.client.get(url, {\n      ...config,\n      responseType: 'blob',\n    });\n\n    const blob = new Blob([response.data]);\n    const downloadUrl = window.URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = downloadUrl;\n    link.download = filename || 'download';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    window.URL.revokeObjectURL(downloadUrl);\n  }\n\n  // Cancel request using AbortController (modern approach)\n  createCancelToken(): AbortController {\n    return new AbortController();\n  }\n\n  // Legacy cancel token support\n  createLegacyCancelToken() {\n    return axios.CancelToken.source();\n  }\n\n  // Check if request was cancelled\n  isCancel(error: any): boolean {\n    return axios.isCancel(error);\n  }\n\n  // Update base URL\n  setBaseURL(baseURL: string): void {\n    this.client.defaults.baseURL = baseURL;\n  }\n\n  // Update auth token\n  setAuthToken(token: string): void {\n    localStorage.setItem('authToken', token);\n  }\n\n  // Clear auth token\n  clearAuthToken(): void {\n    localStorage.removeItem('authToken');\n  }\n\n  // Get current config\n  getConfig(): AxiosRequestConfig {\n    const defaults = this.client.defaults as AxiosDefaults;\n    return {\n      baseURL: defaults.baseURL,\n      timeout: defaults.timeout,\n      headers: defaults.headers ? Object.assign({}, defaults.headers) : undefined,\n      withCredentials: defaults.withCredentials,\n      responseType: defaults.responseType,\n      maxRedirects: defaults.maxRedirects,\n      validateStatus: defaults.validateStatus,\n    } as AxiosRequestConfig;\n  }\n}\n\n// Create singleton instance\nexport const apiClient = new ApiClient();\n\n// Export for testing or custom instances\nexport { ApiClient };\n\n// Export types for use in other files\nexport type { AxiosRequestConfig, AxiosResponse, AxiosError };","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/auth/authApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/blog/blogApi.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AxiosError' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FileUploadRequest' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'OperationResultWithData' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":314,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":314,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11559,11562],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11559,11562],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":315,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":315,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11622,11625],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11622,11625],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Blog Posts API Service using TanStack Query\n * Handles all blog post-related API communications with the backend\n */\n\nimport { useMutation, useQuery, useQueryClient, useInfiniteQuery } from '@tanstack/react-query';\nimport { AxiosError, AxiosResponse, AxiosProgressEvent } from 'axios';\nimport {\n  Post,\n  PostListResponse,\n  CreatePostRequest,\n  UpdatePostRequest,\n  PostSearchParams,\n  PostStatistics,\n  BulkOperation,\n  BulkOperationResult,\n  ContentRevision,\n  AutoSaveDraft,\n  FileUploadRequest,\n  FileUploadResponse,\n  ContentExport,\n  ContentImport,\n  BlogAnalytics,\n  ApiResponse,\n  OperationResult,\n  OperationResultWithData,\n  DEFAULT_PAGE_SIZE,\n} from '../../types/blog';\nimport { apiClient } from '../api/client';\nimport { useBlogStore } from '../../stores/blogStore';\n\n// API endpoints\nconst API_ENDPOINTS = {\n  POSTS: {\n    LIST: '/api/blog/posts',\n    CREATE: '/api/blog/posts',\n    GET: (id: string) => `/api/blog/posts/${id}`,\n    UPDATE: (id: string) => `/api/blog/posts/${id}`,\n    DELETE: (id: string) => `/api/blog/posts/${id}`,\n    PUBLISH: (id: string) => `/api/blog/posts/${id}/publish`,\n    UNPUBLISH: (id: string) => `/api/blog/posts/${id}/unpublish`,\n    ARCHIVE: (id: string) => `/api/blog/posts/${id}/archive`,\n    DUPLICATE: (id: string) => `/api/blog/posts/${id}/duplicate`,\n    BULK: '/api/blog/posts/bulk',\n    SEARCH: '/api/blog/posts/search',\n    STATISTICS: '/api/blog/posts/statistics',\n    REVISIONS: (id: string) => `/api/blog/posts/${id}/revisions`,\n    RESTORE_REVISION: (id: string, revisionId: string) => `/api/blog/posts/${id}/revisions/${revisionId}/restore`,\n  },\n  DRAFTS: {\n    SAVE: '/api/blog/drafts',\n    LIST: '/api/blog/drafts',\n    GET: (id: string) => `/api/blog/drafts/${id}`,\n    DELETE: (id: string) => `/api/blog/drafts/${id}`,\n  },\n  FILES: {\n    UPLOAD: '/api/blog/files/upload',\n    DELETE: (id: string) => `/api/blog/files/${id}`,\n    OPTIMIZE: '/api/blog/files/optimize',\n  },\n  EXPORT: {\n    POSTS: '/api/blog/export',\n  },\n  IMPORT: {\n    POSTS: '/api/blog/import',\n  },\n  ANALYTICS: {\n    OVERVIEW: '/api/blog/analytics/overview',\n    POSTS: '/api/blog/analytics/posts',\n  },\n} as const;\n\n// Query keys for TanStack Query caching\nexport const BLOG_QUERY_KEYS = {\n  POSTS: ['blog', 'posts'] as const,\n  POST: (id: string) => ['blog', 'posts', id] as const,\n  POST_LIST: (params: PostSearchParams) => ['blog', 'posts', 'list', params] as const,\n  POST_SEARCH: (query: string, params: PostSearchParams) => ['blog', 'posts', 'search', query, params] as const,\n  POST_STATISTICS: ['blog', 'posts', 'statistics'] as const,\n  POST_REVISIONS: (id: string) => ['blog', 'posts', id, 'revisions'] as const,\n  DRAFTS: ['blog', 'drafts'] as const,\n  DRAFT: (id: string) => ['blog', 'drafts', id] as const,\n  ANALYTICS: ['blog', 'analytics'] as const,\n  ANALYTICS_POSTS: (period: string) => ['blog', 'analytics', 'posts', period] as const,\n} as const;\n\n// API response handler\nconst handleApiResponse = <T>(response: AxiosResponse<ApiResponse<T>>): T => {\n  if (!response.data.success) {\n    throw new Error(response.data.message || 'API request failed');\n  }\n  return response.data.data!;\n};\n\n// Blog posts API functions\nexport const blogPostsApi = {\n  // Get paginated list of posts\n  getPosts: async (params: PostSearchParams = {}): Promise<PostListResponse> => {\n    const searchParams = new URLSearchParams();\n\n    // Add pagination parameters\n    searchParams.append('page', (params.page || 1).toString());\n    searchParams.append('pageSize', (params.pageSize || DEFAULT_PAGE_SIZE).toString());\n\n    // Add search and filtering parameters\n    if (params.query) searchParams.append('query', params.query);\n    if (params.status && params.status.length > 0) {\n      params.status.forEach(status => searchParams.append('status', status.toString()));\n    }\n    if (params.categoryId) searchParams.append('categoryId', params.categoryId);\n    if (params.tagIds && params.tagIds.length > 0) {\n      params.tagIds.forEach(tagId => searchParams.append('tagIds', tagId));\n    }\n    if (params.authorId) searchParams.append('authorId', params.authorId);\n    if (params.dateFrom) searchParams.append('dateFrom', params.dateFrom);\n    if (params.dateTo) searchParams.append('dateTo', params.dateTo);\n    if (params.sortBy) searchParams.append('sortBy', params.sortBy);\n    if (params.sortOrder) searchParams.append('sortOrder', params.sortOrder);\n    if (params.isSticky !== undefined) searchParams.append('isSticky', params.isSticky.toString());\n    if (params.isFeatured !== undefined) searchParams.append('isFeatured', params.isFeatured.toString());\n    if (params.allowComments !== undefined) searchParams.append('allowComments', params.allowComments.toString());\n\n    const response = await apiClient.get<ApiResponse<PostListResponse>>(\n      `${API_ENDPOINTS.POSTS.LIST}?${searchParams}`\n    );\n    return handleApiResponse(response);\n  },\n\n  // Get single post by ID\n  getPost: async (id: string): Promise<Post> => {\n    const response = await apiClient.get<ApiResponse<Post>>(API_ENDPOINTS.POSTS.GET(id));\n    return handleApiResponse(response);\n  },\n\n  // Create new post\n  createPost: async (data: CreatePostRequest): Promise<Post> => {\n    const response = await apiClient.post<ApiResponse<Post>>(API_ENDPOINTS.POSTS.CREATE, data);\n    return handleApiResponse(response);\n  },\n\n  // Update existing post\n  updatePost: async (data: UpdatePostRequest): Promise<Post> => {\n    const response = await apiClient.put<ApiResponse<Post>>(API_ENDPOINTS.POSTS.UPDATE(data.id), data);\n    return handleApiResponse(response);\n  },\n\n  // Delete post\n  deletePost: async (id: string): Promise<void> => {\n    await apiClient.delete(API_ENDPOINTS.POSTS.DELETE(id));\n  },\n\n  // Publish post\n  publishPost: async (id: string, publishedAt?: string): Promise<Post> => {\n    const response = await apiClient.post<ApiResponse<Post>>(\n      API_ENDPOINTS.POSTS.PUBLISH(id),\n      publishedAt ? { publishedAt } : undefined\n    );\n    return handleApiResponse(response);\n  },\n\n  // Unpublish post\n  unpublishPost: async (id: string): Promise<Post> => {\n    const response = await apiClient.post<ApiResponse<Post>>(API_ENDPOINTS.POSTS.UNPUBLISH(id));\n    return handleApiResponse(response);\n  },\n\n  // Archive post\n  archivePost: async (id: string): Promise<Post> => {\n    const response = await apiClient.post<ApiResponse<Post>>(API_ENDPOINTS.POSTS.ARCHIVE(id));\n    return handleApiResponse(response);\n  },\n\n  // Duplicate post\n  duplicatePost: async (id: string): Promise<Post> => {\n    const response = await apiClient.post<ApiResponse<Post>>(API_ENDPOINTS.POSTS.DUPLICATE(id));\n    return handleApiResponse(response);\n  },\n\n  // Bulk operations\n  bulkOperation: async (operation: BulkOperation): Promise<BulkOperationResult> => {\n    const response = await apiClient.post<ApiResponse<BulkOperationResult>>(\n      API_ENDPOINTS.POSTS.BULK,\n      operation\n    );\n    return handleApiResponse(response);\n  },\n\n  // Search posts\n  searchPosts: async (query: string, params: PostSearchParams = {}): Promise<PostListResponse> => {\n    const searchParams = new URLSearchParams();\n    searchParams.append('q', query);\n    searchParams.append('page', (params.page || 1).toString());\n    searchParams.append('pageSize', (params.pageSize || DEFAULT_PAGE_SIZE).toString());\n\n    if (params.status && params.status.length > 0) {\n      params.status.forEach(status => searchParams.append('status', status.toString()));\n    }\n    if (params.categoryId) searchParams.append('categoryId', params.categoryId);\n    if (params.tagIds && params.tagIds.length > 0) {\n      params.tagIds.forEach(tagId => searchParams.append('tagIds', tagId));\n    }\n    if (params.sortBy) searchParams.append('sortBy', params.sortBy);\n    if (params.sortOrder) searchParams.append('sortOrder', params.sortOrder);\n\n    const response = await apiClient.get<ApiResponse<PostListResponse>>(\n      `${API_ENDPOINTS.POSTS.SEARCH}?${searchParams}`\n    );\n    return handleApiResponse(response);\n  },\n\n  // Get post statistics\n  getPostStatistics: async (): Promise<PostStatistics> => {\n    const response = await apiClient.get<ApiResponse<PostStatistics>>(API_ENDPOINTS.POSTS.STATISTICS);\n    return handleApiResponse(response);\n  },\n\n  // Get post revisions\n  getPostRevisions: async (id: string): Promise<ContentRevision[]> => {\n    const response = await apiClient.get<ApiResponse<ContentRevision[]>>(API_ENDPOINTS.POSTS.REVISIONS(id));\n    return handleApiResponse(response);\n  },\n\n  // Restore post revision\n  restoreRevision: async (postId: string, revisionId: string): Promise<Post> => {\n    const response = await apiClient.post<ApiResponse<Post>>(\n      API_ENDPOINTS.POSTS.RESTORE_REVISION(postId, revisionId)\n    );\n    return handleApiResponse(response);\n  },\n\n  // Draft management\n  saveDraft: async (draft: Partial<CreatePostRequest>): Promise<AutoSaveDraft> => {\n    const response = await apiClient.post<ApiResponse<AutoSaveDraft>>(API_ENDPOINTS.DRAFTS.SAVE, draft);\n    return handleApiResponse(response);\n  },\n\n  getDrafts: async (): Promise<AutoSaveDraft[]> => {\n    const response = await apiClient.get<ApiResponse<AutoSaveDraft[]>>(API_ENDPOINTS.DRAFTS.LIST);\n    return handleApiResponse(response);\n  },\n\n  getDraft: async (id: string): Promise<AutoSaveDraft> => {\n    const response = await apiClient.get<ApiResponse<AutoSaveDraft>>(API_ENDPOINTS.DRAFTS.GET(id));\n    return handleApiResponse(response);\n  },\n\n  deleteDraft: async (id: string): Promise<void> => {\n    await apiClient.delete(API_ENDPOINTS.DRAFTS.DELETE(id));\n  },\n\n  // File management\n  uploadFile: async (\n    file: File,\n    onProgress?: (progressEvent: AxiosProgressEvent) => void\n  ): Promise<FileUploadResponse> => {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    const response = await apiClient.post<ApiResponse<FileUploadResponse>>(\n      API_ENDPOINTS.FILES.UPLOAD,\n      formData,\n      {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n        onUploadProgress: onProgress,\n      }\n    );\n    return handleApiResponse(response);\n  },\n\n  deleteFile: async (fileId: string): Promise<void> => {\n    await apiClient.delete(API_ENDPOINTS.FILES.DELETE(fileId));\n  },\n\n  optimizeImages: async (imageIds: string[]): Promise<void> => {\n    await apiClient.post(API_ENDPOINTS.FILES.OPTIMIZE, { imageIds });\n  },\n\n  // Export/Import\n  exportContent: async (exportConfig: ContentExport): Promise<Blob> => {\n    const response = await apiClient.post(API_ENDPOINTS.EXPORT.POSTS, exportConfig, {\n      responseType: 'blob',\n    });\n    return response.data;\n  },\n\n  importContent: async (importConfig: ContentImport): Promise<OperationResult> => {\n    const formData = new FormData();\n    formData.append('file', importConfig.file);\n    formData.append('source', importConfig.source);\n    formData.append('options', JSON.stringify(importConfig.options));\n\n    const response = await apiClient.post<ApiResponse<OperationResult>>(\n      API_ENDPOINTS.IMPORT.POSTS,\n      formData,\n      {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      }\n    );\n    return handleApiResponse(response);\n  },\n\n  // Analytics\n  getAnalytics: async (period: 'week' | 'month' | 'quarter' | 'year' = 'month'): Promise<BlogAnalytics> => {\n    const response = await apiClient.get<ApiResponse<BlogAnalytics>>(\n      `${API_ENDPOINTS.ANALYTICS.OVERVIEW}?period=${period}`\n    );\n    return handleApiResponse(response);\n  },\n\n  getPostAnalytics: async (postId: string, period: string = 'month'): Promise<any> => {\n    const response = await apiClient.get<ApiResponse<any>>(\n      `${API_ENDPOINTS.ANALYTICS.POSTS}/${postId}?period=${period}`\n    );\n    return handleApiResponse(response);\n  },\n};\n\n// TanStack Query hooks for blog posts\nexport const useBlogPostQueries = () => {\n  // Query for paginated posts list\n  const usePostsList = (params: PostSearchParams = {}, enabled = true) => {\n    return useQuery({\n      queryKey: BLOG_QUERY_KEYS.POST_LIST(params),\n      queryFn: () => blogPostsApi.getPosts(params),\n      enabled,\n      staleTime: 2 * 60 * 1000, // 2 minutes\n      gcTime: 5 * 60 * 1000, // 5 minutes\n    });\n  };\n\n  // Infinite query for posts (for infinite scroll)\n  const usePostsInfinite = (params: PostSearchParams = {}) => {\n    return useInfiniteQuery({\n      queryKey: BLOG_QUERY_KEYS.POST_LIST(params),\n      queryFn: ({ pageParam = 1 }) =>\n        blogPostsApi.getPosts({ ...params, page: pageParam }),\n      getNextPageParam: (lastPage) =>\n        lastPage.hasNextPage ? lastPage.pageNumber + 1 : undefined,\n      initialPageParam: 1,\n      staleTime: 2 * 60 * 1000,\n    });\n  };\n\n  // Query for single post\n  const usePost = (id: string, enabled = true) => {\n    return useQuery({\n      queryKey: BLOG_QUERY_KEYS.POST(id),\n      queryFn: () => blogPostsApi.getPost(id),\n      enabled: enabled && !!id,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes\n    });\n  };\n\n  // Query for post search results\n  const usePostsSearch = (query: string, params: PostSearchParams = {}, enabled = true) => {\n    return useQuery({\n      queryKey: BLOG_QUERY_KEYS.POST_SEARCH(query, params),\n      queryFn: () => blogPostsApi.searchPosts(query, params),\n      enabled: enabled && !!query.trim(),\n      staleTime: 1 * 60 * 1000, // 1 minute for search results\n    });\n  };\n\n  // Query for post statistics\n  const usePostStatistics = (enabled = true) => {\n    return useQuery({\n      queryKey: BLOG_QUERY_KEYS.POST_STATISTICS,\n      queryFn: blogPostsApi.getPostStatistics,\n      enabled,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      refetchInterval: 5 * 60 * 1000, // Auto-refetch every 5 minutes\n    });\n  };\n\n  // Query for post revisions\n  const usePostRevisions = (postId: string, enabled = true) => {\n    return useQuery({\n      queryKey: BLOG_QUERY_KEYS.POST_REVISIONS(postId),\n      queryFn: () => blogPostsApi.getPostRevisions(postId),\n      enabled: enabled && !!postId,\n      staleTime: 1 * 60 * 1000,\n    });\n  };\n\n  // Query for drafts\n  const useDrafts = (enabled = true) => {\n    return useQuery({\n      queryKey: BLOG_QUERY_KEYS.DRAFTS,\n      queryFn: blogPostsApi.getDrafts,\n      enabled,\n      staleTime: 30 * 1000, // 30 seconds for drafts\n    });\n  };\n\n  // Query for single draft\n  const useDraft = (id: string, enabled = true) => {\n    return useQuery({\n      queryKey: BLOG_QUERY_KEYS.DRAFT(id),\n      queryFn: () => blogPostsApi.getDraft(id),\n      enabled: enabled && !!id,\n      staleTime: 30 * 1000,\n    });\n  };\n\n  // Query for analytics\n  const useAnalytics = (period: 'week' | 'month' | 'quarter' | 'year' = 'month', enabled = true) => {\n    return useQuery({\n      queryKey: BLOG_QUERY_KEYS.ANALYTICS_POSTS(period),\n      queryFn: () => blogPostsApi.getAnalytics(period),\n      enabled,\n      staleTime: 10 * 60 * 1000, // 10 minutes for analytics\n      refetchInterval: 10 * 60 * 1000,\n    });\n  };\n\n  return {\n    usePostsList,\n    usePostsInfinite,\n    usePost,\n    usePostsSearch,\n    usePostStatistics,\n    usePostRevisions,\n    useDrafts,\n    useDraft,\n    useAnalytics,\n  };\n};\n\n// TanStack Query mutations for blog posts\nexport const useBlogPostMutations = () => {\n  const queryClient = useQueryClient();\n  const blogStore = useBlogStore();\n\n  // Create post mutation\n  const createPostMutation = useMutation({\n    mutationFn: blogPostsApi.createPost,\n    onMutate: async (_newPost) => {\n      await queryClient.cancelQueries({ queryKey: BLOG_QUERY_KEYS.POSTS });\n      blogStore.setLoadingState('savingPost', true);\n    },\n    onSuccess: (createdPost) => {\n      blogStore.addPost(createdPost);\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POSTS });\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POST_STATISTICS });\n      blogStore.markSaved();\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to create post');\n    },\n    onSettled: () => {\n      blogStore.setLoadingState('savingPost', false);\n    },\n  });\n\n  // Update post mutation\n  const updatePostMutation = useMutation({\n    mutationFn: blogPostsApi.updatePost,\n    onMutate: async (updatedPost) => {\n      await queryClient.cancelQueries({ queryKey: BLOG_QUERY_KEYS.POST(updatedPost.id) });\n      blogStore.setLoadingState('savingPost', true);\n\n      // Optimistic update\n      const previousPost = queryClient.getQueryData(BLOG_QUERY_KEYS.POST(updatedPost.id));\n      if (previousPost) {\n        queryClient.setQueryData(BLOG_QUERY_KEYS.POST(updatedPost.id), {\n          ...previousPost,\n          ...updatedPost,\n          updatedAt: new Date().toISOString(),\n        });\n      }\n\n      return { previousPost };\n    },\n    onSuccess: (updatedPost) => {\n      blogStore.updatePost(updatedPost);\n      queryClient.setQueryData(BLOG_QUERY_KEYS.POST(updatedPost.id), updatedPost);\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POSTS });\n      blogStore.markSaved();\n    },\n    onError: (error, variables, context) => {\n      // Revert optimistic update\n      if (context?.previousPost) {\n        queryClient.setQueryData(BLOG_QUERY_KEYS.POST(variables.id), context.previousPost);\n      }\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to update post');\n    },\n    onSettled: () => {\n      blogStore.setLoadingState('savingPost', false);\n    },\n  });\n\n  // Delete post mutation\n  const deletePostMutation = useMutation({\n    mutationFn: blogPostsApi.deletePost,\n    onMutate: async (_postId) => {\n      blogStore.setLoadingState('deletingPost', true);\n    },\n    onSuccess: (_, postId) => {\n      blogStore.removePost(postId);\n      queryClient.removeQueries({ queryKey: BLOG_QUERY_KEYS.POST(postId) });\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POSTS });\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POST_STATISTICS });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to delete post');\n    },\n    onSettled: () => {\n      blogStore.setLoadingState('deletingPost', false);\n    },\n  });\n\n  // Publish post mutation\n  const publishPostMutation = useMutation({\n    mutationFn: ({ id, publishedAt }: { id: string; publishedAt?: string }) =>\n      blogPostsApi.publishPost(id, publishedAt),\n    onSuccess: (publishedPost) => {\n      blogStore.updatePost(publishedPost);\n      queryClient.setQueryData(BLOG_QUERY_KEYS.POST(publishedPost.id), publishedPost);\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POSTS });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to publish post');\n    },\n  });\n\n  // Unpublish post mutation\n  const unpublishPostMutation = useMutation({\n    mutationFn: blogPostsApi.unpublishPost,\n    onSuccess: (unpublishedPost) => {\n      blogStore.updatePost(unpublishedPost);\n      queryClient.setQueryData(BLOG_QUERY_KEYS.POST(unpublishedPost.id), unpublishedPost);\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POSTS });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to unpublish post');\n    },\n  });\n\n  // Archive post mutation\n  const archivePostMutation = useMutation({\n    mutationFn: blogPostsApi.archivePost,\n    onSuccess: (archivedPost) => {\n      blogStore.updatePost(archivedPost);\n      queryClient.setQueryData(BLOG_QUERY_KEYS.POST(archivedPost.id), archivedPost);\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POSTS });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to archive post');\n    },\n  });\n\n  // Duplicate post mutation\n  const duplicatePostMutation = useMutation({\n    mutationFn: blogPostsApi.duplicatePost,\n    onSuccess: (duplicatedPost) => {\n      blogStore.addPost(duplicatedPost);\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POSTS });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to duplicate post');\n    },\n  });\n\n  // Bulk operation mutation\n  const bulkOperationMutation = useMutation({\n    mutationFn: blogPostsApi.bulkOperation,\n    onMutate: () => {\n      blogStore.setLoadingState('bulkOperation', true);\n    },\n    onSuccess: (result, variables) => {\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POSTS });\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POST_STATISTICS });\n      blogStore.clearSelection();\n\n      if (variables.action === 'delete') {\n        // Remove deleted posts from store\n        variables.postIds.forEach(postId => {\n          queryClient.removeQueries({ queryKey: BLOG_QUERY_KEYS.POST(postId) });\n        });\n      }\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Bulk operation failed');\n    },\n    onSettled: () => {\n      blogStore.setLoadingState('bulkOperation', false);\n    },\n  });\n\n  // Save draft mutation\n  const saveDraftMutation = useMutation({\n    mutationFn: blogPostsApi.saveDraft,\n    onMutate: () => {\n      blogStore.setLoadingState('autoSaving', true);\n    },\n    onSuccess: (draft) => {\n      blogStore.setCurrentDraft(draft);\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.DRAFTS });\n    },\n    onError: (error) => {\n      console.warn('Failed to save draft:', error);\n    },\n    onSettled: () => {\n      blogStore.setLoadingState('autoSaving', false);\n    },\n  });\n\n  // File upload mutation\n  const uploadFileMutation = useMutation({\n    mutationFn: ({ file, onProgress }: { file: File; onProgress?: (event: AxiosProgressEvent) => void }) =>\n      blogPostsApi.uploadFile(file, onProgress),\n    onMutate: () => {\n      blogStore.setLoadingState('uploadingFile', true);\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'File upload failed');\n    },\n    onSettled: () => {\n      blogStore.setLoadingState('uploadingFile', false);\n    },\n  });\n\n  // Export content mutation\n  const exportContentMutation = useMutation({\n    mutationFn: blogPostsApi.exportContent,\n    onMutate: () => {\n      blogStore.setLoadingState('exportingContent', true);\n    },\n    onSuccess: (blob, variables) => {\n      // Create download link\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `blog-export-${variables.format}-${new Date().toISOString().split('T')[0]}.${variables.format}`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Export failed');\n    },\n    onSettled: () => {\n      blogStore.setLoadingState('exportingContent', false);\n    },\n  });\n\n  // Import content mutation\n  const importContentMutation = useMutation({\n    mutationFn: blogPostsApi.importContent,\n    onMutate: () => {\n      blogStore.setLoadingState('importingContent', true);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POSTS });\n      queryClient.invalidateQueries({ queryKey: BLOG_QUERY_KEYS.POST_STATISTICS });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Import failed');\n    },\n    onSettled: () => {\n      blogStore.setLoadingState('importingContent', false);\n    },\n  });\n\n  return {\n    createPostMutation,\n    updatePostMutation,\n    deletePostMutation,\n    publishPostMutation,\n    unpublishPostMutation,\n    archivePostMutation,\n    duplicatePostMutation,\n    bulkOperationMutation,\n    saveDraftMutation,\n    uploadFileMutation,\n    exportContentMutation,\n    importContentMutation,\n  };\n};\n\n// Export the API object as default\nconst blogApi = blogPostsApi;\nexport default blogApi;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/blog/categoryApi.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AxiosError' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Blog Categories API Service using TanStack Query\n * Handles all category-related API communications with the backend\n */\n\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { AxiosError, AxiosResponse } from 'axios';\nimport {\n  Category,\n  CategoryListResponse,\n  CreateCategoryRequest,\n  UpdateCategoryRequest,\n  CategorySearchParams,\n  CategoryStatistics,\n  ApiResponse,\n  OperationResult,\n  DEFAULT_PAGE_SIZE,\n} from '../../types/blog';\nimport { apiClient } from '../api/client';\nimport { useBlogStore } from '../../stores/blogStore';\n\n// API endpoints\nconst API_ENDPOINTS = {\n  CATEGORIES: {\n    LIST: '/api/blog/categories',\n    CREATE: '/api/blog/categories',\n    GET: (id: string) => `/api/blog/categories/${id}`,\n    UPDATE: (id: string) => `/api/blog/categories/${id}`,\n    DELETE: (id: string) => `/api/blog/categories/${id}`,\n    TREE: '/api/blog/categories/tree',\n    REORDER: '/api/blog/categories/reorder',\n    STATISTICS: '/api/blog/categories/statistics',\n    MERGE: '/api/blog/categories/merge',\n    BULK_DELETE: '/api/blog/categories/bulk-delete',\n  },\n} as const;\n\n// Query keys for TanStack Query caching\nexport const CATEGORY_QUERY_KEYS = {\n  CATEGORIES: ['blog', 'categories'] as const,\n  CATEGORY: (id: string) => ['blog', 'categories', id] as const,\n  CATEGORY_LIST: (params: CategorySearchParams) => ['blog', 'categories', 'list', params] as const,\n  CATEGORY_TREE: ['blog', 'categories', 'tree'] as const,\n  CATEGORY_STATISTICS: ['blog', 'categories', 'statistics'] as const,\n} as const;\n\n// API response handler\nconst handleApiResponse = <T>(response: AxiosResponse<ApiResponse<T>>): T => {\n  if (!response.data.success) {\n    throw new Error(response.data.message || 'API request failed');\n  }\n  return response.data.data!;\n};\n\n// Categories API functions\nexport const categoriesApi = {\n  // Get paginated list of categories\n  getCategories: async (params: CategorySearchParams = {}): Promise<CategoryListResponse> => {\n    const searchParams = new URLSearchParams();\n\n    // Add pagination parameters\n    searchParams.append('page', (params.page || 1).toString());\n    searchParams.append('pageSize', (params.pageSize || DEFAULT_PAGE_SIZE).toString());\n\n    // Add search and filtering parameters\n    if (params.query) searchParams.append('query', params.query);\n    if (params.parentId) searchParams.append('parentId', params.parentId);\n    if (params.isActive !== undefined) searchParams.append('isActive', params.isActive.toString());\n    if (params.sortBy) searchParams.append('sortBy', params.sortBy);\n    if (params.sortOrder) searchParams.append('sortOrder', params.sortOrder);\n\n    const response = await apiClient.get<ApiResponse<CategoryListResponse>>(\n      `${API_ENDPOINTS.CATEGORIES.LIST}?${searchParams}`\n    );\n    return handleApiResponse(response);\n  },\n\n  // Get all categories as a hierarchical tree\n  getCategoryTree: async (): Promise<Category[]> => {\n    const response = await apiClient.get<ApiResponse<Category[]>>(API_ENDPOINTS.CATEGORIES.TREE);\n    return handleApiResponse(response);\n  },\n\n  // Get single category by ID\n  getCategory: async (id: string): Promise<Category> => {\n    const response = await apiClient.get<ApiResponse<Category>>(API_ENDPOINTS.CATEGORIES.GET(id));\n    return handleApiResponse(response);\n  },\n\n  // Create new category\n  createCategory: async (data: CreateCategoryRequest): Promise<Category> => {\n    const response = await apiClient.post<ApiResponse<Category>>(API_ENDPOINTS.CATEGORIES.CREATE, data);\n    return handleApiResponse(response);\n  },\n\n  // Update existing category\n  updateCategory: async (data: UpdateCategoryRequest): Promise<Category> => {\n    const response = await apiClient.put<ApiResponse<Category>>(\n      API_ENDPOINTS.CATEGORIES.UPDATE(data.id),\n      data\n    );\n    return handleApiResponse(response);\n  },\n\n  // Delete category\n  deleteCategory: async (id: string, movePostsToId?: string): Promise<void> => {\n    const params = movePostsToId ? `?movePostsTo=${movePostsToId}` : '';\n    await apiClient.delete(`${API_ENDPOINTS.CATEGORIES.DELETE(id)}${params}`);\n  },\n\n  // Bulk delete categories\n  bulkDeleteCategories: async (categoryIds: string[], movePostsToId?: string): Promise<OperationResult> => {\n    const response = await apiClient.post<ApiResponse<OperationResult>>(\n      API_ENDPOINTS.CATEGORIES.BULK_DELETE,\n      { categoryIds, movePostsToId }\n    );\n    return handleApiResponse(response);\n  },\n\n  // Reorder categories (for hierarchical sorting)\n  reorderCategories: async (categoryOrders: Array<{ id: string; sortOrder: number; parentId?: string }>): Promise<void> => {\n    await apiClient.post(API_ENDPOINTS.CATEGORIES.REORDER, { categoryOrders });\n  },\n\n  // Get category statistics\n  getCategoryStatistics: async (): Promise<CategoryStatistics> => {\n    const response = await apiClient.get<ApiResponse<CategoryStatistics>>(API_ENDPOINTS.CATEGORIES.STATISTICS);\n    return handleApiResponse(response);\n  },\n\n  // Merge categories\n  mergeCategories: async (sourceIds: string[], targetId: string): Promise<Category> => {\n    const response = await apiClient.post<ApiResponse<Category>>(API_ENDPOINTS.CATEGORIES.MERGE, {\n      sourceIds,\n      targetId,\n    });\n    return handleApiResponse(response);\n  },\n};\n\n// TanStack Query hooks for categories\nexport const useCategoryQueries = () => {\n  // Query for paginated categories list\n  const useCategoriesList = (params: CategorySearchParams = {}, enabled = true) => {\n    return useQuery({\n      queryKey: CATEGORY_QUERY_KEYS.CATEGORY_LIST(params),\n      queryFn: () => categoriesApi.getCategories(params),\n      enabled,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes\n    });\n  };\n\n  // Query for category tree (hierarchical structure)\n  const useCategoryTree = (enabled = true) => {\n    return useQuery({\n      queryKey: CATEGORY_QUERY_KEYS.CATEGORY_TREE,\n      queryFn: categoriesApi.getCategoryTree,\n      enabled,\n      staleTime: 10 * 60 * 1000, // 10 minutes\n      gcTime: 15 * 60 * 1000, // 15 minutes\n      select: (data) => {\n        // Transform flat list to hierarchical structure if needed\n        const buildTree = (categories: Category[], parentId?: string): Category[] => {\n          return categories\n            .filter(cat => cat.parentId === parentId)\n            .map(cat => ({\n              ...cat,\n              children: buildTree(categories, cat.id),\n            }))\n            .sort((a, b) => a.sortOrder - b.sortOrder);\n        };\n\n        return buildTree(data);\n      },\n    });\n  };\n\n  // Query for single category\n  const useCategory = (id: string, enabled = true) => {\n    return useQuery({\n      queryKey: CATEGORY_QUERY_KEYS.CATEGORY(id),\n      queryFn: () => categoriesApi.getCategory(id),\n      enabled: enabled && !!id,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes\n    });\n  };\n\n  // Query for category statistics\n  const useCategoryStatistics = (enabled = true) => {\n    return useQuery({\n      queryKey: CATEGORY_QUERY_KEYS.CATEGORY_STATISTICS,\n      queryFn: categoriesApi.getCategoryStatistics,\n      enabled,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      refetchInterval: 5 * 60 * 1000, // Auto-refetch every 5 minutes\n    });\n  };\n\n  return {\n    useCategoriesList,\n    useCategoryTree,\n    useCategory,\n    useCategoryStatistics,\n  };\n};\n\n// TanStack Query mutations for categories\nexport const useCategoryMutations = () => {\n  const queryClient = useQueryClient();\n  const blogStore = useBlogStore();\n\n  // Create category mutation\n  const createCategoryMutation = useMutation({\n    mutationFn: categoriesApi.createCategory,\n    onMutate: async () => {\n      await queryClient.cancelQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORIES });\n    },\n    onSuccess: (createdCategory) => {\n      blogStore.addCategory(createdCategory);\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORIES });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_TREE });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_STATISTICS });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to create category');\n    },\n  });\n\n  // Update category mutation\n  const updateCategoryMutation = useMutation({\n    mutationFn: categoriesApi.updateCategory,\n    onMutate: async (updatedCategory) => {\n      await queryClient.cancelQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY(updatedCategory.id) });\n\n      // Optimistic update\n      const previousCategory = queryClient.getQueryData(CATEGORY_QUERY_KEYS.CATEGORY(updatedCategory.id));\n      if (previousCategory) {\n        queryClient.setQueryData(CATEGORY_QUERY_KEYS.CATEGORY(updatedCategory.id), {\n          ...previousCategory,\n          ...updatedCategory,\n          updatedAt: new Date().toISOString(),\n        });\n      }\n\n      return { previousCategory };\n    },\n    onSuccess: (updatedCategory) => {\n      blogStore.updateCategory(updatedCategory);\n      queryClient.setQueryData(CATEGORY_QUERY_KEYS.CATEGORY(updatedCategory.id), updatedCategory);\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORIES });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_TREE });\n    },\n    onError: (error, variables, context) => {\n      // Revert optimistic update\n      if (context?.previousCategory) {\n        queryClient.setQueryData(CATEGORY_QUERY_KEYS.CATEGORY(variables.id), context.previousCategory);\n      }\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to update category');\n    },\n  });\n\n  // Delete category mutation\n  const deleteCategoryMutation = useMutation({\n    mutationFn: ({ id, movePostsToId }: { id: string; movePostsToId?: string }) =>\n      categoriesApi.deleteCategory(id, movePostsToId),\n    onSuccess: (_, { id }) => {\n      blogStore.removeCategory(id);\n      queryClient.removeQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY(id) });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORIES });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_TREE });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_STATISTICS });\n      // Also invalidate posts queries as posts may have been moved\n      queryClient.invalidateQueries({ queryKey: ['blog', 'posts'] });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to delete category');\n    },\n  });\n\n  // Bulk delete categories mutation\n  const bulkDeleteCategoriesMutation = useMutation({\n    mutationFn: ({ categoryIds, movePostsToId }: { categoryIds: string[]; movePostsToId?: string }) =>\n      categoriesApi.bulkDeleteCategories(categoryIds, movePostsToId),\n    onSuccess: (_, { categoryIds }) => {\n      // Remove deleted categories from store\n      categoryIds.forEach(id => {\n        blogStore.removeCategory(id);\n        queryClient.removeQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY(id) });\n      });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORIES });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_TREE });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_STATISTICS });\n      queryClient.invalidateQueries({ queryKey: ['blog', 'posts'] });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to bulk delete categories');\n    },\n  });\n\n  // Reorder categories mutation\n  const reorderCategoriesMutation = useMutation({\n    mutationFn: categoriesApi.reorderCategories,\n    onMutate: async (categoryOrders) => {\n      await queryClient.cancelQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_TREE });\n\n      // Update local store immediately for better UX\n      const orderedIds = categoryOrders\n        .sort((a, b) => a.sortOrder - b.sortOrder)\n        .map(item => item.id);\n      blogStore.sortCategories(orderedIds);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORIES });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_TREE });\n    },\n    onError: (error, _variables) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to reorder categories');\n      // Invalidate to revert optimistic update\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_TREE });\n    },\n  });\n\n  // Merge categories mutation\n  const mergeCategoriesMutation = useMutation({\n    mutationFn: ({ sourceIds, targetId }: { sourceIds: string[]; targetId: string }) =>\n      categoriesApi.mergeCategories(sourceIds, targetId),\n    onSuccess: (mergedCategory, { sourceIds }) => {\n      // Remove source categories and update target category\n      sourceIds.forEach(id => {\n        blogStore.removeCategory(id);\n        queryClient.removeQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY(id) });\n      });\n      blogStore.updateCategory(mergedCategory);\n      queryClient.setQueryData(CATEGORY_QUERY_KEYS.CATEGORY(mergedCategory.id), mergedCategory);\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORIES });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_TREE });\n      queryClient.invalidateQueries({ queryKey: CATEGORY_QUERY_KEYS.CATEGORY_STATISTICS });\n      queryClient.invalidateQueries({ queryKey: ['blog', 'posts'] });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to merge categories');\n    },\n  });\n\n  return {\n    createCategoryMutation,\n    updateCategoryMutation,\n    deleteCategoryMutation,\n    bulkDeleteCategoriesMutation,\n    reorderCategoriesMutation,\n    mergeCategoriesMutation,\n  };\n};\n\n// Utility hooks for category operations\nexport const useCategoryUtils = () => {\n  const { data: categoryTree } = useCategoryQueries().useCategoryTree();\n\n  // Get category path (breadcrumb) for a given category\n  const getCategoryPath = (categoryId: string): Category[] => {\n    if (!categoryTree) return [];\n\n    const findPath = (categories: Category[], targetId: string, path: Category[] = []): Category[] | null => {\n      for (const category of categories) {\n        const currentPath = [...path, category];\n        if (category.id === targetId) {\n          return currentPath;\n        }\n        if (category.children.length > 0) {\n          const foundPath = findPath(category.children, targetId, currentPath);\n          if (foundPath) return foundPath;\n        }\n      }\n      return null;\n    };\n\n    return findPath(categoryTree, categoryId) || [];\n  };\n\n  // Get all subcategories for a given category\n  const getSubcategories = (categoryId: string): Category[] => {\n    if (!categoryTree) return [];\n\n    const findCategory = (categories: Category[], id: string): Category | null => {\n      for (const category of categories) {\n        if (category.id === id) return category;\n        if (category.children.length > 0) {\n          const found = findCategory(category.children, id);\n          if (found) return found;\n        }\n      }\n      return null;\n    };\n\n    const getAllSubcategories = (category: Category): Category[] => {\n      let result: Category[] = [];\n      for (const child of category.children) {\n        result.push(child);\n        result = result.concat(getAllSubcategories(child));\n      }\n      return result;\n    };\n\n    const category = findCategory(categoryTree, categoryId);\n    return category ? getAllSubcategories(category) : [];\n  };\n\n  // Get flattened list of all categories\n  const getFlatCategoryList = (): Category[] => {\n    if (!categoryTree) return [];\n\n    const flatten = (categories: Category[]): Category[] => {\n      let result: Category[] = [];\n      for (const category of categories) {\n        result.push(category);\n        if (category.children.length > 0) {\n          result = result.concat(flatten(category.children));\n        }\n      }\n      return result;\n    };\n\n    return flatten(categoryTree);\n  };\n\n  // Check if a category can be moved to another parent (prevent circular references)\n  const canMoveCategory = (categoryId: string, newParentId: string): boolean => {\n    const subcategories = getSubcategories(categoryId);\n    return !subcategories.some(sub => sub.id === newParentId);\n  };\n\n  return {\n    getCategoryPath,\n    getSubcategories,\n    getFlatCategoryList,\n    canMoveCategory,\n  };\n};\n\nexport default categoriesApi;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/blog/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/blog/tagApi.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AxiosError' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Blog Tags API Service using TanStack Query\n * Handles all tag-related API communications with the backend\n */\n\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { AxiosError, AxiosResponse } from 'axios';\nimport {\n  Tag,\n  TagListResponse,\n  CreateTagRequest,\n  UpdateTagRequest,\n  TagSearchParams,\n  TagStatistics,\n  ApiResponse,\n  OperationResult,\n  DEFAULT_PAGE_SIZE,\n} from '../../types/blog';\nimport { apiClient } from '../api/client';\nimport { useBlogStore } from '../../stores/blogStore';\n\n// API endpoints\nconst API_ENDPOINTS = {\n  TAGS: {\n    LIST: '/api/blog/tags',\n    CREATE: '/api/blog/tags',\n    GET: (id: string) => `/api/blog/tags/${id}`,\n    UPDATE: (id: string) => `/api/blog/tags/${id}`,\n    DELETE: (id: string) => `/api/blog/tags/${id}`,\n    BULK_DELETE: '/api/blog/tags/bulk-delete',\n    MERGE: '/api/blog/tags/merge',\n    STATISTICS: '/api/blog/tags/statistics',\n    SUGGESTIONS: '/api/blog/tags/suggestions',\n    POPULAR: '/api/blog/tags/popular',\n    UNUSED: '/api/blog/tags/unused',\n    SEARCH: '/api/blog/tags/search',\n  },\n} as const;\n\n// Query keys for TanStack Query caching\nexport const TAG_QUERY_KEYS = {\n  TAGS: ['blog', 'tags'] as const,\n  TAG: (id: string) => ['blog', 'tags', id] as const,\n  TAG_LIST: (params: TagSearchParams) => ['blog', 'tags', 'list', params] as const,\n  TAG_SEARCH: (query: string) => ['blog', 'tags', 'search', query] as const,\n  TAG_SUGGESTIONS: (query: string) => ['blog', 'tags', 'suggestions', query] as const,\n  TAG_POPULAR: ['blog', 'tags', 'popular'] as const,\n  TAG_UNUSED: ['blog', 'tags', 'unused'] as const,\n  TAG_STATISTICS: ['blog', 'tags', 'statistics'] as const,\n} as const;\n\n// API response handler\nconst handleApiResponse = <T>(response: AxiosResponse<ApiResponse<T>>): T => {\n  if (!response.data.success) {\n    throw new Error(response.data.message || 'API request failed');\n  }\n  return response.data.data!;\n};\n\n// Tags API functions\nexport const tagsApi = {\n  // Get paginated list of tags\n  getTags: async (params: TagSearchParams = {}): Promise<TagListResponse> => {\n    const searchParams = new URLSearchParams();\n\n    // Add pagination parameters\n    searchParams.append('page', (params.page || 1).toString());\n    searchParams.append('pageSize', (params.pageSize || DEFAULT_PAGE_SIZE).toString());\n\n    // Add search and filtering parameters\n    if (params.query) searchParams.append('query', params.query);\n    if (params.sortBy) searchParams.append('sortBy', params.sortBy);\n    if (params.sortOrder) searchParams.append('sortOrder', params.sortOrder);\n\n    const response = await apiClient.get<ApiResponse<TagListResponse>>(\n      `${API_ENDPOINTS.TAGS.LIST}?${searchParams}`\n    );\n    return handleApiResponse(response);\n  },\n\n  // Get single tag by ID\n  getTag: async (id: string): Promise<Tag> => {\n    const response = await apiClient.get<ApiResponse<Tag>>(API_ENDPOINTS.TAGS.GET(id));\n    return handleApiResponse(response);\n  },\n\n  // Create new tag\n  createTag: async (data: CreateTagRequest): Promise<Tag> => {\n    const response = await apiClient.post<ApiResponse<Tag>>(API_ENDPOINTS.TAGS.CREATE, data);\n    return handleApiResponse(response);\n  },\n\n  // Update existing tag\n  updateTag: async (data: UpdateTagRequest): Promise<Tag> => {\n    const response = await apiClient.put<ApiResponse<Tag>>(API_ENDPOINTS.TAGS.UPDATE(data.id), data);\n    return handleApiResponse(response);\n  },\n\n  // Delete tag\n  deleteTag: async (id: string): Promise<void> => {\n    await apiClient.delete(API_ENDPOINTS.TAGS.DELETE(id));\n  },\n\n  // Bulk delete tags\n  bulkDeleteTags: async (tagIds: string[]): Promise<OperationResult> => {\n    const response = await apiClient.post<ApiResponse<OperationResult>>(\n      API_ENDPOINTS.TAGS.BULK_DELETE,\n      { tagIds }\n    );\n    return handleApiResponse(response);\n  },\n\n  // Merge tags\n  mergeTags: async (sourceIds: string[], targetId: string): Promise<Tag> => {\n    const response = await apiClient.post<ApiResponse<Tag>>(API_ENDPOINTS.TAGS.MERGE, {\n      sourceIds,\n      targetId,\n    });\n    return handleApiResponse(response);\n  },\n\n  // Search tags by name\n  searchTags: async (query: string): Promise<Tag[]> => {\n    if (!query.trim()) return [];\n\n    const response = await apiClient.get<ApiResponse<Tag[]>>(\n      `${API_ENDPOINTS.TAGS.SEARCH}?q=${encodeURIComponent(query)}`\n    );\n    return handleApiResponse(response);\n  },\n\n  // Get tag suggestions based on partial input\n  getTagSuggestions: async (query: string): Promise<Tag[]> => {\n    if (!query.trim()) return [];\n\n    const response = await apiClient.get<ApiResponse<Tag[]>>(\n      `${API_ENDPOINTS.TAGS.SUGGESTIONS}?q=${encodeURIComponent(query)}`\n    );\n    return handleApiResponse(response);\n  },\n\n  // Get popular tags\n  getPopularTags: async (limit: number = 20): Promise<Tag[]> => {\n    const response = await apiClient.get<ApiResponse<Tag[]>>(\n      `${API_ENDPOINTS.TAGS.POPULAR}?limit=${limit}`\n    );\n    return handleApiResponse(response);\n  },\n\n  // Get unused tags (tags with no posts)\n  getUnusedTags: async (): Promise<Tag[]> => {\n    const response = await apiClient.get<ApiResponse<Tag[]>>(API_ENDPOINTS.TAGS.UNUSED);\n    return handleApiResponse(response);\n  },\n\n  // Get tag statistics\n  getTagStatistics: async (): Promise<TagStatistics> => {\n    const response = await apiClient.get<ApiResponse<TagStatistics>>(API_ENDPOINTS.TAGS.STATISTICS);\n    return handleApiResponse(response);\n  },\n\n  // Create tag if it doesn't exist (for auto-tagging)\n  getOrCreateTag: async (name: string): Promise<Tag> => {\n    try {\n      // First try to search for existing tag\n      const searchResults = await tagsApi.searchTags(name);\n      const existingTag = searchResults.find(tag => tag.name.toLowerCase() === name.toLowerCase());\n\n      if (existingTag) {\n        return existingTag;\n      }\n\n      // Create new tag if it doesn't exist\n      return await tagsApi.createTag({\n        name,\n        slug: name.toLowerCase().replace(/\\s+/g, '-').replace(/[^\\w-]/g, ''),\n      });\n    } catch (error) {\n      throw new Error(`Failed to get or create tag: ${name}`);\n    }\n  },\n};\n\n// TanStack Query hooks for tags\nexport const useTagQueries = () => {\n  // Query for paginated tags list\n  const useTagsList = (params: TagSearchParams = {}, enabled = true) => {\n    return useQuery({\n      queryKey: TAG_QUERY_KEYS.TAG_LIST(params),\n      queryFn: () => tagsApi.getTags(params),\n      enabled,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes\n    });\n  };\n\n  // Query for single tag\n  const useTag = (id: string, enabled = true) => {\n    return useQuery({\n      queryKey: TAG_QUERY_KEYS.TAG(id),\n      queryFn: () => tagsApi.getTag(id),\n      enabled: enabled && !!id,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes\n    });\n  };\n\n  // Query for tag search results\n  const useTagsSearch = (query: string, enabled = true) => {\n    return useQuery({\n      queryKey: TAG_QUERY_KEYS.TAG_SEARCH(query),\n      queryFn: () => tagsApi.searchTags(query),\n      enabled: enabled && !!query.trim(),\n      staleTime: 2 * 60 * 1000, // 2 minutes for search results\n    });\n  };\n\n  // Query for tag suggestions (for autocomplete)\n  const useTagSuggestions = (query: string, enabled = true) => {\n    return useQuery({\n      queryKey: TAG_QUERY_KEYS.TAG_SUGGESTIONS(query),\n      queryFn: () => tagsApi.getTagSuggestions(query),\n      enabled: enabled && query.trim().length >= 2, // Only start suggesting after 2+ characters\n      staleTime: 1 * 60 * 1000, // 1 minute for suggestions\n      gcTime: 5 * 60 * 1000,\n    });\n  };\n\n  // Query for popular tags\n  const usePopularTags = (limit: number = 20, enabled = true) => {\n    return useQuery({\n      queryKey: TAG_QUERY_KEYS.TAG_POPULAR,\n      queryFn: () => tagsApi.getPopularTags(limit),\n      enabled,\n      staleTime: 10 * 60 * 1000, // 10 minutes\n      gcTime: 15 * 60 * 1000, // 15 minutes\n    });\n  };\n\n  // Query for unused tags\n  const useUnusedTags = (enabled = true) => {\n    return useQuery({\n      queryKey: TAG_QUERY_KEYS.TAG_UNUSED,\n      queryFn: tagsApi.getUnusedTags,\n      enabled,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      gcTime: 10 * 60 * 1000, // 10 minutes\n    });\n  };\n\n  // Query for tag statistics\n  const useTagStatistics = (enabled = true) => {\n    return useQuery({\n      queryKey: TAG_QUERY_KEYS.TAG_STATISTICS,\n      queryFn: tagsApi.getTagStatistics,\n      enabled,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n      refetchInterval: 5 * 60 * 1000, // Auto-refetch every 5 minutes\n    });\n  };\n\n  return {\n    useTagsList,\n    useTag,\n    useTagsSearch,\n    useTagSuggestions,\n    usePopularTags,\n    useUnusedTags,\n    useTagStatistics,\n  };\n};\n\n// TanStack Query mutations for tags\nexport const useTagMutations = () => {\n  const queryClient = useQueryClient();\n  const blogStore = useBlogStore();\n\n  // Create tag mutation\n  const createTagMutation = useMutation({\n    mutationFn: tagsApi.createTag,\n    onMutate: async () => {\n      await queryClient.cancelQueries({ queryKey: TAG_QUERY_KEYS.TAGS });\n    },\n    onSuccess: (createdTag) => {\n      blogStore.addTag(createdTag);\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAGS });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAG_STATISTICS });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAG_POPULAR });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to create tag');\n    },\n  });\n\n  // Update tag mutation\n  const updateTagMutation = useMutation({\n    mutationFn: tagsApi.updateTag,\n    onMutate: async (updatedTag) => {\n      await queryClient.cancelQueries({ queryKey: TAG_QUERY_KEYS.TAG(updatedTag.id) });\n\n      // Optimistic update\n      const previousTag = queryClient.getQueryData(TAG_QUERY_KEYS.TAG(updatedTag.id));\n      if (previousTag) {\n        queryClient.setQueryData(TAG_QUERY_KEYS.TAG(updatedTag.id), {\n          ...previousTag,\n          ...updatedTag,\n          updatedAt: new Date().toISOString(),\n        });\n      }\n\n      return { previousTag };\n    },\n    onSuccess: (updatedTag) => {\n      blogStore.updateTag(updatedTag);\n      queryClient.setQueryData(TAG_QUERY_KEYS.TAG(updatedTag.id), updatedTag);\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAGS });\n    },\n    onError: (error, variables, context) => {\n      // Revert optimistic update\n      if (context?.previousTag) {\n        queryClient.setQueryData(TAG_QUERY_KEYS.TAG(variables.id), context.previousTag);\n      }\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to update tag');\n    },\n  });\n\n  // Delete tag mutation\n  const deleteTagMutation = useMutation({\n    mutationFn: tagsApi.deleteTag,\n    onSuccess: (_, tagId) => {\n      blogStore.removeTag(tagId);\n      queryClient.removeQueries({ queryKey: TAG_QUERY_KEYS.TAG(tagId) });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAGS });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAG_STATISTICS });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAG_POPULAR });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAG_UNUSED });\n      // Also invalidate posts queries as posts may have been updated\n      queryClient.invalidateQueries({ queryKey: ['blog', 'posts'] });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to delete tag');\n    },\n  });\n\n  // Bulk delete tags mutation\n  const bulkDeleteTagsMutation = useMutation({\n    mutationFn: tagsApi.bulkDeleteTags,\n    onSuccess: (_, tagIds) => {\n      // Remove deleted tags from store\n      tagIds.forEach(id => {\n        blogStore.removeTag(id);\n        queryClient.removeQueries({ queryKey: TAG_QUERY_KEYS.TAG(id) });\n      });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAGS });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAG_STATISTICS });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAG_POPULAR });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAG_UNUSED });\n      queryClient.invalidateQueries({ queryKey: ['blog', 'posts'] });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to bulk delete tags');\n    },\n  });\n\n  // Merge tags mutation\n  const mergeTagsMutation = useMutation({\n    mutationFn: ({ sourceIds, targetId }: { sourceIds: string[]; targetId: string }) =>\n      tagsApi.mergeTags(sourceIds, targetId),\n    onSuccess: (mergedTag, { sourceIds }) => {\n      // Remove source tags and update target tag\n      sourceIds.forEach(id => {\n        blogStore.removeTag(id);\n        queryClient.removeQueries({ queryKey: TAG_QUERY_KEYS.TAG(id) });\n      });\n      blogStore.updateTag(mergedTag);\n      queryClient.setQueryData(TAG_QUERY_KEYS.TAG(mergedTag.id), mergedTag);\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAGS });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAG_STATISTICS });\n      queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAG_POPULAR });\n      queryClient.invalidateQueries({ queryKey: ['blog', 'posts'] });\n    },\n    onError: (error) => {\n      blogStore.setError(error instanceof Error ? error.message : 'Failed to merge tags');\n    },\n  });\n\n  // Get or create tag mutation (for auto-tagging)\n  const getOrCreateTagMutation = useMutation({\n    mutationFn: tagsApi.getOrCreateTag,\n    onSuccess: (tag, _tagName) => {\n      // Only add to store if it's a new tag (has recent createdAt)\n      const isNewTag = new Date(tag.createdAt) > new Date(Date.now() - 5000);\n      if (isNewTag) {\n        blogStore.addTag(tag);\n        queryClient.invalidateQueries({ queryKey: TAG_QUERY_KEYS.TAGS });\n      }\n    },\n    onError: (error) => {\n      console.warn('Failed to get or create tag:', error);\n    },\n  });\n\n  return {\n    createTagMutation,\n    updateTagMutation,\n    deleteTagMutation,\n    bulkDeleteTagsMutation,\n    mergeTagsMutation,\n    getOrCreateTagMutation,\n  };\n};\n\n// Utility hooks for tag operations\nexport const useTagUtils = () => {\n  const { data: popularTags } = useTagQueries().usePopularTags();\n  const { getOrCreateTagMutation } = useTagMutations();\n\n  // Process tag input and create tags as needed\n  const processTagInput = async (tagNames: string[]): Promise<Tag[]> => {\n    const processedTags: Tag[] = [];\n\n    for (const tagName of tagNames) {\n      if (tagName.trim()) {\n        try {\n          const tag = await getOrCreateTagMutation.mutateAsync(tagName.trim());\n          processedTags.push(tag);\n        } catch (error) {\n          console.warn(`Failed to process tag: ${tagName}`, error);\n        }\n      }\n    }\n\n    return processedTags;\n  };\n\n  // Get tag color based on usage/popularity\n  const getTagColor = (tag: Tag): string => {\n    if (!popularTags) return '#6B7280'; // default gray\n\n    const popularityRank = popularTags.findIndex(popular => popular.id === tag.id);\n\n    if (popularityRank === -1) return '#6B7280'; // not in popular tags\n    if (popularityRank < 5) return '#DC2626'; // top 5 - red\n    if (popularityRank < 10) return '#EA580C'; // top 10 - orange\n    if (popularityRank < 15) return '#CA8A04'; // top 15 - amber\n    return '#059669'; // others - green\n  };\n\n  // Validate tag name\n  const validateTagName = (name: string): { isValid: boolean; error?: string } => {\n    if (!name.trim()) {\n      return { isValid: false, error: 'Tag name cannot be empty' };\n    }\n\n    if (name.length < 2) {\n      return { isValid: false, error: 'Tag name must be at least 2 characters long' };\n    }\n\n    if (name.length > 50) {\n      return { isValid: false, error: 'Tag name cannot exceed 50 characters' };\n    }\n\n    if (!/^[\\w\\s-]+$/i.test(name)) {\n      return { isValid: false, error: 'Tag name can only contain letters, numbers, spaces, and hyphens' };\n    }\n\n    return { isValid: true };\n  };\n\n  // Generate tag slug from name\n  const generateTagSlug = (name: string): string => {\n    return name\n      .toLowerCase()\n      .trim()\n      .replace(/\\s+/g, '-')\n      .replace(/[^\\w-]/g, '')\n      .replace(/--+/g, '-')\n      .replace(/^-|-$/g, '');\n  };\n\n  return {\n    processTagInput,\n    getTagColor,\n    validateTagName,\n    generateTagSlug,\n  };\n};\n\n// Hook for tag input/autocomplete functionality\nexport const useTagInput = (query: string = '') => {\n  const { useTagSuggestions } = useTagQueries();\n  const { processTagInput } = useTagUtils();\n\n  // Call the hook at the top level\n  const suggestions = useTagSuggestions(query);\n\n  return {\n    suggestions,\n    processTagInput,\n  };\n};\n\nexport default tagsApi;","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/commentApi.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CommentSearchResult' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":262,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":262,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6912,6915],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6912,6915],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":272,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":272,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7149,7152],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7149,7152],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 评论API服务\n * 封装所有评论相关的HTTP请求\n */\n\nimport { apiClient } from './api/client';\nimport type {\n  Comment,\n  CommentCreateRequest,\n  CommentUpdateRequest,\n  CommentQuery,\n  CommentPagedResult,\n  CommentStats,\n  UserCommentStats,\n  CommentReportRequest,\n  CommentSearchResult,\n  ApiResponse\n} from '../types/comment';\n\nconst COMMENT_BASE_URL = '/api/comments';\n\nexport class CommentApiService {\n  /**\n   * 创建评论\n   */\n  static async createComment(request: CommentCreateRequest): Promise<Comment> {\n    const response = await apiClient.post<Comment>(COMMENT_BASE_URL, request);\n    return response.data;\n  }\n\n  /**\n   * 更新评论\n   */\n  static async updateComment(commentId: string, request: CommentUpdateRequest): Promise<Comment> {\n    const response = await apiClient.put<Comment>(`${COMMENT_BASE_URL}/${commentId}`, request);\n    return response.data;\n  }\n\n  /**\n   * 删除评论\n   */\n  static async deleteComment(commentId: string): Promise<void> {\n    await apiClient.delete(`${COMMENT_BASE_URL}/${commentId}`);\n  }\n\n  /**\n   * 获取单个评论\n   */\n  static async getComment(commentId: string): Promise<Comment> {\n    const response = await apiClient.get<Comment>(`${COMMENT_BASE_URL}/${commentId}`);\n    return response.data;\n  }\n\n  /**\n   * 获取评论列表\n   */\n  static async getComments(query: CommentQuery): Promise<CommentPagedResult> {\n    const params = new URLSearchParams();\n\n    params.append('postId', query.postId);\n    if (query.parentId) params.append('parentId', query.parentId);\n    if (query.sortOrder) params.append('sortOrder', query.sortOrder);\n    if (query.page) params.append('page', query.page.toString());\n    if (query.pageSize) params.append('pageSize', query.pageSize.toString());\n    if (query.rootOnly) params.append('rootOnly', query.rootOnly.toString());\n    if (query.includeStatus) {\n      query.includeStatus.forEach(status => params.append('includeStatus', status));\n    }\n\n    const response = await apiClient.get<CommentPagedResult>(`${COMMENT_BASE_URL}?${params}`);\n    return response.data;\n  }\n\n  /**\n   * 获取评论树结构\n   */\n  static async getCommentTree(postId: string, maxDepth: number = 5): Promise<Comment[]> {\n    const response = await apiClient.get<Comment[]>(`${COMMENT_BASE_URL}/tree/${postId}?maxDepth=${maxDepth}`);\n    return response.data;\n  }\n\n  /**\n   * 获取用户评论列表\n   */\n  static async getUserComments(\n    userId: string,\n    page: number = 1,\n    pageSize: number = 20\n  ): Promise<CommentPagedResult> {\n    const response = await apiClient.get<CommentPagedResult>(\n      `${COMMENT_BASE_URL}/user/${userId}?page=${page}&pageSize=${pageSize}`\n    );\n    return response.data;\n  }\n\n  /**\n   * 搜索评论\n   */\n  static async searchComments(\n    keyword: string,\n    postId?: string,\n    authorId?: string,\n    page: number = 1,\n    pageSize: number = 20\n  ): Promise<CommentPagedResult> {\n    const params = new URLSearchParams();\n    params.append('keyword', keyword);\n    if (postId) params.append('postId', postId);\n    if (authorId) params.append('authorId', authorId);\n    params.append('page', page.toString());\n    params.append('pageSize', pageSize.toString());\n\n    const response = await apiClient.get<CommentPagedResult>(\n      `${COMMENT_BASE_URL}/search?${params}`\n    );\n    return response.data;\n  }\n\n  /**\n   * 点赞评论\n   */\n  static async likeComment(commentId: string): Promise<void> {\n    await apiClient.post(`${COMMENT_BASE_URL}/${commentId}/like`);\n  }\n\n  /**\n   * 取消点赞评论\n   */\n  static async unlikeComment(commentId: string): Promise<void> {\n    await apiClient.delete(`${COMMENT_BASE_URL}/${commentId}/like`);\n  }\n\n  /**\n   * 举报评论\n   */\n  static async reportComment(commentId: string, request: CommentReportRequest): Promise<void> {\n    await apiClient.post(`${COMMENT_BASE_URL}/${commentId}/report`, request);\n  }\n\n  /**\n   * 获取文章评论统计\n   */\n  static async getCommentStats(postId: string): Promise<CommentStats> {\n    const response = await apiClient.get<CommentStats>(`${COMMENT_BASE_URL}/stats/post/${postId}`);\n    return response.data;\n  }\n\n  /**\n   * 获取用户评论统计\n   */\n  static async getUserCommentStats(userId: string): Promise<UserCommentStats> {\n    const response = await apiClient.get<UserCommentStats>(`${COMMENT_BASE_URL}/stats/user/${userId}`);\n    return response.data;\n  }\n\n  /**\n   * 获取热门评论\n   */\n  static async getPopularComments(\n    postId?: string,\n    timeRange: number = 7,\n    limit: number = 10\n  ): Promise<Comment[]> {\n    const params = new URLSearchParams();\n    if (postId) params.append('postId', postId);\n    params.append('timeRange', timeRange.toString());\n    params.append('limit', limit.toString());\n\n    const response = await apiClient.get<Comment[]>(`${COMMENT_BASE_URL}/popular?${params}`);\n    return response.data;\n  }\n\n  /**\n   * 批量获取评论\n   */\n  static async getCommentsBatch(commentIds: string[]): Promise<Comment[]> {\n    if (commentIds.length === 0) return [];\n\n    const promises = commentIds.map(id => this.getComment(id));\n    const results = await Promise.allSettled(promises);\n\n    return results\n      .filter((result): result is PromiseFulfilledResult<Comment> => result.status === 'fulfilled')\n      .map(result => result.value);\n  }\n\n  /**\n   * 预加载评论回复\n   */\n  static async preloadReplies(commentId: string, depth: number = 2): Promise<Comment[]> {\n    const query: CommentQuery = {\n      postId: '', // 将由具体调用时填入\n      parentId: commentId,\n      pageSize: 50\n    };\n\n    const result = await this.getComments(query);\n\n    if (depth > 1) {\n      // 递归预加载下一级回复\n      const nestedPromises = result.comments.map(async (comment) => {\n        const nestedReplies = await this.preloadReplies(comment.id, depth - 1);\n        return { ...comment, replies: nestedReplies };\n      });\n\n      return await Promise.all(nestedPromises);\n    }\n\n    return result.comments;\n  }\n\n  /**\n   * 获取评论上下文（父评论和相邻评论）\n   */\n  static async getCommentContext(commentId: string): Promise<{\n    parent?: Comment;\n    siblings: Comment[];\n    position: number;\n  }> {\n    const comment = await this.getComment(commentId);\n\n    if (!comment.parentId) {\n      // 根评论，获取同级评论\n      const query: CommentQuery = {\n        postId: comment.postId,\n        rootOnly: true,\n        pageSize: 100\n      };\n      const result = await this.getComments(query);\n      const position = result.comments.findIndex(c => c.id === commentId);\n\n      return {\n        siblings: result.comments,\n        position\n      };\n    }\n\n    // 子评论，获取父评论和兄弟评论\n    const [parent, siblingsResult] = await Promise.all([\n      this.getComment(comment.parentId),\n      this.getComments({\n        postId: comment.postId,\n        parentId: comment.parentId,\n        pageSize: 100\n      })\n    ]);\n\n    const position = siblingsResult.comments.findIndex(c => c.id === commentId);\n\n    return {\n      parent,\n      siblings: siblingsResult.comments,\n      position\n    };\n  }\n}\n\n// 导出默认实例\nexport const commentApi = CommentApiService;\n\n// 错误处理包装器\nexport const withErrorHandling = <T extends any[], R>(\n  fn: (...args: T) => Promise<R>\n) => {\n  return async (...args: T): Promise<ApiResponse<R>> => {\n    try {\n      const data = await fn(...args);\n      return {\n        data,\n        success: true\n      };\n    } catch (error: any) {\n      console.error('Comment API Error:', error);\n\n      return {\n        success: false,\n        message: error.response?.data?.message || error.message || '请求失败',\n        errors: error.response?.data?.errors || []\n      };\n    }\n  };\n};\n\n// 带错误处理的API方法\nexport const safeCommentApi = {\n  createComment: withErrorHandling(commentApi.createComment),\n  updateComment: withErrorHandling(commentApi.updateComment),\n  deleteComment: withErrorHandling(commentApi.deleteComment),\n  getComment: withErrorHandling(commentApi.getComment),\n  getComments: withErrorHandling(commentApi.getComments),\n  getCommentTree: withErrorHandling(commentApi.getCommentTree),\n  getUserComments: withErrorHandling(commentApi.getUserComments),\n  searchComments: withErrorHandling(commentApi.searchComments),\n  likeComment: withErrorHandling(commentApi.likeComment),\n  unlikeComment: withErrorHandling(commentApi.unlikeComment),\n  reportComment: withErrorHandling(commentApi.reportComment),\n  getCommentStats: withErrorHandling(commentApi.getCommentStats),\n  getUserCommentStats: withErrorHandling(commentApi.getUserCommentStats),\n  getPopularComments: withErrorHandling(commentApi.getPopularComments)\n};","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/commentSocket.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TypingUser' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CommentNotification' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":67},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":41,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":41,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1403,1511],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":54,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":54,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1744,1793],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2274,2313],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":190,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":190,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5283,5327],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":195,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":195,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5441,5483],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":200,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":200,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5597,5636],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":205,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":205,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5748,5785],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":211,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":211,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5898,5940],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":215,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":215,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5998,6036],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":223,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":223,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6193,6237],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":462,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":462,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12074,12077],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12074,12077],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":473,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":473,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12279,12282],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12279,12282],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":493,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":493,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12754,12757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12754,12757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 评论实时通信服务 (SignalR WebSocket)\n * 处理评论相关的实时事件和通知\n */\n\nimport * as signalR from '@microsoft/signalr';\nimport type { CommentSocketEvents, TypingUser, CommentNotification } from '../types/comment';\nimport { getAuthToken } from '../utils/auth';\n\nexport class CommentSocketService {\n  private connection: signalR.HubConnection | null = null;\n  private reconnectAttempts = 0;\n  private maxReconnectAttempts = 10;\n  private reconnectDelay = 1000; // 初始延迟1秒\n  private eventListeners = new Map<string, Set<(...args: unknown[]) => void>>();\n  private isConnecting = false;\n  private currentPostId: string | null = null;\n  private typingTimeouts = new Map<string, NodeJS.Timeout>();\n\n  /**\n   * 初始化WebSocket连接\n   */\n  async connect(): Promise<void> {\n    if (this.connection?.state === signalR.HubConnectionState.Connected || this.isConnecting) {\n      return;\n    }\n\n    this.isConnecting = true;\n\n    try {\n      // 创建连接\n      this.connection = new signalR.HubConnectionBuilder()\n        .withUrl('/hubs/comment', {\n          accessTokenFactory: () => getAuthToken() || '',\n          transport: signalR.HttpTransportType.WebSockets | signalR.HttpTransportType.LongPolling\n        })\n        .withAutomaticReconnect({\n          nextRetryDelayInMilliseconds: (retryContext) => {\n            // 指数退避策略\n            const delay = Math.min(1000 * Math.pow(2, retryContext.previousRetryCount), 30000);\n            console.log(`Reconnecting to CommentHub in ${delay}ms... (attempt ${retryContext.previousRetryCount + 1})`);\n            return delay;\n          }\n        })\n        .configureLogging(signalR.LogLevel.Information)\n        .build();\n\n      // 绑定事件处理器\n      this.bindEventHandlers();\n\n      // 启动连接\n      await this.connection.start();\n\n      console.log('CommentHub connected successfully');\n      this.reconnectAttempts = 0;\n\n      // 如果有当前文章ID，自动加入文章组\n      if (this.currentPostId) {\n        await this.joinPostGroup(this.currentPostId);\n      }\n\n    } catch (error) {\n      console.error('Failed to connect to CommentHub:', error);\n      this.scheduleReconnect();\n    } finally {\n      this.isConnecting = false;\n    }\n  }\n\n  /**\n   * 断开连接\n   */\n  async disconnect(): Promise<void> {\n    if (this.connection) {\n      try {\n        await this.connection.stop();\n        console.log('CommentHub disconnected');\n      } catch (error) {\n        console.error('Error disconnecting from CommentHub:', error);\n      }\n      this.connection = null;\n    }\n    this.eventListeners.clear();\n    this.typingTimeouts.forEach(timeout => clearTimeout(timeout));\n    this.typingTimeouts.clear();\n  }\n\n  /**\n   * 绑定所有事件处理器\n   */\n  private bindEventHandlers(): void {\n    if (!this.connection) return;\n\n    // 评论CRUD事件\n    this.connection.on('CommentCreated', (comment) => {\n      this.emit('CommentCreated', comment);\n    });\n\n    this.connection.on('CommentUpdated', (comment) => {\n      this.emit('CommentUpdated', comment);\n    });\n\n    this.connection.on('CommentDeleted', (data) => {\n      this.emit('CommentDeleted', data);\n    });\n\n    // 评论互动事件\n    this.connection.on('CommentLiked', (data) => {\n      this.emit('CommentLiked', data);\n    });\n\n    this.connection.on('CommentUnliked', (data) => {\n      this.emit('CommentUnliked', data);\n    });\n\n    // 审核事件\n    this.connection.on('CommentApproved', (data) => {\n      this.emit('CommentApproved', data);\n    });\n\n    this.connection.on('CommentRejected', (data) => {\n      this.emit('CommentRejected', data);\n    });\n\n    this.connection.on('CommentHidden', (data) => {\n      this.emit('CommentHidden', data);\n    });\n\n    this.connection.on('CommentRestored', (data) => {\n      this.emit('CommentRestored', data);\n    });\n\n    this.connection.on('CommentMarkedAsSpam', (data) => {\n      this.emit('CommentMarkedAsSpam', data);\n    });\n\n    // 输入状态事件\n    this.connection.on('UserStartedTyping', (data) => {\n      this.emit('UserStartedTyping', data);\n      this.handleTypingStart(data);\n    });\n\n    this.connection.on('UserStoppedTyping', (data) => {\n      this.emit('UserStoppedTyping', data);\n      this.handleTypingStop(data);\n    });\n\n    // 统计和状态事件\n    this.connection.on('CommentStats', (stats) => {\n      this.emit('CommentStats', stats);\n    });\n\n    this.connection.on('OnlineUserCount', (data) => {\n      this.emit('OnlineUserCount', data);\n    });\n\n    // 通知事件\n    this.connection.on('NewNotification', (notification) => {\n      this.emit('NewNotification', notification);\n    });\n\n    this.connection.on('UnreadNotificationCount', (count) => {\n      this.emit('UnreadNotificationCount', count);\n    });\n\n    this.connection.on('RecentNotifications', (notifications) => {\n      this.emit('RecentNotifications', notifications);\n    });\n\n    this.connection.on('NotificationMarkedAsRead', (notificationId) => {\n      this.emit('NotificationMarkedAsRead', notificationId);\n    });\n\n    // 管理员事件\n    this.connection.on('ModerationStats', (stats) => {\n      this.emit('ModerationStats', stats);\n    });\n\n    this.connection.on('CommentsModerated', (data) => {\n      this.emit('CommentsModerated', data);\n    });\n\n    // 系统事件\n    this.connection.on('Error', (message) => {\n      console.error('CommentHub error:', message);\n      this.emit('Error', message);\n    });\n\n    this.connection.on('JoinedPostGroup', (postId) => {\n      console.log(`Joined post group: ${postId}`);\n      this.emit('JoinedPostGroup', postId);\n    });\n\n    this.connection.on('LeftPostGroup', (postId) => {\n      console.log(`Left post group: ${postId}`);\n      this.emit('LeftPostGroup', postId);\n    });\n\n    this.connection.on('JoinedModerationGroup', () => {\n      console.log('Joined moderation group');\n      this.emit('JoinedModerationGroup');\n    });\n\n    this.connection.on('LeftModerationGroup', () => {\n      console.log('Left moderation group');\n      this.emit('LeftModerationGroup');\n    });\n\n    // 连接状态事件\n    this.connection.onreconnecting(() => {\n      console.log('CommentHub reconnecting...');\n    });\n\n    this.connection.onreconnected(() => {\n      console.log('CommentHub reconnected');\n      // 重新加入文章组\n      if (this.currentPostId) {\n        this.joinPostGroup(this.currentPostId);\n      }\n    });\n\n    this.connection.onclose(() => {\n      console.log('CommentHub connection closed');\n      this.scheduleReconnect();\n    });\n  }\n\n  /**\n   * 加入文章评论组\n   */\n  async joinPostGroup(postId: string): Promise<boolean> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      this.currentPostId = postId;\n      await this.connect();\n      return false;\n    }\n\n    try {\n      const success = await this.connection.invoke('JoinPostGroup', postId);\n      if (success) {\n        this.currentPostId = postId;\n      }\n      return success;\n    } catch (error) {\n      console.error('Error joining post group:', error);\n      return false;\n    }\n  }\n\n  /**\n   * 离开文章评论组\n   */\n  async leavePostGroup(postId: string): Promise<boolean> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return false;\n    }\n\n    try {\n      const success = await this.connection.invoke('LeavePostGroup', postId);\n      if (success && this.currentPostId === postId) {\n        this.currentPostId = null;\n      }\n      return success;\n    } catch (error) {\n      console.error('Error leaving post group:', error);\n      return false;\n    }\n  }\n\n  /**\n   * 通知开始输入\n   */\n  async startTyping(postId: string, parentId?: string): Promise<void> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return;\n    }\n\n    try {\n      await this.connection.invoke('StartTyping', postId, parentId);\n    } catch (error) {\n      console.error('Error sending start typing:', error);\n    }\n  }\n\n  /**\n   * 通知停止输入\n   */\n  async stopTyping(postId: string, parentId?: string): Promise<void> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return;\n    }\n\n    try {\n      await this.connection.invoke('StopTyping', postId, parentId);\n    } catch (error) {\n      console.error('Error sending stop typing:', error);\n    }\n  }\n\n  /**\n   * 获取评论统计\n   */\n  async getCommentStats(postId: string): Promise<void> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return;\n    }\n\n    try {\n      await this.connection.invoke('GetCommentStats', postId);\n    } catch (error) {\n      console.error('Error getting comment stats:', error);\n    }\n  }\n\n  /**\n   * 获取在线用户数\n   */\n  async getOnlineUserCount(postId: string): Promise<void> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return;\n    }\n\n    try {\n      await this.connection.invoke('GetOnlineUserCount', postId);\n    } catch (error) {\n      console.error('Error getting online user count:', error);\n    }\n  }\n\n  /**\n   * 标记通知为已读\n   */\n  async markNotificationAsRead(notificationId: string): Promise<void> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return;\n    }\n\n    try {\n      await this.connection.invoke('MarkNotificationAsRead', notificationId);\n    } catch (error) {\n      console.error('Error marking notification as read:', error);\n    }\n  }\n\n  /**\n   * 获取未读通知数量\n   */\n  async getUnreadNotificationCount(): Promise<void> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return;\n    }\n\n    try {\n      await this.connection.invoke('GetUnreadNotificationCount');\n    } catch (error) {\n      console.error('Error getting unread notification count:', error);\n    }\n  }\n\n  /**\n   * 获取最新通知\n   */\n  async getRecentNotifications(limit: number = 10): Promise<void> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return;\n    }\n\n    try {\n      await this.connection.invoke('GetRecentNotifications', limit);\n    } catch (error) {\n      console.error('Error getting recent notifications:', error);\n    }\n  }\n\n  /**\n   * 加入审核组（管理员）\n   */\n  async joinModerationGroup(): Promise<boolean> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return false;\n    }\n\n    try {\n      return await this.connection.invoke('JoinModerationGroup');\n    } catch (error) {\n      console.error('Error joining moderation group:', error);\n      return false;\n    }\n  }\n\n  /**\n   * 离开审核组（管理员）\n   */\n  async leaveModerationGroup(): Promise<boolean> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return false;\n    }\n\n    try {\n      return await this.connection.invoke('LeaveModerationGroup');\n    } catch (error) {\n      console.error('Error leaving moderation group:', error);\n      return false;\n    }\n  }\n\n  /**\n   * 获取审核统计（管理员）\n   */\n  async getModerationStats(): Promise<void> {\n    if (!this.connection || this.connection.state !== signalR.HubConnectionState.Connected) {\n      return;\n    }\n\n    try {\n      await this.connection.invoke('GetModerationStats');\n    } catch (error) {\n      console.error('Error getting moderation stats:', error);\n    }\n  }\n\n  /**\n   * 添加事件监听器\n   */\n  on<K extends keyof CommentSocketEvents>(\n    event: K,\n    listener: CommentSocketEvents[K]\n  ): void {\n    if (!this.eventListeners.has(event)) {\n      this.eventListeners.set(event, new Set());\n    }\n    this.eventListeners.get(event)!.add(listener);\n  }\n\n  /**\n   * 移除事件监听器\n   */\n  off<K extends keyof CommentSocketEvents>(\n    event: K,\n    listener: CommentSocketEvents[K]\n  ): void {\n    const listeners = this.eventListeners.get(event);\n    if (listeners) {\n      listeners.delete(listener);\n      if (listeners.size === 0) {\n        this.eventListeners.delete(event);\n      }\n    }\n  }\n\n  /**\n   * 触发事件\n   */\n  private emit<K extends keyof CommentSocketEvents>(\n    event: K,\n    ...args: Parameters<CommentSocketEvents[K]>\n  ): void {\n    const listeners = this.eventListeners.get(event);\n    if (listeners) {\n      listeners.forEach(listener => {\n        try {\n          (listener as any)(...args);\n        } catch (error) {\n          console.error(`Error in event listener for ${event}:`, error);\n        }\n      });\n    }\n  }\n\n  /**\n   * 处理用户开始输入\n   */\n  private handleTypingStart(data: any): void {\n    const key = `${data.userId}_${data.postId}_${data.parentId || 'root'}`;\n\n    // 清除之前的超时\n    if (this.typingTimeouts.has(key)) {\n      clearTimeout(this.typingTimeouts.get(key)!);\n    }\n\n    // 设置新的超时，10秒后自动停止输入状态\n    const timeout = setTimeout(() => {\n      this.emit('UserStoppedTyping', data);\n      this.typingTimeouts.delete(key);\n    }, 10000);\n\n    this.typingTimeouts.set(key, timeout);\n  }\n\n  /**\n   * 处理用户停止输入\n   */\n  private handleTypingStop(data: any): void {\n    const key = `${data.userId}_${data.postId}_${data.parentId || 'root'}`;\n\n    if (this.typingTimeouts.has(key)) {\n      clearTimeout(this.typingTimeouts.get(key)!);\n      this.typingTimeouts.delete(key);\n    }\n  }\n\n  /**\n   * 调度重连\n   */\n  private scheduleReconnect(): void {\n    if (this.reconnectAttempts >= this.maxReconnectAttempts) {\n      console.error('Max reconnection attempts reached. Giving up.');\n      return;\n    }\n\n    const delay = Math.min(this.reconnectDelay * Math.pow(2, this.reconnectAttempts), 30000);\n\n    setTimeout(() => {\n      this.reconnectAttempts++;\n      this.connect();\n    }, delay);\n  }\n\n  /**\n   * 获取连接状态\n   */\n  get connectionState(): signalR.HubConnectionState {\n    return this.connection?.state || signalR.HubConnectionState.Disconnected;\n  }\n\n  /**\n   * 检查是否已连接\n   */\n  get isConnected(): boolean {\n    return this.connection?.state === signalR.HubConnectionState.Connected;\n  }\n}\n\n// 导出单例实例\nexport const commentSocket = new CommentSocketService();\n\n// 导出类型化的事件监听器辅助函数\nexport const useCommentSocket = () => {\n  return {\n    connect: () => commentSocket.connect(),\n    disconnect: () => commentSocket.disconnect(),\n    joinPostGroup: (postId: string) => commentSocket.joinPostGroup(postId),\n    leavePostGroup: (postId: string) => commentSocket.leavePostGroup(postId),\n    startTyping: (postId: string, parentId?: string) => commentSocket.startTyping(postId, parentId),\n    stopTyping: (postId: string, parentId?: string) => commentSocket.stopTyping(postId, parentId),\n    markNotificationAsRead: (notificationId: string) => commentSocket.markNotificationAsRead(notificationId),\n    getRecentNotifications: (limit?: number) => commentSocket.getRecentNotifications(limit),\n    getUnreadNotificationCount: () => commentSocket.getUnreadNotificationCount(),\n    on: <K extends keyof CommentSocketEvents>(event: K, listener: CommentSocketEvents[K]) => {\n      commentSocket.on(event, listener);\n    },\n    off: <K extends keyof CommentSocketEvents>(event: K, listener: CommentSocketEvents[K]) => {\n      commentSocket.off(event, listener);\n    },\n    isConnected: commentSocket.isConnected,\n    connectionState: commentSocket.connectionState\n  };\n};","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/home/homeApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/search/archiveApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/search/searchApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/uploadApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/services/userApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/stores/authStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/stores/blogStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/stores/commentStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":503,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":503,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15037,15040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15037,15040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * 评论状态管理 (Zustand Store)\n * 管理评论数据、UI状态、实时更新等\n */\n\nimport { create } from 'zustand';\nimport { devtools } from 'zustand/middleware';\nimport { immer } from 'zustand/middleware/immer';\nimport type {\n  Comment,\n  CommentQuery,\n  CommentStats,\n  CommentFormData,\n  CommentListConfig,\n  TypingUser,\n  CommentNotification,\n  CommentError\n} from '../types/comment';\nimport { CommentSortOrder } from '../types/comment';\nimport { commentApi } from '../services/commentApi';\nimport { commentSocket } from '../services/commentSocket';\n\ninterface CommentState {\n  // 评论数据\n  comments: Record<string, Comment>; // commentId -> Comment\n  commentsByPost: Record<string, string[]>; // postId -> commentId[]\n  commentTrees: Record<string, Comment[]>; // postId -> Comment tree\n  replyChains: Record<string, string[]>; // parentId -> replyId[]\n\n  // 分页和加载状态\n  pagination: Record<string, {\n    page: number;\n    totalPages: number;\n    totalCount: number;\n    hasMore: boolean;\n    loading: boolean;\n  }>; // postId -> pagination info\n\n  // UI状态\n  loadingStates: Record<string, boolean>; // operation -> loading\n  errors: CommentError[];\n  selectedComment: string | null;\n  replyingTo: string | null;\n  editingComment: string | null;\n\n  // 表单状态\n  drafts: Record<string, CommentFormData>; // postId|parentId -> draft\n  uploadingImages: string[];\n\n  // 统计信息\n  stats: Record<string, CommentStats>; // postId -> stats\n\n  // 实时状态\n  typingUsers: TypingUser[];\n  onlineUserCounts: Record<string, number>; // postId -> count\n\n  // 通知\n  notifications: CommentNotification[];\n  unreadNotificationCount: number;\n\n  // 配置\n  config: CommentListConfig;\n\n  // 操作方法\n  actions: {\n    // 数据获取\n    loadComments: (postId: string, query?: Partial<CommentQuery>) => Promise<void>;\n    loadCommentTree: (postId: string, maxDepth?: number) => Promise<void>;\n    loadMoreComments: (postId: string) => Promise<void>;\n    refreshComments: (postId: string) => Promise<void>;\n    loadStats: (postId: string) => Promise<void>;\n\n    // 评论CRUD\n    createComment: (data: CommentFormData, postId: string) => Promise<Comment | null>;\n    updateComment: (commentId: string, data: Partial<CommentFormData>) => Promise<void>;\n    deleteComment: (commentId: string) => Promise<void>;\n\n    // 互动操作\n    likeComment: (commentId: string) => Promise<void>;\n    unlikeComment: (commentId: string) => Promise<void>;\n    reportComment: (commentId: string, reason: string, description?: string) => Promise<void>;\n\n    // UI状态管理\n    setReplyingTo: (commentId: string | null) => void;\n    setEditingComment: (commentId: string | null) => void;\n    setSelectedComment: (commentId: string | null) => void;\n\n    // 草稿管理\n    saveDraft: (key: string, data: CommentFormData) => void;\n    loadDraft: (key: string) => CommentFormData | null;\n    clearDraft: (key: string) => void;\n\n    // 配置管理\n    updateConfig: (config: Partial<CommentListConfig>) => void;\n    setSortOrder: (sortOrder: CommentSortOrder) => void;\n\n    // 实时功能\n    initializeRealtime: (postId: string) => void;\n    cleanupRealtime: () => void;\n\n    // 错误处理\n    addError: (error: CommentError) => void;\n    clearErrors: () => void;\n    removeError: (index: number) => void;\n\n    // 重置状态\n    resetPostComments: (postId: string) => void;\n    resetAll: () => void;\n  };\n}\n\nconst defaultConfig: CommentListConfig = {\n  sortOrder: CommentSortOrder.CreatedAtDesc,\n  pageSize: 20,\n  maxDepth: 3,\n  showAvatars: true,\n  showTimestamps: true,\n  showStats: true,\n  showActions: true,\n  enableVirtualScroll: false,\n  autoRefresh: false,\n  refreshInterval: 30000,\n  // Editor configuration\n  maxLength: 2000,\n  allowMarkdown: true,\n  allowEmoji: true,\n  allowMention: true,\n  allowImageUpload: false,\n  placeholder: '写下你的评论...',\n  autoFocus: false,\n  showToolbar: true\n};\n\nexport const useCommentStore = create<CommentState>()(\n  devtools(\n    immer((set, get) => ({\n      // 初始状态\n      comments: {},\n      commentsByPost: {},\n      commentTrees: {},\n      replyChains: {},\n      pagination: {},\n      loadingStates: {},\n      errors: [],\n      selectedComment: null,\n      replyingTo: null,\n      editingComment: null,\n      drafts: {},\n      uploadingImages: [],\n      stats: {},\n      typingUsers: [],\n      onlineUserCounts: {},\n      notifications: [],\n      unreadNotificationCount: 0,\n      config: defaultConfig,\n\n      actions: {\n        // 加载评论列表\n        loadComments: async (postId: string, queryOptions?: Partial<CommentQuery>) => {\n          const { config } = get();\n\n          const query: CommentQuery = {\n            postId,\n            page: 1,\n            pageSize: config.pageSize,\n            sortOrder: config.sortOrder,\n            ...queryOptions\n          };\n\n          set(state => {\n            state.loadingStates[`comments_${postId}`] = true;\n          });\n\n          try {\n            const result = await commentApi.getComments(query);\n\n            set(state => {\n              // 更新评论数据\n              result.comments.forEach(comment => {\n                state.comments[comment.id] = comment;\n              });\n\n              // 更新文章评论索引\n              state.commentsByPost[postId] = result.comments.map(c => c.id);\n\n              // 更新分页信息\n              state.pagination[postId] = {\n                page: result.currentPage,\n                totalPages: result.totalPages,\n                totalCount: result.totalCount,\n                hasMore: result.hasNextPage,\n                loading: false\n              };\n\n              state.loadingStates[`comments_${postId}`] = false;\n            });\n\n            // 加载统计信息\n            get().actions.loadStats(postId);\n\n          } catch (error: unknown) {\n            set(state => {\n              state.loadingStates[`comments_${postId}`] = false;\n              state.errors.push({\n                type: 'network',\n                message: (error instanceof Error ? error.message : String(error)) || '加载评论失败'\n              });\n            });\n          }\n        },\n\n        // 加载评论树\n        loadCommentTree: async (postId: string, maxDepth = 3) => {\n          set(state => {\n            state.loadingStates[`tree_${postId}`] = true;\n          });\n\n          try {\n            const tree = await commentApi.getCommentTree(postId, maxDepth);\n\n            set(state => {\n              // 递归提取所有评论\n              const extractComments = (comments: Comment[]) => {\n                comments.forEach(comment => {\n                  state.comments[comment.id] = comment;\n                  if (comment.replies.length > 0) {\n                    extractComments(comment.replies);\n                  }\n                });\n              };\n\n              extractComments(tree);\n              state.commentTrees[postId] = tree;\n              state.loadingStates[`tree_${postId}`] = false;\n            });\n\n          } catch (error: unknown) {\n            set(state => {\n              state.loadingStates[`tree_${postId}`] = false;\n              state.errors.push({\n                type: 'network',\n                message: error.message || '加载评论树失败'\n              });\n            });\n          }\n        },\n\n        // 加载更多评论\n        loadMoreComments: async (postId: string) => {\n          const { pagination } = get();\n          const currentPagination = pagination[postId];\n\n          if (!currentPagination || !currentPagination.hasMore || currentPagination.loading) {\n            return;\n          }\n\n          set(state => {\n            state.pagination[postId].loading = true;\n          });\n\n          try {\n            const query: CommentQuery = {\n              postId,\n              page: currentPagination.page + 1,\n              pageSize: get().config.pageSize,\n              sortOrder: get().config.sortOrder\n            };\n\n            const result = await commentApi.getComments(query);\n\n            set(state => {\n              // 添加新评论\n              result.comments.forEach(comment => {\n                state.comments[comment.id] = comment;\n              });\n\n              // 更新文章评论索引\n              const existingIds = state.commentsByPost[postId] || [];\n              const newIds = result.comments.map(c => c.id);\n              state.commentsByPost[postId] = [...existingIds, ...newIds];\n\n              // 更新分页信息\n              state.pagination[postId] = {\n                page: result.currentPage,\n                totalPages: result.totalPages,\n                totalCount: result.totalCount,\n                hasMore: result.hasNextPage,\n                loading: false\n              };\n            });\n\n          } catch (error: unknown) {\n            set(state => {\n              state.pagination[postId].loading = false;\n              state.errors.push({\n                type: 'network',\n                message: error.message || '加载更多评论失败'\n              });\n            });\n          }\n        },\n\n        // 刷新评论\n        refreshComments: async (postId: string) => {\n          await get().actions.loadComments(postId);\n        },\n\n        // 创建评论\n        createComment: async (data: CommentFormData, postId: string): Promise<Comment | null> => {\n          set(state => {\n            state.loadingStates['creating'] = true;\n          });\n\n          try {\n            const request = {\n              postId,\n              parentId: data.parentId,\n              content: data.content,\n              mentionedUsers: data.mentionedUsers\n            };\n\n            const newComment = await commentApi.createComment(request);\n\n            set(state => {\n              // 添加新评论到状态\n              state.comments[newComment.id] = newComment;\n\n              // 更新文章评论索引\n              const existingIds = state.commentsByPost[postId] || [];\n\n              if (newComment.parentId) {\n                // 回复评论：添加到父评论的回复链\n                const replyIds = state.replyChains[newComment.parentId] || [];\n                state.replyChains[newComment.parentId] = [newComment.id, ...replyIds];\n              } else {\n                // 根评论：添加到文章评论列表的开头\n                state.commentsByPost[postId] = [newComment.id, ...existingIds];\n              }\n\n              // 更新统计\n              if (state.stats[postId]) {\n                state.stats[postId].totalCount++;\n                if (!newComment.parentId) {\n                  state.stats[postId].rootCommentCount++;\n                } else {\n                  state.stats[postId].replyCount++;\n                }\n              }\n\n              // 清除草稿\n              const draftKey = data.parentId || postId;\n              delete state.drafts[draftKey];\n\n              // 清除回复状态\n              state.replyingTo = null;\n              state.loadingStates['creating'] = false;\n            });\n\n            return newComment;\n\n          } catch (error: unknown) {\n            set(state => {\n              state.loadingStates['creating'] = false;\n              state.errors.push({\n                type: 'validation',\n                message: error.message || '发布评论失败'\n              });\n            });\n            return null;\n          }\n        },\n\n        // 更新评论\n        updateComment: async (commentId: string, data: Partial<CommentFormData>) => {\n          set(state => {\n            state.loadingStates[`updating_${commentId}`] = true;\n          });\n\n          try {\n            const updateData = {\n              content: data.content!,\n              mentionedUsers: data.mentionedUsers || []\n            };\n\n            const updatedComment = await commentApi.updateComment(commentId, updateData);\n\n            set(state => {\n              state.comments[commentId] = updatedComment;\n              state.editingComment = null;\n              state.loadingStates[`updating_${commentId}`] = false;\n            });\n\n          } catch (error: unknown) {\n            set(state => {\n              state.loadingStates[`updating_${commentId}`] = false;\n              state.errors.push({\n                type: 'validation',\n                message: error.message || '更新评论失败'\n              });\n            });\n          }\n        },\n\n        // 删除评论\n        deleteComment: async (commentId: string) => {\n          const comment = get().comments[commentId];\n          if (!comment) return;\n\n          set(state => {\n            state.loadingStates[`deleting_${commentId}`] = true;\n          });\n\n          try {\n            await commentApi.deleteComment(commentId);\n\n            set(state => {\n              // 移除评论\n              delete state.comments[commentId];\n\n              // 更新索引\n              if (comment.parentId) {\n                const replyIds = state.replyChains[comment.parentId] || [];\n                state.replyChains[comment.parentId] = replyIds.filter((id: string) => id !== commentId);\n              } else {\n                const postIds = state.commentsByPost[comment.postId] || [];\n                state.commentsByPost[comment.postId] = postIds.filter((id: string) => id !== commentId);\n              }\n\n              // 更新统计\n              if (state.stats[comment.postId]) {\n                state.stats[comment.postId].totalCount--;\n                if (!comment.parentId) {\n                  state.stats[comment.postId].rootCommentCount--;\n                } else {\n                  state.stats[comment.postId].replyCount--;\n                }\n              }\n\n              state.loadingStates[`deleting_${commentId}`] = false;\n              state.selectedComment = null;\n            });\n\n          } catch (error: unknown) {\n            set(state => {\n              state.loadingStates[`deleting_${commentId}`] = false;\n              state.errors.push({\n                type: 'permission',\n                message: error.message || '删除评论失败'\n              });\n            });\n          }\n        },\n\n        // 点赞评论\n        likeComment: async (commentId: string) => {\n          try {\n            await commentApi.likeComment(commentId);\n\n            set(state => {\n              const comment = state.comments[commentId];\n              if (comment) {\n                comment.likeCount++;\n                comment.isLiked = true;\n              }\n            });\n\n          } catch (error: unknown) {\n            set(state => {\n              state.errors.push({\n                type: 'network',\n                message: error.message || '点赞失败'\n              });\n            });\n          }\n        },\n\n        // 取消点赞\n        unlikeComment: async (commentId: string) => {\n          try {\n            await commentApi.unlikeComment(commentId);\n\n            set(state => {\n              const comment = state.comments[commentId];\n              if (comment) {\n                comment.likeCount = Math.max(0, comment.likeCount - 1);\n                comment.isLiked = false;\n              }\n            });\n\n          } catch (error: unknown) {\n            set(state => {\n              state.errors.push({\n                type: 'network',\n                message: error.message || '取消点赞失败'\n              });\n            });\n          }\n        },\n\n        // 举报评论\n        reportComment: async (commentId: string, reason: string, description?: string) => {\n          try {\n            await commentApi.reportComment(commentId, { reason: reason as any, description });\n          } catch (error: unknown) {\n            set(state => {\n              state.errors.push({\n                type: 'network',\n                message: error.message || '举报失败'\n              });\n            });\n          }\n        },\n\n        // 加载统计信息\n        loadStats: async (postId: string) => {\n          try {\n            const stats = await commentApi.getCommentStats(postId);\n            set(state => {\n              state.stats[postId] = stats;\n            });\n          } catch (error) {\n            console.error('Failed to load comment stats:', error);\n          }\n        },\n\n        // UI状态管理\n        setReplyingTo: (commentId: string | null) => {\n          set(state => {\n            state.replyingTo = commentId;\n          });\n        },\n\n        setEditingComment: (commentId: string | null) => {\n          set(state => {\n            state.editingComment = commentId;\n          });\n        },\n\n        setSelectedComment: (commentId: string | null) => {\n          set(state => {\n            state.selectedComment = commentId;\n          });\n        },\n\n        // 草稿管理\n        saveDraft: (key: string, data: CommentFormData) => {\n          set(state => {\n            state.drafts[key] = data;\n          });\n        },\n\n        loadDraft: (key: string): CommentFormData | null => {\n          return get().drafts[key] || null;\n        },\n\n        clearDraft: (key: string) => {\n          set(state => {\n            delete state.drafts[key];\n          });\n        },\n\n        // 配置管理\n        updateConfig: (newConfig: Partial<CommentListConfig>) => {\n          set(state => {\n            state.config = { ...state.config, ...newConfig };\n          });\n        },\n\n        setSortOrder: (sortOrder: CommentSortOrder) => {\n          set(state => {\n            state.config.sortOrder = sortOrder;\n          });\n        },\n\n        // 实时功能初始化\n        initializeRealtime: (postId: string) => {\n          // 连接WebSocket\n          commentSocket.connect();\n          commentSocket.joinPostGroup(postId);\n\n          // 绑定事件监听器\n          const handleCommentCreated = (comment: Comment) => {\n            if (comment.postId === postId) {\n              set(state => {\n                state.comments[comment.id] = comment;\n\n                if (comment.parentId) {\n                  const replyIds = state.replyChains[comment.parentId] || [];\n                  state.replyChains[comment.parentId] = [comment.id, ...replyIds];\n                } else {\n                  const existingIds = state.commentsByPost[postId] || [];\n                  state.commentsByPost[postId] = [comment.id, ...existingIds];\n                }\n\n                if (state.stats[postId]) {\n                  state.stats[postId].totalCount++;\n                }\n              });\n            }\n          };\n\n          const handleCommentUpdated = (comment: Comment) => {\n            if (comment.postId === postId) {\n              set(state => {\n                state.comments[comment.id] = comment;\n              });\n            }\n          };\n\n          const handleCommentDeleted = ({ commentId }: { commentId: string }) => {\n            set(state => {\n              const comment = state.comments[commentId];\n              if (comment && comment.postId === postId) {\n                delete state.comments[commentId];\n\n                if (comment.parentId) {\n                  const replyIds = state.replyChains[comment.parentId] || [];\n                  state.replyChains[comment.parentId] = replyIds.filter((id: string) => id !== commentId);\n                } else {\n                  const postCommentIds = state.commentsByPost[postId] || [];\n                  state.commentsByPost[postId] = postCommentIds.filter((id: string) => id !== commentId);\n                }\n\n                if (state.stats[postId]) {\n                  state.stats[postId].totalCount--;\n                }\n              }\n            });\n          };\n\n          const handleCommentLiked = ({ commentId, userId: _userId }: { commentId: string; userId: string }) => {\n            set(state => {\n              const comment = state.comments[commentId];\n              if (comment) {\n                comment.likeCount++;\n              }\n            });\n          };\n\n          const handleCommentUnliked = ({ commentId, userId: _userId }: { commentId: string; userId: string }) => {\n            set(state => {\n              const comment = state.comments[commentId];\n              if (comment) {\n                comment.likeCount = Math.max(0, comment.likeCount - 1);\n              }\n            });\n          };\n\n          const handleUserStartedTyping = (typingInfo: { userId: string; postId: string; parentId?: string; userName: string }) => {\n            if (typingInfo.postId === postId) {\n              set(state => {\n                const existing = state.typingUsers.find(\n                  (u: { userId: string; postId: string; parentId?: string }) => u.userId === typingInfo.userId &&\n                       u.postId === typingInfo.postId &&\n                       u.parentId === typingInfo.parentId\n                );\n                if (!existing) {\n                  state.typingUsers.push(typingInfo);\n                }\n              });\n            }\n          };\n\n          const handleUserStoppedTyping = (typingInfo: { userId: string; postId: string; parentId?: string }) => {\n            if (typingInfo.postId === postId) {\n              set(state => {\n                state.typingUsers = state.typingUsers.filter(\n                  (u: { userId: string; postId: string; parentId?: string }) => !(u.userId === typingInfo.userId &&\n                         u.postId === typingInfo.postId &&\n                         u.parentId === typingInfo.parentId)\n                );\n              });\n            }\n          };\n\n          const handleCommentStats = (stats: CommentStats) => {\n            if (stats.postId === postId) {\n              set(state => {\n                state.stats[postId] = stats;\n              });\n            }\n          };\n\n          const handleOnlineUserCount = ({ postId: countPostId, count }: { postId: string; count: number }) => {\n            if (countPostId === postId) {\n              set(state => {\n                state.onlineUserCounts[postId] = count;\n              });\n            }\n          };\n\n          // 绑定所有事件\n          commentSocket.on('CommentCreated', handleCommentCreated);\n          commentSocket.on('CommentUpdated', handleCommentUpdated);\n          commentSocket.on('CommentDeleted', handleCommentDeleted);\n          commentSocket.on('CommentLiked', handleCommentLiked);\n          commentSocket.on('CommentUnliked', handleCommentUnliked);\n          commentSocket.on('UserStartedTyping', handleUserStartedTyping);\n          commentSocket.on('UserStoppedTyping', handleUserStoppedTyping);\n          commentSocket.on('CommentStats', handleCommentStats);\n          commentSocket.on('OnlineUserCount', handleOnlineUserCount);\n\n          // 获取初始统计信息\n          commentSocket.getCommentStats(postId);\n          commentSocket.getOnlineUserCount(postId);\n        },\n\n        // 清理实时功能\n        cleanupRealtime: () => {\n          // 这里应该清理事件监听器，但由于SignalR的限制，我们只能断开连接\n          // 在实际应用中，可能需要维护一个监听器注册表\n        },\n\n        // 错误处理\n        addError: (error: CommentError) => {\n          set(state => {\n            state.errors.push(error);\n          });\n        },\n\n        clearErrors: () => {\n          set(state => {\n            state.errors = [];\n          });\n        },\n\n        removeError: (index: number) => {\n          set(state => {\n            state.errors.splice(index, 1);\n          });\n        },\n\n        // 重置状态\n        resetPostComments: (postId: string) => {\n          set(state => {\n            // 移除该文章的所有评论\n            const commentIds = state.commentsByPost[postId] || [];\n            commentIds.forEach((id: string) => {\n              delete state.comments[id];\n            });\n\n            delete state.commentsByPost[postId];\n            delete state.commentTrees[postId];\n            delete state.pagination[postId];\n            delete state.stats[postId];\n            delete state.onlineUserCounts[postId];\n\n            // 清理该文章的回复链\n            Object.keys(state.replyChains).forEach(parentId => {\n              if (state.comments[parentId]?.postId === postId) {\n                delete state.replyChains[parentId];\n              }\n            });\n\n            // 清理该文章的草稿\n            Object.keys(state.drafts).forEach(key => {\n              if (key === postId || key.startsWith(`${postId}_`)) {\n                delete state.drafts[key];\n              }\n            });\n          });\n        },\n\n        resetAll: () => {\n          set(state => {\n            Object.assign(state, {\n              comments: {},\n              commentsByPost: {},\n              commentTrees: {},\n              replyChains: {},\n              pagination: {},\n              loadingStates: {},\n              errors: [],\n              selectedComment: null,\n              replyingTo: null,\n              editingComment: null,\n              drafts: {},\n              uploadingImages: [],\n              stats: {},\n              typingUsers: [],\n              onlineUserCounts: {},\n              notifications: [],\n              unreadNotificationCount: 0\n            });\n          });\n        }\n      }\n    })),\n    { name: 'comment-store' }\n  )\n);\n\n// 导出便捷的hook\nexport const useComments = (postId: string) => {\n  const store = useCommentStore();\n  const comments = store.commentsByPost[postId]?.map(id => store.comments[id]) || [];\n  const loading = store.loadingStates[`comments_${postId}`] || false;\n  const pagination = store.pagination[postId];\n  const stats = store.stats[postId];\n\n  return {\n    comments,\n    loading,\n    pagination,\n    stats,\n    actions: store.actions\n  };\n};\n\nexport const useCommentTree = (postId: string) => {\n  const store = useCommentStore();\n  const tree = store.commentTrees[postId] || [];\n  const loading = store.loadingStates[`tree_${postId}`] || false;\n\n  return {\n    tree,\n    loading,\n    actions: store.actions\n  };\n};\n\nexport const useCommentActions = () => {\n  const store = useCommentStore();\n  return store.actions;\n};","usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/stores/homeStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/stores/searchStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/test/mocks/server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/test/setup.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty constructor.","line":18,"column":17,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":18,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty method 'observe'.","line":19,"column":13,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":19,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty method 'disconnect'.","line":20,"column":16,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":20,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty method 'unobserve'.","line":21,"column":15,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":21,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty constructor.","line":26,"column":17,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":26,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty method 'observe'.","line":27,"column":13,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":27,"endColumn":15,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty method 'disconnect'.","line":28,"column":16,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":28,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty method 'unobserve'.","line":29,"column":15,"nodeType":"FunctionExpression","messageId":"unexpected","endLine":29,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-empty-function","severity":1,"message":"Unexpected empty arrow function.","line":33,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"unexpected","endLine":33,"endColumn":44,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/test/test-providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/test/utils.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"This rule can't verify that `export *` only exports components.","line":6,"column":1,"nodeType":"ExportAllDeclaration","messageId":"exportAll","endLine":6,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/types/analytics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/types/auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/types/blog.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/types/comment.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/types/common.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/types/env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/types/home.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/types/search.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/types/settings.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/utils/analyticsTracking.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/utils/auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/utils/clientCache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/utils/cn.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/utils/homeOptimization.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/utils/seoHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"/home/await/project/maple-blog/frontend/src/utils/sitemap-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"quotes","replacedBy":[]},{"ruleId":"semi","replacedBy":[]},{"ruleId":"comma-dangle","replacedBy":[]},{"ruleId":"object-curly-spacing","replacedBy":[]},{"ruleId":"array-bracket-spacing","replacedBy":[]},{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
 ELIFECYCLE  Command failed with exit code 1.
