# Maple Blog 生产环境配置
# 生产环境专用配置，请确保所有密钥和敏感信息安全

# ===========================================
# 数据库配置
# ===========================================

# 数据库提供程序 (生产环境推荐 PostgreSQL)
DATABASE_PROVIDER=PostgreSQL

# PostgreSQL 连接字符串 (生产环境)
POSTGRES_CONNECTION_STRING=Host=${POSTGRES_HOST:-localhost};Port=${POSTGRES_PORT:-5432};Database=${POSTGRES_DB:-maple_blog};Username=${POSTGRES_USER:-postgres};Password=${POSTGRES_PASSWORD}

# ===========================================
# JWT认证配置
# ===========================================

# JWT密钥 (生产环境必须使用复杂的随机字符串)
JWT_SECRET_KEY=${JWT_SECRET_KEY}

# JWT发行者
JWT_ISSUER=${JWT_ISSUER:-MapleBlog.Production}

# JWT受众
JWT_AUDIENCE=${JWT_AUDIENCE:-MapleBlog.Production.Users}

# JWT过期时间(小时)
JWT_EXPIRES_IN_HOURS=24

# Refresh Token过期时间(天)
JWT_REFRESH_EXPIRES_IN_DAYS=7

# ===========================================
# Redis缓存配置
# ===========================================

# Redis连接字符串
REDIS_CONNECTION_STRING=redis:6379

# Redis密码
REDIS_PASSWORD=${REDIS_PASSWORD:-}

# 缓存过期时间(分钟)
CACHE_DEFAULT_EXPIRATION_MINUTES=60
CACHE_SLIDING_EXPIRATION_MINUTES=30

# ===========================================
# 文件存储配置
# ===========================================

# 文件上传路径
FILE_UPLOAD_PATH=./wwwroot/uploads

# 最大文件大小(MB)
MAX_FILE_SIZE_MB=10

# 允许的文件类型
ALLOWED_FILE_TYPES=.jpg,.jpeg,.png,.gif,.webp,.svg,.pdf,.doc,.docx

# ===========================================
# 邮件服务配置
# ===========================================

# SMTP服务器
SMTP_HOST=${SMTP_HOST:-smtp.gmail.com}

# SMTP端口
SMTP_PORT=${SMTP_PORT:-587}

# SMTP用户名
SMTP_USERNAME=${SMTP_USERNAME}

# SMTP密码
SMTP_PASSWORD=${SMTP_PASSWORD}

# 发件人信息
SENDER_EMAIL=${SENDER_EMAIL:-noreply@mapleblog.com}
SENDER_NAME=${SENDER_NAME:-Maple Blog}

# 启用SSL
SMTP_ENABLE_SSL=true

# ===========================================
# Elasticsearch搜索配置
# ===========================================

# Elasticsearch连接地址
ELASTICSEARCH_URI=http://elasticsearch:9200

# Elasticsearch索引名称
ELASTICSEARCH_DEFAULT_INDEX=maple-blog

# Elasticsearch认证(如果需要)
ELASTICSEARCH_USERNAME=${ELASTICSEARCH_USERNAME:-}
ELASTICSEARCH_PASSWORD=${ELASTICSEARCH_PASSWORD:-}

# ===========================================
# 日志配置
# ===========================================

# 日志级别 (Warning, Error)
LOG_LEVEL=Warning

# 日志文件保留天数
LOG_RETENTION_DAYS=10

# 单个日志文件大小限制(MB)
LOG_FILE_SIZE_LIMIT_MB=10

# ===========================================
# API配置
# ===========================================

# 跨域允许的源
CORS_ALLOWED_ORIGINS=${FRONTEND_URL:-https://yourdomain.com}

# API限流配置
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# ===========================================
# 安全配置
# ===========================================

# 强制HTTPS重定向
FORCE_HTTPS=true

# 密码加密盐轮数
PASSWORD_HASH_ROUNDS=12

# 内容审核配置
CONTENT_MODERATION_ENABLED=true
CONTENT_AUTO_APPROVE_THRESHOLD=0.8
CONTENT_AUTO_REJECT_THRESHOLD=0.3
CONTENT_MAX_LENGTH=10000

# ===========================================
# 生产环境配置
# ===========================================

# 环境名称
ASPNETCORE_ENVIRONMENT=Production

# 详细错误信息(生产环境关闭)
DETAILED_ERRORS=false

# 开发者异常页面(生产环境关闭)
DEVELOPER_EXCEPTION_PAGE=false

# ===========================================
# 监控配置
# ===========================================

# Application Insights连接字符串
APPLICATIONINSIGHTS_CONNECTION_STRING=${APPLICATIONINSIGHTS_CONNECTION_STRING:-}

# Sentry DSN (错误追踪)
SENTRY_DSN=${SENTRY_DSN:-}

# Grafana管理员密码
GRAFANA_PASSWORD=${GRAFANA_PASSWORD:-admin}

# ===========================================
# Docker Swarm Secrets (推荐使用)
# ===========================================

# 当使用Docker Swarm时，敏感信息应该通过Docker Secrets管理
# 这些环境变量指向secrets文件位置
POSTGRES_PASSWORD_FILE=/run/secrets/postgres_password
JWT_SECRET_FILE=/run/secrets/jwt_secret
SMTP_PASSWORD_FILE=/run/secrets/smtp_password
REDIS_PASSWORD_FILE=/run/secrets/redis_password